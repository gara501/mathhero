const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-oJaPpsF4.js","assets/init-l7H_0iJb.js","assets/webworkerAll-x4OCg8EV.js"])))=>i.map(i=>d[i]);
var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(e&&(t=e(e=0)),t),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},l=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},u=(n,r,a)=>(a=n==null?{}:e(i(n)),l(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),d=e=>l(t({},`__esModule`,{value:!0}),e);(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var f=s((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function k(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var A=/\/+/g;function j(e,t){return typeof e==`object`&&e&&e.key!=null?k(``+e.key):t.toString(36)}function M(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function N(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,N(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+j(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(A,`$&/`)+`/`),N(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(A,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+j(a,u),c+=N(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+j(a,u++),c+=N(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return N(M(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function P(e,t,n){if(e==null)return e;var r=[],i=0;return N(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function F(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var I=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},L={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=L,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:F}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,I)}catch(e){I(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.3`})),p=s(((e,t)=>{t.exports=f()})),m=s((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&j(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&j(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var k=new MessageChannel,A=k.port2;k.port1.onmessage=D,O=function(){A.postMessage(null)}}else O=function(){_(D,0)};function j(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,j(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),h=s(((e,t)=>{t.exports=m()})),g=s((e=>{var t=p();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.3`})),_=s(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()})),v=s((e=>{var t=h(),n=p(),r=_();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function d(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=d(e),t!==null)return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for(`react.element`),g=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),k=Symbol.for(`react.activity`),A=Symbol.for(`react.memo_cache_sentinel`),j=Symbol.iterator;function M(e){return typeof e!=`object`||!e?null:(e=j&&e[j]||e[`@@iterator`],typeof e==`function`?e:null)}var N=Symbol.for(`react.client.reference`);function P(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===N?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case k:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?P(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return P(e(t))}catch{}}return null}var F=Array.isArray,I=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},z=[],B=-1;function V(e){return{current:e}}function ee(e){0>B||(e.current=z[B],z[B]=null,B--)}function H(e,t){B++,z[B]=e.current,e.current=t}var te=V(null),ne=V(null),re=V(null),ie=V(null);function ae(e,t){switch(H(re,t),H(ne,e),H(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Kd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Kd(t),e=qd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ee(te),H(te,e)}function oe(){ee(te),ee(ne),ee(re)}function se(e){e.memoizedState!==null&&H(ie,e);var t=te.current,n=qd(t,e.type);t!==n&&(H(ne,e),H(te,n))}function ce(e){ne.current===e&&(ee(te),ee(ne)),ie.current===e&&(ee(ie),np._currentValue=R)}var le,ue;function de(e){if(le===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);le=t&&t[1]||``,ue=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+le+e+ue}var fe=!1;function pe(e,t){if(!e||fe)return``;fe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{fe=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?de(n):``}function me(e,t){switch(e.tag){case 26:case 27:case 5:return de(e.type);case 16:return de(`Lazy`);case 13:return e.child!==t&&t!==null?de(`Suspense Fallback`):de(`Suspense`);case 19:return de(`SuspenseList`);case 0:case 15:return pe(e.type,!1);case 11:return pe(e.type.render,!1);case 1:return pe(e.type,!0);case 31:return de(`Activity`);default:return``}}function he(e){try{var t=``,n=null;do t+=me(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var ge=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,ve=t.unstable_cancelCallback,ye=t.unstable_shouldYield,be=t.unstable_requestPaint,xe=t.unstable_now,Se=t.unstable_getCurrentPriorityLevel,Ce=t.unstable_ImmediatePriority,we=t.unstable_UserBlockingPriority,Te=t.unstable_NormalPriority,Ee=t.unstable_LowPriority,De=t.unstable_IdlePriority,Oe=t.log,ke=t.unstable_setDisableYieldValue,Ae=null,je=null;function Me(e){if(typeof Oe==`function`&&ke(e),je&&typeof je.setStrictMode==`function`)try{je.setStrictMode(Ae,e)}catch{}}var Ne=Math.clz32?Math.clz32:Ie,Pe=Math.log,Fe=Math.LN2;function Ie(e){return e>>>=0,e===0?32:31-(Pe(e)/Fe|0)|0}var Le=256,Re=262144,ze=4194304;function Be(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ve(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=Be(n))):i=Be(o):i=Be(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=Be(n))):i=Be(o)):i=Be(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function He(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ue(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function We(){var e=ze;return ze<<=1,!(ze&62914560)&&(ze=4194304),e}function Ge(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ke(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function qe(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Ne(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&Je(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function Je(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Ne(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function Ye(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ne(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Xe(e,t){var n=t&-t;return n=n&42?1:Ze(n),(n&(e.suspendedLanes|t))===0?n:0}function Ze(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qe(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function $e(){var e=L.p;return e===0?(e=window.event,e===void 0?32:vp(e.type)):e}function et(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}var tt=Math.random().toString(36).slice(2),nt=`__reactFiber$`+tt,rt=`__reactProps$`+tt,it=`__reactContainer$`+tt,at=`__reactEvents$`+tt,ot=`__reactListeners$`+tt,st=`__reactHandles$`+tt,ct=`__reactResources$`+tt,lt=`__reactMarker$`+tt;function ut(e){delete e[nt],delete e[rt],delete e[at],delete e[ot],delete e[st]}function dt(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[it]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gf(e);e!==null;){if(n=e[nt])return n;e=gf(e)}return t}e=n,n=e.parentNode}return null}function ft(e){if(e=e[nt]||e[it]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function pt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function mt(e){var t=e[ct];return t||=e[ct]={hoistableStyles:new Map,hoistableScripts:new Map},t}function ht(e){e[lt]=!0}var gt=new Set,_t={};function vt(e,t){yt(e,t),yt(e+`Capture`,t)}function yt(e,t){for(_t[e]=t,e=0;e<t.length;e++)gt.add(t[e])}var bt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),xt={},St={};function Ct(e){return ge.call(St,e)?!0:ge.call(xt,e)?!1:bt.test(e)?St[e]=!0:(xt[e]=!0,!1)}function wt(e,t,n){if(Ct(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Tt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Et(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function Dt(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Ot(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function kt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function At(e){if(!e._valueTracker){var t=Ot(e)?`checked`:`value`;e._valueTracker=kt(e,t,``+e[t])}}function jt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Ot(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Mt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var Nt=/[\n"\\]/g;function Pt(e){return e.replace(Nt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Ft(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+Dt(t)):e.value!==``+Dt(t)&&(e.value=``+Dt(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Lt(e,o,Dt(n)):Lt(e,o,Dt(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+Dt(s):e.removeAttribute(`name`)}function It(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){At(e);return}n=n==null?``:``+Dt(n),t=t==null?n:``+Dt(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),At(e)}function Lt(e,t,n){t===`number`&&Mt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Rt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+Dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function zt(e,t,n){if(t!=null&&(t=``+Dt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+Dt(n)}function Bt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(F(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=Dt(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),At(e)}function Vt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ht=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Ut(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Ht.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Wt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Ut(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Ut(e,o,t[o])}function Gt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Kt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),qt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jt(e){return qt.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function Yt(){}var Xt=null;function Zt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qt=null,$t=null;function en(e){var t=ft(e);if(t&&(e=t.stateNode)){var n=e[rt]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Ft(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Pt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[rt]||null;if(!a)throw Error(i(90));Ft(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&jt(r)}break a;case`textarea`:zt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Rt(e,!!n.multiple,t,!1)}}}var tn=!1;function nn(e,t,n){if(tn)return e(t,n);tn=!0;try{return e(t)}finally{if(tn=!1,(Qt!==null||$t!==null)&&(Cu(),Qt&&(t=Qt,e=$t,$t=Qt=null,en(t),e)))for(t=0;t<e.length;t++)en(e[t])}}function rn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[rt]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var an=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),on=!1;if(an)try{var sn={};Object.defineProperty(sn,`passive`,{get:function(){on=!0}}),window.addEventListener(`test`,sn,sn),window.removeEventListener(`test`,sn,sn)}catch{on=!1}var cn=null,ln=null,un=null;function dn(){if(un)return un;var e,t=ln,n=t.length,r,i=`value`in cn?cn.value:cn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return un=i.slice(e,1<r?1-r:void 0)}function fn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pn(){return!0}function mn(){return!1}function hn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?pn:mn,this.isPropagationStopped=mn,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=pn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=pn)},persist:function(){},isPersistent:pn}),t}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_n=hn(gn),vn=f({},gn,{view:0,detail:0}),yn=hn(vn),bn,xn,Sn,Cn=f({},vn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==Sn&&(Sn&&e.type===`mousemove`?(bn=e.screenX-Sn.screenX,xn=e.screenY-Sn.screenY):xn=bn=0,Sn=e),bn)},movementY:function(e){return`movementY`in e?e.movementY:xn}}),wn=hn(Cn),Tn=hn(f({},Cn,{dataTransfer:0})),En=hn(f({},vn,{relatedTarget:0})),Dn=hn(f({},gn,{animationName:0,elapsedTime:0,pseudoElement:0})),On=hn(f({},gn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),kn=hn(f({},gn,{data:0})),An={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},jn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Mn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mn[e])?!!t[e]:!1}function U(){return Nn}var Pn=hn(f({},vn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=fn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?jn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U,charCode:function(e){return e.type===`keypress`?fn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?fn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Fn=hn(f({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=hn(f({},vn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U})),Ln=hn(f({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=hn(f({},Cn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),zn=hn(f({},gn,{newState:0,oldState:0})),Bn=[9,13,27,32],Vn=an&&`CompositionEvent`in window,Hn=null;an&&`documentMode`in document&&(Hn=document.documentMode);var Un=an&&`TextEvent`in window&&!Hn,Wn=an&&(!Vn||Hn&&8<Hn&&11>=Hn),Gn=` `,Kn=!1;function qn(e,t){switch(e){case`keyup`:return Bn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function Jn(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var Yn=!1;function Xn(e,t){switch(e){case`compositionend`:return Jn(t);case`keypress`:return t.which===32?(Kn=!0,Gn):null;case`textInput`:return e=t.data,e===Gn&&Kn?null:e;default:return null}}function Zn(e,t){if(Yn)return e===`compositionend`||!Vn&&qn(e,t)?(e=dn(),un=ln=cn=null,Yn=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Wn&&t.locale!==`ko`?null:t.data;default:return null}}var Qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!Qn[e.type]:t===`textarea`}function er(e,t,n,r){Qt?$t?$t.push(r):$t=[r]:Qt=r,t=Ad(t,`onChange`),0<t.length&&(n=new _n(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var tr=null,nr=null;function rr(e){Sd(e,0)}function ir(e){if(jt(pt(e)))return e}function ar(e,t){if(e===`change`)return t}var or=!1;if(an){var sr;if(an){var cr=`oninput`in document;if(!cr){var lr=document.createElement(`div`);lr.setAttribute(`oninput`,`return;`),cr=typeof lr.oninput==`function`}sr=cr}else sr=!1;or=sr&&(!document.documentMode||9<document.documentMode)}function ur(){tr&&(tr.detachEvent(`onpropertychange`,dr),nr=tr=null)}function dr(e){if(e.propertyName===`value`&&ir(nr)){var t=[];er(t,nr,e,Zt(e)),nn(rr,t)}}function fr(e,t,n){e===`focusin`?(ur(),tr=t,nr=n,tr.attachEvent(`onpropertychange`,dr)):e===`focusout`&&ur()}function pr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return ir(nr)}function mr(e,t){if(e===`click`)return ir(t)}function hr(e,t){if(e===`input`||e===`change`)return ir(t)}function gr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var _r=typeof Object.is==`function`?Object.is:gr;function vr(e,t){if(_r(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ge.call(t,i)||!_r(e[i],t[i]))return!1}return!0}function yr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function br(e,t){var n=yr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=yr(n)}}function xr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Mt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mt(e.document)}return t}function Cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var wr=an&&`documentMode`in document&&11>=document.documentMode,Tr=null,Er=null,Dr=null,Or=!1;function kr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Or||Tr==null||Tr!==Mt(r)||(r=Tr,`selectionStart`in r&&Cr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dr&&vr(Dr,r)||(Dr=r,r=Ad(Er,`onSelect`),0<r.length&&(t=new _n(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Tr)))}function Ar(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var jr={animationend:Ar(`Animation`,`AnimationEnd`),animationiteration:Ar(`Animation`,`AnimationIteration`),animationstart:Ar(`Animation`,`AnimationStart`),transitionrun:Ar(`Transition`,`TransitionRun`),transitionstart:Ar(`Transition`,`TransitionStart`),transitioncancel:Ar(`Transition`,`TransitionCancel`),transitionend:Ar(`Transition`,`TransitionEnd`)},Mr={},Nr={};an&&(Nr=document.createElement(`div`).style,`AnimationEvent`in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),`TransitionEvent`in window||delete jr.transitionend.transition);function Pr(e){if(Mr[e])return Mr[e];if(!jr[e])return e;var t=jr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nr)return Mr[e]=t[n];return e}var Fr=Pr(`animationend`),Ir=Pr(`animationiteration`),Lr=Pr(`animationstart`),Rr=Pr(`transitionrun`),zr=Pr(`transitionstart`),Br=Pr(`transitioncancel`),Vr=Pr(`transitionend`),Hr=new Map,Ur=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Ur.push(`scrollEnd`);function Wr(e,t){Hr.set(e,t),vt(t,[e])}var Gr=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},Kr=[],qr=0,Jr=0;function Yr(){for(var e=qr,t=Jr=qr=0;t<e;){var n=Kr[t];Kr[t++]=null;var r=Kr[t];Kr[t++]=null;var i=Kr[t];Kr[t++]=null;var a=Kr[t];if(Kr[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&$r(n,i,a)}}function Xr(e,t,n,r){Kr[qr++]=e,Kr[qr++]=t,Kr[qr++]=n,Kr[qr++]=r,Jr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Zr(e,t,n,r){return Xr(e,t,n,r),ei(e)}function Qr(e,t){return Xr(e,null,null,t),ei(e)}function $r(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Ne(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ei(e){if(50<mu)throw mu=0,hu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ti={};function ni(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(e,t,n,r){return new ni(e,t,n,r)}function ii(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ai(e,t){var n=e.alternate;return n===null?(n=ri(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function oi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function si(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)ii(e)&&(s=1);else if(typeof e==`string`)s=Jf(e,n,te.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case k:return e=ri(31,n,t,a),e.elementType=k,e.lanes=o,e;case y:return ci(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=ri(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=ri(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=ri(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=ri(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function ci(e,t,n,r){return e=ri(7,e,r,t),e.lanes=n,e}function li(e,t,n){return e=ri(6,e,null,t),e.lanes=n,e}function ui(e){var t=ri(18,null,null,0);return t.stateNode=e,t}function W(e,t,n){return t=ri(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var di=new WeakMap;function fi(e,t){if(typeof e==`object`&&e){var n=di.get(e);return n===void 0?(t={value:e,source:t,stack:he(t)},di.set(e,t),t):n}return{value:e,source:t,stack:he(t)}}var pi=[],mi=0,hi=null,gi=0,_i=[],vi=0,yi=null,bi=1,xi=``;function Si(e,t){pi[mi++]=gi,pi[mi++]=hi,hi=e,gi=t}function Ci(e,t,n){_i[vi++]=bi,_i[vi++]=xi,_i[vi++]=yi,yi=e;var r=bi;e=xi;var i=32-Ne(r)-1;r&=~(1<<i),n+=1;var a=32-Ne(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,bi=1<<32-Ne(t)+i|n<<i|r,xi=a+e}else bi=1<<a|n<<i|r,xi=e}function wi(e){e.return!==null&&(Si(e,1),Ci(e,1,0))}function Ti(e){for(;e===hi;)hi=pi[--mi],pi[mi]=null,gi=pi[--mi],pi[mi]=null;for(;e===yi;)yi=_i[--vi],_i[vi]=null,xi=_i[--vi],_i[vi]=null,bi=_i[--vi],_i[vi]=null}function Ei(e,t){_i[vi++]=bi,_i[vi++]=xi,_i[vi++]=yi,bi=t.id,xi=t.overflow,yi=e}var Di=null,Oi=null,ki=!1,Ai=null,ji=!1,Mi=Error(i(519));function Ni(e){throw zi(fi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Mi}function Pi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[nt]=e,t[rt]=r,n){case`dialog`:Cd(`cancel`,t),Cd(`close`,t);break;case`iframe`:case`object`:case`embed`:Cd(`load`,t);break;case`video`:case`audio`:for(n=0;n<bd.length;n++)Cd(bd[n],t);break;case`source`:Cd(`error`,t);break;case`img`:case`image`:case`link`:Cd(`error`,t),Cd(`load`,t);break;case`details`:Cd(`toggle`,t);break;case`input`:Cd(`invalid`,t),It(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Cd(`invalid`,t);break;case`textarea`:Cd(`invalid`,t),Bt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||Id(t.textContent,n)?(r.popover!=null&&(Cd(`beforetoggle`,t),Cd(`toggle`,t)),r.onScroll!=null&&Cd(`scroll`,t),r.onScrollEnd!=null&&Cd(`scrollend`,t),r.onClick!=null&&(t.onclick=Yt),t=!0):t=!1,t||Ni(e,!0)}function Fi(e){for(Di=e.return;Di;)switch(Di.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:Di=Di.return}}function Ii(e){if(e!==Di)return!1;if(!ki)return Fi(e),ki=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Jd(e.type,e.memoizedProps)),n=!n),n&&Oi&&Ni(e),Fi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Oi=hf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Oi=hf(e)}else t===27?(t=Oi,nf(e.type)?(e=mf,mf=null,Oi=e):Oi=t):Oi=Di?pf(e.stateNode.nextSibling):null;return!0}function Li(){Oi=Di=null,ki=!1}function Ri(){var e=Ai;return e!==null&&(eu===null?eu=e:eu.push.apply(eu,e),Ai=null),e}function zi(e){Ai===null?Ai=[e]:Ai.push(e)}var Bi=V(null),Vi=null,Hi=null;function Ui(e,t,n){H(Bi,t._currentValue),t._currentValue=n}function Wi(e){e._currentValue=Bi.current,ee(Bi)}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Ki(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Gi(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function qi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;_r(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===ie.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[np]:e.push(np))}a=a.return}e!==null&&Ki(t,e,n,r),t.flags|=262144}function Ji(e){for(e=e.firstContext;e!==null;){if(!_r(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yi(e){Vi=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xi(e){return Qi(Vi,e)}function Zi(e,t){return Vi===null&&Yi(e),Qi(e,t)}function Qi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hi===null){if(e===null)throw Error(i(308));Hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hi=Hi.next=t;return n}var $i=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ea=t.unstable_scheduleCallback,ta=t.unstable_NormalPriority,na={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ra(){return{controller:new $i,data:new Map,refCount:0}}function ia(e){e.refCount--,e.refCount===0&&ea(ta,function(){e.controller.abort()})}var aa=null,oa=0,sa=0,ca=null;function la(e,t){if(aa===null){var n=aa=[];oa=0,sa=md(),ca={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return oa++,t.then(ua,ua),t}function ua(){if(--oa===0&&aa!==null){ca!==null&&(ca.status=`fulfilled`);var e=aa;aa=null,sa=0,ca=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function da(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var fa=I.S;I.S=function(e,t){ru=xe(),typeof t==`object`&&t&&typeof t.then==`function`&&la(e,t),fa!==null&&fa(e,t)};var pa=V(null);function ma(){var e=pa.current;return e===null?zl.pooledCache:e}function ha(e,t){t===null?H(pa,pa.current):H(pa,t.pool)}function ga(){var e=ma();return e===null?null:{parent:na._currentValue,pool:e}}var _a=Error(i(460)),va=Error(i(474)),ya=Error(i(542)),ba={then:function(){}};function xa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Sa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Yt,Yt),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e;default:if(typeof t.status==`string`)t.then(Yt,Yt);else{if(e=zl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e}throw wa=t,_a}}function Ca(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(wa=e,_a):e}}var wa=null;function Ta(){if(wa===null)throw Error(i(459));var e=wa;return wa=null,e}function Ea(e){if(e===_a||e===ya)throw Error(i(483))}var Da=null,Oa=0;function ka(e){var t=Oa;return Oa+=1,Da===null&&(Da=[]),Sa(Da,e,t)}function Aa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function G(e,t){throw t.$$typeof===m?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function ja(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ai(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=li(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ca(i)===t.type)?(t=a(t,n.props),Aa(t,n),t.return=e,t):(t=si(n.type,n.key,n.props,null,e.mode,r),Aa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=W(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=ci(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=li(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case g:return n=si(t.type,t.key,t.props,null,e.mode,n),Aa(n,t),n.return=e,n;case v:return t=W(t,e.mode,n),t.return=e,t;case O:return t=Ca(t),f(e,t,n)}if(F(t)||M(t))return t=ci(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,ka(t),n);if(t.$$typeof===C)return f(e,Zi(e,t),n);G(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case g:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ca(n),p(e,t,n,r)}if(F(n)||M(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,ka(n),r);if(n.$$typeof===C)return p(e,t,Zi(e,n),r);G(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case g:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ca(r),m(e,t,n,r,i)}if(F(r)||M(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,ka(r),i);if(r.$$typeof===C)return m(e,t,n,Zi(t,r),i);G(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),ki&&Si(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return ki&&Si(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ki&&Si(i,h),l}function _(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),ki&&Si(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return ki&&Si(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),ki&&Si(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case g:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ca(l)===r.type){n(e,r.sibling),c=a(r,o.props),Aa(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=ci(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=si(o.type,o.key,o.props,null,e.mode,c),Aa(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=W(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ca(o),b(e,r,o,c)}if(F(o))return h(e,r,o,c);if(M(o)){if(l=M(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),_(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,ka(o),c);if(o.$$typeof===C)return b(e,r,Zi(e,o),c);G(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=li(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Oa=0;var i=b(e,t,n,r);return Da=null,i}catch(t){if(t===_a||t===ya)throw t;var a=ri(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ma=ja(!0),Na=ja(!1),Pa=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function La(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Rl&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ei(e),$r(e,null,n),t}return Xr(e,r,t,n),ei(e)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ye(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Va=!1;function Ha(){if(Va){var e=ca;if(e!==null)throw e}}function Ua(e,t,n,r){Va=!1;var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var p=s.lane&-536870913,m=p!==s.lane;if(m?(Vl&p)===p:(r&p)===p){p!==0&&p===sa&&(Va=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;p=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){d=h.call(_,d,p);break a}d=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,p=typeof h==`function`?h.call(_,d,p):h,p==null)break a;d=f({},d,p);break a;case 2:Pa=!0}}p=s.callback,p!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[p]:m.push(p))}else m={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=m,c=d):u=u.next=m,o|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Yl|=o,e.lanes=o,e.memoizedState=d}}function Wa(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ga(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Wa(n[e],t)}var Ka=V(null),qa=V(0);function Ja(e,t){e=ql,H(qa,e),H(Ka,t),ql=e|t.baseLanes}function Ya(){H(qa,ql),H(Ka,Ka.current)}function Xa(){ql=qa.current,ee(Ka),ee(qa)}var Za=V(null),Qa=null;function $a(e){var t=e.alternate;H(io,io.current&1),H(Za,e),Qa===null&&(t===null||Ka.current!==null||t.memoizedState!==null)&&(Qa=e)}function eo(e){H(io,io.current),H(Za,e),Qa===null&&(Qa=e)}function to(e){e.tag===22?(H(io,io.current),H(Za,e),Qa===null&&(Qa=e)):no(e)}function no(){H(io,io.current),H(Za,Za.current)}function ro(e){ee(Za),Qa===e&&(Qa=null),ee(io)}var io=V(0);function ao(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||uf(n)||df(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=0,so=null,co=null,lo=null,uo=!1,fo=!1,po=!1,mo=0,ho=0,go=null,_o=0;function vo(){throw Error(i(321))}function yo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_r(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,a){return oo=a,so=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,I.H=e===null||e.memoizedState===null?Ls:Rs,po=!1,a=n(r,i),po=!1,fo&&(a=So(t,n,r,i)),xo(e),a}function xo(e){I.H=Is;var t=co!==null&&co.next!==null;if(oo=0,lo=co=so=null,uo=!1,ho=0,go=null,t)throw Error(i(300));e===null||tc||(e=e.dependencies,e!==null&&Ji(e)&&(tc=!0))}function So(e,t,n,r){so=e;var a=0;do{if(fo&&(go=null),ho=0,fo=!1,25<=a)throw Error(i(301));if(a+=1,lo=co=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}I.H=zs,o=t(n,r)}while(fo);return o}function Co(){var e=I.H,t=e.useState()[0];return t=typeof t.then==`function`?Ao(t):t,e=e.useState()[0],(co===null?null:co.memoizedState)!==e&&(so.flags|=1024),t}function wo(){var e=mo!==0;return mo=0,e}function To(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Eo(e){if(uo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}uo=!1}oo=0,lo=co=so=null,fo=!1,ho=mo=0,go=null}function Do(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lo===null?so.memoizedState=lo=e:lo=lo.next=e,lo}function Oo(){if(co===null){var e=so.alternate;e=e===null?null:e.memoizedState}else e=co.next;var t=lo===null?so.memoizedState:lo.next;if(t!==null)lo=t,co=e;else{if(e===null)throw so.alternate===null?Error(i(467)):Error(i(310));co=e,e={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},lo===null?so.memoizedState=lo=e:lo=lo.next=e}return lo}function ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(e){var t=ho;return ho+=1,go===null&&(go=[]),e=Sa(go,e,t),t=so,(lo===null?t.memoizedState:lo.next)===null&&(t=t.alternate,I.H=t===null||t.memoizedState===null?Ls:Rs),e}function jo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Ao(e);if(e.$$typeof===C)return Xi(e)}throw Error(i(438,String(e)))}function Mo(e){var t=null,n=so.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=so.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=ko(),so.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function No(e,t){return typeof t==`function`?t(e):t}function Po(e){return Fo(Oo(),co,e)}function Fo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(oo&f)===f:(Vl&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===sa&&(d=!0);else if((oo&p)===p){u=u.next,p===sa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,so.lanes|=p,Yl|=p;f=u.action,po&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,so.lanes|=f,Yl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!_r(o,e.memoizedState)&&(tc=!0,d&&(n=ca,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Io(e){var t=Oo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);_r(o,t.memoizedState)||(tc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Lo(e,t,n){var r=so,a=Oo(),o=ki;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!_r((co||a).memoizedState,n);if(s&&(a.memoizedState=n,tc=!0),a=a.queue,cs(Bo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||lo!==null&&lo.memoizedState.tag&1){if(r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,a,n,t),null),zl===null)throw Error(i(349));o||oo&127||Ro(r,t,n)}return n}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=so.updateQueue,t===null?(t=ko(),so.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zo(e,t,n,r){t.value=n,t.getSnapshot=r,Vo(t)&&Ho(e)}function Bo(e,t,n){return n(function(){Vo(t)&&Ho(e)})}function Vo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_r(e,n)}catch{return!0}}function Ho(e){var t=Qr(e,2);t!==null&&vu(t,e,2)}function Uo(e){var t=Do();if(typeof e==`function`){var n=e;if(e=n(),po){Me(!0);try{n()}finally{Me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t}function Wo(e,t,n,r){return e.baseState=n,Fo(e,co,typeof r==`function`?r:No)}function Go(e,t,n,r,a){if(Ns(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};I.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,Ko(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Ko(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=I.T,o={};I.T=o;try{var s=n(i,r),c=I.S;c!==null&&c(o,s),qo(e,t,s)}catch(n){Yo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),I.T=a}}else try{a=n(i,r),qo(e,t,a)}catch(n){Yo(e,t,n)}}function qo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Jo(e,t,n)},function(n){return Yo(e,t,n)}):Jo(e,t,n)}function Jo(e,t,n){t.status=`fulfilled`,t.value=n,Xo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ko(e,n)))}function Yo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Xo(t),t=t.next;while(t!==r)}e.action=null}function Xo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zo(e,t){return t}function Qo(e,t){if(ki){var n=zl.formState;if(n!==null){a:{var r=so;if(ki){if(Oi){b:{for(var i=Oi,a=ji;i.nodeType!==8;){if(!a){i=null;break b}if(i=pf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Oi=pf(i.nextSibling),r=i.data===`F!`;break a}}Ni(r)}r=!1}r&&(t=n[0])}}return n=Do(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},n.queue=r,n=As.bind(null,so,r),r.dispatch=n,r=Uo(!1),a=Ms.bind(null,so,!1,r.queue),r=Do(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Go.bind(null,so,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function $o(e){return es(Oo(),co,e)}function es(e,t,n){if(t=Fo(e,t,Zo)[0],e=Po(No)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Ao(t)}catch(e){throw e===_a?ya:e}else r=t;t=Oo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(so.flags|=2048,rs(9,{destroy:void 0},ts.bind(null,i,n),null)),[r,a,e]}function ts(e,t){e.action=t}function ns(e){var t=Oo(),n=co;if(n!==null)return es(t,n,e);Oo(),t=t.memoizedState,n=Oo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function rs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=so.updateQueue,t===null&&(t=ko(),so.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function is(){return Oo().memoizedState}function as(e,t,n,r){var i=Do();so.flags|=e,i.memoizedState=rs(1|t,{destroy:void 0},n,r===void 0?null:r)}function os(e,t,n,r){var i=Oo();r=r===void 0?null:r;var a=i.memoizedState.inst;co!==null&&r!==null&&yo(r,co.memoizedState.deps)?i.memoizedState=rs(t,a,n,r):(so.flags|=e,i.memoizedState=rs(1|t,a,n,r))}function ss(e,t){as(8390656,8,e,t)}function cs(e,t){os(2048,8,e,t)}function ls(e){so.flags|=4;var t=so.updateQueue;if(t===null)t=ko(),so.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function us(e){var t=Oo().memoizedState;return ls({ref:t,nextImpl:e}),function(){if(Rl&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ds(e,t){return os(4,2,e,t)}function fs(e,t){return os(4,4,e,t)}function ps(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ms(e,t,n){n=n==null?null:n.concat([e]),os(4,4,ps.bind(null,t,e),n)}function hs(){}function gs(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&yo(t,r[1]))return r[0];if(r=e(),po){Me(!0);try{e()}finally{Me(!1)}}return n.memoizedState=[r,t],r}function vs(e,t,n){return n===void 0||oo&1073741824&&!(Vl&261930)?e.memoizedState=t:(e.memoizedState=n,e=_u(),so.lanes|=e,Yl|=e,n)}function ys(e,t,n,r){return _r(n,t)?n:Ka.current===null?!(oo&42)||oo&1073741824&&!(Vl&261930)?(tc=!0,e.memoizedState=n):(e=_u(),so.lanes|=e,Yl|=e,t):(e=vs(e,n,r),_r(e,t)||(tc=!0),e)}function bs(e,t,n,r,i){var a=L.p;L.p=a!==0&&8>a?a:8;var o=I.T,s={};I.T=s,Ms(e,!1,t,n);try{var c=i(),l=I.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?js(e,t,da(c,r),gu(e)):js(e,t,r,gu(e))}catch(n){js(e,t,{then:function(){},status:`rejected`,reason:n},gu())}finally{L.p=a,o!==null&&s.types!==null&&(o.types=s.types),I.T=o}}function xs(){}function Ss(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Cs(e).queue;bs(e,a,t,R,n===null?xs:function(){return ws(e),n(r)})}function Cs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:R},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ws(e){var t=Cs(e);t.next===null&&(t=e.alternate.memoizedState),js(e,t.next.queue,{},gu())}function Ts(){return Xi(np)}function Es(){return Oo().memoizedState}function Ds(){return Oo().memoizedState}function Os(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=gu();e=La(n);var r=Ra(t,e,n);r!==null&&(vu(r,t,n),za(r,t,n)),t={cache:ra()},e.payload=t;return}t=t.return}}function ks(e,t,n){var r=gu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ns(e)?Ps(t,n):(n=Zr(e,t,n,r),n!==null&&(vu(n,e,r),Fs(n,t,r)))}function As(e,t,n){js(e,t,n,gu())}function js(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ns(e))Ps(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,_r(s,o))return Xr(e,t,i,0),zl===null&&Yr(),!1}catch{}if(n=Zr(e,t,i,r),n!==null)return vu(n,e,r),Fs(n,t,r),!0}return!1}function Ms(e,t,n,r){if(r={lane:2,revertLane:md(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ns(e)){if(t)throw Error(i(479))}else t=Zr(e,n,r,2),t!==null&&vu(t,e,2)}function Ns(e){var t=e.alternate;return e===so||t!==null&&t===so}function Ps(e,t){fo=uo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ye(e,n)}}var Is={readContext:Xi,use:jo,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useLayoutEffect:vo,useInsertionEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useSyncExternalStore:vo,useId:vo,useHostTransitionStatus:vo,useFormState:vo,useActionState:vo,useOptimistic:vo,useMemoCache:vo,useCacheRefresh:vo};Is.useEffectEvent=vo;var Ls={readContext:Xi,use:jo,useCallback:function(e,t){return Do().memoizedState=[e,t===void 0?null:t],e},useContext:Xi,useEffect:ss,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),as(4194308,4,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=Do();t=t===void 0?null:t;var r=e();if(po){Me(!0);try{e()}finally{Me(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Do();if(n!==void 0){var i=n(t);if(po){Me(!0);try{n(t)}finally{Me(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ks.bind(null,so,e),[r.memoizedState,e]},useRef:function(e){var t=Do();return e={current:e},t.memoizedState=e},useState:function(e){e=Uo(e);var t=e.queue,n=As.bind(null,so,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hs,useDeferredValue:function(e,t){return vs(Do(),e,t)},useTransition:function(){var e=Uo(!1);return e=bs.bind(null,so,e.queue,!0,!1),Do().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=so,a=Do();if(ki){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),zl===null)throw Error(i(349));Vl&127||Ro(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ss(Bo.bind(null,r,o,e),[e]),r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,o,n,t),null),n},useId:function(){var e=Do(),t=zl.identifierPrefix;if(ki){var n=xi,r=bi;n=(r&~(1<<32-Ne(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=mo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=_o++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ts,useFormState:Qo,useActionState:Qo,useOptimistic:function(e){var t=Do();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ms.bind(null,so,!0,n),n.dispatch=t,[e,t]},useMemoCache:Mo,useCacheRefresh:function(){return Do().memoizedState=Os.bind(null,so)},useEffectEvent:function(e){var t=Do(),n={impl:e};return t.memoizedState=n,function(){if(Rl&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Rs={readContext:Xi,use:jo,useCallback:gs,useContext:Xi,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Po,useRef:is,useState:function(){return Po(No)},useDebugValue:hs,useDeferredValue:function(e,t){return ys(Oo(),co.memoizedState,e,t)},useTransition:function(){var e=Po(No)[0],t=Oo().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:$o,useActionState:$o,useOptimistic:function(e,t){return Wo(Oo(),co,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};Rs.useEffectEvent=us;var zs={readContext:Xi,use:jo,useCallback:gs,useContext:Xi,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Io,useRef:is,useState:function(){return Io(No)},useDebugValue:hs,useDeferredValue:function(e,t){var n=Oo();return co===null?vs(n,e,t):ys(n,co.memoizedState,e,t)},useTransition:function(){var e=Io(No)[0],t=Oo().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:ns,useActionState:ns,useOptimistic:function(e,t){var n=Oo();return co===null?(n.baseState=e,[e,n.queue.dispatch]):Wo(n,co,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};zs.useEffectEvent=us;function Bs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:f({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=gu(),i=La(r);i.payload=t,n!=null&&(i.callback=n),t=Ra(e,i,r),t!==null&&(vu(t,e,r),za(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=gu(),i=La(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ra(e,i,r),t!==null&&(vu(t,e,r),za(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=gu(),r=La(n);r.tag=2,t!=null&&(r.callback=t),t=Ra(e,r,n),t!==null&&(vu(t,e,n),za(t,e,n))}};function Hs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!vr(n,r)||!vr(i,a):!0}function Us(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Gs(e){Gr(e)}function Ks(e){console.error(e)}function qs(e){Gr(e)}function Js(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Xs(e,t,n){return n=La(n),n.tag=3,n.payload={element:null},n.callback=function(){Js(e,t)},n}function Zs(e){return e=La(e),e.tag=3,e}function Qs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Ys(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Ys(t,n,r),typeof i!=`function`&&(ou===null?ou=new Set([this]):ou.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function $s(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&qi(t,n,a,!0),n=Za.current,n!==null){switch(n.tag){case 31:case 13:return Qa===null?Au():n.alternate===null&&Jl===0&&(Jl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Yu(e,r,a)),!1;case 22:return n.flags|=65536,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Yu(e,r,a)),!1}throw Error(i(435,n.tag))}return Yu(e,r,a),Au(),!1}if(ki)return t=Za.current,t===null?(r!==Mi&&(t=Error(i(423),{cause:r}),zi(fi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=fi(r,n),a=Xs(e.stateNode,r,a),Ba(e,a),Jl!==4&&(Jl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Mi&&(e=Error(i(422),{cause:r}),zi(fi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=fi(o,n),$l===null?$l=[o]:$l.push(o),Jl!==4&&(Jl=2),t===null)return!0;r=fi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Xs(n.stateNode,r,e),Ba(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(ou===null||!ou.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Zs(a),Qs(a,e,n,r),Ba(n,a),!1}n=n.return}while(n!==null);return!1}var ec=Error(i(461)),tc=!1;function nc(e,t,n,r){t.child=e===null?Na(t,null,n,r):Ma(t,e.child,n,r)}function rc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Yi(t),r=bo(e,t,n,o,a,i),s=wo(),e!==null&&!tc?(To(e,t,i),Dc(e,t,i)):(ki&&s&&wi(t),t.flags|=1,nc(e,t,r,i),t.child)}function ic(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!ii(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ac(e,t,a,r,i)):(e=si(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Oc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?vr:n,n(o,r)&&e.ref===t.ref)return Dc(e,t,i)}return t.flags|=1,e=ai(a,r),e.ref=t.ref,e.return=t,t.child=e}function ac(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(vr(a,r)&&e.ref===t.ref)if(tc=!1,t.pendingProps=r=a,Oc(e,i))e.flags&131072&&(tc=!0);else return t.lanes=e.lanes,Dc(e,t,i)}return pc(e,t,n,r,i)}function oc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return cc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ha(t,a===null?null:a.cachePool),a===null?Ya():Ja(t,a),to(t);else return r=t.lanes=536870912,cc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ha(t,null),Ya(),no(t)):(ha(t,a.cachePool),Ja(t,a),no(t),t.memoizedState=null);return nc(e,t,i,n),t.child}function sc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cc(e,t,n,r,i){var a=ma();return a=a===null?null:{parent:na._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ha(t,null),Ya(),to(t),e!==null&&qi(e,t,r,!0),t.childLanes=i,null}function lc(e,t){return t=Sc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uc(e,t,n){return Ma(t,e.child,null,n),e=lc(t,t.pendingProps),e.flags|=2,ro(t),t.memoizedState=null,e}function dc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(ki){if(r.mode===`hidden`)return e=lc(t,r),t.lanes=536870912,sc(null,e);if(eo(t),(e=Oi)?(e=lf(e,ji),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:yi===null?null:{id:bi,overflow:xi},retryLane:536870912,hydrationErrors:null},n=ui(e),n.return=t,t.child=n,Di=t,Oi=null)):e=null,e===null)throw Ni(t);return t.lanes=536870912,null}return lc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(eo(t),a)if(t.flags&256)t.flags&=-257,t=uc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(tc||qi(e,t,n,!1),a=(n&e.childLanes)!==0,tc||a){if(r=zl,r!==null&&(s=Xe(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,Qr(e,s),vu(r,e,s),ec;Au(),t=uc(e,t,n)}else e=o.treeContext,Oi=pf(s.nextSibling),Di=t,ki=!0,Ai=null,ji=!1,e!==null&&Ei(t,e),t=lc(t,r),t.flags|=4096;return t}return e=ai(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function pc(e,t,n,r,i){return Yi(t),n=bo(e,t,n,r,void 0,i),r=wo(),e!==null&&!tc?(To(e,t,i),Dc(e,t,i)):(ki&&r&&wi(t),t.flags|=1,nc(e,t,n,i),t.child)}function mc(e,t,n,r,i,a){return Yi(t),t.updateQueue=null,n=So(t,r,n,i),xo(e),r=wo(),e!==null&&!tc?(To(e,t,a),Dc(e,t,a)):(ki&&r&&wi(t),t.flags|=1,nc(e,t,n,a),t.child)}function hc(e,t,n,r,i){if(Yi(t),t.stateNode===null){var a=ti,o=n.contextType;typeof o==`object`&&o&&(a=Xi(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Fa(t),o=n.contextType,a.context=typeof o==`object`&&o?Xi(o):ti,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Bs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Vs.enqueueReplaceState(a,a.state,null),Ua(t,r,a,i),Ha(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Ws(n,s);a.props=c;var l=a.context,u=n.contextType;o=ti,typeof u==`object`&&u&&(o=Xi(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Us(t,a,r,o),Pa=!1;var f=t.memoizedState;a.state=f,Ua(t,r,a,i),Ha(),l=t.memoizedState,s||f!==l||Pa?(typeof d==`function`&&(Bs(t,n,d,r),l=t.memoizedState),(c=Pa||Hs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ia(e,t),o=t.memoizedProps,u=Ws(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ti,typeof l==`object`&&l&&(c=Xi(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Us(t,a,r,c),Pa=!1,f=t.memoizedState,a.state=f,Ua(t,r,a,i),Ha();var p=t.memoizedState;o!==d||f!==p||Pa||e!==null&&e.dependencies!==null&&Ji(e.dependencies)?(typeof s==`function`&&(Bs(t,n,s,r),p=t.memoizedState),(u=Pa||Hs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Ji(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,fc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ma(t,e.child,null,i),t.child=Ma(t,null,n,i)):nc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Dc(e,t,i),e}function gc(e,t,n,r){return Li(),t.flags|=256,nc(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(e){return{baseLanes:e,cachePool:ga()}}function yc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=q),e}function bc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(io.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(ki){if(a?$a(t):no(t),(e=Oi)?(e=lf(e,ji),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:yi===null?null:{id:bi,overflow:xi},retryLane:536870912,hydrationErrors:null},n=ui(e),n.return=t,t.child=n,Di=t,Oi=null)):e=null,e===null)throw Ni(t);return df(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(no(t),a=t.mode,c=Sc({mode:`hidden`,children:c},a),r=ci(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(null,r)):($a(t),xc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?($a(t),t.flags&=-257,t=Cc(e,t,n)):t.memoizedState===null?(no(t),c=r.fallback,a=t.mode,r=Sc({mode:`visible`,children:r.children},a),c=ci(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ma(t,e.child,null,n),r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,t=sc(null,r)):(no(t),t.child=e.child,t.flags|=128,t=null);else if($a(t),df(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,zi({value:r,source:null,stack:null}),t=Cc(e,t,n)}else if(tc||qi(e,t,n,!1),s=(n&e.childLanes)!==0,tc||s){if(s=zl,s!==null&&(r=Xe(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,Qr(e,r),vu(s,e,r),ec;uf(c)||Au(),t=Cc(e,t,n)}else uf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Oi=pf(c.nextSibling),Di=t,ki=!0,Ai=null,ji=!1,e!==null&&Ei(t,e),t=xc(t,r.children),t.flags|=4096);return t}return a?(no(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ai(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=ci(c,a,n,null),c.flags|=2):c=ai(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,sc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=vc(n):(a=c.cachePool,a===null?a=ga():(l=na._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(e.child,r)):($a(t),n=e.child,e=n.sibling,n=ai(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function xc(e,t){return t=Sc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Sc(e,t){return e=ri(22,e,null,t),e.lanes=0,e}function Cc(e,t,n){return Ma(t,e.child,null,n),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function Tc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Ec(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=io.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,H(io,o),nc(e,t,r,n),r=ki?gi:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ao(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ao(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tc(t,!0,n,null,a,r);break;case`together`:Tc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Dc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ai(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ai(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Ji(e))):!0}function kc(e,t,n){switch(t.tag){case 3:ae(t,t.stateNode.containerInfo),Ui(t,na,e.memoizedState.cache),Li();break;case 27:case 5:se(t);break;case 4:ae(t,t.stateNode.containerInfo);break;case 10:Ui(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,eo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?($a(t),e=Dc(e,t,n),e===null?null:e.sibling):bc(e,t,n):($a(t),t.flags|=128,null);$a(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Ec(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),H(io,io.current),r)break;return null;case 22:return t.lanes=0,oc(e,t,n,t.pendingProps);case 24:Ui(t,na,e.memoizedState.cache)}return Dc(e,t,n)}function Ac(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tc=!0;else{if(!Oc(e,n)&&!(t.flags&128))return tc=!1,kc(e,t,n);tc=!!(e.flags&131072)}else tc=!1,ki&&t.flags&1048576&&Ci(t,gi,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ca(t.elementType),t.type=e,typeof e==`function`)ii(e)?(r=Ws(e,r),t.tag=1,t=hc(null,t,e,r,n)):(t.tag=0,t=pc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=rc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=ic(null,t,e,r,n);break a}}throw t=P(e)||e,Error(i(306,t,``))}}return t;case 0:return pc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Ws(r,t.pendingProps),hc(e,t,r,a,n);case 3:a:{if(ae(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ia(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ui(t,na,r),r!==o.cache&&Ki(t,[na],n,!0),Ha(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=gc(e,t,r,n);break a}else if(r!==a){a=fi(Error(i(424)),t),zi(a),t=gc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Oi=pf(e.firstChild),Di=t,ki=!0,Ai=null,ji=!0,n=Na(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Li(),r===a){t=Dc(e,t,n);break a}nc(e,t,r,n)}t=t.child}return t;case 26:return fc(e,t),e===null?(n=Pf(t.type,null,t.pendingProps,null))?t.memoizedState=n:ki||(n=t.type,e=t.pendingProps,r=Gd(re.current).createElement(n),r[nt]=t,r[rt]=e,zd(r,n,e),ht(r),t.stateNode=r):t.memoizedState=Pf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return se(t),e===null&&ki&&(r=t.stateNode=_f(t.type,t.pendingProps,re.current),Di=t,ji=!0,a=Oi,nf(t.type)?(mf=a,Oi=pf(r.firstChild)):Oi=a),nc(e,t,t.pendingProps.children,n),fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ki&&((a=r=Oi)&&(r=sf(r,t.type,t.pendingProps,ji),r===null?a=!1:(t.stateNode=r,Di=t,Oi=pf(r.firstChild),ji=!1,a=!0)),a||Ni(t)),se(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Jd(a,o)?r=null:s!==null&&Jd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=bo(e,t,Co,null,null,n),np._currentValue=a),fc(e,t),nc(e,t,r,n),t.child;case 6:return e===null&&ki&&((e=n=Oi)&&(n=cf(n,t.pendingProps,ji),n===null?e=!1:(t.stateNode=n,Di=t,Oi=null,e=!0)),e||Ni(t)),null;case 13:return bc(e,t,n);case 4:return ae(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ma(t,null,r,n):nc(e,t,r,n),t.child;case 11:return rc(e,t,t.type,t.pendingProps,n);case 7:return nc(e,t,t.pendingProps,n),t.child;case 8:return nc(e,t,t.pendingProps.children,n),t.child;case 12:return nc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ui(t,t.type,r.value),nc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Yi(t),a=Xi(a),r=r(a),t.flags|=1,nc(e,t,r,n),t.child;case 14:return ic(e,t,t.type,t.pendingProps,n);case 15:return ac(e,t,t.type,t.pendingProps,n);case 19:return Ec(e,t,n);case 31:return dc(e,t,n);case 22:return oc(e,t,n,t.pendingProps);case 24:return Yi(t),r=Xi(na),e===null?(a=ma(),a===null&&(a=zl,o=ra(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Fa(t),Ui(t,na,a)):((e.lanes&n)!==0&&(Ia(e,t),Ua(t,null,null,n),Ha()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ui(t,na,r),r!==a.cache&&Ki(t,[na],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ui(t,na,r))),nc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function jc(e){e.flags|=4}function Mc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Du())e.flags|=8192;else throw wa=ba,va}else e.flags&=-16777217}function Nc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Yf(t))if(Du())e.flags|=8192;else throw wa=ba,va}function Pc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:We(),e.lanes|=t,Ql|=t)}function Fc(e,t){if(!ki)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ic(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lc(e,t,n){var r=t.pendingProps;switch(Ti(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ic(t),null;case 1:return Ic(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Wi(na),oe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(Ii(t)?jc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ri())),Ic(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(jc(t),o===null?(Ic(t),Mc(t,a,null,r,n)):(Ic(t),Nc(t,o))):o?o===e.memoizedState?(Ic(t),t.flags&=-16777217):(jc(t),Ic(t),Nc(t,o)):(e=e.memoizedProps,e!==r&&jc(t),Ic(t),Mc(t,a,e,r,n)),null;case 27:if(ce(t),n=re.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Ic(t),null}e=te.current,Ii(t)?Pi(t,e):(e=_f(a,r,n),t.stateNode=e,jc(t))}return Ic(t),null;case 5:if(ce(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Ic(t),null}if(o=te.current,Ii(t))Pi(t,o);else{var s=Gd(re.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[nt]=t,o[rt]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(zd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&jc(t)}}return Ic(t),Mc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=re.current,Ii(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Di,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[nt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||Id(e.nodeValue,n)),e||Ni(t,!0)}else e=Gd(e).createTextNode(r),e[nt]=t,t.stateNode=e}return Ic(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Ii(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[nt]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),e=!1}else n=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ro(t),t):(ro(t),null);if(t.flags&128)throw Error(i(558))}return Ic(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[nt]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),a=!1}else a=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(ro(t),t):(ro(t),null)}return ro(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Pc(t,t.updateQueue),Ic(t),null);case 4:return oe(),e===null&&Ed(t.stateNode.containerInfo),Ic(t),null;case 10:return Wi(t.type),Ic(t),null;case 19:if(ee(io),r=t.memoizedState,r===null)return Ic(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Fc(r,!1);else{if(Jl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ao(e),o!==null){for(t.flags|=128,Fc(r,!1),e=o.updateQueue,t.updateQueue=e,Pc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)oi(n,e),n=n.sibling;return H(io,io.current&1|2),ki&&Si(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&xe()>iu&&(t.flags|=128,a=!0,Fc(r,!1),t.lanes=4194304)}else{if(!a)if(e=ao(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Pc(t,e),Fc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!ki)return Ic(t),null}else 2*xe()-r.renderingStartTime>iu&&n!==536870912&&(t.flags|=128,a=!0,Fc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Ic(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=xe(),e.sibling=null,n=io.current,H(io,a?n&1|2:n&1),ki&&Si(t,r.treeForkCount),e);case 22:case 23:return ro(t),Xa(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Ic(t),t.subtreeFlags&6&&(t.flags|=8192)):Ic(t),n=t.updateQueue,n!==null&&Pc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ee(pa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Wi(na),Ic(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Rc(e,t){switch(Ti(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wi(na),oe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ce(t),null;case 31:if(t.memoizedState!==null){if(ro(t),t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ro(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(io),null;case 4:return oe(),null;case 10:return Wi(t.type),null;case 22:case 23:return ro(t),Xa(),e!==null&&ee(pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wi(na),null;case 25:return null;default:return null}}function zc(e,t){switch(Ti(t),t.tag){case 3:Wi(na),oe();break;case 26:case 27:case 5:ce(t);break;case 4:oe();break;case 31:t.memoizedState!==null&&ro(t);break;case 13:ro(t);break;case 19:ee(io);break;case 10:Wi(t.type);break;case 22:case 23:ro(t),Xa(),e!==null&&ee(pa);break;case 24:Wi(na)}}function Bc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Ju(t,t.return,e)}}function Vc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Ju(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Ju(t,t.return,e)}}function Hc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ga(t,n)}catch(t){Ju(e,e.return,t)}}}function Uc(e,t,n){n.props=Ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Ju(e,t,n)}}function Wc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Ju(e,t,n)}}function Gc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Ju(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Ju(e,t,n)}else n.current=null}function Kc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Ju(e,e.return,t)}}function qc(e,t,n){try{var r=e.stateNode;Bd(r,e.type,n,t),r[rt]=t}catch(t){Ju(e,e.return,t)}}function Jc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&nf(e.type)||e.tag===4}function Yc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&nf(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yt));else if(r!==4&&(r===27&&nf(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&nf(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);zd(t,r,n),t[nt]=e,t[rt]=n}catch(t){Ju(e,e.return,t)}}var $c=!1,el=!1,tl=!1,nl=typeof WeakSet==`function`?WeakSet:Set,K=null;function rl(e,t){if(e=e.containerInfo,Ud=dp,e=Sr(e),Cr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(Wd={focusedElem:e,selectionRange:n},dp=!1,K=t;K!==null;)if(t=K,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,K=e;else for(;K!==null;){switch(t=K,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Ws(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Ju(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)of(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:of(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}}function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yl(e,n),r&4&&Bc(5,n);break;case 1:if(yl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Ju(n,n.return,e)}else{var i=Ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Ju(n,n.return,e)}}r&64&&Hc(n),r&512&&Wc(n,n.return);break;case 3:if(yl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ga(e,t)}catch(e){Ju(n,n.return,e)}}break;case 27:t===null&&r&4&&Qc(n);case 26:case 5:yl(e,n),t===null&&r&4&&Kc(n),r&512&&Wc(n,n.return);break;case 12:yl(e,n);break;case 31:yl(e,n),r&4&&ul(e,n);break;case 13:yl(e,n),r&4&&dl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Qu.bind(null,n),ff(e,n))));break;case 22:if(r=n.memoizedState!==null||$c,!r){t=t!==null&&t.memoizedState!==null||el,i=$c;var a=el;$c=r,(el=t)&&!a?xl(e,n,(n.subtreeFlags&8772)!=0):yl(e,n),$c=i,el=a}break;case 30:break;default:yl(e,n)}}function al(e){var t=e.alternate;t!==null&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ut(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ol=null,sl=!1;function cl(e,t,n){for(n=n.child;n!==null;)ll(e,t,n),n=n.sibling}function ll(e,t,n){if(je&&typeof je.onCommitFiberUnmount==`function`)try{je.onCommitFiberUnmount(Ae,n)}catch{}switch(n.tag){case 26:el||Gc(n,t),cl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:el||Gc(n,t);var r=ol,i=sl;nf(n.type)&&(ol=n.stateNode,sl=!1),cl(e,t,n),vf(n.stateNode),ol=r,sl=i;break;case 5:el||Gc(n,t);case 6:if(r=ol,i=sl,ol=null,cl(e,t,n),ol=r,sl=i,ol!==null)if(sl)try{(ol.nodeType===9?ol.body:ol.nodeName===`HTML`?ol.ownerDocument.body:ol).removeChild(n.stateNode)}catch(e){Ju(n,t,e)}else try{ol.removeChild(n.stateNode)}catch(e){Ju(n,t,e)}break;case 18:ol!==null&&(sl?(e=ol,rf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Lp(e)):rf(ol,n.stateNode));break;case 4:r=ol,i=sl,ol=n.stateNode.containerInfo,sl=!0,cl(e,t,n),ol=r,sl=i;break;case 0:case 11:case 14:case 15:Vc(2,n,t),el||Vc(4,n,t),cl(e,t,n);break;case 1:el||(Gc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Uc(n,t,r)),cl(e,t,n);break;case 21:cl(e,t,n);break;case 22:el=(r=el)||n.memoizedState!==null,cl(e,t,n),el=r;break;default:cl(e,t,n)}}function ul(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Lp(e)}catch(e){Ju(t,t.return,e)}}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Lp(e)}catch(e){Ju(t,t.return,e)}}function fl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nl),t;default:throw Error(i(435,e.tag))}}function pl(e,t){var n=fl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=$u.bind(null,e,t);t.then(r,r)}})}function ml(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(nf(c.type)){ol=c.stateNode,sl=!1;break a}break;case 5:ol=c.stateNode,sl=!1;break a;case 3:case 4:ol=c.stateNode.containerInfo,sl=!0;break a}c=c.return}if(ol===null)throw Error(i(160));ll(o,s,a),ol=null,sl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)gl(t,e),t=t.sibling}var hl=null;function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ml(t,e),_l(e),r&4&&(Vc(3,e,e.return),Bc(3,e),Vc(5,e,e.return));break;case 1:ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),r&64&&$c&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=hl;if(ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[lt]||o[nt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),zd(o,r,n),o[nt]=e,ht(o),r=o;break a;case`link`:var s=Kf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),zd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Kf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),zd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[nt]=e,ht(o),r=o}e.stateNode=r}else qf(a,e.type,e.stateNode);else e.stateNode=Vf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?qf(a,e.type,e.stateNode):Vf(a,r,e.memoizedProps))}break;case 27:ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),n!==null&&r&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ml(t,e),_l(e),r&512&&(el||n===null||Gc(n,n.return)),e.flags&32){a=e.stateNode;try{Vt(a,``)}catch(t){Ju(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,qc(e,a,n===null?a:n.memoizedProps)),r&1024&&(tl=!0);break;case 6:if(ml(t,e),_l(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Ju(e,e.return,t)}}break;case 3:if(Gf=null,a=hl,hl=xf(t.containerInfo),ml(t,e),hl=a,_l(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lp(t.containerInfo)}catch(t){Ju(e,e.return,t)}tl&&(tl=!1,vl(e));break;case 4:r=hl,hl=xf(e.stateNode.containerInfo),ml(t,e),_l(e),hl=r;break;case 12:ml(t,e),_l(e);break;case 31:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 13:ml(t,e),_l(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(nu=xe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=$c,d=el;if($c=u||a,el=d||l,ml(t,e),el=d,$c=u,_l(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||$c||el||bl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Ju(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Ju(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?af(m,!0):af(l.stateNode,!1)}catch(e){Ju(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,pl(e,n))));break;case 19:ml(t,e),_l(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,pl(e,r)));break;case 30:break;case 21:break;default:ml(t,e),_l(e)}}function _l(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Jc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Zc(e,Yc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(Vt(o,``),n.flags&=-33),Zc(e,Yc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Xc(e,Yc(e),s);break;default:throw Error(i(161))}}catch(t){Ju(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function yl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)il(e,t.alternate,t),t=t.sibling}function bl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vc(4,t,t.return),bl(t);break;case 1:Gc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Uc(t,t.return,n),bl(t);break;case 27:vf(t.stateNode);case 26:case 5:Gc(t,t.return),bl(t);break;case 22:t.memoizedState===null&&bl(t);break;case 30:bl(t);break;default:bl(t)}e=e.sibling}}function xl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:xl(i,a,n),Bc(4,a);break;case 1:if(xl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Ju(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Wa(c[i],s)}catch(e){Ju(r,r.return,e)}}n&&o&64&&Hc(a),Wc(a,a.return);break;case 27:Qc(a);case 26:case 5:xl(i,a,n),n&&r===null&&o&4&&Kc(a),Wc(a,a.return);break;case 12:xl(i,a,n);break;case 31:xl(i,a,n),n&&o&4&&ul(i,a);break;case 13:xl(i,a,n),n&&o&4&&dl(i,a);break;case 22:a.memoizedState===null&&xl(i,a,n),Wc(a,a.return);break;case 30:break;default:xl(i,a,n)}t=t.sibling}}function Sl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ia(n))}function Cl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e))}function wl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tl(e,t,n,r),t=t.sibling}function Tl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:wl(e,t,n,r),i&2048&&Bc(9,t);break;case 1:wl(e,t,n,r);break;case 3:wl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e)));break;case 12:if(i&2048){wl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Ju(t,t.return,e)}}else wl(e,t,n,r);break;case 31:wl(e,t,n,r);break;case 13:wl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?wl(e,t,n,r):(a._visibility|=2,El(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?wl(e,t,n,r):Dl(e,t),i&2048&&Sl(o,t);break;case 24:wl(e,t,n,r),i&2048&&Cl(t.alternate,t);break;default:wl(e,t,n,r)}}function El(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:El(a,o,s,c,i),Bc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,El(a,o,s,c,i)):u._visibility&2?El(a,o,s,c,i):Dl(a,o),i&&l&2048&&Sl(o.alternate,o);break;case 24:El(a,o,s,c,i),i&&l&2048&&Cl(o.alternate,o);break;default:El(a,o,s,c,i)}t=t.sibling}}function Dl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Dl(n,r),i&2048&&Sl(r.alternate,r);break;case 24:Dl(n,r),i&2048&&Cl(r.alternate,r);break;default:Dl(n,r)}t=t.sibling}}var Ol=8192;function kl(e,t,n){if(e.subtreeFlags&Ol)for(e=e.child;e!==null;)Al(e,t,n),e=e.sibling}function Al(e,t,n){switch(e.tag){case 26:kl(e,t,n),e.flags&Ol&&e.memoizedState!==null&&Xf(n,hl,e.memoizedState,e.memoizedProps);break;case 5:kl(e,t,n);break;case 3:case 4:var r=hl;hl=xf(e.stateNode.containerInfo),kl(e,t,n),hl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ol,Ol=16777216,kl(e,t,n),Ol=r):kl(e,t,n));break;default:kl(e,t,n)}}function jl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ml(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];K=r,Fl(r,e)}jl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nl(e),e=e.sibling}function Nl(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Vc(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Pl(e)):Ml(e);break;default:Ml(e)}}function Pl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];K=r,Fl(r,e)}jl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vc(8,t,t.return),Pl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Pl(t));break;default:Pl(t)}e=e.sibling}}function Fl(e,t){for(;K!==null;){var n=K;switch(n.tag){case 0:case 11:case 15:Vc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ia(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,K=r;else a:for(n=e;K!==null;){r=K;var i=r.sibling,a=r.return;if(al(r),r===n){K=null;break a}if(i!==null){i.return=a,K=i;break a}K=a}}}var Il={getCacheForType:function(e){var t=Xi(na),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Xi(na).controller.signal}},Ll=typeof WeakMap==`function`?WeakMap:Map,Rl=0,zl=null,Bl=null,Vl=0,Hl=0,Ul=null,Wl=!1,Gl=!1,Kl=!1,ql=0,Jl=0,Yl=0,Xl=0,Zl=0,q=0,Ql=0,$l=null,eu=null,tu=!1,nu=0,ru=0,iu=1/0,au=null,ou=null,su=0,cu=null,lu=null,uu=0,du=0,fu=null,pu=null,mu=0,hu=null;function gu(){return Rl&2&&Vl!==0?Vl&-Vl:I.T===null?$e():md()}function _u(){if(q===0)if(!(Vl&536870912)||ki){var e=Re;Re<<=1,!(Re&3932160)&&(Re=262144),q=e}else q=536870912;return e=Za.current,e!==null&&(e.flags|=32),q}function vu(e,t,n){(e===zl&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)&&(Tu(e,0),Su(e,Vl,q,!1)),Ke(e,n),(!(Rl&2)||e!==zl)&&(e===zl&&(!(Rl&2)&&(Xl|=n),Jl===4&&Su(e,Vl,q,!1)),sd(e))}function yu(e,t,n){if(Rl&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||He(e,t),a=r?Nu(e,t):ju(e,t,!0),o=r;do{if(a===0){Gl&&!r&&Su(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!xu(n)){a=ju(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=$l;var l=c.current.memoizedState.isDehydrated;if(l&&(Tu(c,s).flags|=256),s=ju(c,s,!1),s!==2){if(Kl&&!l){c.errorRecoveryDisabledLanes|=o,Xl|=o,a=4;break a}o=eu,eu=a,o!==null&&(eu===null?eu=o:eu.push.apply(eu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Tu(e,0),Su(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Su(r,t,q,!Wl);break a;case 2:eu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=nu+300-xe(),10<a)){if(Su(r,t,q,!Wl),Ve(r,0,!0)!==0)break a;uu=t,r.timeoutHandle=Zd(bu.bind(null,r,n,eu,au,tu,t,q,Xl,Ql,Wl,o,`Throttled`,-0,0),a);break a}bu(r,n,eu,au,tu,t,q,Xl,Ql,Wl,o,null,-0,0)}}break}while(1);sd(e)}function bu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yt},Al(t,a,d);var m=(a&62914560)===a?nu-xe():(a&4194048)===a?ru-xe():0;if(m=Qf(d,m),m!==null){uu=a,e.cancelPendingCommit=m(Bu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Su(e,a,o,!l);return}}Bu(e,t,a,n,r,i,o,s,c)}function xu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!_r(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Su(e,t,n,r){t&=~Zl,t&=~Xl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Ne(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&Je(e,n,t)}function Cu(){return Rl&6?!0:(J(0,!1),!1)}function wu(){if(Bl!==null){if(Hl===0)var e=Bl.return;else e=Bl,Hi=Vi=null,Eo(e),Da=null,Oa=0,e=Bl;for(;e!==null;)zc(e.alternate,e),e=e.return;Bl=null}}function Tu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Qd(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),uu=0,wu(),zl=e,Bl=n=ai(e.current,null),Vl=t,Hl=0,Ul=null,Wl=!1,Gl=He(e,t),Kl=!1,Ql=q=Zl=Xl=Yl=Jl=0,eu=$l=null,tu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Ne(r),a=1<<i;t|=e[i],r&=~a}return ql=t,Yr(),n}function Eu(e,t){so=null,I.H=Is,t===_a||t===ya?(t=Ta(),Hl=3):t===va?(t=Ta(),Hl=4):Hl=t===ec?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Ul=t,Bl===null&&(Jl=1,Js(e,fi(t,e.current)))}function Du(){var e=Za.current;return e===null?!0:(Vl&4194048)===Vl?Qa===null:(Vl&62914560)===Vl||Vl&536870912?e===Qa:!1}function Ou(){var e=I.H;return I.H=Is,e===null?Is:e}function ku(){var e=I.A;return I.A=Il,e}function Au(){Jl=4,Wl||(Vl&4194048)!==Vl&&Za.current!==null||(Gl=!0),!(Yl&134217727)&&!(Xl&134217727)||zl===null||Su(zl,Vl,q,!1)}function ju(e,t,n){var r=Rl;Rl|=2;var i=Ou(),a=ku();(zl!==e||Vl!==t)&&(au=null,Tu(e,t)),t=!1;var o=Jl;a:do try{if(Hl!==0&&Bl!==null){var s=Bl,c=Ul;switch(Hl){case 8:wu(),o=6;break a;case 3:case 2:case 9:case 6:Za.current===null&&(t=!0);var l=Hl;if(Hl=0,Ul=null,Lu(e,s,c,l),n&&Gl){o=0;break a}break;default:l=Hl,Hl=0,Ul=null,Lu(e,s,c,l)}}Mu(),o=Jl;break}catch(t){Eu(e,t)}while(1);return t&&e.shellSuspendCounter++,Hi=Vi=null,Rl=r,I.H=i,I.A=a,Bl===null&&(zl=null,Vl=0,Yr()),o}function Mu(){for(;Bl!==null;)Fu(Bl)}function Nu(e,t){var n=Rl;Rl|=2;var r=Ou(),a=ku();zl!==e||Vl!==t?(au=null,iu=xe()+500,Tu(e,t)):Gl=He(e,t);a:do try{if(Hl!==0&&Bl!==null){t=Bl;var o=Ul;b:switch(Hl){case 1:Hl=0,Ul=null,Lu(e,t,o,1);break;case 2:case 9:if(xa(o)){Hl=0,Ul=null,Iu(t);break}t=function(){Hl!==2&&Hl!==9||zl!==e||(Hl=7),sd(e)},o.then(t,t);break a;case 3:Hl=7;break a;case 4:Hl=5;break a;case 7:xa(o)?(Hl=0,Ul=null,Iu(t)):(Hl=0,Ul=null,Lu(e,t,o,7));break;case 5:var s=null;switch(Bl.tag){case 26:s=Bl.memoizedState;case 5:case 27:var c=Bl;if(s?Yf(s):c.stateNode.complete){Hl=0,Ul=null;var l=c.sibling;if(l!==null)Bl=l;else{var u=c.return;u===null?Bl=null:(Bl=u,Ru(u))}break b}}Hl=0,Ul=null,Lu(e,t,o,5);break;case 6:Hl=0,Ul=null,Lu(e,t,o,6);break;case 8:wu(),Jl=6;break a;default:throw Error(i(462))}}Pu();break}catch(t){Eu(e,t)}while(1);return Hi=Vi=null,I.H=r,I.A=a,Rl=n,Bl===null?(zl=null,Vl=0,Yr(),Jl):0}function Pu(){for(;Bl!==null&&!ye();)Fu(Bl)}function Fu(e){var t=Ac(e.alternate,e,ql);e.memoizedProps=e.pendingProps,t===null?Ru(e):Bl=t}function Iu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=mc(n,t,t.pendingProps,t.type,void 0,Vl);break;case 11:t=mc(n,t,t.pendingProps,t.type.render,t.ref,Vl);break;case 5:Eo(t);default:zc(n,t),t=Bl=oi(t,ql),t=Ac(n,t,ql)}e.memoizedProps=e.pendingProps,t===null?Ru(e):Bl=t}function Lu(e,t,n,r){Hi=Vi=null,Eo(t),Da=null,Oa=0;var i=t.return;try{if($s(e,i,t,n,Vl)){Jl=1,Js(e,fi(n,e.current)),Bl=null;return}}catch(t){if(i!==null)throw Bl=i,t;Jl=1,Js(e,fi(n,e.current)),Bl=null;return}t.flags&32768?(ki||r===1?e=!0:Gl||Vl&536870912?e=!1:(Wl=e=!0,(r===2||r===9||r===3||r===6)&&(r=Za.current,r!==null&&r.tag===13&&(r.flags|=16384))),zu(t,e)):Ru(t)}function Ru(e){var t=e;do{if(t.flags&32768){zu(t,Wl);return}e=t.return;var n=Lc(t.alternate,t,ql);if(n!==null){Bl=n;return}if(t=t.sibling,t!==null){Bl=t;return}Bl=t=e}while(t!==null);Jl===0&&(Jl=5)}function zu(e,t){do{var n=Rc(e.alternate,e);if(n!==null){n.flags&=32767,Bl=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Bl=e;return}Bl=e=n}while(e!==null);Jl=6,Bl=null}function Bu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do Gu();while(su!==0);if(Rl&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=Jr,qe(e,n,o,s,c,l),e===zl&&(Bl=zl=null,Vl=0),lu=t,cu=e,uu=n,du=o,fu=a,pu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ed(Te,function(){return Ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=I.T,I.T=null,a=L.p,L.p=2,s=Rl,Rl|=4;try{rl(e,t,n)}finally{Rl=s,L.p=a,I.T=r}}su=1,Vu(),Hu(),Uu()}}function Vu(){if(su===1){su=0;var e=cu,t=lu,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=I.T,I.T=null;var r=L.p;L.p=2;var i=Rl;Rl|=4;try{gl(t,e);var a=Wd,o=Sr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&xr(s.ownerDocument.documentElement,s)){if(c!==null&&Cr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=br(s,h),v=br(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}dp=!!Ud,Wd=Ud=null}finally{Rl=i,L.p=r,I.T=n}}e.current=t,su=2}}function Hu(){if(su===2){su=0;var e=cu,t=lu,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=I.T,I.T=null;var r=L.p;L.p=2;var i=Rl;Rl|=4;try{il(e,t.alternate,t)}finally{Rl=i,L.p=r,I.T=n}}su=3}}function Uu(){if(su===4||su===3){su=0,be();var e=cu,t=lu,n=uu,r=pu;t.subtreeFlags&10256||t.flags&10256?su=5:(su=0,lu=cu=null,Wu(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ou=null),Qe(n),t=t.stateNode,je&&typeof je.onCommitFiberRoot==`function`)try{je.onCommitFiberRoot(Ae,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=I.T,i=L.p,L.p=2,I.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{I.T=t,L.p=i}}uu&3&&Gu(),sd(e),i=e.pendingLanes,n&261930&&i&42?e===hu?mu++:(mu=0,hu=e):mu=0,J(0,!1)}}function Wu(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ia(t)))}function Gu(){return Vu(),Hu(),Uu(),Ku()}function Ku(){if(su!==5)return!1;var e=cu,t=du;du=0;var n=Qe(uu),r=I.T,a=L.p;try{L.p=32>n?32:n,I.T=null,n=fu,fu=null;var o=cu,s=uu;if(su=0,lu=cu=null,uu=0,Rl&6)throw Error(i(331));var c=Rl;if(Rl|=4,Nl(o.current),Tl(o,o.current,s,n),Rl=c,J(0,!1),je&&typeof je.onPostCommitFiberRoot==`function`)try{je.onPostCommitFiberRoot(Ae,o)}catch{}return!0}finally{L.p=a,I.T=r,Wu(e,t)}}function qu(e,t,n){t=fi(n,t),t=Xs(e.stateNode,t,2),e=Ra(e,t,2),e!==null&&(Ke(e,2),sd(e))}function Ju(e,t,n){if(e.tag===3)qu(e,e,n);else for(;t!==null;){if(t.tag===3){qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(ou===null||!ou.has(r))){e=fi(n,e),n=Zs(2),r=Ra(t,n,2),r!==null&&(Qs(n,r,t,e),Ke(r,2),sd(r));break}}t=t.return}}function Yu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ll;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(Kl=!0,i.add(n),e=Xu.bind(null,e,t,n),t.then(e,e))}function Xu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,zl===e&&(Vl&n)===n&&(Jl===4||Jl===3&&(Vl&62914560)===Vl&&300>xe()-nu?!(Rl&2)&&Tu(e,0):Zl|=n,Ql===Vl&&(Ql=0)),sd(e)}function Zu(e,t){t===0&&(t=We()),e=Qr(e,t),e!==null&&(Ke(e,t),sd(e))}function Qu(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zu(e,n)}function $u(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),Zu(e,n)}function ed(e,t){return _e(e,t)}var td=null,nd=null,rd=!1,id=!1,ad=!1,od=0;function sd(e){e!==nd&&e.next===null&&(nd===null?td=nd=e:nd=nd.next=e),id=!0,rd||(rd=!0,pd())}function J(e,t){if(!ad&&id){ad=!0;do for(var n=!1,r=td;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Ne(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,fd(r,a))}else a=Vl,a=Ve(r,r===zl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||He(r,a)||(n=!0,fd(r,a));r=r.next}while(n);ad=!1}}function cd(){ld()}function ld(){id=rd=!1;var e=0;od!==0&&Xd()&&(e=od);for(var t=xe(),n=null,r=td;r!==null;){var i=r.next,a=ud(r,t);a===0?(r.next=null,n===null?td=i:n.next=i,i===null&&(nd=n)):(n=r,(e!==0||a&3)&&(id=!0)),r=i}su!==0&&su!==5||J(e,!1),od!==0&&(od=0)}function ud(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Ne(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Ue(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=zl,n=Vl,n=Ve(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Hl===2||Hl===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&ve(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||He(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&ve(r),Qe(n)){case 2:case 8:n=we;break;case 32:n=Te;break;case 268435456:n=De;break;default:n=Te}return r=dd.bind(null,e),n=_e(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&ve(r),e.callbackPriority=2,e.callbackNode=null,2}function dd(e,t){if(su!==0&&su!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Gu()&&e.callbackNode!==n)return null;var r=Vl;return r=Ve(e,e===zl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(yu(e,r,t),ud(e,xe()),e.callbackNode!=null&&e.callbackNode===n?dd.bind(null,e):null)}function fd(e,t){if(Gu())return null;yu(e,t,!0)}function pd(){ef(function(){Rl&6?_e(Ce,cd):ld()})}function md(){if(od===0){var e=sa;e===0&&(e=Le,Le<<=1,!(Le&261888)&&(Le=256)),od=e}return od}function hd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:Jt(``+e)}function gd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function _d(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=hd((i[rt]||null).action),o=r.submitter;o&&(t=(t=o[rt]||null)?hd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new _n(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(od!==0){var e=o?gd(i,o):new FormData(i);Ss(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?gd(i,o):new FormData(i),Ss(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var vd=0;vd<Ur.length;vd++){var yd=Ur[vd];Wr(yd.toLowerCase(),`on`+(yd[0].toUpperCase()+yd.slice(1)))}Wr(Fr,`onAnimationEnd`),Wr(Ir,`onAnimationIteration`),Wr(Lr,`onAnimationStart`),Wr(`dblclick`,`onDoubleClick`),Wr(`focusin`,`onFocus`),Wr(`focusout`,`onBlur`),Wr(Rr,`onTransitionRun`),Wr(zr,`onTransitionStart`),Wr(Br,`onTransitionCancel`),Wr(Vr,`onTransitionEnd`),yt(`onMouseEnter`,[`mouseout`,`mouseover`]),yt(`onMouseLeave`,[`mouseout`,`mouseover`]),yt(`onPointerEnter`,[`pointerout`,`pointerover`]),yt(`onPointerLeave`,[`pointerout`,`pointerover`]),vt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),vt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),vt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),vt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),vt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),vt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var bd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),xd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(bd));function Sd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Gr(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){Gr(e)}i.currentTarget=null,a=c}}}}function Cd(e,t){var n=t[at];n===void 0&&(n=t[at]=new Set);var r=e+`__bubble`;n.has(r)||(Dd(t,e,2,!1),n.add(r))}function wd(e,t,n){var r=0;t&&(r|=4),Dd(n,e,r,t)}var Td=`_reactListening`+Math.random().toString(36).slice(2);function Ed(e){if(!e[Td]){e[Td]=!0,gt.forEach(function(t){t!==`selectionchange`&&(xd.has(t)||wd(t,!1,e),wd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Td]||(t[Td]=!0,wd(`selectionchange`,!1,t))}}function Dd(e,t,n,r){switch(vp(t)){case 2:var i=fp;break;case 8:i=pp;break;default:i=mp}n=i.bind(null,t,n,e),i=void 0,!on||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Od(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=dt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}nn(function(){var r=a,i=Zt(n),s=[];a:{var c=Hr.get(e);if(c!==void 0){var l=_n,u=e;switch(e){case`keypress`:if(fn(n)===0)break a;case`keydown`:case`keyup`:l=Pn;break;case`focusin`:u=`focus`,l=En;break;case`focusout`:u=`blur`,l=En;break;case`beforeblur`:case`afterblur`:l=En;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=wn;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Tn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=In;break;case Fr:case Ir:case Lr:l=Dn;break;case Vr:l=Ln;break;case`scroll`:case`scrollend`:l=yn;break;case`wheel`:l=Rn;break;case`copy`:case`cut`:case`paste`:l=On;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Fn;break;case`toggle`:case`beforetoggle`:l=zn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=rn(m,p),g!=null&&d.push(kd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==Xt&&(u=n.relatedTarget||n.fromElement)&&(dt(u)||u[it]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?dt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=wn,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Fn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:pt(l),h=u==null?c:pt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,dt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=jd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Md(s,c,l,d,!1),u!==null&&f!==null&&Md(s,f,u,d,!0)}}a:{if(c=r?pt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=ar;else if($n(c))if(or)v=hr;else{v=pr;var y=fr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Gt(r.elementType)&&(v=ar):v=mr;if(v&&=v(e,r)){er(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Lt(c,`number`,c.value)}switch(y=r?pt(r):window,e){case`focusin`:($n(y)||y.contentEditable===`true`)&&(Tr=y,Er=r,Dr=null);break;case`focusout`:Dr=Er=Tr=null;break;case`mousedown`:Or=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Or=!1,kr(s,n,i);break;case`selectionchange`:if(wr)break;case`keydown`:case`keyup`:kr(s,n,i)}var b;if(Vn)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else Yn?qn(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Wn&&n.locale!==`ko`&&(Yn||x!==`onCompositionStart`?x===`onCompositionEnd`&&Yn&&(b=dn()):(cn=i,ln=`value`in cn?cn.value:cn.textContent,Yn=!0)),y=Ad(r,x),0<y.length&&(x=new kn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=Jn(n),b!==null&&(x.data=b)))),(b=Un?Xn(e,n):Zn(e,n))&&(x=Ad(r,`onBeforeInput`),0<x.length&&(y=new kn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),_d(s,e,r,n,i)}Sd(s,t)})}function kd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ad(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=rn(e,n),i!=null&&r.unshift(kd(e,i,a)),i=rn(e,t),i!=null&&r.push(kd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function jd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Md(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=rn(n,a),l!=null&&o.unshift(kd(n,l,c))):i||(l=rn(n,a),l!=null&&o.push(kd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Nd=/\r\n?/g,Pd=/\u0000|\uFFFD/g;function Fd(e){return(typeof e==`string`?e:``+e).replace(Nd,`
`).replace(Pd,``)}function Id(e,t){return t=Fd(t),Fd(e)===t}function Ld(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||Vt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&Vt(e,``+r);break;case`className`:Tt(e,`class`,r);break;case`tabIndex`:Tt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Tt(e,n,r);break;case`style`:Wt(e,r,o);break;case`data`:if(t!==`object`){Tt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Jt(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Ld(e,t,`name`,a.name,a,null),Ld(e,t,`formEncType`,a.formEncType,a,null),Ld(e,t,`formMethod`,a.formMethod,a,null),Ld(e,t,`formTarget`,a.formTarget,a,null)):(Ld(e,t,`encType`,a.encType,a,null),Ld(e,t,`method`,a.method,a,null),Ld(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Jt(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=Yt);break;case`onScroll`:r!=null&&Cd(`scroll`,e);break;case`onScrollEnd`:r!=null&&Cd(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=Jt(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Cd(`beforetoggle`,e),Cd(`toggle`,e),wt(e,`popover`,r);break;case`xlinkActuate`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Et(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Et(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Et(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Et(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:wt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Kt.get(n)||n,wt(e,n,r))}}function Rd(e,t,n,r,a,o){switch(n){case`style`:Wt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?Vt(e,r):(typeof r==`number`||typeof r==`bigint`)&&Vt(e,``+r);break;case`onScroll`:r!=null&&Cd(`scroll`,e);break;case`onScrollEnd`:r!=null&&Cd(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=Yt);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!_t.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[rt]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):wt(e,n,r)}}}function zd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Cd(`error`,e),Cd(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Ld(e,t,o,s,n,null)}}a&&Ld(e,t,`srcSet`,n.srcSet,n,null),r&&Ld(e,t,`src`,n.src,n,null);return;case`input`:Cd(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Ld(e,t,r,d,n,null)}}It(e,o,c,l,u,s,a,!1);return;case`select`:for(a in Cd(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Ld(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Rt(e,!!r,n,!0):Rt(e,!!r,t,!1);return;case`textarea`:for(s in Cd(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Ld(e,t,s,c,n,null)}Bt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Ld(e,t,l,r,n,null)}return;case`dialog`:Cd(`beforetoggle`,e),Cd(`toggle`,e),Cd(`cancel`,e),Cd(`close`,e);break;case`iframe`:case`object`:Cd(`load`,e);break;case`video`:case`audio`:for(r=0;r<bd.length;r++)Cd(bd[r],e);break;case`image`:Cd(`error`,e),Cd(`load`,e);break;case`details`:Cd(`toggle`,e);break;case`embed`:case`source`:case`link`:Cd(`error`,e),Cd(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Ld(e,t,u,r,n,null)}return;default:if(Gt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Rd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Ld(e,t,c,r,n,null))}function Bd(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Ld(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Ld(e,t,p,m,r,f)}}Ft(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Ld(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Ld(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Rt(e,!!n,n?[]:``,!1):Rt(e,!!n,t,!0)):Rt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Ld(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Ld(e,t,s,a,r,o)}zt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Ld(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Ld(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Ld(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Ld(e,t,u,p,r,m)}return;default:if(Gt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Rd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Rd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Ld(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Ld(e,t,f,p,r,m)}function Vd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Hd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Vd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Vd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Ud=null,Wd=null;function Gd(e){return e.nodeType===9?e:e.ownerDocument}function Kd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function qd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Jd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yd=null;function Xd(){var e=window.event;return e&&e.type===`popstate`?e===Yd?!1:(Yd=e,!0):(Yd=null,!1)}var Zd=typeof setTimeout==`function`?setTimeout:void 0,Qd=typeof clearTimeout==`function`?clearTimeout:void 0,$d=typeof Promise==`function`?Promise:void 0,ef=typeof queueMicrotask==`function`?queueMicrotask:$d===void 0?Zd:function(e){return $d.resolve(null).then(e).catch(tf)};function tf(e){setTimeout(function(){throw e})}function nf(e){return e===`head`}function rf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Lp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)vf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,vf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[lt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&vf(e.ownerDocument.body);n=i}while(n);Lp(t)}function af(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function of(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:of(n),ut(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function sf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[lt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=pf(e.nextSibling),e===null)break}return null}function cf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=pf(e.nextSibling),e===null))return null;return e}function lf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=pf(e.nextSibling),e===null))return null;return e}function uf(e){return e.data===`$?`||e.data===`$~`}function df(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function ff(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function pf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var mf=null;function hf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return pf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function gf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function _f(e,t,n){switch(t=Gd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function vf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ut(e)}var yf=new Map,bf=new Set;function xf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Sf=L.d;L.d={f:Cf,r:wf,D:Df,C:Of,L:kf,m:Af,X:Mf,S:jf,M:Nf};function Cf(){var e=Sf.f(),t=Cu();return e||t}function wf(e){var t=ft(e);t!==null&&t.tag===5&&t.type===`form`?ws(t):Sf.r(e)}var Tf=typeof document>`u`?null:document;function Ef(e,t,n){var r=Tf;if(r&&typeof t==`string`&&t){var i=Pt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),bf.has(i)||(bf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),zd(t,`link`,e),ht(t),r.head.appendChild(t)))}}function Df(e){Sf.D(e),Ef(`dns-prefetch`,e,null)}function Of(e,t){Sf.C(e,t),Ef(`preconnect`,e,t)}function kf(e,t,n){Sf.L(e,t,n);var r=Tf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Pt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Pt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Pt(n.imageSizes)+`"]`)):i+=`[href="`+Pt(e)+`"]`;var a=i;switch(t){case`style`:a=Ff(e);break;case`script`:a=zf(e)}yf.has(a)||(e=f({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),yf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(If(a))||t===`script`&&r.querySelector(Bf(a))||(t=r.createElement(`link`),zd(t,`link`,e),ht(t),r.head.appendChild(t)))}}function Af(e,t){Sf.m(e,t);var n=Tf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Pt(r)+`"][href="`+Pt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=zf(e)}if(!yf.has(a)&&(e=f({rel:`modulepreload`,href:e},t),yf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Bf(a)))return}r=n.createElement(`link`),zd(r,`link`,e),ht(r),n.head.appendChild(r)}}}function jf(e,t,n){Sf.S(e,t,n);var r=Tf;if(r&&e){var i=mt(r).hoistableStyles,a=Ff(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(If(a)))s.loading=5;else{e=f({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=yf.get(a))&&Uf(e,n);var c=o=r.createElement(`link`);ht(c),zd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Hf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Mf(e,t){Sf.X(e,t);var n=Tf;if(n&&e){var r=mt(n).hoistableScripts,i=zf(e),a=r.get(i);a||(a=n.querySelector(Bf(i)),a||(e=f({src:e,async:!0},t),(t=yf.get(i))&&Wf(e,t),a=n.createElement(`script`),ht(a),zd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Nf(e,t){Sf.M(e,t);var n=Tf;if(n&&e){var r=mt(n).hoistableScripts,i=zf(e),a=r.get(i);a||(a=n.querySelector(Bf(i)),a||(e=f({src:e,async:!0,type:`module`},t),(t=yf.get(i))&&Wf(e,t),a=n.createElement(`script`),ht(a),zd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Pf(e,t,n,r){var a=(a=re.current)?xf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Ff(n.href),n=mt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Ff(n.href);var o=mt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(If(e)))&&!o._p&&(s.instance=o,s.state.loading=5),yf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},yf.set(e,n),o||Rf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=zf(n),n=mt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Ff(e){return`href="`+Pt(e)+`"`}function If(e){return`link[rel="stylesheet"][`+e+`]`}function Lf(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Rf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),zd(t,`link`,n),ht(t),e.head.appendChild(t))}function zf(e){return`[src="`+Pt(e)+`"]`}function Bf(e){return`script[async]`+e}function Vf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Pt(n.href)+`"]`);if(r)return t.instance=r,ht(r),r;var a=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),ht(r),zd(r,`style`,a),Hf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Ff(n.href);var o=e.querySelector(If(a));if(o)return t.state.loading|=4,t.instance=o,ht(o),o;r=Lf(n),(a=yf.get(a))&&Uf(r,a),o=(e.ownerDocument||e).createElement(`link`),ht(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),zd(o,`link`,r),t.state.loading|=4,Hf(o,n.precedence,e),t.instance=o;case`script`:return o=zf(n.src),(a=e.querySelector(Bf(o)))?(t.instance=a,ht(a),a):(r=n,(a=yf.get(o))&&(r=f({},n),Wf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),ht(a),zd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Hf(r,n.precedence,e));return t.instance}function Hf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Uf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function Wf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Gf=null;function Kf(e,t,n){if(Gf===null){var r=new Map,i=Gf=new Map;i.set(n,r)}else i=Gf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[lt]||a[nt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function qf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Jf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Yf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function Xf(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Ff(r.href),a=t.querySelector(If(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=$f.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,ht(a);return}a=t.ownerDocument||t,r=Lf(r),(i=yf.get(i))&&Uf(r,i),a=a.createElement(`link`),ht(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),zd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=$f.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var Zf=0;function Qf(e,t){return e.stylesheets&&e.count===0&&tp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&tp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&Zf===0&&(Zf=62500*Hd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&tp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>Zf?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function $f(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ep=null;function tp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ep=new Map,t.forEach(Y,e),ep=null,$f.call(e))}function Y(e,t){if(!(t.state.loading&4)){var n=ep.get(e);if(n)var r=n.get(null);else{n=new Map,ep.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=$f.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var np={$$typeof:C,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function rp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ge(0),this.hiddenUpdates=Ge(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function ip(e,t,n,r,i,a,o,s,c,l,u,d){return e=new rp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=ri(3,null,null,t),e.current=a,a.stateNode=e,t=ra(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Fa(a),e}function ap(e){return e?(e=ti,e):ti}function op(e,t,n,r,i,a){i=ap(i),r.context===null?r.context=i:r.pendingContext=i,r=La(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ra(e,r,t),n!==null&&(vu(n,e,t),za(n,e,t))}function sp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cp(e,t){sp(e,t),(e=e.alternate)&&sp(e,t)}function lp(e){if(e.tag===13||e.tag===31){var t=Qr(e,67108864);t!==null&&vu(t,e,67108864),cp(e,67108864)}}function up(e){if(e.tag===13||e.tag===31){var t=gu();t=Ze(t);var n=Qr(e,t);n!==null&&vu(n,e,t),cp(e,t)}}var dp=!0;function fp(e,t,n,r){var i=I.T;I.T=null;var a=L.p;try{L.p=2,mp(e,t,n,r)}finally{L.p=a,I.T=i}}function pp(e,t,n,r){var i=I.T;I.T=null;var a=L.p;try{L.p=8,mp(e,t,n,r)}finally{L.p=a,I.T=i}}function mp(e,t,n,r){if(dp){var i=hp(r);if(i===null)Od(e,t,r,gp,n),Dp(e,r);else if(kp(i,e,t,n,r))r.stopPropagation();else if(Dp(e,r),t&4&&-1<Ep.indexOf(e)){for(;i!==null;){var a=ft(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Be(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Ne(o);s.entanglements[1]|=c,o&=~c}sd(a),!(Rl&6)&&(iu=xe()+500,J(0,!1))}}break;case 31:case 13:s=Qr(a,2),s!==null&&vu(s,a,2),Cu(),cp(a,2)}if(a=hp(r),a===null&&Od(e,t,r,gp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Od(e,t,r,null,n)}}function hp(e){return e=Zt(e),_p(e)}var gp=null;function _p(e){if(gp=null,e=dt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return gp=e,null}function vp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Se()){case Ce:return 2;case we:return 8;case Te:case Ee:return 32;case De:return 268435456;default:return 32}default:return 32}}var yp=!1,bp=null,xp=null,Sp=null,Cp=new Map,wp=new Map,Tp=[],Ep=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Dp(e,t){switch(e){case`focusin`:case`focusout`:bp=null;break;case`dragenter`:case`dragleave`:xp=null;break;case`mouseover`:case`mouseout`:Sp=null;break;case`pointerover`:case`pointerout`:Cp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:wp.delete(t.pointerId)}}function Op(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=ft(t),t!==null&&lp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function kp(e,t,n,r,i){switch(t){case`focusin`:return bp=Op(bp,e,t,n,r,i),!0;case`dragenter`:return xp=Op(xp,e,t,n,r,i),!0;case`mouseover`:return Sp=Op(Sp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Cp.set(a,Op(Cp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,wp.set(a,Op(wp.get(a)||null,e,t,n,r,i)),!0}return!1}function Ap(e){var t=dt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,et(e.priority,function(){up(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,et(e.priority,function(){up(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=hp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xt=r,n.target.dispatchEvent(r),Xt=null}else return t=ft(n),t!==null&&lp(t),e.blockedOn=n,!1;t.shift()}return!0}function Mp(e,t,n){jp(e)&&n.delete(t)}function Np(){yp=!1,bp!==null&&jp(bp)&&(bp=null),xp!==null&&jp(xp)&&(xp=null),Sp!==null&&jp(Sp)&&(Sp=null),Cp.forEach(Mp),wp.forEach(Mp)}function Pp(e,n){e.blockedOn===n&&(e.blockedOn=null,yp||(yp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Np)))}var Fp=null;function Ip(e){Fp!==e&&(Fp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fp===e&&(Fp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(_p(r||n)===null)continue;break}var a=ft(n);a!==null&&(e.splice(t,3),t-=3,Ss(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Lp(e){function t(t){return Pp(t,e)}bp!==null&&Pp(bp,e),xp!==null&&Pp(xp,e),Sp!==null&&Pp(Sp,e),Cp.forEach(t),wp.forEach(t);for(var n=0;n<Tp.length;n++){var r=Tp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Tp.length&&(n=Tp[0],n.blockedOn===null);)Ap(n),n.blockedOn===null&&Tp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[rt]||null;if(typeof a==`function`)o||Ip(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[rt]||null)s=o.formAction;else if(_p(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Ip(n)}}}function Rp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function zp(e){this._internalRoot=e}Bp.prototype.render=zp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;op(n,gu(),e,t,null,null)},Bp.prototype.unmount=zp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;op(e.current,2,null,e,null,null),Cu(),t[it]=null}};function Bp(e){this._internalRoot=e}Bp.prototype.unstable_scheduleHydration=function(e){if(e){var t=$e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tp.length&&t!==0&&t<Tp[n].priority;n++);Tp.splice(n,0,e),n===0&&Ap(e)}};var Vp=n.version;if(Vp!==`19.2.3`)throw Error(i(527,Vp,`19.2.3`));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=u(t),e=e===null?null:d(e),e=e===null?null:e.stateNode,e};var Hp={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:I,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Up.isDisabled&&Up.supportsFiber)try{Ae=Up.inject(Hp),je=Up}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Gs,s=Ks,c=qs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=ip(e,1,!1,null,null,n,r,null,o,s,c,Rp),e[it]=t.current,Ed(e),new zp(t)}})),y=s(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=v()}))(),b=u(p(),1),x=s((e=>{var t=p().__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;e.c=function(e){return t.H.useMemoCache(e)}})),S=s(((e,t)=>{t.exports=x()})),C=S(),w=`modulepreload`,T=function(e){return`/mathhero/`+e},E={};const D=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=T(t,n),t in E)return;E[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:w,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var O=`popstate`;function k(e={}){function t(e,t){let{pathname:n=`/`,search:r=``,hash:i=``}=I(e.location.hash.substring(1));return!n.startsWith(`/`)&&!n.startsWith(`.`)&&(n=`/`+n),P(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){let n=e.document.querySelector(`base`),r=``;if(n&&n.getAttribute(`href`)){let t=e.location.href,n=t.indexOf(`#`);r=n===-1?t:t.slice(0,n)}return r+`#`+(typeof t==`string`?t:F(t))}function r(e,t){j(e.pathname.charAt(0)===`/`,`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}return L(t,n,r,e)}function A(e,t){if(e===!1||e==null)throw Error(t)}function j(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function M(){return Math.random().toString(36).substring(2,10)}function N(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?I(t):t,state:n,key:t&&t.key||r||M()}}function F({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function I(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function L(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=P(h.location,e,t);n&&n(r,e),l=u()+1;let d=N(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=P(h.location,e,t);n&&n(r,e),l=u();let i=N(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return R(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(O,d),c=e,()=>{i.removeEventListener(O,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function R(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),A(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:F(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function z(e,t,n=`/`){return B(e,t,n,!1)}function B(e,t,n,r){let i=he((typeof t==`string`?I(t):t).pathname||`/`,n);if(i==null)return null;let a=ee(e);te(a);let o=null;for(let e=0;o==null&&e<a.length;++e){let t=me(i);o=de(a[e],t,r)}return o}function V(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function ee(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;A(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=Ce([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(A(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),ee(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:le(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of H(e.path))a(e,t,!0,n)}),t}function H(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=H(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function te(e){e.sort((e,t)=>e.score===t.score?ue(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var ne=/^:[\w-]+$/,re=3,ie=2,ae=1,oe=10,se=-2,ce=e=>e===`*`;function le(e,t){let n=e.split(`/`),r=n.length;return n.some(ce)&&(r+=se),t&&(r+=ie),n.filter(e=>!ce(e)).reduce((e,t)=>e+(ne.test(t)?re:t===``?ae:oe),r)}function ue(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function de(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=fe({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=fe({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Ce([a,u.pathname]),pathnameBase:we(Ce([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=Ce([a,u.pathnameBase]))}return o}function fe(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=pe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function pe(e,t=!1,n=!0){j(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function me(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return j(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function he(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}var ge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _e(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?I(e):e,a;return n?(n=n.replace(/\/\/+/g,`/`),a=n.startsWith(`/`)?ve(n.substring(1),`/`):ve(n,t)):a=t,{pathname:a,search:Te(r),hash:Ee(i)}}function ve(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function ye(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function be(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xe(e){let t=be(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Se(e,t,n,r=!1){let i;typeof e==`string`?i=I(e):(i={...e},A(!i.pathname||!i.pathname.includes(`?`),ye(`?`,`pathname`,`search`,i)),A(!i.pathname||!i.pathname.includes(`#`),ye(`#`,`pathname`,`hash`,i)),A(!i.search||!i.search.includes(`#`),ye(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=_e(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var Ce=e=>e.join(`/`).replace(/\/\/+/g,`/`),we=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),Te=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,Ee=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e,De=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||``,this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Oe(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}function ke(e){return e.map(e=>e.route.path).filter(Boolean).join(`/`).replace(/\/\/*/g,`/`)||`/`}var Ae=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;function je(e,t){let n=e;if(typeof n!=`string`||!ge.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(Ae)try{let e=new URL(window.location.href),r=n.startsWith(`//`)?new URL(e.protocol+n):new URL(n),a=he(r.pathname,t);r.origin===e.origin&&a!=null?n=a+r.search+r.hash:i=!0}catch{j(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var Me=b.createContext(null);Me.displayName=`DataRouter`;var Ne=b.createContext(null);Ne.displayName=`DataRouterState`;var Pe=b.createContext(!1),Fe=b.createContext({isTransitioning:!1});Fe.displayName=`ViewTransition`;var Ie=b.createContext(new Map);Ie.displayName=`Fetchers`;var Le=b.createContext(null);Le.displayName=`Await`;var Re=b.createContext(null);Re.displayName=`Navigation`;var ze=b.createContext(null);ze.displayName=`Location`;var Be=b.createContext({outlet:null,matches:[],isDataRoute:!1});Be.displayName=`Route`;var Ve=b.createContext(null);Ve.displayName=`RouteError`;var He=`REACT_ROUTER_ERROR`,Ue=`REDIRECT`,We=`ROUTE_ERROR_RESPONSE`;function Ge(e){if(e.startsWith(`${He}:${Ue}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t==`object`&&t&&typeof t.status==`number`&&typeof t.statusText==`string`&&typeof t.location==`string`&&typeof t.reloadDocument==`boolean`&&typeof t.replace==`boolean`)return t}catch{}}function Ke(e){if(e.startsWith(`${He}:${We}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t==`object`&&t&&typeof t.status==`number`&&typeof t.statusText==`string`)return new De(t.status,t.statusText,t.data)}catch{}}function qe(e,{relative:t}={}){A(Je(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=b.useContext(Re),{hash:i,pathname:a,search:o}=et(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:Ce([n,a])),r.createHref({pathname:s,search:o,hash:i})}function Je(){return b.useContext(ze)!=null}function Ye(){return A(Je(),`useLocation() may be used only in the context of a <Router> component.`),b.useContext(ze).location}var Xe=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function Ze(e){b.useContext(Re).static||b.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=b.useContext(Be);return e?yt():$e()}function $e(){A(Je(),`useNavigate() may be used only in the context of a <Router> component.`);let e=b.useContext(Me),{basename:t,navigator:n}=b.useContext(Re),{matches:r}=b.useContext(Be),{pathname:i}=Ye(),a=JSON.stringify(xe(r)),o=b.useRef(!1);return Ze(()=>{o.current=!0}),b.useCallback((r,s={})=>{if(j(o.current,Xe),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=Se(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:Ce([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}b.createContext(null);function et(e,{relative:t}={}){let{matches:n}=b.useContext(Be),{pathname:r}=Ye(),i=JSON.stringify(xe(n));return b.useMemo(()=>Se(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function tt(e,t){return nt(e,t)}function nt(e,t,n,r,i){A(Je(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=b.useContext(Re),{matches:o}=b.useContext(Be),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;xt(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=Ye(),p;if(t){let e=typeof t==`string`?I(t):t;A(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=z(e,{pathname:h});j(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),j(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=lt(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ce([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:Ce([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?b.createElement(ze.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},_):_}function rt(){let e=vt(),t=Oe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=b.createElement(b.Fragment,null,b.createElement(`p`,null,` Hey developer `),b.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,b.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,b.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),b.createElement(b.Fragment,null,b.createElement(`h2`,null,`Unexpected Application Error!`),b.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?b.createElement(`pre`,{style:i},n):null,o)}var it=b.createElement(rt,null),at=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){let e=this.state.error;if(this.context&&typeof e==`object`&&e&&`digest`in e&&typeof e.digest==`string`){let t=Ke(e.digest);t&&(e=t)}let t=e===void 0?this.props.children:b.createElement(Be.Provider,{value:this.props.routeContext},b.createElement(Ve.Provider,{value:e,children:this.props.component}));return this.context?b.createElement(st,{error:e},t):t}};at.contextType=Pe;var ot=new WeakMap;function st({children:e,error:t}){let{basename:n}=b.useContext(Re);if(typeof t==`object`&&t&&`digest`in t&&typeof t.digest==`string`){let e=Ge(t.digest);if(e){let r=ot.get(t);if(r)throw r;let i=je(e.location,n);if(Ae&&!ot.get(t))if(i.isExternal||e.reloadDocument)window.location.href=i.absoluteURL||i.to;else{let n=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:e.replace}));throw ot.set(t,n),n}return b.createElement(`meta`,{httpEquiv:`refresh`,content:`0;url=${i.absoluteURL||i.to}`})}}return e}function ct({routeContext:e,match:t,children:n}){let r=b.useContext(Me);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(Be.Provider,{value:e},n)}function lt(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);A(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}let l=n&&r?(e,t)=>{r(e,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:ke(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,r,i)=>{let u,d=!1,f=null,p=null;n&&(u=o&&r.route.id?o[r.route.id]:void 0,f=r.route.errorElement||it,s&&(c<0&&i===0?(xt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),h=()=>{let t;return t=u?f:d?p:r.route.Component?b.createElement(r.route.Component,null):r.route.element?r.route.element:e,b.createElement(ct,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?b.createElement(at,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:l}):h()},null)}function ut(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dt(e){let t=b.useContext(Me);return A(t,ut(e)),t}function ft(e){let t=b.useContext(Ne);return A(t,ut(e)),t}function pt(e){let t=b.useContext(Be);return A(t,ut(e)),t}function mt(e){let t=pt(e),n=t.matches[t.matches.length-1];return A(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function ht(){return mt(`useRouteId`)}function gt(){return ft(`useNavigation`).navigation}function _t(){let{matches:e,loaderData:t}=ft(`useMatches`);return b.useMemo(()=>e.map(e=>V(e,t)),[e,t])}function vt(){let e=b.useContext(Ve),t=ft(`useRouteError`),n=mt(`useRouteError`);return e===void 0?t.errors?.[n]:e}function yt(){let{router:e}=dt(`useNavigate`),t=mt(`useNavigate`),n=b.useRef(!1);return Ze(()=>{n.current=!0}),b.useCallback(async(r,i={})=>{j(n.current,Xe),n.current&&(typeof r==`number`?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var bt={};function xt(e,t,n){!t&&!bt[e]&&(bt[e]=!0,j(!1,n))}b.useOptimistic,b.memo(St);function St({routes:e,future:t,state:n,onError:r}){return nt(e,void 0,n,r,t)}function Ct(e){A(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function wt({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1,unstable_useTransitions:o}){A(!Je(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let s=e.replace(/^\/*/,`/`),c=b.useMemo(()=>({basename:s,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[s,i,a,o]);typeof n==`string`&&(n=I(n));let{pathname:l=`/`,search:u=``,hash:d=``,state:f=null,key:p=`default`}=n,m=b.useMemo(()=>{let e=he(l,s);return e==null?null:{location:{pathname:e,search:u,hash:d,state:f,key:p},navigationType:r}},[s,l,u,d,f,p,r]);return j(m!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:b.createElement(Re.Provider,{value:c},b.createElement(ze.Provider,{children:t,value:m}))}function Tt({children:e,location:t}){return tt(Et(e),t)}function Et(e,t=[]){let n=[];return b.Children.forEach(e,(e,r)=>{if(!b.isValidElement(e))return;let i=[...t,r];if(e.type===b.Fragment){n.push.apply(n,Et(e.props.children,i));return}A(e.type===Ct,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),A(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Et(e.props.children,i)),n.push(a)}),n}var Dt=`get`,Ot=`application/x-www-form-urlencoded`;function kt(e){return typeof HTMLElement<`u`&&e instanceof HTMLElement}function At(e){return kt(e)&&e.tagName.toLowerCase()===`button`}function jt(e){return kt(e)&&e.tagName.toLowerCase()===`form`}function Mt(e){return kt(e)&&e.tagName.toLowerCase()===`input`}function Nt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Pt(e,t){return e.button===0&&(!t||t===`_self`)&&!Nt(e)}var Ft=null;function It(){if(Ft===null)try{new FormData(document.createElement(`form`),0),Ft=!1}catch{Ft=!0}return Ft}var Lt=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Rt(e){return e!=null&&!Lt.has(e)?(j(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ot}"`),null):e}function zt(e,t){let n,r,i,a,o;if(jt(e)){let o=e.getAttribute(`action`);r=o?he(o,t):null,n=e.getAttribute(`method`)||Dt,i=Rt(e.getAttribute(`enctype`))||Ot,a=new FormData(e)}else if(At(e)||Mt(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?he(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||Dt,i=Rt(e.getAttribute(`formenctype`))||Rt(o.getAttribute(`enctype`))||Ot,a=new FormData(o,e),!It()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(kt(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=Dt,r=null,i=Ot,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var Bt={"&":`\\u0026`,">":`\\u003e`,"<":`\\u003c`,"\u2028":`\\u2028`,"\u2029":`\\u2029`},Vt=/[&><\u2028\u2029]/g;function Ht(e){return e.replace(Vt,e=>Bt[e])}function Ut(e,t){if(e===!1||e==null)throw Error(t)}function Wt(e,t,n,r){let i=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return n?i.pathname.endsWith(`/`)?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname===`/`?i.pathname=`_root.${r}`:t&&he(i.pathname,t)===`/`?i.pathname=`${t.replace(/\/$/,``)}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,``)}.${r}`,i}async function Gt(e,t){if(e.id in t)return t[e.id];try{let n=await D(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Kt(e){return e!=null&&typeof e.page==`string`}function qt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function Jt(e,t,n){return $t((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Gt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(qt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function Yt(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function Xt(e,t,{includeHydrateFallback:n}={}){return Zt(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Zt(e){return[...new Set(e)]}function Qt(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function $t(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Kt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(Qt(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function en(){let e=b.useContext(Me);return Ut(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function tn(){let e=b.useContext(Ne);return Ut(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var nn=b.createContext(void 0);nn.displayName=`FrameworkContext`;function rn(){let e=b.useContext(nn);return Ut(e,`You must render this element inside a <HydratedRouter> element`),e}function an(e,t){let n=b.useContext(nn),[r,i]=b.useState(!1),[a,o]=b.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=b.useRef(null);b.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),b.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:on(s,p),onBlur:on(c,m),onMouseEnter:on(l,p),onMouseLeave:on(u,m),onTouchStart:on(d,p)}]:[a,f,{}]:[!1,f,{}]}function on(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function sn({page:e,...t}){let{router:n}=en(),r=b.useMemo(()=>z(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?b.createElement(ln,{page:e,matches:r,...t}):null}function cn(e){let{manifest:t,routeModules:n}=rn(),[r,i]=b.useState([]);return b.useEffect(()=>{let r=!1;return Jt(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function ln({page:e,matches:t,...n}){let r=Ye(),{future:i,manifest:a,routeModules:o}=rn(),{basename:s}=en(),{loaderData:c,matches:l}=tn(),u=b.useMemo(()=>Yt(e,t,l,a,r,`data`),[e,t,l,a,r]),d=b.useMemo(()=>Yt(e,t,l,a,r,`assets`),[e,t,l,a,r]),f=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{let t=a.routes[e.route.id];!t||!t.hasLoader||(!u.some(t=>t.route.id===e.route.id)&&e.route.id in c&&o[e.route.id]?.shouldRevalidate||t.hasClientLoader?l=!0:n.add(e.route.id))}),n.size===0)return[];let d=Wt(e,s,i.unstable_trailingSlashAwareDataRequests,`data`);return l&&n.size>0&&d.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[d.pathname+d.search]},[s,i.unstable_trailingSlashAwareDataRequests,c,r,a,u,t,e,o]),p=b.useMemo(()=>Xt(d,a),[d,a]),m=cn(d);return b.createElement(b.Fragment,null,f.map(e=>b.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),p.map(e=>b.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),m.map(({key:e,link:t})=>b.createElement(`link`,{key:e,nonce:n.nonce,...t,crossOrigin:t.crossOrigin??n.crossOrigin})))}function un(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var dn=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{dn&&(window.__reactRouterVersion=`7.13.0`)}catch{}function fn({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=b.useRef();i.current??=k({window:r,v5Compat:!0});let a=i.current,[o,s]=b.useState({action:a.action,location:a.location}),c=b.useCallback(e=>{n===!1?s(e):b.startTransition(()=>s(e))},[n]);return b.useLayoutEffect(()=>a.listen(c),[a,c]),b.createElement(wt,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}function pn({basename:e,children:t,history:n,unstable_useTransitions:r}){let[i,a]=b.useState({action:n.action,location:n.location}),o=b.useCallback(e=>{r===!1?a(e):b.startTransition(()=>a(e))},[r]);return b.useLayoutEffect(()=>n.listen(o),[n,o]),b.createElement(wt,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:n,unstable_useTransitions:r})}pn.displayName=`unstable_HistoryRouter`;var mn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hn=b.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,unstable_defaultShouldRevalidate:d,...f},p){let{basename:m,unstable_useTransitions:h}=b.useContext(Re),g=typeof c==`string`&&mn.test(c),_=je(c,m);c=_.to;let v=qe(c,{relative:r}),[y,x,S]=an(n,f),C=Sn(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:h});function w(t){e&&e(t),t.defaultPrevented||C(t)}let T=b.createElement(`a`,{...f,...S,href:_.absoluteURL||v,onClick:_.isExternal||i?e:w,ref:un(p,x),target:s,"data-discover":!g&&t===`render`?`true`:void 0});return y&&!g?b.createElement(b.Fragment,null,T,b.createElement(sn,{page:v})):T});hn.displayName=`Link`;var gn=b.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=et(a,{relative:c.relative}),d=Ye(),f=b.useContext(Ne),{navigator:p,basename:m}=b.useContext(Re),h=f!=null&&Mn(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=d.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&m&&(v=he(v,m)||v);let y=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,x=_===g||!r&&_.startsWith(g)&&_.charAt(y)===`/`,S=v!=null&&(v===g||!r&&v.startsWith(g)&&v.charAt(g.length)===`/`),C={isActive:x,isPending:S,isTransitioning:h},w=x?e:void 0,T;T=typeof n==`function`?n(C):[n,x?`active`:null,S?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(C):i;return b.createElement(hn,{...c,"aria-current":w,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(C):s)});gn.displayName=`NavLink`;var _n=b.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Dt,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m)=>{let{unstable_useTransitions:h}=b.useContext(Re),g=Tn(),_=En(s,{relative:l}),v=o.toLowerCase()===`get`?`get`:`post`,y=typeof s==`string`&&mn.test(s);return b.createElement(`form`,{ref:m,method:v,action:_,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o,p=()=>g(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f});h&&n!==!1?b.startTransition(()=>p()):p()},...p,"data-discover":!y&&e===`render`?`true`:void 0})});_n.displayName=`Form`;function vn({getKey:e,storageKey:t,...n}){let r=b.useContext(nn),{basename:i}=b.useContext(Re),a=Ye(),o=_t();An({getKey:e,storageKey:t});let s=b.useMemo(()=>{if(!r||!e)return null;let t=kn(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return b.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${Ht(JSON.stringify(t||Dn))}, ${Ht(JSON.stringify(s))})`}})}vn.displayName=`ScrollRestoration`;function yn(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bn(e){let t=b.useContext(Me);return A(t,yn(e)),t}function xn(e){let t=b.useContext(Ne);return A(t,yn(e)),t}function Sn(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s,unstable_useTransitions:c}={}){let l=Qe(),u=Ye(),d=et(e,{relative:a});return b.useCallback(f=>{if(Pt(f,t)){f.preventDefault();let t=n===void 0?F(u)===F(d):n,p=()=>l(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s});c?b.startTransition(()=>p()):p()}},[u,l,d,n,r,t,e,i,a,o,s,c])}var Cn=0,wn=()=>`__${String(++Cn)}__`;function Tn(){let{router:e}=bn(`useSubmit`),{basename:t}=b.useContext(Re),n=ht(),r=e.fetch,i=e.navigate;return b.useCallback(async(e,a={})=>{let{action:o,method:s,encType:c,formData:l,body:u}=zt(e,t);a.navigate===!1?await r(a.fetcherKey||wn(),n,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,flushSync:a.flushSync}):await i(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function En(e,{relative:t}={}){let{basename:n}=b.useContext(Re),r=b.useContext(Be);A(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...et(e||`.`,{relative:t})},o=Ye();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:Ce([n,a.pathname])),F(a)}var Dn=`react-router-scroll-positions`,On={};function kn(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:he(e.pathname,n)||e.pathname},t)),i??=e.key,i}function An({getKey:e,storageKey:t}={}){let{router:n}=bn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=xn(`useScrollRestoration`),{basename:a}=b.useContext(Re),o=Ye(),s=_t(),c=gt();b.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),jn(b.useCallback(()=>{if(c.state===`idle`){let t=kn(o,s,a,e);On[t]=window.scrollY}try{sessionStorage.setItem(t||Dn,JSON.stringify(On))}catch(e){j(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(b.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||Dn);e&&(On=JSON.parse(e))}catch{}},[t]),b.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(On,()=>window.scrollY,e?(t,n)=>kn(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),b.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{j(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function jn(e,t){let{capture:n}=t||{};b.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function Mn(e,{relative:t}={}){let n=b.useContext(Fe);A(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bn(`useViewTransitionState`),i=et(e,{relative:t});if(!n.isTransitioning)return!1;let a=he(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=he(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fe(i.pathname,o)!=null||fe(i.pathname,a)!=null}var Nn=s((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),U=s(((e,t)=>{t.exports=Nn()}))(),Pn=(0,b.createContext)(void 0);function Fn(e){let t=(0,C.c)(9),{children:n}=e,[r,i]=(0,b.useState)(Ln),a,o;t[0]===r?(a=t[1],o=t[2]):(a=()=>{let e=document.documentElement;r===`dark`?e.classList.add(`dark`):e.classList.remove(`dark`),localStorage.setItem(`theme`,r)},o=[r],t[0]=r,t[1]=a,t[2]=o),(0,b.useEffect)(a,o);let s;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(s=()=>{i(In)},t[3]=s):s=t[3];let c=s,l;t[4]===r?l=t[5]:(l={theme:r,toggleTheme:c},t[4]=r,t[5]=l);let u;return t[6]!==n||t[7]!==l?(u=(0,U.jsx)(Pn.Provider,{value:l,children:n}),t[6]=n,t[7]=l,t[8]=u):u=t[8],u}function In(e){return e===`light`?`dark`:`light`}function Ln(){return localStorage.getItem(`theme`)||`dark`}function Rn(){let e=(0,b.useContext)(Pn);if(e===void 0)throw Error(`useTheme must be used within a ThemeProvider`);return e}var zn=(0,b.createContext)({});function Bn(e){let t=(0,b.useRef)(null);return t.current===null&&(t.current=e()),t.current}var Vn=typeof window<`u`,Hn=Vn?b.useLayoutEffect:b.useEffect,Un=(0,b.createContext)(null);function Wn(e,t){e.indexOf(t)===-1&&e.push(t)}function Gn(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Kn([...e],t,n){let r=t<0?e.length+t:t;if(r>=0&&r<e.length){let r=n<0?e.length+n:n,[i]=e.splice(t,1);e.splice(r,0,i)}return e}var qn=(e,t,n)=>n>t?t:n<e?e:n,Jn={},Yn=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Xn(e){return typeof e==`object`&&!!e}var Zn=e=>/^0[^.\s]+$/u.test(e);function Qn(e){let t;return()=>(t===void 0&&(t=e()),t)}var $n=e=>e,er=(e,t)=>n=>t(e(n)),tr=(...e)=>e.reduce(er),nr=(e,t,n)=>{let r=t-e;return r===0?1:(n-e)/r},rr=class{constructor(){this.subscriptions=[]}add(e){return Wn(this.subscriptions,e),()=>Gn(this.subscriptions,e)}notify(e,t,n){let r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,n);else for(let i=0;i<r;i++){let r=this.subscriptions[i];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}},ir=e=>e*1e3,ar=e=>e/1e3;function or(e,t){return t?e*(1e3/t):0}var sr=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,cr=1e-7,lr=12;function ur(e,t,n,r,i){let a,o,s=0;do o=t+(n-t)/2,a=sr(o,r,i)-e,a>0?n=o:t=o;while(Math.abs(a)>cr&&++s<lr);return o}function dr(e,t,n,r){if(e===t&&n===r)return $n;let i=t=>ur(t,0,1,e,n);return e=>e===0||e===1?e:sr(i(e),t,r)}var fr=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pr=e=>t=>1-e(1-t),mr=dr(.33,1.53,.69,.99),hr=pr(mr),gr=fr(hr),_r=e=>(e*=2)<1?.5*hr(e):.5*(2-2**(-10*(e-1))),vr=e=>1-Math.sin(Math.acos(e)),yr=pr(vr),br=fr(vr),xr=dr(.42,0,1,1),Sr=dr(0,0,.58,1),Cr=dr(.42,0,.58,1),wr=e=>Array.isArray(e)&&typeof e[0]!=`number`,Tr=e=>Array.isArray(e)&&typeof e[0]==`number`,Er={linear:$n,easeIn:xr,easeInOut:Cr,easeOut:Sr,circIn:vr,circInOut:br,circOut:yr,backIn:hr,backInOut:gr,backOut:mr,anticipate:_r},Dr=e=>typeof e==`string`,Or=e=>{if(Tr(e)){e.length;let[t,n,r,i]=e;return dr(t,n,r,i)}else if(Dr(e))return Er[e],`${e}`,Er[e];return e},kr=[`setup`,`read`,`resolveKeyframes`,`preUpdate`,`update`,`preRender`,`render`,`postRender`],Ar={value:null,addProjectionMetrics:null};function jr(e,t){let n=new Set,r=new Set,i=!1,a=!1,o=new WeakSet,s={delta:0,timestamp:0,isProcessing:!1},c=0;function l(t){o.has(t)&&(u.schedule(t),e()),c++,t(s)}let u={schedule:(e,t=!1,a=!1)=>{let s=a&&i?n:r;return t&&o.add(e),s.has(e)||s.add(e),e},cancel:e=>{r.delete(e),o.delete(e)},process:e=>{if(s=e,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),t&&Ar.value&&Ar.value.frameloop[t].push(c),c=0,n.clear(),i=!1,a&&(a=!1,u.process(e))}};return u}var Mr=40;function Nr(e,t){let n=!1,r=!0,i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=kr.reduce((e,n)=>(e[n]=jr(a,t?n:void 0),e),{}),{setup:s,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:f,render:p,postRender:m}=o,h=()=>{let a=Jn.useManualTiming?i.timestamp:performance.now();n=!1,Jn.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(a-i.timestamp,Mr),1)),i.timestamp=a,i.isProcessing=!0,s.process(i),c.process(i),l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(h))},g=()=>{n=!0,r=!0,i.isProcessing||e(h)};return{schedule:kr.reduce((e,t)=>{let r=o[t];return e[t]=(e,t=!1,i=!1)=>(n||g(),r.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<kr.length;t++)o[kr[t]].cancel(e)},state:i,steps:o}}var{schedule:Pr,cancel:Fr,state:Ir,steps:Lr}=Nr(typeof requestAnimationFrame<`u`?requestAnimationFrame:$n,!0),Rr;function zr(){Rr=void 0}var Br={now:()=>(Rr===void 0&&Br.set(Ir.isProcessing||Jn.useManualTiming?Ir.timestamp:performance.now()),Rr),set:e=>{Rr=e,queueMicrotask(zr)}},Vr={layout:0,mainThread:0,waapi:0},Hr=e=>t=>typeof t==`string`&&t.startsWith(e),Ur=Hr(`--`),Wr=Hr(`var(--`),Gr=e=>Wr(e)?Kr.test(e.split(`/*`)[0].trim()):!1,Kr=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function qr(e){return typeof e==`string`?e.split(`/*`)[0].includes(`var(--`):!1}var Jr={test:e=>typeof e==`number`,parse:parseFloat,transform:e=>e},Yr={...Jr,transform:e=>qn(0,1,e)},Xr={...Jr,default:1},Zr=e=>Math.round(e*1e5)/1e5,Qr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $r(e){return e==null}var ei=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ti=(e,t)=>n=>!!(typeof n==`string`&&ei.test(n)&&n.startsWith(e)||t&&!$r(n)&&Object.prototype.hasOwnProperty.call(n,t)),ni=(e,t,n)=>r=>{if(typeof r!=`string`)return r;let[i,a,o,s]=r.match(Qr);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:s===void 0?1:parseFloat(s)}},ri=e=>qn(0,255,e),ii={...Jr,transform:e=>Math.round(ri(e))},ai={test:ti(`rgb`,`red`),parse:ni(`red`,`green`,`blue`),transform:({red:e,green:t,blue:n,alpha:r=1})=>`rgba(`+ii.transform(e)+`, `+ii.transform(t)+`, `+ii.transform(n)+`, `+Zr(Yr.transform(r))+`)`};function oi(e){let t=``,n=``,r=``,i=``;return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}var si={test:ti(`#`),parse:oi,transform:ai.transform},ci=e=>({test:t=>typeof t==`string`&&t.endsWith(e)&&t.split(` `).length===1,parse:parseFloat,transform:t=>`${t}${e}`}),li=ci(`deg`),ui=ci(`%`),W=ci(`px`),di=ci(`vh`),fi=ci(`vw`),pi=(()=>({...ui,parse:e=>ui.parse(e)/100,transform:e=>ui.transform(e*100)}))(),mi={test:ti(`hsl`,`hue`),parse:ni(`hue`,`saturation`,`lightness`),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>`hsla(`+Math.round(e)+`, `+ui.transform(Zr(t))+`, `+ui.transform(Zr(n))+`, `+Zr(Yr.transform(r))+`)`},hi={test:e=>ai.test(e)||si.test(e)||mi.test(e),parse:e=>ai.test(e)?ai.parse(e):mi.test(e)?mi.parse(e):si.parse(e),transform:e=>typeof e==`string`?e:e.hasOwnProperty(`red`)?ai.transform(e):mi.transform(e),getAnimatableNone:e=>{let t=hi.parse(e);return t.alpha=0,hi.transform(t)}},gi=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _i(e){return isNaN(e)&&typeof e==`string`&&(e.match(Qr)?.length||0)+(e.match(gi)?.length||0)>0}var vi=`number`,yi=`color`,bi=`var`,xi=`var(`,Si="${}",Ci=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wi(e){let t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[],a=0;return{values:n,split:t.replace(Ci,e=>(hi.test(e)?(r.color.push(a),i.push(yi),n.push(hi.parse(e))):e.startsWith(xi)?(r.var.push(a),i.push(bi),n.push(e)):(r.number.push(a),i.push(vi),n.push(parseFloat(e))),++a,Si)).split(Si),indexes:r,types:i}}function Ti(e){return wi(e).values}function Ei(e){let{split:t,types:n}=wi(e),r=t.length;return e=>{let i=``;for(let a=0;a<r;a++)if(i+=t[a],e[a]!==void 0){let t=n[a];t===vi?i+=Zr(e[a]):t===yi?i+=hi.transform(e[a]):i+=e[a]}return i}}var Di=e=>typeof e==`number`?0:hi.test(e)?hi.getAnimatableNone(e):e;function Oi(e){let t=Ti(e);return Ei(e)(t.map(Di))}var ki={test:_i,parse:Ti,createTransformer:Ei,getAnimatableNone:Oi};function Ai(e,t,n){return n<0&&(n+=1),n>1&&--n,n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ji({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{let r=n<.5?n*(1+t):n+t-n*t,s=2*n-r;i=Ai(s,r,e+1/3),a=Ai(s,r,e),o=Ai(s,r,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Mi(e,t){return n=>n>0?t:e}var Ni=(e,t,n)=>e+(t-e)*n,Pi=(e,t,n)=>{let r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Fi=[si,ai,mi],Ii=e=>Fi.find(t=>t.test(e));function Li(e){let t=Ii(e);if(`${e}`,!t)return!1;let n=t.parse(e);return t===mi&&(n=ji(n)),n}var Ri=(e,t)=>{let n=Li(e),r=Li(t);if(!n||!r)return Mi(e,t);let i={...n};return e=>(i.red=Pi(n.red,r.red,e),i.green=Pi(n.green,r.green,e),i.blue=Pi(n.blue,r.blue,e),i.alpha=Ni(n.alpha,r.alpha,e),ai.transform(i))},zi=new Set([`none`,`hidden`]);function Bi(e,t){return zi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Vi(e,t){return n=>Ni(e,t,n)}function Hi(e){return typeof e==`number`?Vi:typeof e==`string`?Gr(e)?Mi:hi.test(e)?Ri:Ki:Array.isArray(e)?Ui:typeof e==`object`?hi.test(e)?Ri:Wi:Mi}function Ui(e,t){let n=[...e],r=n.length,i=e.map((e,n)=>Hi(e)(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=i[t](e);return n}}function Wi(e,t){let n={...e,...t},r={};for(let i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=Hi(e[i])(e[i],t[i]));return e=>{for(let t in r)n[t]=r[t](e);return n}}function Gi(e,t){let n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){let a=t.types[i],o=e.indexes[a][r[a]];n[i]=e.values[o]??0,r[a]++}return n}var Ki=(e,t)=>{let n=ki.createTransformer(t),r=wi(e),i=wi(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?zi.has(e)&&!i.values.length||zi.has(t)&&!r.values.length?Bi(e,t):tr(Ui(Gi(r,i),i.values),n):(`${e}${t}`,Mi(e,t))};function qi(e,t,n){return typeof e==`number`&&typeof t==`number`&&typeof n==`number`?Ni(e,t,n):Hi(e)(e,t)}var Ji=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>Pr.update(t,e),stop:()=>Fr(t),now:()=>Ir.isProcessing?Ir.timestamp:Br.now()}},Yi=(e,t,n=10)=>{let r=``,i=Math.max(Math.round(t/n),2);for(let t=0;t<i;t++)r+=Math.round(e(t/(i-1))*1e4)/1e4+`, `;return`linear(${r.substring(0,r.length-2)})`},Xi=2e4;function Zi(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}function Qi(e,t=100,n){let r=n({...e,keyframes:[0,t]}),i=Math.min(Zi(r),Xi);return{type:`keyframes`,ease:e=>r.next(i*e).value/t,duration:ar(i)}}var $i=5;function ea(e,t,n){let r=Math.max(t-$i,0);return or(n-e(r),t-r)}var ta={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},na=.001;function ra({duration:e=ta.duration,bounce:t=ta.bounce,velocity:n=ta.velocity,mass:r=ta.mass}){let i,a;ta.maxDuration;let o=1-t;o=qn(ta.minDamping,ta.maxDamping,o),e=qn(ta.minDuration,ta.maxDuration,ar(e)),o<1?(i=t=>{let r=t*o,i=r*e,a=r-n,s=oa(t,o),c=Math.exp(-i);return na-a/s*c},a=t=>{let r=t*o*e,a=r*n+n,s=o**2*t**2*e,c=Math.exp(-r),l=oa(t**2,o);return(-i(t)+na>0?-1:1)*((a-s)*c)/l}):(i=t=>{let r=Math.exp(-t*e),i=(t-n)*e+1;return-na+r*i},a=t=>Math.exp(-t*e)*((n-t)*(e*e)));let s=5/e,c=aa(i,a,s);if(e=ir(e),isNaN(c))return{stiffness:ta.stiffness,damping:ta.damping,duration:e};{let t=c**2*r;return{stiffness:t,damping:o*2*Math.sqrt(r*t),duration:e}}}var ia=12;function aa(e,t,n){let r=n;for(let n=1;n<ia;n++)r-=e(r)/t(r);return r}function oa(e,t){return e*Math.sqrt(1-t*t)}var sa=[`duration`,`bounce`],ca=[`stiffness`,`damping`,`mass`];function la(e,t){return t.some(t=>e[t]!==void 0)}function ua(e){let t={velocity:ta.velocity,stiffness:ta.stiffness,damping:ta.damping,mass:ta.mass,isResolvedFromDuration:!1,...e};if(!la(e,ca)&&la(e,sa))if(e.visualDuration){let n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*qn(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ta.mass,stiffness:i,damping:a}}else{let n=ra(e);t={...t,...n,mass:ta.mass},t.isResolvedFromDuration=!0}return t}function da(e=ta.visualDuration,t=ta.bounce){let n=typeof e==`object`?e:{visualDuration:e,keyframes:[0,1],bounce:t},{restSpeed:r,restDelta:i}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],s={done:!1,value:a},{stiffness:c,damping:l,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=ua({...n,velocity:-ar(n.velocity||0)}),m=f||0,h=l/(2*Math.sqrt(c*u)),g=o-a,_=ar(Math.sqrt(c/u)),v=Math.abs(g)<5;r||=v?ta.restSpeed.granular:ta.restSpeed.default,i||=v?ta.restDelta.granular:ta.restDelta.default;let y;if(h<1){let e=oa(_,h);y=t=>o-Math.exp(-h*_*t)*((m+h*_*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}else if(h===1)y=e=>o-Math.exp(-_*e)*(g+(m+_*g)*e);else{let e=_*Math.sqrt(h*h-1);y=t=>{let n=Math.exp(-h*_*t),r=Math.min(e*t,300);return o-n*((m+h*_*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}let b={calculatedDuration:p&&d||null,next:e=>{let t=y(e);if(p)s.done=e>=d;else{let n=e===0?m:0;h<1&&(n=e===0?ir(m):ea(y,e,t));let a=Math.abs(n)<=r,c=Math.abs(o-t)<=i;s.done=a&&c}return s.value=s.done?o:t,s},toString:()=>{let e=Math.min(Zi(b),Xi),t=Yi(t=>b.next(e*t).value,e,30);return e+`ms `+t},toTransition:()=>{}};return b}da.applyToOptions=e=>{let t=Qi(e,100,da);return e.ease=t.ease,e.duration=ir(t.duration),e.type=`keyframes`,e};function fa({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:c,restDelta:l=.5,restSpeed:u}){let d=e[0],f={done:!1,value:d},p=e=>s!==void 0&&e<s||c!==void 0&&e>c,m=e=>s===void 0?c:c===void 0||Math.abs(s-e)<Math.abs(c-e)?s:c,h=n*t,g=d+h,_=o===void 0?g:o(g);_!==g&&(h=_-d);let v=e=>-h*Math.exp(-e/r),y=e=>_+v(e),b=e=>{let t=v(e),n=y(e);f.done=Math.abs(t)<=l,f.value=f.done?_:n},x,S,C=e=>{p(f.value)&&(x=e,S=da({keyframes:[f.value,m(f.value)],velocity:ea(y,e,f.value),damping:i,stiffness:a,restDelta:l,restSpeed:u}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return!S&&x===void 0&&(t=!0,b(e),C(e)),x!==void 0&&e>=x?S.next(e-x):(!t&&b(e),f)}}}function pa(e,t,n){let r=[],i=n||Jn.mix||qi,a=e.length-1;for(let n=0;n<a;n++){let a=i(e[n],e[n+1]);t&&(a=tr(Array.isArray(t)?t[n]||$n:t,a)),r.push(a)}return r}function ma(e,t,{clamp:n=!0,ease:r,mixer:i}={}){let a=e.length;if(t.length,a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];let o=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());let s=pa(t,r,i),c=s.length,l=n=>{if(o&&n<e[0])return t[0];let r=0;if(c>1)for(;r<e.length-2&&!(n<e[r+1]);r++);let i=nr(e[r],e[r+1],n);return s[r](i)};return n?t=>l(qn(e[0],e[a-1],t)):l}function ha(e,t){let n=e[e.length-1];for(let r=1;r<=t;r++){let i=nr(0,t,r);e.push(Ni(n,1,i))}}function ga(e){let t=[0];return ha(t,e.length-1),t}function _a(e,t){return e.map(e=>e*t)}function va(e,t){return e.map(()=>t||Cr).splice(0,e.length-1)}function ya({duration:e=300,keyframes:t,times:n,ease:r=`easeInOut`}){let i=wr(r)?r.map(Or):Or(r),a={done:!1,value:t[0]},o=ma(_a(n&&n.length===t.length?n:ga(t),e),t,{ease:Array.isArray(i)?i:va(t,i)});return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}var ba=e=>e!==null;function xa(e,{repeat:t,repeatType:n=`loop`},r,i=1){let a=e.filter(ba),o=i<0||t&&n!==`loop`&&t%2==1?0:a.length-1;return!o||r===void 0?a[o]:r}var Sa={decay:fa,inertia:fa,tween:ya,keyframes:ya,spring:da};function Ca(e){typeof e.type==`string`&&(e.type=Sa[e.type])}var wa=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}},Ta=e=>e/100,Ea=class extends wa{constructor(e){super(),this.state=`idle`,this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==Br.now()&&this.tick(Br.now()),this.isStopped=!0,this.state!==`idle`&&(this.teardown(),this.options.onStop?.())},Vr.mainThread++,this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){let{options:e}=this;Ca(e);let{type:t=ya,repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:a=0}=e,{keyframes:o}=e,s=t||ya;s!==ya&&typeof o[0]!=`number`&&(this.mixKeyframes=tr(Ta,qi(o[0],o[1])),o=[0,100]);let c=s({...e,keyframes:o});i===`mirror`&&(this.mirroredGenerator=s({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Zi(c));let{calculatedDuration:l}=c;this.calculatedDuration=l,this.resolvedDuration=l+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=c}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime===null?this.currentTime=t:this.currentTime=this.holdTime}tick(e,t=!1){let{generator:n,totalDuration:r,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:s}=this;if(this.startTime===null)return n.next(0);let{delay:c=0,keyframes:l,repeat:u,repeatType:d,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:h}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),this.state===`finished`&&this.holdTime===null&&(this.currentTime=r);let v=this.currentTime,y=n;if(u){let e=Math.min(this.currentTime,r)/o,t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),n===1&&t--,t=Math.min(t,u+1),t%2&&(d===`reverse`?(n=1-n,f&&(n-=f/o)):d===`mirror`&&(y=a)),v=qn(0,1,n)*o}let b=_?{done:!1,value:l[0]}:y.next(v);i&&(b.value=i(b.value));let{done:x}=b;!_&&s!==null&&(x=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);let S=this.holdTime===null&&(this.state===`finished`||this.state===`running`&&x);return S&&p!==fa&&(b.value=xa(l,this.options,h,this.speed)),m&&m(b.value),S&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return ar(this.calculatedDuration)}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(this.currentTime)}set time(e){e=ir(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Br.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ar(this.currentTime))}play(){if(this.isStopped)return;let{driver:e=Ji,startTime:t}=this.options;this.driver||=e(e=>this.tick(e)),this.options.onPlay?.();let n=this.driver.now();this.state===`finished`?(this.updateFinished(),this.startTime=n):this.holdTime===null?this.startTime||=t??n:this.startTime=n-this.holdTime,this.state===`finished`&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state=`running`,this.driver.start()}pause(){this.state=`paused`,this.updateTime(Br.now()),this.holdTime=this.currentTime}complete(){this.state!==`running`&&this.play(),this.state=`finished`,this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state=`finished`,this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state=`idle`,this.stopDriver(),this.startTime=this.holdTime=null,Vr.mainThread--}stopDriver(){this.driver&&=(this.driver.stop(),void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type=`keyframes`,this.options.ease=`linear`,this.initAnimation()),this.driver?.stop(),e.observe(this)}};function Da(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}var Oa=e=>e*180/Math.PI,ka=e=>G(Oa(Math.atan2(e[1],e[0]))),Aa={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ka,rotateZ:ka,skewX:e=>Oa(Math.atan(e[1])),skewY:e=>Oa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},G=e=>(e%=360,e<0&&(e+=360),e),ja=ka,Ma=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Na=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Pa={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ma,scaleY:Na,scale:e=>(Ma(e)+Na(e))/2,rotateX:e=>G(Oa(Math.atan2(e[6],e[5]))),rotateY:e=>G(Oa(Math.atan2(-e[2],e[0]))),rotateZ:ja,rotate:ja,skewX:e=>Oa(Math.atan(e[4])),skewY:e=>Oa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Fa(e){return e.includes(`scale`)?1:0}function Ia(e,t){if(!e||e===`none`)return Fa(t);let n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u),r,i;if(n)r=Pa,i=n;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Aa,i=t}if(!i)return Fa(t);let a=r[t],o=i[1].split(`,`).map(Ra);return typeof a==`function`?a(o):o[a]}var La=(e,t)=>{let{transform:n=`none`}=getComputedStyle(e);return Ia(n,t)};function Ra(e){return parseFloat(e.trim())}var za=[`transformPerspective`,`x`,`y`,`z`,`translateX`,`translateY`,`translateZ`,`scale`,`scaleX`,`scaleY`,`rotate`,`rotateX`,`rotateY`,`rotateZ`,`skew`,`skewX`,`skewY`],Ba=(()=>new Set(za))(),Va=e=>e===Jr||e===W,Ha=new Set([`x`,`y`,`z`]),Ua=za.filter(e=>!Ha.has(e));function Wa(e){let t=[];return Ua.forEach(n=>{let r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith(`scale`)?1:0))}),t}var Ga={width:({x:e},{paddingLeft:t=`0`,paddingRight:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t=`0`,paddingBottom:n=`0`})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ia(t,`x`),y:(e,{transform:t})=>Ia(t,`y`)};Ga.translateX=Ga.x,Ga.translateY=Ga.y;var Ka=new Set,qa=!1,Ja=!1,Ya=!1;function Xa(){if(Ja){let e=Array.from(Ka).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{let t=Wa(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=n.get(e);t&&t.forEach(([t,n])=>{e.getValue(t)?.set(n)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{e.suspendedScrollY!==void 0&&window.scrollTo(0,e.suspendedScrollY)})}Ja=!1,qa=!1,Ka.forEach(e=>e.complete(Ya)),Ka.clear()}function Za(){Ka.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ja=!0)})}function Qa(){Ya=!0,Za(),Xa(),Ya=!1}var $a=class{constructor(e,t,n,r,i,a=!1){this.state=`pending`,this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=i,this.isAsync=a}scheduleResolve(){this.state=`scheduled`,this.isAsync?(Ka.add(this),qa||(qa=!0,Pr.read(Za),Pr.resolveKeyframes(Xa))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(e[0]===null){let i=r?.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&t){let r=n.readValue(t,a);r!=null&&(e[0]=r)}e[0]===void 0&&(e[0]=a),r&&i===void 0&&r.set(e[0])}Da(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state=`complete`,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ka.delete(this)}cancel(){this.state===`scheduled`&&(Ka.delete(this),this.state=`pending`)}resume(){this.state===`pending`&&this.scheduleResolve()}},eo=e=>e.startsWith(`--`);function to(e,t,n){eo(t)?e.style.setProperty(t,n):e.style[t]=n}var no=Qn(()=>window.ScrollTimeline!==void 0),ro={};function io(e,t){let n=Qn(e);return()=>ro[t]??n()}var ao=io(()=>{try{document.createElement(`div`).animate({opacity:0},{easing:`linear(0, 1)`})}catch{return!1}return!0},`linearEasing`),oo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,so={linear:`linear`,ease:`ease`,easeIn:`ease-in`,easeOut:`ease-out`,easeInOut:`ease-in-out`,circIn:oo([0,.65,.55,1]),circOut:oo([.55,0,1,.45]),backIn:oo([.31,.01,.66,-.59]),backOut:oo([.33,1.53,.69,.99])};function co(e,t){if(e)return typeof e==`function`?ao()?Yi(e,t):`ease-out`:Tr(e)?oo(e):Array.isArray(e)?e.map(e=>co(e,t)||so.easeOut):so[e]}function lo(e,t,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o=`loop`,ease:s=`easeOut`,times:c}={},l=void 0){let u={[t]:n};c&&(u.offset=c);let d=co(s,i);Array.isArray(d)&&(u.easing=d),Ar.value&&Vr.waapi++;let f={delay:r,duration:i,easing:Array.isArray(d)?`linear`:d,fill:`both`,iterations:a+1,direction:o===`reverse`?`alternate`:`normal`};l&&(f.pseudoElement=l);let p=e.animate(u,f);return Ar.value&&p.finished.finally(()=>{Vr.waapi--}),p}function uo(e){return typeof e==`function`&&`applyToOptions`in e}function fo({type:e,...t}){return uo(e)&&ao()?e.applyToOptions(t):(t.duration??=300,t.ease??=`easeOut`,t)}var po=class extends wa{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;let{element:t,name:n,keyframes:r,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:o,onComplete:s}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,e.type;let c=fo(e);this.animation=lo(t,n,r,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){let e=xa(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(e):to(t,n,e),this.animation.cancel()}s?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state===`finished`&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;e===`idle`||e===`finished`||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){let e=this.animation.effect?.getComputedTiming?.().duration||0;return ar(Number(e))}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ir(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime===null?this.animation.playState:`finished`}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:`linear`}),this.animation.onfinish=null,e&&no()?(this.animation.timeline=e,$n):t(this)}},mo={anticipate:_r,backInOut:gr,circInOut:br};function ho(e){return e in mo}function go(e){typeof e.ease==`string`&&ho(e.ease)&&(e.ease=mo[e.ease])}var _o=10,vo=class extends po{constructor(e){go(e),Ca(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:n,onComplete:r,element:i,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}let o=new Ea({...a,autoplay:!1}),s=Math.max(_o,Br.now()-this.startTime),c=qn(0,_o,s-_o);t.setWithVelocity(o.sample(Math.max(0,s-c)).value,o.sample(s).value,c),o.stop()}},yo=(e,t)=>t===`zIndex`?!1:!!(typeof e==`number`||Array.isArray(e)||typeof e==`string`&&(ki.test(e)||e===`0`)&&!e.startsWith(`url(`));function bo(e){let t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function xo(e,t,n,r){let i=e[0];if(i===null)return!1;if(t===`display`||t===`visibility`)return!0;let a=e[e.length-1],o=yo(i,t),s=yo(a,t);return`${t}${i}${a}${o?a:i}`,!o||!s?!1:bo(e)||(n===`spring`||uo(n))&&r}function So(e){e.duration=0,e.type=`keyframes`}var Co=new Set([`opacity`,`clipPath`,`filter`,`transform`]),wo=Qn(()=>Object.hasOwnProperty.call(Element.prototype,`animate`));function To(e){let{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:s,transformTemplate:c}=t.owner.getProps();return wo()&&n&&Co.has(n)&&(n!==`transform`||!c)&&!s&&!r&&i!==`mirror`&&a!==0&&o!==`inertia`}var Eo=40,Do=class extends wa{constructor({autoplay:e=!0,delay:t=0,type:n=`keyframes`,repeat:r=0,repeatDelay:i=0,repeatType:a=`loop`,keyframes:o,name:s,motionValue:c,element:l,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Br.now();let d={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:i,repeatType:a,name:s,motionValue:c,element:l,...u};this.keyframeResolver=new(l?.KeyframeResolver||$a)(o,(e,t,n)=>this.onKeyframesResolved(e,t,d,!n),s,c,l),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;let{name:i,type:a,velocity:o,delay:s,isHandoff:c,onUpdate:l}=n;this.resolvedAt=Br.now(),xo(e,i,a,o)||((Jn.instantAnimations||!s)&&l?.(xa(e,n,t)),e[0]=e[e.length-1],So(n),n.repeat=0);let u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>Eo?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!c&&To(u),f=u.motionValue?.owner?.current,p=d?new vo({...u,element:f}):new Ea(u);p.finished.then(()=>{this.notifyFinished()}).catch($n),this.pendingTimeline&&=(this.stopTimeline=p.attachTimeline(this.pendingTimeline),void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Qa()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}};function Oo(e,t,n,r=0,i=1){let a=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),o=e.size,s=(o-1)*r;return typeof n==`function`?n(a,o):i===1?a*r:s-a*r}var ko=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ao(e){let t=ko.exec(e);if(!t)return[,];let[,n,r,i]=t;return[`--${n??r}`,i]}function jo(e,t,n=1){`${e}`;let[r,i]=Ao(e);if(!r)return;let a=window.getComputedStyle(t).getPropertyValue(r);if(a){let e=a.trim();return Yn(e)?parseFloat(e):e}return Gr(i)?jo(i,t,n+1):i}var Mo={type:`spring`,stiffness:500,damping:25,restSpeed:10},No=e=>({type:`spring`,stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Po={type:`keyframes`,duration:.8},Fo={type:`keyframes`,ease:[.25,.1,.35,1],duration:.3},Io=(e,{keyframes:t})=>t.length>2?Po:Ba.has(e)?e.startsWith(`scale`)?No(t[1]):Mo:Fo,Lo=e=>e!==null;function Ro(e,{repeat:t,repeatType:n=`loop`},r){let i=e.filter(Lo),a=t&&n!==`loop`&&t%2==1?0:i.length-1;return!a||r===void 0?i[a]:r}function zo(e,t){return e?.[t]??e?.default??e}function Bo({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:c,elapsed:l,...u}){return!!Object.keys(u).length}var Vo=(e,t,n,r={},i,a)=>o=>{let s=zo(r,e)||{},c=s.delay||r.delay||0,{elapsed:l=0}=r;l-=ir(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:`easeOut`,velocity:t.getVelocity(),...s,delay:-l,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:e,motionValue:t,element:a?void 0:i};Bo(s)||Object.assign(u,Io(e,u)),u.duration&&=ir(u.duration),u.repeatDelay&&=ir(u.repeatDelay),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(So(u),u.delay===0&&(d=!0)),(Jn.instantAnimations||Jn.skipAnimations)&&(d=!0,So(u),u.delay=0),u.allowFlatten=!s.type&&!s.ease,d&&!a&&t.get()!==void 0){let e=Ro(u.keyframes,s);if(e!==void 0){Pr.update(()=>{u.onUpdate(e),u.onComplete()});return}}return s.isSync?new Ea(u):new Do(u)};function Ho(e){let t=[{},{}];return e?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Uo(e,t,n,r){if(typeof t==`function`){let[i,a]=Ho(r);t=t(n===void 0?e.custom:n,i,a)}if(typeof t==`string`&&(t=e.variants&&e.variants[t]),typeof t==`function`){let[i,a]=Ho(r);t=t(n===void 0?e.custom:n,i,a)}return t}function Wo(e,t,n){let r=e.getProps();return Uo(r,t,n===void 0?r.custom:n,e)}var Go=new Set([`width`,`height`,`top`,`left`,`right`,`bottom`,...za]),Ko=30,qo=e=>!isNaN(parseFloat(e)),Jo={current:void 0},Yo=class{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=Br.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qo(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on(`change`,e)}on(e,t){this.events[e]||(this.events[e]=new rr);let n=this.events[e].add(t);return e===`change`?()=>{n(),Pr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||=new Set,this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Jo.current&&Jo.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let e=Br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ko)return 0;let t=Math.min(this.updatedAt-this.prevUpdatedAt,Ko);return or(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function Xo(e,t){return new Yo(e,t)}var Zo=e=>Array.isArray(e);function Qo(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Xo(n))}function $o(e){return Zo(e)?e[e.length-1]||0:e}function es(e,t){let{transitionEnd:n={},transition:r={},...i}=Wo(e,t)||{};for(let t in i={...i,...n},i)Qo(e,t,$o(i[t]))}var ts=e=>!!(e&&e.getVelocity);function ns(e){return!!(ts(e)&&e.add)}function rs(e,t){let n=e.getValue(`willChange`);if(ns(n))return n.add(t);if(!n&&Jn.WillChange){let n=new Jn.WillChange(`auto`);e.addValue(`willChange`,n),n.add(t)}}function is(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}var as=`data-`+is(`framerAppearId`);function os(e){return e.props[as]}function ss({protectedKeys:e,needsAnimating:t},n){let r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function cs(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:o,...s}=t;r&&(a=r);let c=[],l=i&&e.animationState&&e.animationState.getState()[i];for(let t in s){let r=e.getValue(t,e.latestValues[t]??null),i=s[t];if(i===void 0||l&&ss(l,t))continue;let o={delay:n,...zo(a||{},t)},u=r.get();if(u!==void 0&&!r.isAnimating&&!Array.isArray(i)&&i===u&&!o.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let n=os(e);if(n){let e=window.MotionHandoffAnimation(n,t,Pr);e!==null&&(o.startTime=e,d=!0)}}rs(e,t),r.start(Vo(t,r,i,e.shouldReduceMotion&&Go.has(t)?{type:!1}:o,e,d));let f=r.animation;f&&c.push(f)}return o&&Promise.all(c).then(()=>{Pr.update(()=>{o&&es(e,o)})}),c}function ls(e,t,n={}){let r=Wo(e,t,n.type===`exit`?e.presenceContext?.custom:void 0),{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);let a=r?()=>Promise.all(cs(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(r=0)=>{let{delayChildren:a=0,staggerChildren:o,staggerDirection:s}=i;return us(e,t,r,a,o,s,n)}:()=>Promise.resolve(),{when:s}=i;if(s){let[e,t]=s===`beforeChildren`?[a,o]:[o,a];return e().then(()=>t())}else return Promise.all([a(),o(n.delay)])}function us(e,t,n=0,r=0,i=0,a=1,o){let s=[];for(let c of e.variantChildren)c.notify(`AnimationStart`,t),s.push(ls(c,t,{...o,delay:n+(typeof r==`function`?0:r)+Oo(e.variantChildren,c,r,i,a)}).then(()=>c.notify(`AnimationComplete`,t)));return Promise.all(s)}function ds(e,t,n={}){e.notify(`AnimationStart`,t);let r;if(Array.isArray(t)){let i=t.map(t=>ls(e,t,n));r=Promise.all(i)}else if(typeof t==`string`)r=ls(e,t,n);else{let i=typeof t==`function`?Wo(e,t,n.custom):t;r=Promise.all(cs(e,i,n))}return r.then(()=>{e.notify(`AnimationComplete`,t)})}var fs={test:e=>e===`auto`,parse:e=>e},ps=e=>t=>t.test(e),ms=[Jr,W,ui,li,fi,di,fs],hs=e=>ms.find(ps(e));function gs(e){return typeof e==`number`?e===0:e===null?!0:e===`none`||e===`0`||Zn(e)}var _s=new Set([`brightness`,`contrast`,`saturate`,`opacity`]);function vs(e){let[t,n]=e.slice(0,-1).split(`(`);if(t===`drop-shadow`)return e;let[r]=n.match(Qr)||[];if(!r)return e;let i=n.replace(r,``),a=_s.has(t)?1:0;return r!==n&&(a*=100),t+`(`+a+i+`)`}var ys=/\b([a-z-]*)\(.*?\)/gu,bs={...ki,getAnimatableNone:e=>{let t=e.match(ys);return t?t.map(vs).join(` `):e}},xs={...Jr,transform:Math.round},Ss={borderWidth:W,borderTopWidth:W,borderRightWidth:W,borderBottomWidth:W,borderLeftWidth:W,borderRadius:W,borderTopLeftRadius:W,borderTopRightRadius:W,borderBottomRightRadius:W,borderBottomLeftRadius:W,width:W,maxWidth:W,height:W,maxHeight:W,top:W,right:W,bottom:W,left:W,inset:W,insetBlock:W,insetBlockStart:W,insetBlockEnd:W,insetInline:W,insetInlineStart:W,insetInlineEnd:W,padding:W,paddingTop:W,paddingRight:W,paddingBottom:W,paddingLeft:W,paddingBlock:W,paddingBlockStart:W,paddingBlockEnd:W,paddingInline:W,paddingInlineStart:W,paddingInlineEnd:W,margin:W,marginTop:W,marginRight:W,marginBottom:W,marginLeft:W,marginBlock:W,marginBlockStart:W,marginBlockEnd:W,marginInline:W,marginInlineStart:W,marginInlineEnd:W,fontSize:W,backgroundPositionX:W,backgroundPositionY:W,rotate:li,rotateX:li,rotateY:li,rotateZ:li,scale:Xr,scaleX:Xr,scaleY:Xr,scaleZ:Xr,skew:li,skewX:li,skewY:li,distance:W,translateX:W,translateY:W,translateZ:W,x:W,y:W,z:W,perspective:W,transformPerspective:W,opacity:Yr,originX:pi,originY:pi,originZ:W,zIndex:xs,fillOpacity:Yr,strokeOpacity:Yr,numOctaves:xs},Cs={...Ss,color:hi,backgroundColor:hi,outlineColor:hi,fill:hi,stroke:hi,borderColor:hi,borderTopColor:hi,borderRightColor:hi,borderBottomColor:hi,borderLeftColor:hi,filter:bs,WebkitFilter:bs},ws=e=>Cs[e];function Ts(e,t){let n=ws(e);return n!==bs&&(n=ki),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var Es=new Set([`auto`,`none`,`0`]);function Ds(e,t,n){let r=0,i;for(;r<e.length&&!i;){let t=e[r];typeof t==`string`&&!Es.has(t)&&wi(t).values.length&&(i=e[r]),r++}if(i&&n)for(let r of t)e[r]=Ts(n,i)}var Os=class extends $a{constructor(e,t,n,r,i){super(e,t,n,r,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let n=0;n<e.length;n++){let r=e[n];if(typeof r==`string`&&(r=r.trim(),Gr(r))){let i=jo(r,t.current);i!==void 0&&(e[n]=i),n===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!Go.has(n)||e.length!==2)return;let[r,i]=e,a=hs(r),o=hs(i);if(qr(r)!==qr(i)&&Ga[n]){this.needsMeasurement=!0;return}if(a!==o)if(Va(a)&&Va(o))for(let t=0;t<e.length;t++){let n=e[t];typeof n==`string`&&(e[t]=parseFloat(n))}else Ga[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,n=[];for(let t=0;t<e.length;t++)(e[t]===null||gs(e[t]))&&n.push(t);n.length&&Ds(e,n,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n===`height`&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ga[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let r=t[t.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;let r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);let i=n.length-1,a=n[i];n[i]=Ga[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}};function ks(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e==`string`){let r=document;t&&(r=t.current);let i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(e=>e!=null)}var As=(e,t)=>t&&typeof e==`number`?t.transform(e):e;function js(e){return Xn(e)&&`offsetHeight`in e}var{schedule:Ms,cancel:Ns}=Nr(queueMicrotask,!1),Ps={x:!1,y:!1};function Fs(){return Ps.x||Ps.y}function Is(e){return e===`x`||e===`y`?Ps[e]?null:(Ps[e]=!0,()=>{Ps[e]=!1}):Ps.x||Ps.y?null:(Ps.x=Ps.y=!0,()=>{Ps.x=Ps.y=!1})}function Ls(e,t){let n=ks(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function Rs(e){return!(e.pointerType===`touch`||Fs())}function zs(e,t,n={}){let[r,i,a]=Ls(e,n),o=e=>{if(!Rs(e))return;let{target:n}=e,r=t(n,e);if(typeof r!=`function`||!n)return;let a=e=>{Rs(e)&&(r(e),n.removeEventListener(`pointerleave`,a))};n.addEventListener(`pointerleave`,a,i)};return r.forEach(e=>{e.addEventListener(`pointerenter`,o,i)}),a}var Bs=(e,t)=>t?e===t?!0:Bs(e,t.parentElement):!1,Vs=e=>e.pointerType===`mouse`?typeof e.button!=`number`||e.button<=0:e.isPrimary!==!1,Hs=new Set([`BUTTON`,`INPUT`,`SELECT`,`TEXTAREA`,`A`]);function Us(e){return Hs.has(e.tagName)||e.isContentEditable===!0}var Ws=new WeakSet;function Gs(e){return t=>{t.key===`Enter`&&e(t)}}function Ks(e,t){e.dispatchEvent(new PointerEvent(`pointer`+t,{isPrimary:!0,bubbles:!0}))}var qs=(e,t)=>{let n=e.currentTarget;if(!n)return;let r=Gs(()=>{if(Ws.has(n))return;Ks(n,`down`);let e=Gs(()=>{Ks(n,`up`)});n.addEventListener(`keyup`,e,t),n.addEventListener(`blur`,()=>Ks(n,`cancel`),t)});n.addEventListener(`keydown`,r,t),n.addEventListener(`blur`,()=>n.removeEventListener(`keydown`,r),t)};function Js(e){return Vs(e)&&!Fs()}function Ys(e,t,n={}){let[r,i,a]=Ls(e,n),o=e=>{let r=e.currentTarget;if(!Js(e))return;Ws.add(r);let a=t(r,e),o=(e,t)=>{window.removeEventListener(`pointerup`,s),window.removeEventListener(`pointercancel`,c),Ws.has(r)&&Ws.delete(r),Js(e)&&typeof a==`function`&&a(e,{success:t})},s=e=>{o(e,r===window||r===document||n.useGlobalTarget||Bs(r,e.target))},c=e=>{o(e,!1)};window.addEventListener(`pointerup`,s,i),window.addEventListener(`pointercancel`,c,i)};return r.forEach(e=>{(n.useGlobalTarget?window:e).addEventListener(`pointerdown`,o,i),js(e)&&(e.addEventListener(`focus`,e=>qs(e,i)),!Us(e)&&!e.hasAttribute(`tabindex`)&&(e.tabIndex=0))}),a}function Xs(e){return Xn(e)&&`ownerSVGElement`in e}function Zs(e){return Xs(e)&&e.tagName===`svg`}function Qs(...e){let t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],i=e[1+n],a=e[2+n],o=e[3+n],s=ma(i,a,o);return t?s(r):s}var $s=[...ms,hi,ki],ec=e=>$s.find(ps(e)),tc=()=>({translate:0,scale:1,origin:0,originPoint:0}),nc=()=>({x:tc(),y:tc()}),rc=()=>({min:0,max:0}),ic=()=>({x:rc(),y:rc()}),ac={current:null},oc={current:!1},sc=typeof window<`u`;function cc(){if(oc.current=!0,sc)if(window.matchMedia){let e=window.matchMedia(`(prefers-reduced-motion)`),t=()=>ac.current=e.matches;e.addEventListener(`change`,t),t()}else ac.current=!1}var lc=new WeakMap;function uc(e){return typeof e==`object`&&!!e&&typeof e.start==`function`}function dc(e){return typeof e==`string`||Array.isArray(e)}var fc=[`animate`,`whileInView`,`whileFocus`,`whileHover`,`whileTap`,`whileDrag`,`exit`],pc=[`initial`,...fc];function mc(e){return uc(e.animate)||pc.some(t=>dc(e[t]))}function hc(e){return!!(mc(e)||e.variants)}function gc(e,t,n){for(let r in t){let i=t[r],a=n[r];if(ts(i))e.addValue(r,i);else if(ts(a))e.addValue(r,Xo(i,{owner:e}));else if(a!==i)if(e.hasValue(r)){let t=e.getValue(r);t.liveStyle===!0?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(r);e.addValue(r,Xo(t===void 0?i:t,{owner:e}))}}for(let r in n)t[r]===void 0&&e.removeValue(r);return t}var _c=[`AnimationStart`,`AnimationComplete`,`Update`,`BeforeLayoutMeasure`,`LayoutMeasure`,`LayoutAnimationStart`,`LayoutAnimationComplete`],vc={};function yc(e){vc=e}function bc(){return vc}var xc=class{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=$a,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify(`Update`,this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=Br.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Pr.render(this.render,!1,!0))};let{latestValues:s,renderState:c}=a;this.latestValues=s,this.baseTarget={...s},this.initialValues=t.initial?{...s}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=mc(t),this.isVariantNode=hc(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:l,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in u){let t=u[e];s[e]!==void 0&&ts(t)&&t.set(s[e])}}mount(e){this.current=e,lc.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),this.reducedMotionConfig===`never`?this.shouldReduceMotion=!1:this.reducedMotionConfig===`always`?this.shouldReduceMotion=!0:(oc.current||cc(),this.shouldReduceMotion=ac.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),Fr(this.notifyUpdate),Fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??=new Set,this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=Ba.has(e);n&&this.onBindTransform&&this.onBindTransform();let r=t.on(`change`,t=>{this.latestValues[e]=t,this.props.onUpdate&&Pr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()}),i;typeof window<`u`&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e=`animation`;for(e in vc){let t=vc[e];if(!t)continue;let{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ic()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<_c.length;t++){let n=_c[t];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let r=e[`on`+n];r&&(this.propEventSubscriptions[n]=this.on(n,r))}this.prevMotionValues=gc(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Xo(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n==`string`&&(Yn(n)||Zn(n))?n=parseFloat(n):!ec(n)&&ki.test(t)&&(n=Ts(e,t)),this.setBaseTarget(e,ts(n)?n.get():n)),ts(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let{initial:t}=this.props,n;if(typeof t==`string`||typeof t==`object`){let r=Uo(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&n!==void 0)return n;let r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ts(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new rr),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Ms.render(this.render)}},Sc=class extends xc{constructor(){super(...arguments),this.KeyframeResolver=Os}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){let n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;ts(e)&&(this.childSubscription=e.on(`change`,e=>{this.current&&(this.current.textContent=`${e}`)}))}},Cc=class{constructor(e){this.isMounted=!1,this.node=e}update(){}};function wc({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Tc({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ec(e,t){if(!t)return e;let n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Dc(e){return e===void 0||e===1}function Oc({scale:e,scaleX:t,scaleY:n}){return!Dc(e)||!Dc(t)||!Dc(n)}function kc(e){return Oc(e)||Ac(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ac(e){return jc(e.x)||jc(e.y)}function jc(e){return e&&e!==`0%`}function Mc(e,t,n){return n+t*(e-n)}function Nc(e,t,n,r,i){return i!==void 0&&(e=Mc(e,i,r)),Mc(e,n,r)+t}function Pc(e,t=0,n=1,r,i){e.min=Nc(e.min,t,n,r,i),e.max=Nc(e.max,t,n,r,i)}function Fc(e,{x:t,y:n}){Pc(e.x,t.translate,t.scale,t.originPoint),Pc(e.y,n.translate,n.scale,n.originPoint)}var Ic=.999999999999,Lc=1.0000000000001;function Rc(e,t,n,r=!1){let i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let s=0;s<i;s++){a=n[s],o=a.projectionDelta;let{visualElement:i}=a.options;i&&i.props.style&&i.props.style.display===`contents`||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Vc(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Fc(e,o)),r&&kc(a.latestValues)&&Vc(e,a.latestValues))}t.x<Lc&&t.x>Ic&&(t.x=1),t.y<Lc&&t.y>Ic&&(t.y=1)}function zc(e,t){e.min+=t,e.max+=t}function Bc(e,t,n,r,i=.5){Pc(e,t,n,Ni(e.min,e.max,i),r)}function Vc(e,t){Bc(e.x,t.x,t.scaleX,t.scale,t.originX),Bc(e.y,t.y,t.scaleY,t.scale,t.originY)}function Hc(e,t){return wc(Ec(e.getBoundingClientRect(),t))}function Uc(e,t,n){let r=Hc(e,n),{scroll:i}=t;return i&&(zc(r.x,i.offset.x),zc(r.y,i.offset.y)),r}var Wc={x:`translateX`,y:`translateY`,z:`translateZ`,transformPerspective:`perspective`},Gc=za.length;function Kc(e,t,n){let r=``,i=!0;for(let a=0;a<Gc;a++){let o=za[a],s=e[o];if(s===void 0)continue;let c=!0;if(typeof s==`number`)c=s===(o.startsWith(`scale`)?1:0);else{let e=parseFloat(s);c=o.startsWith(`scale`)?e===1:e===0}if(!c||n){let e=As(s,Ss[o]);if(!c){i=!1;let t=Wc[o]||o;r+=`${t}(${e}) `}n&&(t[o]=e)}}return r=r.trim(),n?r=n(t,i?``:r):i&&(r=`none`),r}function qc(e,t,n){let{style:r,vars:i,transformOrigin:a}=e,o=!1,s=!1;for(let e in t){let n=t[e];if(Ba.has(e)){o=!0;continue}else if(Ur(e)){i[e]=n;continue}else{let t=As(n,Ss[e]);e.startsWith(`origin`)?(s=!0,a[e]=t):r[e]=t}}if(t.transform||(o||n?r.transform=Kc(t,e.transform,n):r.transform&&=`none`),s){let{originX:e=`50%`,originY:t=`50%`,originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}function Jc(e,{style:t,vars:n},r,i){let a=e.style,o;for(o in t)a[o]=t[o];for(o in i?.applyProjectionStyles(a,r),n)a.setProperty(o,n[o])}function Yc(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var Xc={correct:(e,t)=>{if(!t.target)return e;if(typeof e==`string`)if(W.test(e))e=parseFloat(e);else return e;return`${Yc(e,t.target.x)}% ${Yc(e,t.target.y)}%`}},Zc={correct:(e,{treeScale:t,projectionDelta:n})=>{let r=e,i=ki.parse(e);if(i.length>5)return r;let a=ki.createTransformer(e),o=typeof i[0]==`number`?0:1,s=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=s,i[1+o]/=c;let l=Ni(s,c,.5);return typeof i[2+o]==`number`&&(i[2+o]/=l),typeof i[3+o]==`number`&&(i[3+o]/=l),a(i)}},Qc={borderRadius:{...Xc,applyTo:[`borderTopLeftRadius`,`borderTopRightRadius`,`borderBottomLeftRadius`,`borderBottomRightRadius`]},borderTopLeftRadius:Xc,borderTopRightRadius:Xc,borderBottomLeftRadius:Xc,borderBottomRightRadius:Xc,boxShadow:Zc};function $c(e,{layout:t,layoutId:n}){return Ba.has(e)||e.startsWith(`origin`)||(t||n!==void 0)&&(!!Qc[e]||e===`opacity`)}function el(e,t,n){let r=e.style,i=t?.style,a={};if(!r)return a;for(let t in r)(ts(r[t])||i&&ts(i[t])||$c(t,e)||n?.getValue(t)?.liveStyle!==void 0)&&(a[t]=r[t]);return a}function tl(e){return window.getComputedStyle(e)}var nl=class extends Sc{constructor(){super(...arguments),this.type=`html`,this.renderInstance=Jc}readValueFromInstance(e,t){if(Ba.has(t))return this.projection?.isProjecting?Fa(t):La(e,t);{let n=tl(e),r=(Ur(t)?n.getPropertyValue(t):n[t])||0;return typeof r==`string`?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Hc(e,t)}build(e,t,n){qc(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return el(e,t,n)}},K={offset:`stroke-dashoffset`,array:`stroke-dasharray`},rl={offset:`strokeDashoffset`,array:`strokeDasharray`};function il(e,t,n=1,r=0,i=!0){e.pathLength=1;let a=i?K:rl;e[a.offset]=`${-r}`,e[a.array]=`${t} ${n}`}var al=[`offsetDistance`,`offsetPath`,`offsetRotate`,`offsetAnchor`];function ol(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...s},c,l,u){if(qc(e,s,l),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:d,style:f}=e;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??`50% 50%`,delete d.transformOrigin),f.transform&&(f.transformBox=u?.transformBox??`fill-box`,delete d.transformBox);for(let e of al)d[e]!==void 0&&(f[e]=d[e],delete d[e]);t!==void 0&&(d.x=t),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&il(d,i,a,o,!1)}var sl=new Set([`baseFrequency`,`diffuseConstant`,`kernelMatrix`,`kernelUnitLength`,`keySplines`,`keyTimes`,`limitingConeAngle`,`markerHeight`,`markerWidth`,`numOctaves`,`targetX`,`targetY`,`surfaceScale`,`specularConstant`,`specularExponent`,`stdDeviation`,`tableValues`,`viewBox`,`gradientTransform`,`pathLength`,`startOffset`,`textLength`,`lengthAdjust`]),cl=e=>typeof e==`string`&&e.toLowerCase()===`svg`;function ll(e,t,n,r){for(let n in Jc(e,t,void 0,r),t.attrs)e.setAttribute(sl.has(n)?n:is(n),t.attrs[n])}function ul(e,t,n){let r=el(e,t,n);for(let n in e)if(ts(e[n])||ts(t[n])){let t=za.indexOf(n)===-1?n:`attr`+n.charAt(0).toUpperCase()+n.substring(1);r[t]=e[n]}return r}var dl=class extends Sc{constructor(){super(...arguments),this.type=`svg`,this.isSVGTag=!1,this.measureInstanceViewportBox=ic}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ba.has(t)){let e=ws(t);return e&&e.default||0}return t=sl.has(t)?t:is(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ul(e,t,n)}build(e,t,n){ol(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){ll(e,t,n,r)}mount(e){this.isSVGTag=cl(e.tagName),super.mount(e)}},fl=pc.length;function pl(e){if(!e)return;if(!e.isControllingVariants){let t=e.parent&&pl(e.parent)||{};return e.props.initial!==void 0&&(t.initial=e.props.initial),t}let t={};for(let n=0;n<fl;n++){let r=pc[n],i=e.props[r];(dc(i)||i===!1)&&(t[r]=i)}return t}function ml(e,t){if(!Array.isArray(t))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var hl=[...fc].reverse(),gl=fc.length;function _l(e){return t=>Promise.all(t.map(({animation:t,options:n})=>ds(e,t,n)))}function vl(e){let t=_l(e),n=xl(),r=!0,i=t=>(n,r)=>{let i=Wo(e,r,t===`exit`?e.presenceContext?.custom:void 0);if(i){let{transition:e,transitionEnd:t,...r}=i;n={...n,...r,...t}}return n};function a(n){t=n(e)}function o(a){let{props:o}=e,s=pl(e.parent)||{},c=[],l=new Set,u={},d=1/0;for(let t=0;t<gl;t++){let f=hl[t],p=n[f],m=o[f]===void 0?s[f]:o[f],h=dc(m),g=f===a?p.isActive:null;g===!1&&(d=t);let _=m===s[f]&&m!==o[f]&&h;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),p.protectedKeys={...u},!p.isActive&&g===null||!m&&!p.prevProp||uc(m)||typeof m==`boolean`)continue;let v=yl(p.prevProp,m),y=v||f===a&&p.isActive&&!_&&h||t>d&&h,b=!1,x=Array.isArray(m)?m:[m],S=x.reduce(i(f),{});g===!1&&(S={});let{prevResolvedValues:C={}}=p,w={...C,...S},T=t=>{y=!0,l.has(t)&&(b=!0,l.delete(t)),p.needsAnimating[t]=!0;let n=e.getValue(t);n&&(n.liveStyle=!1)};for(let e in w){let t=S[e],n=C[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Zo(t)&&Zo(n)?!ml(t,n):t!==n,r?t==null?l.add(e):T(e):t!==void 0&&l.has(e)?T(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=S,p.isActive&&(u={...u,...S}),r&&e.blockInitialAnimation&&(y=!1);let E=_&&v;y&&(!E||b)&&c.push(...x.map(t=>{let n={type:f};if(typeof t==`string`&&r&&!E&&e.manuallyAnimateOnMount&&e.parent){let{parent:r}=e,i=Wo(r,t);if(r.enteringChildren&&i){let{delayChildren:t}=i.transition||{};n.delay=Oo(r.enteringChildren,e,t)}}return{animation:t,options:n}}))}if(l.size){let t={};if(typeof o.initial!=`boolean`){let n=Wo(e,Array.isArray(o.initial)?o.initial[0]:o.initial);n&&n.transition&&(t.transition=n.transition)}l.forEach(n=>{let r=e.getBaseTarget(n),i=e.getValue(n);i&&(i.liveStyle=!0),t[n]=r??null}),c.push({animation:t})}let f=!!c.length;return r&&(o.initial===!1||o.initial===o.animate)&&!e.manuallyAnimateOnMount&&(f=!1),r=!1,f?t(c):Promise.resolve()}function s(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,r)),n[t].isActive=r;let i=o(t);for(let e in n)n[e].protectedKeys={};return i}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>n,reset:()=>{n=xl()}}}function yl(e,t){return typeof t==`string`?t!==e:Array.isArray(t)?!ml(t,e):!1}function bl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xl(){return{animate:bl(!0),whileInView:bl(),whileHover:bl(),whileTap:bl(),whileDrag:bl(),whileFocus:bl(),exit:bl()}}function Sl(e,t){e.min=t.min,e.max=t.max}function Cl(e,t){Sl(e.x,t.x),Sl(e.y,t.y)}function wl(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}var Tl=1e-4,El=1-Tl,Dl=1+Tl,Ol=.01,kl=0-Ol,Al=0+Ol;function jl(e){return e.max-e.min}function Ml(e,t,n){return Math.abs(e-t)<=n}function Nl(e,t,n,r=.5){e.origin=r,e.originPoint=Ni(t.min,t.max,e.origin),e.scale=jl(n)/jl(t),e.translate=Ni(n.min,n.max,e.origin)-e.originPoint,(e.scale>=El&&e.scale<=Dl||isNaN(e.scale))&&(e.scale=1),(e.translate>=kl&&e.translate<=Al||isNaN(e.translate))&&(e.translate=0)}function Pl(e,t,n,r){Nl(e.x,t.x,n.x,r?r.originX:void 0),Nl(e.y,t.y,n.y,r?r.originY:void 0)}function Fl(e,t,n){e.min=n.min+t.min,e.max=e.min+jl(t)}function Il(e,t,n){Fl(e.x,t.x,n.x),Fl(e.y,t.y,n.y)}function Ll(e,t,n){e.min=t.min-n.min,e.max=e.min+jl(t)}function Rl(e,t,n){Ll(e.x,t.x,n.x),Ll(e.y,t.y,n.y)}function zl(e,t,n,r,i){return e-=t,e=Mc(e,1/n,r),i!==void 0&&(e=Mc(e,1/i,r)),e}function Bl(e,t=0,n=1,r=.5,i,a=e,o=e){if(ui.test(t)&&(t=parseFloat(t),t=Ni(o.min,o.max,t/100)-o.min),typeof t!=`number`)return;let s=Ni(a.min,a.max,r);e===a&&(s-=t),e.min=zl(e.min,t,n,s,i),e.max=zl(e.max,t,n,s,i)}function Vl(e,t,[n,r,i],a,o){Bl(e,t[n],t[r],t[i],t.scale,a,o)}var Hl=[`x`,`scaleX`,`originX`],Ul=[`y`,`scaleY`,`originY`];function Wl(e,t,n,r){Vl(e.x,t,Hl,n?n.x:void 0,r?r.x:void 0),Vl(e.y,t,Ul,n?n.y:void 0,r?r.y:void 0)}function Gl(e){return e.translate===0&&e.scale===1}function Kl(e){return Gl(e.x)&&Gl(e.y)}function ql(e,t){return e.min===t.min&&e.max===t.max}function Jl(e,t){return ql(e.x,t.x)&&ql(e.y,t.y)}function Yl(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Xl(e,t){return Yl(e.x,t.x)&&Yl(e.y,t.y)}function Zl(e){return jl(e.x)/jl(e.y)}function q(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ql(e){return[e(`x`),e(`y`)]}function $l(e,t,n){let r=``,i=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:a,skewX:o,skewY:s}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),i&&(r+=`rotateX(${i}deg) `),a&&(r+=`rotateY(${a}deg) `),o&&(r+=`skewX(${o}deg) `),s&&(r+=`skewY(${s}deg) `)}let s=e.x.scale*t.x,c=e.y.scale*t.y;return(s!==1||c!==1)&&(r+=`scale(${s}, ${c})`),r||`none`}var eu=[`TopLeft`,`TopRight`,`BottomLeft`,`BottomRight`],tu=eu.length,nu=e=>typeof e==`string`?parseFloat(e):e,ru=e=>typeof e==`number`||W.test(e);function iu(e,t,n,r,i,a){i?(e.opacity=Ni(0,n.opacity??1,ou(r)),e.opacityExit=Ni(t.opacity??1,0,su(r))):a&&(e.opacity=Ni(t.opacity??1,n.opacity??1,r));for(let i=0;i<tu;i++){let a=`border${eu[i]}Radius`,o=au(t,a),s=au(n,a);o===void 0&&s===void 0||(o||=0,s||=0,o===0||s===0||ru(o)===ru(s)?(e[a]=Math.max(Ni(nu(o),nu(s),r),0),(ui.test(s)||ui.test(o))&&(e[a]+=`%`)):e[a]=s)}(t.rotate||n.rotate)&&(e.rotate=Ni(t.rotate||0,n.rotate||0,r))}function au(e,t){return e[t]===void 0?e.borderRadius:e[t]}var ou=cu(0,.5,yr),su=cu(.5,.95,$n);function cu(e,t,n){return r=>r<e?0:r>t?1:n(nr(e,t,r))}function lu(e,t,n){let r=ts(e)?e:Xo(e);return r.start(Vo(``,r,t,n)),r.animation}function uu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}var du=(e,t)=>e.depth-t.depth,fu=class{constructor(){this.children=[],this.isDirty=!1}add(e){Wn(this.children,e),this.isDirty=!0}remove(e){Gn(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(du),this.isDirty=!1,this.children.forEach(e)}};function pu(e,t){let n=Br.now(),r=({timestamp:i})=>{let a=i-n;a>=t&&(Fr(r),e(a-t))};return Pr.setup(r,!0),()=>Fr(r)}function mu(e){return ts(e)?e.get():e}var hu=class{constructor(){this.members=[]}add(e){Wn(this.members,e),e.scheduleRender()}remove(e){if(Gn(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t=this.members.findIndex(t=>e===t);if(t===0)return!1;let n;for(let e=t;e>=0;e--){let t=this.members[e];if(t.isPresent!==!1){n=t;break}}return n?(this.promote(n),!0):!1}promote(e,t){let n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();let r=n.options.layoutDependency,i=e.options.layoutDependency;r!==void 0&&i!==void 0&&r===i||(e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));let{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}},gu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},_u={nodes:0,calculatedTargetDeltas:0,calculatedProjections:0},vu=[``,`X`,`Y`,`Z`],yu=1e3,bu=0;function xu(e,t,n,r){let{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Su(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:t}=e.options;if(!t)return;let n=os(t);if(window.MotionHasOptimisedAnimation(n,`transform`)){let{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,`transform`,Pr,!(t||r))}let{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Su(r)}function Cu({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(e={},n=t?.()){this.id=bu++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ar.value&&(_u.nodes=_u.calculatedTargetDeltas=_u.calculatedProjections=0),this.nodes.forEach(Eu),this.nodes.forEach(Nu),this.nodes.forEach(Pu),this.nodes.forEach(Du),Ar.addProjectionMetrics&&Ar.addProjectionMetrics(_u)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new fu)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rr),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=Xs(t)&&!Zs(t),this.instance=t;let{layoutId:n,layout:r,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(r||n)&&(this.isLayoutDirty=!0),e){let n,r=0,i=()=>this.root.updateBlockedByResize=!1;Pr.read(()=>{r=window.innerWidth}),e(t,()=>{let e=window.innerWidth;e!==r&&(r=e,this.root.updateBlockedByResize=!0,n&&n(),n=pu(i,250),gu.hasAnimatedSinceResize&&(gu.hasAnimatedSinceResize=!1,this.nodes.forEach(Mu)))})}n&&this.root.registerSharedNode(n,this),this.options.animate!==!1&&i&&(n||r)&&this.addEventListener(`didUpdate`,({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||i.getDefaultTransition()||Vu,{onLayoutAnimationStart:o,onLayoutAnimationComplete:s}=i.getProps(),c=!this.targetLayout||!Xl(this.targetLayout,r),l=!t&&n;if(this.options.layoutRoot||this.resumeFrom||l||t&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...zo(a,`layout`),onPlay:o,onComplete:s};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,l)}else t||Mu(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fu),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Su(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll(`snapshot`),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:n}=this.options;if(t===void 0&&!n)return;let r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,``):void 0,this.updateSnapshot(),e&&this.notifyListeners(`willUpdate`)}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ku);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Au);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ju),this.nodes.forEach(wu),this.nodes.forEach(Tu)):this.nodes.forEach(Au),this.clearAllSnapshots();let e=Br.now();Ir.delta=qn(0,1e3/60,e-Ir.timestamp),Ir.timestamp=e,Ir.isProcessing=!0,Lr.update.process(Ir),Lr.preRender.process(Ir),Lr.render.process(Ir),Ir.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ms.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ou),this.sharedNodes.forEach(Iu)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jl(this.snapshot.measuredBox.x)&&!jl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ic(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners(`measure`,this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify(`LayoutMeasure`,this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e=`measure`){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!Kl(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,``):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||kc(this.latestValues)||a)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){let t=this.measurePageBox(),n=this.removeElementScroll(t);return e&&(n=this.removeTransform(n)),Gu(n),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return ic();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(qu))){let{scroll:e}=this.root;e&&(zc(t.x,e.offset.x),zc(t.y,e.offset.y))}return t}removeElementScroll(e){let t=ic();if(Cl(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){let r=this.path[n],{scroll:i,options:a}=r;r!==this.root&&i&&a.layoutScroll&&(i.wasRoot&&Cl(t,e),zc(t.x,i.offset.x),zc(t.y,i.offset.y))}return t}applyTransform(e,t=!1){let n=ic();Cl(n,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];!t&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Vc(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),kc(r.latestValues)&&Vc(n,r.latestValues)}return kc(this.latestValues)&&Vc(n,this.latestValues),n}removeTransform(e){let t=ic();Cl(t,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];if(!n.instance||!kc(n.latestValues))continue;Oc(n.latestValues)&&n.updateSnapshot();let r=ic();Cl(r,n.measurePageBox()),Wl(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,r)}return kc(this.latestValues)&&Wl(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:e.crossfade===void 0?!0:e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ir.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||=t.isProjectionDirty,this.isTransformDirty||=t.isTransformDirty,this.isSharedProjectionDirty||=t.isSharedProjectionDirty;let n=!!this.resumingFrom||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:r,layoutId:i}=this.options;if(!this.layout||!(r||i))return;this.resolvedRelativeTargetAt=Ir.timestamp;let a=this.getClosestProjectingParent();a&&this.linkedParentVersion!==a.layoutVersion&&!a.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(a&&a.layout?this.createRelativeTarget(a,this.layout.layoutBox,a.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ic(),this.targetWithTransforms=ic()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Il(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cl(this.target,this.layout.layoutBox),Fc(this.target,this.targetDelta)):Cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,a&&!!a.resumingFrom==!!this.resumingFrom&&!a.options.layoutScroll&&a.target&&this.animationProgress!==1?this.createRelativeTarget(a,this.target,a.target):this.relativeParent=this.relativeTarget=void 0),Ar.value&&_u.calculatedTargetDeltas++)}getClosestProjectingParent(){if(!(!this.parent||Oc(this.parent.latestValues)||Ac(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,n){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ic(),this.relativeTargetOrigin=ic(),Rl(this.relativeTargetOrigin,t,n),Cl(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Ir.timestamp&&(n=!1),n)return;let{layout:r,layoutId:i}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(r||i))return;Cl(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;Rc(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=ic());let{target:s}=e;if(!s){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wl(this.prevProjectionDelta.x,this.projectionDelta.x),wl(this.prevProjectionDelta.y,this.projectionDelta.y)),Pl(this.projectionDelta,this.layoutCorrected,s,this.latestValues),(this.treeScale.x!==a||this.treeScale.y!==o||!q(this.projectionDelta.x,this.prevProjectionDelta.x)||!q(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners(`projectionUpdate`,s)),Ar.value&&_u.calculatedProjections++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=nc(),this.projectionDelta=nc(),this.projectionDeltaWithTransform=nc()}setAnimationOrigin(e,t=!1){let n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},a=nc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=ic(),s=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=!!(s&&!l&&this.options.crossfade===!0&&!this.path.some(Bu));this.animationProgress=0;let d;this.mixTargetDelta=t=>{let n=t/1e3;Lu(a.x,e.x,n),Lu(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rl(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zu(this.relativeTarget,this.relativeTargetOrigin,o,n),d&&Jl(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||=ic(),Cl(d,this.relativeTarget)),s&&(this.animationValues=i,iu(i,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners(`animationStart`),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&=(Fr(this.pendingAnimation),void 0),this.pendingAnimation=Pr.update(()=>{gu.hasAnimatedSinceResize=!0,Vr.layout++,this.motionValue||=Xo(0),this.currentAnimation=lu(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{Vr.layout--},onComplete:()=>{Vr.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners(`animationComplete`)}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yu),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:n,layout:r,latestValues:i}=e;if(!(!t||!n||!r)){if(this!==e&&this.layout&&r&&Ku(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||ic();let t=jl(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;let r=jl(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}Cl(t,n),Vc(t,i),Pl(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new hu),this.sharedNodes.get(e).add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return e?e.lead===this:!0}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){let r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return e?e.relegate(this):!1}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;let r={};n.z&&xu(`z`,e,r,this.animationValues);for(let t=0;t<vu.length;t++)xu(`rotate${vu[t]}`,e,r,this.animationValues),xu(`skew${vu[t]}`,e,r,this.animationValues);for(let t in e.render(),r)e.setStaticValue(t,r[t]),this.animationValues&&(this.animationValues[t]=r[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility=`hidden`;return}let n=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility=``,e.opacity=``,e.pointerEvents=mu(t?.pointerEvents)||``,e.transform=n?n(this.latestValues,``):`none`;return}let r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){this.options.layoutId&&(e.opacity=this.latestValues.opacity===void 0?1:this.latestValues.opacity,e.pointerEvents=mu(t?.pointerEvents)||``),this.hasProjected&&!kc(this.latestValues)&&(e.transform=n?n({},``):`none`,this.hasProjected=!1);return}e.visibility=``;let i=r.animationValues||r.latestValues;this.applyTransformsToTarget();let a=$l(this.projectionDeltaWithTransform,this.treeScale,i);n&&(a=n(i,a)),e.transform=a;let{x:o,y:s}=this.projectionDelta;for(let t in e.transformOrigin=`${o.origin*100}% ${s.origin*100}% 0`,r.animationValues?e.opacity=r===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:e.opacity=r===this?i.opacity===void 0?``:i.opacity:i.opacityExit===void 0?0:i.opacityExit,Qc){if(i[t]===void 0)continue;let{correct:n,applyTo:o,isCSSVariable:s}=Qc[t],c=a===`none`?i[t]:n(i[t],r);if(o){let t=o.length;for(let n=0;n<t;n++)e[o[n]]=c}else s?this.options.visualElement.renderState.vars[t]=c:e[t]=c}this.options.layoutId&&(e.pointerEvents=r===this?mu(t?.pointerEvents)||``:`none`)}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(ku),this.root.sharedNodes.clear()}}}function wu(e){e.updateLayout()}function Tu(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners(`didUpdate`)){let{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i===`size`?Ql(e=>{let r=a?t.measuredBox[e]:t.layoutBox[e],i=jl(r);r.min=n[e].min,r.max=r.min+i}):Ku(i,t.layoutBox,n)&&Ql(r=>{let i=a?t.measuredBox[r]:t.layoutBox[r],o=jl(n[r]);i.max=i.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});let o=nc();Pl(o,n,t.layoutBox);let s=nc();a?Pl(s,e.applyTransform(r,!0),t.measuredBox):Pl(s,n,t.layoutBox);let c=!Kl(o),l=!1;if(!e.resumeFrom){let r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){let{snapshot:i,layout:a}=r;if(i&&a){let o=ic();Rl(o,t.layoutBox,i.layoutBox);let s=ic();Rl(s,n,a.layoutBox),Xl(o,s)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners(`didUpdate`,{layout:n,snapshot:t,delta:s,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Eu(e){Ar.value&&_u.nodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty),e.isTransformDirty||=e.parent.isTransformDirty)}function Du(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Ou(e){e.clearSnapshot()}function ku(e){e.clearMeasurements()}function Au(e){e.isLayoutDirty=!1}function ju(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify(`BeforeLayoutMeasure`),e.resetTransform()}function Mu(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Nu(e){e.resolveTargetDelta()}function Pu(e){e.calcProjection()}function Fu(e){e.resetSkewAndRotation()}function Iu(e){e.removeLeadSnapshot()}function Lu(e,t,n){e.translate=Ni(t.translate,0,n),e.scale=Ni(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ru(e,t,n,r){e.min=Ni(t.min,n.min,r),e.max=Ni(t.max,n.max,r)}function zu(e,t,n,r){Ru(e.x,t.x,n.x,r),Ru(e.y,t.y,n.y,r)}function Bu(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}var Vu={duration:.45,ease:[.4,0,.1,1]},Hu=e=>typeof navigator<`u`&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Uu=Hu(`applewebkit/`)&&!Hu(`chrome/`)?Math.round:$n;function Wu(e){e.min=Uu(e.min),e.max=Uu(e.max)}function Gu(e){Wu(e.x),Wu(e.y)}function Ku(e,t,n){return e===`position`||e===`preserve-aspect`&&!Ml(Zl(t),Zl(n),.2)}function qu(e){return e!==e.root&&e.scroll?.wasRoot}var Ju=Cu({attachResizeListener:(e,t)=>uu(e,`resize`,t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Yu={current:void 0},Xu=Cu({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yu.current){let e=new Ju({});e.mount(window),e.setOptions({layoutScroll:!0}),Yu.current=e}return Yu.current},resetTransform:(e,t)=>{e.style.transform=t===void 0?`none`:t},checkIsScrollRoot:e=>window.getComputedStyle(e).position===`fixed`}),Zu=(0,b.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:`never`});function Qu(e,t){if(typeof e==`function`)return e(t);e!=null&&(e.current=t)}function $u(...e){return t=>{let n=!1,r=e.map(e=>{let r=Qu(e,t);return!n&&typeof r==`function`&&(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){let n=r[t];typeof n==`function`?n():Qu(e[t],null)}}}}function ed(...e){return b.useCallback($u(...e),e)}var td=class extends b.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=js(e)&&e.offsetWidth||0,r=js(e)&&e.offsetHeight||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=n-i.width-i.left,i.bottom=r-i.height-i.top}return null}componentDidUpdate(){}render(){return this.props.children}};function nd({children:e,isPresent:t,anchorX:n,anchorY:r,root:i}){let a=(0,b.useId)(),o=(0,b.useRef)(null),s=(0,b.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=(0,b.useContext)(Zu),l=ed(o,e.props?.ref??e?.ref);return(0,b.useInsertionEffect)(()=>{let{width:e,height:l,top:u,left:d,right:f,bottom:p}=s.current;if(t||!o.current||!e||!l)return;let m=n===`left`?`left: ${d}`:`right: ${f}`,h=r===`bottom`?`bottom: ${p}`:`top: ${u}`;o.current.dataset.motionPopId=a;let g=document.createElement(`style`);c&&(g.nonce=c);let _=i??document.head;return _.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${l}px !important;
            ${m}px !important;
            ${h}px !important;
          }
        `),()=>{_.contains(g)&&_.removeChild(g)}},[t]),(0,U.jsx)(td,{isPresent:t,childRef:o,sizeRef:s,children:b.cloneElement(e,{ref:l})})}var rd=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:s,anchorY:c,root:l})=>{let u=Bn(id),d=(0,b.useId)(),f=!0,p=(0,b.useMemo)(()=>(f=!1,{id:d,initial:t,isPresent:n,custom:i,onExitComplete:e=>{u.set(e,!0);for(let e of u.values())if(!e)return;r&&r()},register:e=>(u.set(e,!1),()=>u.delete(e))}),[n,u,r]);return a&&f&&(p={...p}),(0,b.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[n]),b.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o===`popLayout`&&(e=(0,U.jsx)(nd,{isPresent:n,anchorX:s,anchorY:c,root:l,children:e})),(0,U.jsx)(Un.Provider,{value:p,children:e})};function id(){return new Map}function ad(e=!0){let t=(0,b.useContext)(Un);if(t===null)return[!0,null];let{isPresent:n,onExitComplete:r,register:i}=t,a=(0,b.useId)();(0,b.useEffect)(()=>{if(e)return i(a)},[e]);let o=(0,b.useCallback)(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,o]:[!0]}var od=e=>e.key||``;function sd(e){let t=[];return b.Children.forEach(e,e=>{(0,b.isValidElement)(e)&&t.push(e)}),t}var J=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a=`sync`,propagate:o=!1,anchorX:s=`left`,anchorY:c=`top`,root:l})=>{let[u,d]=ad(o),f=(0,b.useMemo)(()=>sd(e),[e]),p=o&&!u?[]:f.map(od),m=(0,b.useRef)(!0),h=(0,b.useRef)(f),g=Bn(()=>new Map),_=(0,b.useRef)(new Set),[v,y]=(0,b.useState)(f),[x,S]=(0,b.useState)(f);Hn(()=>{m.current=!1,h.current=f;for(let e=0;e<x.length;e++){let t=od(x[e]);p.includes(t)?(g.delete(t),_.current.delete(t)):g.get(t)!==!0&&g.set(t,!1)}},[x,p.length,p.join(`-`)]);let C=[];if(f!==v){let e=[...f];for(let t=0;t<x.length;t++){let n=x[t],r=od(n);p.includes(r)||(e.splice(t,0,n),C.push(n))}return a===`wait`&&C.length&&(e=C),S(sd(e)),y(f),null}let{forceRender:w}=(0,b.useContext)(zn);return(0,U.jsx)(U.Fragment,{children:x.map(e=>{let v=od(e),y=o&&!u?!1:f===x||p.includes(v);return(0,U.jsx)(rd,{isPresent:y,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:l,onExitComplete:y?void 0:()=>{if(_.current.has(v))return;if(_.current.add(v),g.has(v))g.set(v,!0);else return;let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(w?.(),S(h.current),o&&d?.(),r&&r())},anchorX:s,anchorY:c,children:e},v)})})},cd=(0,b.createContext)({strict:!1}),ld={animation:[`animate`,`variants`,`whileHover`,`whileTap`,`exit`,`whileInView`,`whileFocus`,`whileDrag`],exit:[`exit`],drag:[`drag`,`dragControls`],focus:[`whileFocus`],hover:[`whileHover`,`onHoverStart`,`onHoverEnd`],tap:[`whileTap`,`onTap`,`onTapStart`,`onTapCancel`],pan:[`onPan`,`onPanStart`,`onPanSessionStart`,`onPanEnd`],inView:[`whileInView`,`onViewportEnter`,`onViewportLeave`],layout:[`layout`,`layoutId`]},ud=!1;function dd(){if(ud)return;let e={};for(let t in ld)e[t]={isEnabled:e=>ld[t].some(t=>!!e[t])};yc(e),ud=!0}function fd(){return dd(),bc()}function pd(e){let t=fd();for(let n in e)t[n]={...t[n],...e[n]};yc(t)}var md=new Set(`animate.exit.variants.initial.style.values.variants.transition.transformTemplate.custom.inherit.onBeforeLayoutMeasure.onAnimationStart.onAnimationComplete.onUpdate.onDragStart.onDrag.onDragEnd.onMeasureDragConstraints.onDirectionLock.onDragTransitionEnd._dragX._dragY.onHoverStart.onHoverEnd.onViewportEnter.onViewportLeave.globalTapTarget.ignoreStrict.viewport`.split(`.`));function hd(e){return e.startsWith(`while`)||e.startsWith(`drag`)&&e!==`draggable`||e.startsWith(`layout`)||e.startsWith(`onTap`)||e.startsWith(`onPan`)||e.startsWith(`onLayout`)||md.has(e)}var gd=c({default:()=>_d}),_d,vd=o((()=>{throw _d={},Error(`Could not resolve "@emotion/is-prop-valid" imported by "framer-motion". Is it installed?`)})),yd=e=>!hd(e);function bd(e){typeof e==`function`&&(yd=t=>t.startsWith(`on`)?!hd(t):e(t))}try{bd((vd(),d(gd)).default)}catch{}function xd(e,t,n){let r={};for(let i in e)i===`values`&&typeof e.values==`object`||(yd(i)||n===!0&&hd(i)||!t&&!hd(i)||e.draggable&&i.startsWith(`onDrag`))&&(r[i]=e[i]);return r}var Sd=(0,b.createContext)({});function Cd(e,t){if(mc(e)){let{initial:t,animate:n}=e;return{initial:t===!1||dc(t)?t:void 0,animate:dc(n)?n:void 0}}return e.inherit===!1?{}:t}function wd(e){let{initial:t,animate:n}=Cd(e,(0,b.useContext)(Sd));return(0,b.useMemo)(()=>({initial:t,animate:n}),[Td(t),Td(n)])}function Td(e){return Array.isArray(e)?e.join(` `):e}var Ed=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Dd(e,t,n){for(let r in t)!ts(t[r])&&!$c(r,n)&&(e[r]=t[r])}function Od({transformTemplate:e},t){return(0,b.useMemo)(()=>{let n=Ed();return qc(n,t,e),Object.assign({},n.vars,n.style)},[t])}function kd(e,t){let n=e.style||{},r={};return Dd(r,n,e),Object.assign(r,Od(e,t)),r}function Ad(e,t){let n={},r=kd(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout=`none`,r.touchAction=e.drag===!0?`none`:`pan-${e.drag===`x`?`y`:`x`}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}var jd=()=>({...Ed(),attrs:{}});function Md(e,t,n,r){let i=(0,b.useMemo)(()=>{let n=jd();return ol(n,t,cl(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}},[t]);if(e.style){let t={};Dd(t,e.style,e),i.style={...t,...i.style}}return i}var Nd=[`animate`,`circle`,`defs`,`desc`,`ellipse`,`g`,`image`,`line`,`filter`,`marker`,`mask`,`metadata`,`path`,`pattern`,`polygon`,`polyline`,`rect`,`stop`,`switch`,`symbol`,`svg`,`text`,`tspan`,`use`,`view`];function Pd(e){return typeof e!=`string`||e.includes(`-`)?!1:!!(Nd.indexOf(e)>-1||/[A-Z]/u.test(e))}function Fd(e,t,n,{latestValues:r},i,a=!1,o){let s=(o??Pd(e)?Md:Ad)(t,r,i,e),c=xd(t,typeof e==`string`,a),l=e===b.Fragment?{}:{...c,...s,ref:n},{children:u}=t,d=(0,b.useMemo)(()=>ts(u)?u.get():u,[u]);return(0,b.createElement)(e,{...l,children:d})}function Id({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:Ld(n,r,i,e),renderState:t()}}function Ld(e,t,n,r){let i={},a=r(e,{});for(let e in a)i[e]=mu(a[e]);let{initial:o,animate:s}=e,c=mc(e),l=hc(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),s===void 0&&(s=t.animate));let u=n?n.initial===!1:!1;u||=o===!1;let d=u?s:o;if(d&&typeof d!=`boolean`&&!uc(d)){let t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){let r=Uo(e,t[n]);if(r){let{transitionEnd:e,transition:t,...n}=r;for(let e in n){let t=n[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}t!==null&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}var Rd=e=>(t,n)=>{let r=(0,b.useContext)(Sd),i=(0,b.useContext)(Un),a=()=>Id(e,t,r,i);return n?a():Bn(a)},zd=Rd({scrapeMotionValuesFromProps:el,createRenderState:Ed}),Bd=Rd({scrapeMotionValuesFromProps:ul,createRenderState:jd}),Vd=Symbol.for(`motionComponentSymbol`);function Hd(e,t,n){let r=(0,b.useRef)(n);(0,b.useInsertionEffect)(()=>{r.current=n});let i=(0,b.useRef)(null);return(0,b.useCallback)(n=>{n&&e.onMount?.(n),t&&(n?t.mount(n):t.unmount());let a=r.current;if(typeof a==`function`)if(n){let e=a(n);typeof e==`function`&&(i.current=e)}else i.current?(i.current(),i.current=null):a(n);else a&&(a.current=n)},[t])}var Ud=(0,b.createContext)({});function Wd(e){return e&&typeof e==`object`&&Object.prototype.hasOwnProperty.call(e,`current`)}function Gd(e,t,n,r,i,a){let{visualElement:o}=(0,b.useContext)(Sd),s=(0,b.useContext)(cd),c=(0,b.useContext)(Un),l=(0,b.useContext)(Zu).reducedMotion,u=(0,b.useRef)(null),d=(0,b.useRef)(!1);r||=s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:l,isSVG:a}),d.current&&u.current&&(u.current.manuallyAnimateOnMount=!0));let f=u.current,p=(0,b.useContext)(Ud);f&&!f.projection&&i&&(f.type===`html`||f.type===`svg`)&&Kd(u.current,n,i,p);let m=(0,b.useRef)(!1);(0,b.useInsertionEffect)(()=>{f&&m.current&&f.update(n,c)});let h=n[as],g=(0,b.useRef)(!!h&&!window.MotionHandoffIsComplete?.(h)&&window.MotionHasOptimisedAnimation?.(h));return Hn(()=>{d.current=!0,f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),g.current&&f.animationState&&f.animationState.animateChanges())}),(0,b.useEffect)(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&=(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(h)}),!1),f.enteringChildren=void 0)}),f}function Kd(e,t,n,r){let{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t[`data-framer-portal-id`]?void 0:qd(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&Wd(s),visualElement:e,animationType:typeof a==`string`?a:`both`,initialPromotionConfig:r,crossfade:u,layoutScroll:c,layoutRoot:l})}function qd(e){if(e)return e.options.allowProjection===!1?qd(e.parent):e.projection}function Jd(e,{forwardMotionProps:t=!1,type:n}={},r,i){r&&pd(r);let a=n?n===`svg`:Pd(e),o=a?Bd:zd;function s(n,s){let c,l={...(0,b.useContext)(Zu),...n,layoutId:Yd(n)},{isStatic:u}=l,d=wd(n),f=o(n,u);if(!u&&Vn){Xd(l,r);let t=Zd(l);c=t.MeasureLayout,d.visualElement=Gd(e,f,l,i,t.ProjectionNode,a)}return(0,U.jsxs)(Sd.Provider,{value:d,children:[c&&d.visualElement?(0,U.jsx)(c,{visualElement:d.visualElement,...l}):null,Fd(e,n,Hd(f,d.visualElement,s),f,u,t,a)]})}s.displayName=`motion.${typeof e==`string`?e:`create(${e.displayName??e.name??``})`}`;let c=(0,b.forwardRef)(s);return c[Vd]=e,c}function Yd({layoutId:e}){let t=(0,b.useContext)(zn).id;return t&&e!==void 0?t+`-`+e:e}function Xd(e,t){(0,b.useContext)(cd).strict}function Zd(e){let{drag:t,layout:n}=fd();if(!t&&!n)return{};let r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Qd(e,t){if(typeof Proxy>`u`)return Jd;let n=new Map,r=(n,r)=>Jd(n,r,e,t);return new Proxy((e,t)=>r(e,t),{get:(i,a)=>a===`create`?r:(n.has(a)||n.set(a,Jd(a,void 0,e,t)),n.get(a))})}var $d=(e,t)=>t.isSVG??Pd(e)?new dl(t):new nl(t,{allowProjection:e!==b.Fragment}),ef=class extends Cc{constructor(e){super(e),e.animationState||=vl(e)}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();uc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}},tf=0,nf={animation:{Feature:ef},exit:{Feature:class extends Cc{constructor(){super(...arguments),this.id=tf++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let r=this.node.animationState.setActive(`exit`,!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function rf(e){return{point:{x:e.pageX,y:e.pageY}}}var af=e=>t=>Vs(t)&&e(t,rf(t));function of(e,t,n,r){return uu(e,t,af(n),r)}var sf=({current:e})=>e?e.ownerDocument.defaultView:null,cf=(e,t)=>Math.abs(e-t);function lf(e,t){let n=cf(e.x,t.x),r=cf(e.y,t.y);return Math.sqrt(n**2+r**2)}var uf=new Set([`auto`,`scroll`]),df=class{constructor(e,t,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=mf(this.lastMoveEventInfo,this.history),t=this.startEvent!==null,n=lf(e.offset,{x:0,y:0})>=this.distanceThreshold;if(!t&&!n)return;let{point:r}=e,{timestamp:i}=Ir;this.history.push({...r,timestamp:i});let{onStart:a,onMove:o}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=ff(t,this.transformPagePoint),Pr.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let a=mf(e.type===`pointercancel`?this.lastMoveEventInfo:ff(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!Vs(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;let s=ff(rf(e),this.transformPagePoint),{point:c}=s,{timestamp:l}=Ir;this.history=[{...c,timestamp:l}];let{onSessionStart:u}=t;u&&u(e,mf(s,this.history)),this.removeListeners=tr(of(this.contextWindow,`pointermove`,this.handlePointerMove),of(this.contextWindow,`pointerup`,this.handlePointerUp),of(this.contextWindow,`pointercancel`,this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(uf.has(e.overflowX)||uf.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener(`scroll`,this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener(`scroll`,this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener(`scroll`,this.onElementScroll,{capture:!0}),window.removeEventListener(`scroll`,this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let n=e===window,r=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:r.x-t.x,y:r.y-t.y};i.x===0&&i.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,r),Pr.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Fr(this.updatePoint)}};function ff(e,t){return t?{point:t(e.point)}:e}function pf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function mf({point:e},t){return{point:e,delta:pf(e,gf(t)),offset:pf(e,hf(t)),velocity:_f(t,.1)}}function hf(e){return e[0]}function gf(e){return e[e.length-1]}function _f(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null,i=gf(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ir(t)));)n--;if(!r)return{x:0,y:0};let a=ar(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};let o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function vf(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ni(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ni(n,e,r.max):Math.min(e,n)),e}function yf(e,t,n){return{min:t===void 0?void 0:e.min+t,max:n===void 0?void 0:e.max+n-(e.max-e.min)}}function bf(e,{top:t,left:n,bottom:r,right:i}){return{x:yf(e.x,n,i),y:yf(e.y,t,r)}}function xf(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Sf(e,t){return{x:xf(e.x,t.x),y:xf(e.y,t.y)}}function Cf(e,t){let n=.5,r=jl(e),i=jl(t);return i>r?n=nr(t.min,t.max-r,e.min):r>i&&(n=nr(e.min,e.max-i,t.min)),qn(0,1,n)}function wf(e,t){let n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}var Tf=.35;function Ef(e=Tf){return e===!1?e=0:e===!0&&(e=Tf),{x:Df(e,`left`,`right`),y:Df(e,`top`,`bottom`)}}function Df(e,t,n){return{min:Of(e,t),max:Of(e,n)}}function Of(e,t){return typeof e==`number`?e:e[t]||0}var kf=new WeakMap,Af=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ic(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){let{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;let i=e=>{t?(this.stopAnimation(),this.snapToCursor(rf(e).point)):this.pauseAnimation()},a=(e,t)=>{this.stopAnimation();let{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Is(n),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ql(e=>{let t=this.getAxisMotionValue(e).get()||0;if(ui.test(t)){let{projection:n}=this.visualElement;if(n&&n.layout){let r=n.layout.layoutBox[e];r&&(t=jl(r)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&Pr.postRender(()=>i(e,t)),rs(this.visualElement,`transform`);let{animationState:a}=this.visualElement;a&&a.setActive(`whileDrag`,!0)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;let{offset:o}=t;if(r&&this.currentDirection===null){this.currentDirection=Mf(o),this.currentDirection!==null&&i&&i(this.currentDirection);return}this.updateAxis(`x`,t.point,o),this.updateAxis(`y`,t.point,o),this.visualElement.render(),a&&a(e,t)},s=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Ql(e=>this.getAnimationState(e)===`paused`&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:l}=this.getProps();this.panSession=new df(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,distanceThreshold:n,contextWindow:sf(this.visualElement),element:this.visualElement.current})}stop(e,t){let n=e||this.latestPointerEvent,r=t||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!n)return;let{velocity:a}=r;this.startAnimation(a);let{onDragEnd:o}=this.getProps();o&&Pr.postRender(()=>o(n,r))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive(`whileDrag`,!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){let{drag:r}=this.getProps();if(!n||!jf(e,r,this.currentDirection))return;let i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=vf(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Wd(e)?this.constraints||=this.resolveRefConstraints():e&&n?this.constraints=bf(n.layoutBox,e):this.constraints=!1,this.elastic=Ef(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Ql(e=>{this.constraints!==!1&&this.getAxisMotionValue(e)&&(this.constraints[e]=wf(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){let{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wd(e))return!1;let n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let i=Uc(n,r.root,this.visualElement.getTransformPagePoint()),a=Sf(r.layout.layoutBox,i);if(t){let e=t(Tc(a));this.hasMutatedConstraints=!!e,e&&(a=wc(e))}return a}startAnimation(e){let{drag:t,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),s=this.constraints||{},c=Ql(o=>{if(!jf(o,t,this.currentDirection))return;let c=s&&s[o]||{};a&&(c={min:0,max:0});let l=r?200:1e6,u=r?40:1e7,d={type:`inertia`,velocity:n?e[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(o,d)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){let n=this.getAxisMotionValue(e);return rs(this.visualElement,e),n.start(Vo(e,n,0,t,this.visualElement,!1))}stopAnimation(){Ql(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ql(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps();return n[t]||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ql(t=>{let{drag:n}=this.getProps();if(!jf(t,n,this.currentDirection))return;let{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){let{min:n,max:a}=r.layout.layoutBox[t],o=i.get()||0;i.set(e[t]-Ni(n,a,.5)+o)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Wd(t)||!n||!this.constraints)return;this.stopAnimation();let r={x:0,y:0};Ql(e=>{let t=this.getAxisMotionValue(e);if(t&&this.constraints!==!1){let n=t.get();r[e]=Cf({min:n,max:n},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},``):`none`,n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ql(t=>{if(!jf(t,e,null))return;let n=this.getAxisMotionValue(t),{min:i,max:a}=this.constraints[t];n.set(Ni(i,a,r[t]))})}addListeners(){if(!this.visualElement.current)return;kf.set(this.visualElement,this);let e=this.visualElement.current,t=of(e,`pointerdown`,t=>{let{drag:n,dragListener:r=!0}=this.getProps(),i=t.target,a=i!==e&&Us(i);n&&r&&!a&&this.start(t)}),n=()=>{let{dragConstraints:e}=this.getProps();Wd(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener(`measure`,n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Pr.read(n);let a=uu(window,`resize`,()=>this.scalePositionWithinConstraints()),o=r.addEventListener(`didUpdate`,(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Ql(t=>{let n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))}),this.visualElement.render())}));return()=>{a(),t(),i(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:a=Tf,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:a,dragMomentum:o}}};function jf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Mf(e,t=10){let n=null;return Math.abs(e.y)>t?n=`y`:Math.abs(e.x)>t&&(n=`x`),n}var Nf=class extends Cc{constructor(e){super(e),this.removeGroupControls=$n,this.removeListeners=$n,this.controls=new Af(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$n}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},Pf=e=>(t,n)=>{e&&Pr.postRender(()=>e(t,n))},Ff=class extends Cc{constructor(){super(...arguments),this.removePointerDownListener=$n}onPointerDown(e){this.session=new df(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sf(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Pf(e),onStart:Pf(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Pr.postRender(()=>r(e,t))}}}mount(){this.removePointerDownListener=of(this.node.current,`pointerdown`,e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}},If=!1,Lf=class extends b.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=e;i&&(t.group&&t.group.add(i),n&&n.register&&r&&n.register(i),If&&i.root.didUpdate(),i.addEventListener(`animationComplete`,()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),gu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:n,drag:r,isPresent:i}=this.props,{projection:a}=n;return a?(a.isPresent=i,e.layoutDependency!==t&&a.setOptions({...a.options,layoutDependency:t}),If=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Pr.postRender(()=>{let e=a.getStack();(!e||!e.members.length)&&this.safeToRemove()})),null):null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ms.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;If=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}};function Rf(e){let[t,n]=ad(),r=(0,b.useContext)(zn);return(0,U.jsx)(Lf,{...e,layoutGroup:r,switchLayoutGroup:(0,b.useContext)(Ud),isPresent:t,safeToRemove:n})}var zf={pan:{Feature:Ff},drag:{Feature:Nf,ProjectionNode:Xu,MeasureLayout:Rf}};function Bf(e,t,n){let{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive(`whileHover`,n===`Start`);let i=r[`onHover`+n];i&&Pr.postRender(()=>i(t,rf(t)))}var Vf=class extends Cc{mount(){let{current:e}=this.node;e&&(this.unmount=zs(e,(e,t)=>(Bf(this.node,t,`Start`),e=>Bf(this.node,e,`End`))))}unmount(){}},Hf=class extends Cc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(`:focus-visible`)}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive(`whileFocus`,!1),this.isActive=!1)}mount(){this.unmount=tr(uu(this.node.current,`focus`,()=>this.onFocus()),uu(this.node.current,`blur`,()=>this.onBlur()))}unmount(){}};function Uf(e,t,n){let{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive(`whileTap`,n===`Start`);let i=r[`onTap`+(n===`End`?``:n)];i&&Pr.postRender(()=>i(t,rf(t)))}var Wf=class extends Cc{mount(){let{current:e}=this.node;e&&(this.unmount=Ys(e,(e,t)=>(Uf(this.node,t,`Start`),(e,{success:t})=>Uf(this.node,e,t?`End`:`Cancel`)),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}},Gf=new WeakMap,Kf=new WeakMap,qf=e=>{let t=Gf.get(e.target);t&&t(e)},Jf=e=>{e.forEach(qf)};function Yf({root:e,...t}){let n=e||document;Kf.has(n)||Kf.set(n,{});let r=Kf.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(Jf,{root:e,...t})),r[i]}function Xf(e,t,n){let r=Yf(t);return Gf.set(e,n),r.observe(e),()=>{Gf.delete(e),r.unobserve(e)}}var Zf={some:0,all:1},Qf=class extends Cc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r=`some`,once:i}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof r==`number`?r:Zf[r]};return Xf(this.node.current,a,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive(`whileInView`,t);let{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)})}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>`u`)return;let{props:e,prevProps:t}=this.node;[`amount`,`margin`,`root`].some($f(e,t))&&this.startObserver()}unmount(){}};function $f({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}var ep={inView:{Feature:Qf},tap:{Feature:Wf},focus:{Feature:Hf},hover:{Feature:Vf}},tp={layout:{ProjectionNode:Xu,MeasureLayout:Rf}},Y=Qd({...nf,...ep,...zf,...tp},$d);function np(e){let t=Bn(()=>Xo(e)),{isStatic:n}=(0,b.useContext)(Zu);if(n){let[,n]=(0,b.useState)(e);(0,b.useEffect)(()=>t.on(`change`,n),[])}return t}function rp(e,t){let n=np(t()),r=()=>n.set(t());return r(),Hn(()=>{let t=()=>Pr.preRender(r,!1,!0),n=e.map(e=>e.on(`change`,t));return()=>{n.forEach(e=>e()),Fr(r)}}),n}function ip(e){Jo.current=[],e();let t=rp(Jo.current,e);return Jo.current=void 0,t}function ap(e,t,n,r){if(typeof e==`function`)return ip(e);if(n!==void 0&&!Array.isArray(n)&&typeof t!=`function`)return sp(e,t,n,r);let i=typeof t==`function`?t:Qs(t,n,r);return Array.isArray(e)?op(e,i):op([e],([e])=>i(e))}function op(e,t){let n=Bn(()=>[]);return rp(e,()=>{n.length=0;let r=e.length;for(let t=0;t<r;t++)n[t]=e[t].get();return t(n)})}function sp(e,t,n,r){let i=Bn(()=>Object.keys(n)),a=Bn(()=>({}));for(let o of i)a[o]=ap(e,t,n[o],r);return a}var cp=(0,b.createContext)(null);function lp(e,t,n,r){if(!r)return e;let i=e.findIndex(e=>e.value===t);if(i===-1)return e;let a=r>0?1:-1,o=e[i+a];if(!o)return e;let s=e[i],c=o.layout,l=Ni(c.min,c.max,.5);return a===1&&s.layout.max+n>l||a===-1&&s.layout.min+n<l?Kn(e,i,i+a):e}function up({children:e,as:t=`ul`,axis:n=`y`,onReorder:r,values:i,...a},o){let s=Bn(()=>Y[t]),c=[],l=(0,b.useRef)(!1),u=(0,b.useRef)(null),d={axis:n,groupRef:u,registerItem:(e,t)=>{let r=c.findIndex(t=>e===t.value);r===-1?c.push({value:e,layout:t[n]}):c[r].layout=t[n],c.sort(pp)},updateOrder:(e,t,n)=>{if(l.current)return;let a=lp(c,e,t,n);c!==a&&(l.current=!0,r(a.map(fp).filter(e=>i.indexOf(e)!==-1)))}};(0,b.useEffect)(()=>{l.current=!1});let f=e=>{u.current=e,typeof o==`function`?o(e):o&&(o.current=e)},p={overflowAnchor:`none`,...a.style};return(0,U.jsx)(s,{...a,style:p,ref:f,ignoreStrict:!0,children:(0,U.jsx)(cp.Provider,{value:d,children:e})})}var dp=(0,b.forwardRef)(up);function fp(e){return e.value}function pp(e,t){return e.layout.min-t.layout.min}var mp=50,hp=25,gp=new Set([`auto`,`scroll`]),_p=new WeakMap,vp=new WeakMap,yp=null;function bp(){if(yp){let e=Sp(yp,`y`);e&&(vp.delete(e),_p.delete(e));let t=Sp(yp,`x`);t&&t!==e&&(vp.delete(t),_p.delete(t)),yp=null}}function xp(e,t){let n=getComputedStyle(e),r=t===`x`?n.overflowX:n.overflowY;return gp.has(r)}function Sp(e,t){let n=e?.parentElement;for(;n;){if(xp(n,t))return n;n=n.parentElement}return null}function Cp(e,t,n){let r=t.getBoundingClientRect(),i=n===`x`?r.left:r.top,a=n===`x`?r.right:r.bottom,o=e-i,s=a-e;if(o<mp){let e=1-o/mp;return{amount:-hp*e*e,edge:`start`}}else if(s<mp){let e=1-s/mp;return{amount:hp*e*e,edge:`end`}}return{amount:0,edge:null}}function wp(e,t,n,r){if(!e)return;yp=e;let i=Sp(e,n);if(!i)return;let{amount:a,edge:o}=Cp(t-(n===`x`?window.scrollX:window.scrollY),i,n);if(o===null){vp.delete(i),_p.delete(i);return}if(vp.get(i)!==o){if(!(o===`start`&&r<0||o===`end`&&r>0))return;vp.set(i,o);let e=n===`x`?i.scrollWidth-i.clientWidth:i.scrollHeight-i.clientHeight;_p.set(i,e)}if(a>0){let e=_p.get(i);if((n===`x`?i.scrollLeft:i.scrollTop)>=e)return}n===`x`?i.scrollLeft+=a:i.scrollTop+=a}function Tp(e,t=0){return ts(e)?e:np(t)}function Ep({children:e,style:t={},value:n,as:r=`li`,onDrag:i,onDragEnd:a,layout:o=!0,...s},c){let l=Bn(()=>Y[r]),u=(0,b.useContext)(cp),d={x:Tp(t.x),y:Tp(t.y)},f=ap([d.x,d.y],([e,t])=>e||t?1:`unset`),{axis:p,registerItem:m,updateOrder:h,groupRef:g}=u;return(0,U.jsx)(l,{drag:p,...s,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:f},layout:o,onDrag:(e,t)=>{let{velocity:r,point:a}=t;h(n,d[p].get(),r[p]),wp(g.current,a[p],p,r[p]),i&&i(e,t)},onDragEnd:(e,t)=>{bp(),a&&a(e,t)},onLayoutMeasure:e=>{m(n,e)},ref:c,ignoreStrict:!0,children:e})}var Dp=(0,b.forwardRef)(Ep),Op=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),kp=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),Ap=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),jp=e=>{let t=Ap(e);return t.charAt(0).toUpperCase()+t.slice(1)},Mp={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},Np=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0;return!1},Pp=(0,b.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,b.createElement)(`svg`,{ref:c,...Mp,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Op(`lucide`,i),...!a&&!Np(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,b.createElement)(e,t)),...Array.isArray(a)?a:[a]])),Fp=(e,t)=>{let n=(0,b.forwardRef)(({className:n,...r},i)=>(0,b.createElement)(Pp,{ref:i,iconNode:t,className:Op(`lucide-${kp(jp(e))}`,`lucide-${e}`,n),...r}));return n.displayName=jp(e),n},Ip=Fp(`arrow-left`,[[`path`,{d:`m12 19-7-7 7-7`,key:`1l729n`}],[`path`,{d:`M19 12H5`,key:`x3x0zl`}]]),Lp=Fp(`arrow-right`,[[`path`,{d:`M5 12h14`,key:`1ays0h`}],[`path`,{d:`m12 5 7 7-7 7`,key:`xquz4c`}]]),Rp=Fp(`award`,[[`path`,{d:`m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526`,key:`1yiouv`}],[`circle`,{cx:`12`,cy:`8`,r:`6`,key:`1vp47v`}]]),zp=Fp(`book-open`,[[`path`,{d:`M12 7v14`,key:`1akyts`}],[`path`,{d:`M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z`,key:`ruj8y`}]]),Bp=Fp(`chevron-left`,[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]]),Vp=Fp(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),Hp=Fp(`circle-check-big`,[[`path`,{d:`M21.801 10A10 10 0 1 1 17 3.335`,key:`yps3ct`}],[`path`,{d:`m9 11 3 3L22 4`,key:`1pflzl`}]]),Up=Fp(`circle-check`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),Wp=Fp(`circle-question-mark`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3`,key:`1u773s`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),Gp=Fp(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),Kp=Fp(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),qp=Fp(`grip-horizontal`,[[`circle`,{cx:`12`,cy:`9`,r:`1`,key:`124mty`}],[`circle`,{cx:`19`,cy:`9`,r:`1`,key:`1ruzo2`}],[`circle`,{cx:`5`,cy:`9`,r:`1`,key:`1a8b28`}],[`circle`,{cx:`12`,cy:`15`,r:`1`,key:`1e56xg`}],[`circle`,{cx:`19`,cy:`15`,r:`1`,key:`1a92ep`}],[`circle`,{cx:`5`,cy:`15`,r:`1`,key:`5r1jwy`}]]),Jp=Fp(`lock`,[[`rect`,{width:`18`,height:`11`,x:`3`,y:`11`,rx:`2`,ry:`2`,key:`1w4ew1`}],[`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`,key:`fwvmzm`}]]),Yp=Fp(`map-pin`,[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]]),Xp=Fp(`moon`,[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]]),Zp=Fp(`mouse-pointer-2`,[[`path`,{d:`M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z`,key:`edeuup`}]]),Qp=Fp(`pen`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),$p=Fp(`refresh-cw`,[[`path`,{d:`M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8`,key:`v9h5vc`}],[`path`,{d:`M21 3v5h-5`,key:`1q7to0`}],[`path`,{d:`M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16`,key:`3uifl3`}],[`path`,{d:`M8 16H3v5`,key:`1cv678`}]]),em=Fp(`shield-check`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),tm=Fp(`shield`,[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}]]),nm=Fp(`sparkles`,[[`path`,{d:`M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z`,key:`1s2grr`}],[`path`,{d:`M20 2v4`,key:`1rf3ol`}],[`path`,{d:`M22 4h-4`,key:`gwowj6`}],[`circle`,{cx:`4`,cy:`20`,r:`2`,key:`6kqj1y`}]]),rm=Fp(`star`,[[`path`,{d:`M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z`,key:`r04s7s`}]]),im=Fp(`sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),am=Fp(`target`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`6`,key:`1vlfrh`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}]]),om=Fp(`trending-down`,[[`path`,{d:`M16 17h6v-6`,key:`t6n2it`}],[`path`,{d:`m22 17-8.5-8.5-5 5L2 7`,key:`x473p`}]]),sm=Fp(`trending-up`,[[`path`,{d:`M16 7h6v6`,key:`box55l`}],[`path`,{d:`m22 7-8.5 8.5-5-5L2 17`,key:`1t1m79`}]]),cm=Fp(`trophy`,[[`path`,{d:`M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978`,key:`1n3hpd`}],[`path`,{d:`M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978`,key:`rfe1zi`}],[`path`,{d:`M18 9h1.5a1 1 0 0 0 0-5H18`,key:`7xy6bh`}],[`path`,{d:`M4 22h16`,key:`57wxv0`}],[`path`,{d:`M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z`,key:`1mhfuq`}],[`path`,{d:`M6 9H4.5a1 1 0 0 1 0-5H6`,key:`tex48p`}]]),lm=Fp(`user`,[[`path`,{d:`M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2`,key:`975kel`}],[`circle`,{cx:`12`,cy:`7`,r:`4`,key:`17ys0d`}]]),um=Fp(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),dm=Fp(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),fm=S();function pm(){let e=(0,fm.c)(13),{theme:t,toggleTheme:n}=Rn(),r,i;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={scale:1.05},i={scale:.95},e[0]=r,e[1]=i):(r=e[0],i=e[1]);let a=t===`dark`?0:180,o;e[2]===a?o=e[3]:(o={rotate:a},e[2]=a,e[3]=o);let s;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(s={duration:.3},e[4]=s):s=e[4];let c;e[5]===t?c=e[6]:(c=t===`dark`?(0,U.jsx)(im,{className:`w-6 h-6 text-accent-yellow`}):(0,U.jsx)(Xp,{className:`w-6 h-6 text-dark-bg`}),e[5]=t,e[6]=c);let l;e[7]!==o||e[8]!==c?(l=(0,U.jsx)(Y.div,{initial:!1,animate:o,transition:s,children:c}),e[7]=o,e[8]=c,e[9]=l):l=e[9];let u;return e[10]!==l||e[11]!==n?(u=(0,U.jsx)(Y.button,{onClick:n,className:`fixed top-6 right-6 z-50 p-3 rounded-2xl glass hover:shadow-glow transition-smooth`,whileHover:r,whileTap:i,"aria-label":`Toggle theme`,children:l}),e[10]=l,e[11]=n,e[12]=u):u=e[12],u}var mm=`/mathhero/assets/map-5M68N00F.jpg`,hm=e=>{let t,n=new Set,r=(e,r)=>{let i=typeof e==`function`?e(t):e;if(!Object.is(i,t)){let e=t;t=r??(typeof i!=`object`||!i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,a={setState:r,getState:i,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e))},o=t=e(r,i,a);return a},gm=(e=>e?hm(e):hm),_m=e=>e;function vm(e,t=_m){let n=b.useSyncExternalStore(e.subscribe,b.useCallback(()=>t(e.getState()),[e,t]),b.useCallback(()=>t(e.getInitialState()),[e,t]));return b.useDebugValue(n),n}var ym=e=>{let t=gm(e),n=e=>vm(t,e);return Object.assign(n,t),n},bm=(e=>e?ym(e):ym);function xm(e,t){let n;try{n=e()}catch{return}return{getItem:e=>{let r=e=>e===null?null:JSON.parse(e,t?.reviver),i=n.getItem(e)??null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,t?.replacer)),removeItem:e=>n.removeItem(e)}}var Sm=e=>t=>{try{let n=e(t);return n instanceof Promise?n:{then(e){return Sm(e)(n)},catch(e){return this}}}catch(e){return{then(e){return this},catch(t){return Sm(t)(e)}}}},Cm=(e,t)=>(n,r,i)=>{let a={storage:xm(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,s=0,c=new Set,l=new Set,u=a.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...e)},r,i);let d=()=>{let e=a.partialize({...r()});return u.setItem(a.name,{state:e,version:a.version})},f=i.setState;i.setState=(e,t)=>(f(e,t),d());let p=e((...e)=>(n(...e),d()),r,i);i.getInitialState=()=>p;let m,h=()=>{if(!u)return;let e=++s;o=!1,c.forEach(e=>e(r()??p));let t=a.onRehydrateStorage?.call(a,r()??p)||void 0;return Sm(u.getItem.bind(u))(a.name).then(e=>{if(e)if(typeof e.version==`number`&&e.version!==a.version){if(a.migrate){let t=a.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error(`State loaded from storage couldn't be migrated since no migrate function was provided`)}else return[!1,e.state];return[!1,void 0]}).then(t=>{if(e!==s)return;let[i,o]=t;if(m=a.merge(o,r()??p),n(m,!0),i)return d()}).then(()=>{e===s&&(t?.(m,void 0),m=r(),o=!0,l.forEach(e=>e(m)))}).catch(n=>{e===s&&t?.(void 0,n)})};return i.persist={setOptions:e=>{a={...a,...e},e.storage&&(u=e.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>h(),hasHydrated:()=>o,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||h(),m||p},wm={totalProblemsSolved:0,totalAttempts:0,totalPoints:0,lastPlayedTimestamp:null,currentStreak:0};const Tm=bm()(Cm((e,t)=>({username:null,heroName:null,selectedCharacter:null,completedLevels:[],stats:wm,setProfile:(t,n)=>e({username:t,heroName:n}),setSelectedCharacter:t=>e({selectedCharacter:t}),recordResult:(n,r)=>{let{stats:i}=t(),a=new Date,o=a.toLocaleDateString(`en-CA`),s=i.currentStreak,c=i.lastPlayedTimestamp?new Date(i.lastPlayedTimestamp).toLocaleDateString(`en-CA`):null;if(!c)s=1;else if(c!==o){let e=new Date(c),t=new Date(o).getTime()-e.getTime(),n=Math.round(t/(1e3*60*60*24));n===1?s+=1:n>1&&(s=1)}e({stats:{...i,totalPoints:i.totalPoints+n,totalAttempts:i.totalAttempts+1,totalProblemsSolved:r?i.totalProblemsSolved+1:i.totalProblemsSolved,lastPlayedTimestamp:a.getTime(),currentStreak:s}})},completeLevel:n=>{let{completedLevels:r}=t();r.includes(n)||e({completedLevels:[...r,n]})},logout:()=>e({username:null,heroName:null,selectedCharacter:null,completedLevels:[],stats:wm})}),{name:`math-hero-storage`}));var Em=S(),Dm=[{id:`level1`,name:`Sumas y Restas`,path:`/practice/addition`},{id:`level2`,name:`Multiplicaciones`,path:`/practice/multiplication`},{id:`level3`,name:`Divisiones`,path:`/practice/division`},{id:`level4`,name:`Fracciones`,path:`/practice/fractions`},{id:`level5`,name:`Maestro de Funciones`,path:`/practice/functions`},{id:`level6`,name:`Ordenamiento decimal`,path:`/practice/sorting-decimals`},{id:`level7`,name:`Reto Cartesiano`,path:`/practice/cartesian`},{id:`level8`,name:`Series Alternadas`,path:`/practice/alternating`},{id:`level9`,name:`Reto Decimales`,path:`/practice/decimals`}];function Om(e){let t=(0,Em.c)(17),{range:n}=e,r=Qe(),{completedLevels:i}=Tm(),a,o,s;if(t[0]!==i||t[1]!==r||t[2]!==n){let e=n?Dm.slice(n[0]-1,n[1]):Dm,c=km,l;t[6]===i?l=t[7]:(l=e=>i.includes(e),t[6]=i,t[7]=l);let u=l;s=`relative w-full overflow-hidden font-mono flex flex-col items-center`,a=`grid grid-cols-1 sm:grid-cols-3 gap-6 w-full max-w-2xl px-4 py-8`;let d;t[8]!==u||t[9]!==r?(d=e=>{let t=Dm.findIndex(t=>t.id===e.id),n=c(e.id),i=u(e.id);return(0,U.jsxs)(Y.div,{className:`flex flex-col items-center gap-3`,children:[(0,U.jsx)(Y.button,{whileHover:n?{scale:1.05,y:-5}:{},whileTap:n?{scale:.95}:{},onClick:()=>n&&r(e.path),disabled:!n,className:`
                  relative aspect-square w-full rounded-2xl flex items-center justify-center text-4xl font-black transition-all border-b-8
                  ${n?`bg-white border-gray-300 text-gray-700 shadow-xl cursor-pointer hover:shadow-2xl`:`bg-gray-600/80 border-gray-700 text-gray-400 cursor-not-allowed opacity-80 shadow-inner`}
                `,children:n?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`span`,{className:`drop-shadow-sm`,children:t+1}),i&&(0,U.jsx)(`div`,{className:`absolute -top-3 -right-3 bg-green-500 text-white rounded-full p-1 shadow-lg border-2 border-white`,children:(0,U.jsx)(Up,{className:`w-5 h-5`})})]}):(0,U.jsx)(Jp,{className:`w-8 h-8 opacity-50`})}),(0,U.jsx)(`span`,{className:`text-[10px] font-black uppercase text-center leading-tight h-8
                ${n?`text-white`:`text-white/20`}
              `,children:e.name})]},e.id)},t[8]=u,t[9]=r,t[10]=d):d=t[10],o=e.map(d),t[0]=i,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=s}else a=t[3],o=t[4],s=t[5];let c;t[11]!==a||t[12]!==o?(c=(0,U.jsx)(`div`,{className:a,children:o}),t[11]=a,t[12]=o,t[13]=c):c=t[13];let l;return t[14]!==s||t[15]!==c?(l=(0,U.jsx)(`div`,{className:s,children:c}),t[14]=s,t[15]=c,t[16]=l):l=t[16],l}function km(e){return!0}var Am=S(),jm=[{id:`world1`,name:`Praderas del clculo`,description:`Domina las bases del clculo mgico: Sumas, Restas, Multiplicaciones, divisiones y fraccionarios.`,x:`20%`,y:`70%`,levelRange:[1,4]},{id:`world2`,name:`Tumbas de de las cifras`,description:`Aprende a dominar la realidad con secuencias aritmeticas.`,x:`45%`,y:`60%`,levelRange:[5,7]},{id:`world3`,name:`Desierto Decimal`,description:`Enfrntate a los decimales y los porcentajes.`,x:`70%`,y:`75%`,levelRange:[8,10]},{id:`world4`,name:`Frio Geometrico`,description:`Domina las formas y los espacios.`,x:`75%`,y:`35%`,levelRange:[11,13]},{id:`world5`,name:`Volcan de los Retos Matematicos`,description:`El desafo final. Los secretos del universo matemtico te esperan.`,x:`40%`,y:`25%`,levelRange:[14,16]}];function Mm(){let e=(0,Am.c)(16),[t,n]=(0,b.useState)(null),{completedLevels:r}=Tm(),i;e[0]===r?i=e[1]:(i=e=>{if(e===0)return!0;let t=`level${jm[e-1].levelRange[1]}`;return r.includes(t)},e[0]=r,e[1]=i);let a=i,o;e[2]===r?o=e[3]:(o=e=>{for(let t=e.levelRange[0];t<=e.levelRange[1];t++)if(!r.includes(`level${t}`))return!1;return!0},e[2]=r,e[3]=o);let s=o,c,l;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,U.jsx)(`img`,{src:mm,alt:`World Map`,className:`w-full h-full  opacity-80`}),l=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-dark-bg/40 to-transparent pointer-events-none`}),e[4]=c,e[5]=l):(c=e[4],l=e[5]);let u;e[6]!==s||e[7]!==a?(u=jm.map((e,t)=>{let r=a(t),i=s(e);return(0,U.jsx)(Y.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.1},className:`absolute -translate-x-1/2 -translate-y-1/2`,style:{left:e.x,top:e.y},children:(0,U.jsxs)(`button`,{onClick:()=>r&&n(e),className:`
                group relative flex flex-col items-center gap-2
                ${r?`cursor-pointer`:`cursor-not-allowed`}
              `,children:[(0,U.jsxs)(`div`,{className:`
                relative w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300
                ${r?`bg-accent-yellow shadow-glow-yellow scale-110 group-hover:scale-125`:`bg-gray-700/80 grayscale`}
              `,children:[r?i?(0,U.jsx)(Up,{className:`w-6 h-6 text-dark-bg`}):(0,U.jsx)(Yp,{className:`w-6 h-6 text-dark-bg`}):(0,U.jsx)(Jp,{className:`w-5 h-5 text-gray-400`}),r&&!i&&(0,U.jsx)(`div`,{className:`absolute inset-0 rounded-full bg-accent-yellow animate-ping opacity-20`})]}),(0,U.jsx)(`div`,{className:`
                px-3 py-1 rounded-lg border-2 whitespace-nowrap backdrop-blur-md transition-all
                ${r?`bg-dark-bg/80 border-accent-yellow text-accent-yellow scale-100 group-hover:scale-110`:`bg-gray-800/80 border-gray-700 text-gray-500 scale-90`}
              `,children:(0,U.jsx)(`span`,{className:`text-md font-black uppercase`,children:e.name})})]})},e.id)}),e[6]=s,e[7]=a,e[8]=u):u=e[8];let d;e[9]===t?d=e[10]:(d=t&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-4xl bg-dark-card rounded-3xl border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>n(null),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`mb-8`,children:[(0,U.jsxs)(`h3`,{className:`text-3xl font-black text-accent-yellow uppercase tracking-tighter flex items-center gap-3`,children:[(0,U.jsx)(Yp,{className:`w-8 h-8`}),t.name]}),(0,U.jsx)(`p`,{className:`text-text-secondary mt-2`,children:t.description})]}),(0,U.jsx)(`div`,{className:`bg-dark-bg/50 rounded-2xl p-6 border-2 border-white/5`,children:(0,U.jsx)(Om,{range:t.levelRange})})]}),(0,U.jsx)(`div`,{className:`absolute top-0 right-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`}),(0,U.jsx)(`div`,{className:`absolute top-0 left-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`})]})}),e[9]=t,e[10]=d);let f;e[11]===d?f=e[12]:(f=(0,U.jsx)(J,{children:d}),e[11]=d,e[12]=f);let p;return e[13]!==u||e[14]!==f?(p=(0,U.jsxs)(`div`,{className:`relative w-full aspect-[12/10] max-h-[1000px] overflow-hidden rounded-[2rem] border-8 border-dark-card shadow-2xl bg-dark-bg`,children:[c,l,u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p}var Nm=`/mathhero/`;const Pm=[{id:`mz-evil-5`,path:`${Nm}sprites/characters/8D MZevil5[VS8].png`,name:`Zevil V`},{id:`actor-2-4`,path:`${Nm}sprites/characters/8D actor 2-4[VS8].png`,name:`Caballero mbar`},{id:`actor-3-5`,path:`${Nm}sprites/characters/8D actor 3-5[VS8].png`,name:`Sabio Esmeralda`},{id:`actor-3-7`,path:`${Nm}sprites/characters/8D actor 3-7[VS8].png`,name:`Guardin del Bosque`},{id:`actor1-1`,path:`${Nm}sprites/characters/8D actor1-1[VS8].png`,name:`Hroe del Amanecer`},{id:`actor1-2`,path:`${Nm}sprites/characters/8D actor1-2[VS8].png`,name:`Paladn Azur`},{id:`actor1-3`,path:`${Nm}sprites/characters/8D actor1-3[VS8].png`,name:`Maga Escarlata`},{id:`actor1-4`,path:`${Nm}sprites/characters/8D actor1-4[VS8].png`,name:`Bifurcador de Rayos`},{id:`actor1-5`,path:`${Nm}sprites/characters/8D actor1-5[VS8].png`,name:`Explorador del Viento`},{id:`actor1-6`,path:`${Nm}sprites/characters/8D actor1-6[VS8].png`,name:`Caballero del Sol`},{id:`actor1-7`,path:`${Nm}sprites/characters/8D actor1-7[VS8].png`,name:`Centinela Plateada`},{id:`actor1-8`,path:`${Nm}sprites/characters/8D actor1-8[VS8].png`,name:`Eratega Maestro`},{id:`monster-4`,path:`${Nm}sprites/characters/8D monster-4 [VS8].png`,name:`Bestia Rnica`},{id:`nature7`,path:`${Nm}sprites/characters/8D nature7 [VS8].png`,name:`Espritu Natural`}];(()=>typeof window<`u`&&(window.document?.createElement||window.navigator?.product===`ReactNative`))()?b.useLayoutEffect:b.useEffect;function Fm(e,t,n){if(!e)return;if(n(e)===!0)return e;let r=t?e.return:e.child;for(;r;){let e=Fm(r,t,n);if(e)return e;r=t?null:r.sibling}}function Im(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}var Lm=Im(b.createContext(null)),Rm=class extends b.Component{render(){return b.createElement(Lm.Provider,{value:this._reactInternals},this.props.children)}};function zm(){let e=b.useContext(Lm);if(e===null)throw Error(`its-fine: useFiber must be called within a <FiberProvider />!`);let t=b.useId();return b.useMemo(()=>{for(let n of[e,e?.alternate]){if(!n)continue;let e=Fm(n,!1,e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}});if(e)return e}},[e,t])}var Bm=Symbol.for(`react.context`),Vm=e=>typeof e==`object`&&!!e&&`$$typeof`in e&&e.$$typeof===Bm;function Hm(){let e=zm(),[t]=b.useState(()=>new Map);t.clear();let n=e;for(;n;){let e=n.type;Vm(e)&&e!==Lm&&!t.has(e)&&t.set(e,b.use(Im(e))),n=n.return}return t}function Um(){let e=Hm();return b.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>r=>b.createElement(t,null,b.createElement(n.Provider,{...r,value:e.get(n)})),e=>b.createElement(Rm,{...e})),[e])}var X=(e=>(e.Application=`application`,e.WebGLPipes=`webgl-pipes`,e.WebGLPipesAdaptor=`webgl-pipes-adaptor`,e.WebGLSystem=`webgl-system`,e.WebGPUPipes=`webgpu-pipes`,e.WebGPUPipesAdaptor=`webgpu-pipes-adaptor`,e.WebGPUSystem=`webgpu-system`,e.CanvasSystem=`canvas-system`,e.CanvasPipesAdaptor=`canvas-pipes-adaptor`,e.CanvasPipes=`canvas-pipes`,e.Asset=`asset`,e.LoadParser=`load-parser`,e.ResolveParser=`resolve-parser`,e.CacheParser=`cache-parser`,e.DetectionParser=`detection-parser`,e.MaskEffect=`mask-effect`,e.BlendMode=`blend-mode`,e.TextureSource=`texture-source`,e.Environment=`environment`,e.ShapeBuilder=`shape-builder`,e.Batcher=`batcher`,e))(X||{}),Wm=e=>{if(typeof e==`function`||typeof e==`object`&&e.extension){if(!e.extension)throw Error(`Extension class must have an extension object`);e={...typeof e.extension==`object`?e.extension:{type:e.extension},ref:e}}if(typeof e==`object`)e={...e};else throw Error(`Invalid extension type`);return typeof e.type==`string`&&(e.type=[e.type]),e},Gm=(e,t)=>Wm(e).priority??t,Km={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Wm).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(Wm).forEach(e=>{e.type.forEach(t=>{let n=this._addHandlers,r=this._queue;n[t]?n[t]?.(e):(r[t]=r[t]||[],r[t]?.push(e))})}),this},handle(e,t,n){let r=this._addHandlers,i=this._removeHandlers;if(r[e]||i[e])throw Error(`Extension type ${e} already has a handler`);r[e]=t,i[e]=n;let a=this._queue;return a[e]&&(a[e]?.forEach(e=>t(e)),delete a[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(e,t,n=-1){return this.handle(e,e=>{t.findIndex(t=>t.name===e.name)>=0||(t.push({name:e.name,value:e.ref}),t.sort((e,t)=>Gm(t.value,n)-Gm(e.value,n)))},e=>{let n=t.findIndex(t=>t.name===e.name);n!==-1&&t.splice(n,1)})},handleByList(e,t,n=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>Gm(t,n)-Gm(e,n)))},e=>{let n=t.indexOf(e.ref);n!==-1&&t.splice(n,1)})},mixin(e,...t){for(let n of t)Object.defineProperties(e.prototype,Object.getOwnPropertyDescriptors(n))}},qm={extension:{type:X.Environment,name:`browser`,priority:-1},test:()=>!0,load:async()=>{await D(()=>import(`./browserAll-oJaPpsF4.js`),__vite__mapDeps([0,1]))}},Jm={extension:{type:X.Environment,name:`webworker`,priority:0},test:()=>typeof self<`u`&&self.WorkerGlobalScope!==void 0,load:async()=>{await D(()=>import(`./webworkerAll-x4OCg8EV.js`),__vite__mapDeps([2,1]))}},Ym=class e{constructor(e,t,n){this._x=t||0,this._y=n||0,this._observer=e}clone(t){return new e(t??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}},Xm=u(s(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1).default,Zm=Math.PI*2,Qm=180/Math.PI,$m=Math.PI/180,eh=class e{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new e(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return th.x=0,th.y=0,th}},th=new eh,Z=class e{constructor(e=1,t=0,n=0,r=1,i=0,a=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,r,i,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a,this}toArray(e,t){this.array||=new Float32Array(9);let n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t||=new eh;let n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}applyInverse(e,t){t||=new eh;let n=this.a,r=this.b,i=this.c,a=this.d,o=this.tx,s=this.ty,c=1/(n*a+i*-r),l=e.x,u=e.y;return t.x=a*c*l+-i*c*u+(s*i-o*a)*c,t.y=n*c*u+-r*c*l+(-s*n+o*r)*c,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this}append(e){let t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}appendFrom(e,t){let n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,c=t.a,l=t.b,u=t.c,d=t.d;return this.a=n*c+r*u,this.b=n*l+r*d,this.c=i*c+a*u,this.d=i*l+a*d,this.tx=o*c+s*u+t.tx,this.ty=o*l+s*d+t.ty,this}setTransform(e,t,n,r,i,a,o,s,c){return this.a=Math.cos(o+c)*i,this.b=Math.sin(o+c)*i,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let t=this.a,n=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,n=this.b,r=this.c,i=this.d,a=e.pivot,o=-Math.atan2(-r,i),s=Math.atan2(n,t),c=Math.abs(o+s);return c<1e-5||Math.abs(Zm-c)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*n+a.y*i),e}invert(){let e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,a=e*r-t*n;return this.a=r/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*i)/a,this.ty=-(e*this.ty-t*i)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return rh.identity()}static get shared(){return nh.identity()}},nh=new Z,rh=new Z,ih=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ah=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],oh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],sh=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ch=[],lh=[],uh=Math.sign;function dh(){for(let e=0;e<16;e++){let t=[];ch.push(t);for(let n=0;n<16;n++){let r=uh(ih[e]*ih[n]+oh[e]*ah[n]),i=uh(ah[e]*ih[n]+sh[e]*ah[n]),a=uh(ih[e]*oh[n]+oh[e]*sh[n]),o=uh(ah[e]*oh[n]+sh[e]*sh[n]);for(let e=0;e<16;e++)if(ih[e]===r&&ah[e]===i&&oh[e]===a&&sh[e]===o){t.push(e);break}}}for(let e=0;e<16;e++){let t=new Z;t.set(ih[e],ah[e],oh[e],sh[e],0,0),lh.push(t)}}dh();var fh={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>ih[e],uY:e=>ah[e],vX:e=>oh[e],vY:e=>sh[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>ch[e][t],sub:(e,t)=>ch[e][fh.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)==2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?fh.S:fh.N:Math.abs(t)*2<=Math.abs(e)?e>0?fh.E:fh.W:t>0?e>0?fh.SE:fh.SW:e>0?fh.NE:fh.NW,matrixAppendRotationInv:(e,t,n=0,r=0)=>{let i=lh[fh.inv(t)];i.tx=n,i.ty=r,e.append(i)},transformRectCoords:(e,t,n,r)=>{let{x:i,y:a,width:o,height:s}=e,{x:c,y:l,width:u,height:d}=t;return n===fh.E?(r.set(i+c,a+l,o,s),r):n===fh.S?r.set(u-a-s+c,i+l,s,o):n===fh.W?r.set(u-i-o+c,d-a-s+l,o,s):n===fh.N?r.set(a+c,d-i-o+l,s,o):r.set(i+c,a+l,o,s)}},ph=[new eh,new eh,new eh,new eh],mh=class e{constructor(e=0,t=0,n=0,r=0){this.type=`rectangle`,this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new e(0,0,0,0)}clone(){return new e(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,n,r=.5){let{width:i,height:a}=this;if(i<=0||a<=0)return!1;let o=this.x,s=this.y,c=n*(1-r),l=n-c,u=o-c,d=o+i+c,f=s-c,p=s+a+c,m=o+l,h=o+i-l,g=s+l,_=s+a-l;return e>=u&&e<=d&&t>=f&&t<=p&&!(e>m&&e<h&&t>g&&t<_)}intersects(e,t){if(!t){let t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;let n=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>n}let n=this.left,r=this.right,i=this.top,a=this.bottom;if(r<=n||a<=i)return!1;let o=ph[0].set(e.left,e.top),s=ph[1].set(e.left,e.bottom),c=ph[2].set(e.right,e.top),l=ph[3].set(e.right,e.bottom);if(c.x<=o.x||s.y<=o.y)return!1;let u=Math.sign(t.a*t.d-t.b*t.c);if(u===0||(t.apply(o,o),t.apply(s,s),t.apply(c,c),t.apply(l,l),Math.max(o.x,s.x,c.x,l.x)<=n||Math.min(o.x,s.x,c.x,l.x)>=r||Math.max(o.y,s.y,c.y,l.y)<=i||Math.min(o.y,s.y,c.y,l.y)>=a))return!1;let d=u*(s.y-o.y),f=u*(o.x-s.x),p=d*n+f*i,m=d*r+f*i,h=d*n+f*a,g=d*r+f*a;if(Math.max(p,m,h,g)<=d*o.x+f*o.y||Math.min(p,m,h,g)>=d*l.x+f*l.y)return!1;let _=u*(o.y-c.y),v=u*(c.x-o.x),y=_*n+v*i,b=_*r+v*i,x=_*n+v*a,S=_*r+v*a;return!(Math.max(y,b,x,S)<=_*o.x+v*o.y||Math.min(y,b,x,S)>=_*l.x+v*l.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this}ceil(e=1,t=.001){let n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){let t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this}getBounds(t){return t||=new e,t.copyFrom(this),t}containsRect(e){if(this.width<=0||this.height<=0)return!1;let t=e.x,n=e.y,r=e.x+e.width,i=e.y+e.height;return t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height&&r>=this.x&&r<this.x+this.width&&i>=this.y&&i<this.y+this.height}set(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}},hh={default:-1};function gh(e=`default`){return hh[e]===void 0&&(hh[e]=-1),++hh[e]}var _h=new Set,vh=`8.0.0`,yh=`8.3.4`,bh={quiet:!1,noColor:!1},xh=(e,t,n=3)=>{if(bh.quiet||_h.has(t))return;let r=Error().stack,i=`${t}
Deprecated since v${e}`,a=typeof console.groupCollapsed==`function`&&!bh.noColor;r===void 0?console.warn(`PixiJS Deprecation Warning: `,i):(r=r.split(`
`).splice(n).join(`
`),a?(console.groupCollapsed(`%cPixiJS Deprecation Warning: %c%s`,`color:#614108;background:#fffbe6`,`font-weight:normal;color:#614108;background:#fffbe6`,i),console.warn(r),console.groupEnd()):(console.warn(`PixiJS Deprecation Warning: `,i),console.warn(r))),_h.add(t)};Object.defineProperties(xh,{quiet:{get:()=>bh.quiet,set:e=>{bh.quiet=e},enumerable:!0,configurable:!1},noColor:{get:()=>bh.noColor,set:e=>{bh.noColor=e},enumerable:!0,configurable:!1}});var Sh=()=>{};function Ch(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function wh(e){return!(e&e-1)&&!!e}function Th(e){let t={};for(let n in e)e[n]!==void 0&&(t[n]=e[n]);return t}var Eh=Object.create(null);function Dh(e){let t=Eh[e];return t===void 0&&(Eh[e]=gh(`resource`)),t}var Oh=class e extends Xm{constructor(t={}){super(),this._resourceType=`textureSampler`,this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...e.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){xh(vh,`TextureStyle.wrapMode is now TextureStyle.addressMode`),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode=`linear`)}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit(`change`,this)}_generateResourceId(){return this._sharedResourceId=Dh(`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`),this._resourceId}destroy(){this.destroyed=!0,this.emit(`destroy`,this),this.emit(`change`,this),this.removeAllListeners()}};Oh.defaultOptions={addressMode:`clamp-to-edge`,scaleMode:`linear`};var kh=Oh,Ah=class e extends Xm{constructor(t={}){super(),this.options=t,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=gh(`textureSource`),this._resourceType=`textureSource`,this._resourceId=gh(`resource`),this.uploadMethodId=`unknown`,this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format=`rgba8unorm`,this.dimension=`2d`,this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...e.defaultOptions,...t},this.label=t.label??``,this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new kh(Th(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off(`change`,this._onStyleChange,this),this._style=e,this._style?.on(`change`,this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit(`styleChange`,this)}update(){if(this.resource){let e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit(`update`,this)}destroy(){this.destroyed=!0,this.unload(),this.emit(`destroy`,this),this._style&&=(this._style.destroy(),null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){for(let e in this._resourceId=gh(`resource`),this.emit(`change`,this),this.emit(`unload`,this),this._gpuData)this._gpuData[e]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){let{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){let{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,n){n||=this._resolution,e||=this.width,t||=this.height;let r=Math.round(e*n),i=Math.round(t*n);return this.width=r/n,this.height=i/n,this._resolution=n,this.pixelWidth===r&&this.pixelHeight===i?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=i,this.emit(`resize`,this),this._resourceId=gh(`resource`),this.emit(`change`,this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit(`updateMipmaps`,this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=wh(this.pixelWidth)&&wh(this.pixelHeight)}static test(e){throw Error(`Unimplemented`)}};Ah.defaultOptions={resolution:1,format:`bgra8unorm`,alphaMode:`premultiply-alpha-on-upload`,dimensions:`2d`,mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};var jh=Ah,Mh=class extends jh{constructor(e){let t=e.resource||new Float32Array(e.width*e.height*4),n=e.format;n||=t instanceof Float32Array?`rgba32float`:t instanceof Int32Array||t instanceof Uint32Array?`rgba32uint`:t instanceof Int16Array||t instanceof Uint16Array?`rgba16uint`:(t instanceof Int8Array,`bgra8unorm`),super({...e,resource:t,format:n}),this.uploadMethodId=`buffer`}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};Mh.extension=X.TextureSource;var Nh=new Z,Ph=class{constructor(e,t){this.mapCoord=new Z,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,t===void 0?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener(`update`,this.update,this),this._texture=e,this._texture.addListener(`update`,this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);let n=this.mapCoord;for(let r=0;r<e.length;r+=2){let i=e[r],a=e[r+1];t[r]=i*n.a+a*n.c+n.tx,t[r+1]=i*n.b+a*n.d+n.ty}return t}update(){let e=this._texture;this._updateID++;let t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);let n=e.orig,r=e.trim;r&&(Nh.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Nh));let i=e.source,a=this.uClampFrame,o=this.clampMargin/i._resolution,s=this.clampOffset/i._resolution;return a[0]=(e.frame.x+o+s)/i.width,a[1]=(e.frame.y+o+s)/i.height,a[2]=(e.frame.x+e.frame.width-o+s)/i.width,a[3]=(e.frame.y+e.frame.height-o+s)/i.height,this.uClampOffset[0]=this.clampOffset/i.pixelWidth,this.uClampOffset[1]=this.clampOffset/i.pixelHeight,this.isSimple=e.frame.width===i.width&&e.frame.height===i.height&&e.rotate===0,!0}},Q=class extends Xm{constructor({source:e,label:t,frame:n,orig:r,trim:i,defaultAnchor:a,defaultBorders:o,rotate:s,dynamic:c}={}){if(super(),this.uid=gh(`texture`),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new mh,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new jh,this.noFrame=!n,n)this.frame.copyFrom(n);else{let{width:e,height:t}=this._source;this.frame.width=e,this.frame.height=t}this.orig=r||this.frame,this.trim=i,this.rotate=s??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(e){this._source&&this._source.off(`resize`,this.update,this),this._source=e,e.on(`resize`,this.update,this),this.emit(`update`,this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||=new Ph(this),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:e,frame:t}=this,{width:n,height:r}=this._source,i=t.x/n,a=t.y/r,o=t.width/n,s=t.height/r,c=this.rotate;if(c){let t=o/2,n=s/2,r=i+t,l=a+n;c=fh.add(c,fh.NW),e.x0=r+t*fh.uX(c),e.y0=l+n*fh.uY(c),c=fh.add(c,2),e.x1=r+t*fh.uX(c),e.y1=l+n*fh.uY(c),c=fh.add(c,2),e.x2=r+t*fh.uX(c),e.y2=l+n*fh.uY(c),c=fh.add(c,2),e.x3=r+t*fh.uX(c),e.y3=l+n*fh.uY(c)}else e.x0=i,e.y0=a,e.x1=i+o,e.y1=a,e.x2=i+o,e.y2=a+s,e.x3=i,e.y3=a+s}destroy(e=!1){this._source&&(this._source.off(`resize`,this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit(`destroy`,this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit(`update`,this)}get baseTexture(){return xh(vh,`Texture.baseTexture is now Texture.source`),this._source}};Q.EMPTY=new Q({label:`EMPTY`,source:new jh({label:`EMPTY`})}),Q.EMPTY.destroy=Sh,Q.WHITE=new Q({source:new Mh({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:`premultiply-alpha-on-upload`,label:`WHITE`}),label:`WHITE`}),Q.WHITE.destroy=Sh;function Fh(e,t,n){let{width:r,height:i}=n.orig,a=n.trim;if(a){let n=a.width,o=a.height;e.minX=a.x-t._x*r,e.maxX=e.minX+n,e.minY=a.y-t._y*i,e.maxY=e.minY+o}else e.minX=-t._x*r,e.maxX=e.minX+r,e.minY=-t._y*i,e.maxY=e.minY+i}var Ih=new Z,Lh=class e{constructor(e=1/0,t=1/0,n=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ih,this.minX=e,this.minY=t,this.maxX=n,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||=new mh;let e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Ih,this}set(e,t,n,r){this.minX=e,this.minY=t,this.maxX=n,this.maxY=r}addFrame(e,t,n,r,i){i||=this.matrix;let a=i.a,o=i.b,s=i.c,c=i.d,l=i.tx,u=i.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,h=a*e+s*t+l,g=o*e+c*t+u;h<d&&(d=h),g<f&&(f=g),h>p&&(p=h),g>m&&(m=g),h=a*n+s*t+l,g=o*n+c*t+u,h<d&&(d=h),g<f&&(f=g),h>p&&(p=h),g>m&&(m=g),h=a*e+s*r+l,g=o*e+c*r+u,h<d&&(d=h),g<f&&(f=g),h>p&&(p=h),g>m&&(m=g),h=a*n+s*r+l,g=o*n+c*r+u,h<d&&(d=h),g<f&&(f=g),h>p&&(p=h),g>m&&(m=g),this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){let t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,{a,b:o,c:s,d:c,tx:l,ty:u}=e,d=a*t+s*n+l,f=o*t+c*n+u;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=a*r+s*n+l,f=o*r+c*n+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=a*t+s*i+l,f=o*t+c*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=a*r+s*i+l,f=o*r+c*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,n,r){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<n&&(this.minY=n),this.maxY>r&&(this.maxY=r),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new e(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){let t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){let t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,n,r){let i=this.minX,a=this.minY,o=this.maxX,s=this.maxY;r||=this.matrix;let c=r.a,l=r.b,u=r.c,d=r.d,f=r.tx,p=r.ty;for(let r=t;r<n;r+=2){let t=e[r],n=e[r+1],m=c*t+u*n+f,h=l*t+d*n+p;i=m<i?m:i,a=h<a?h:a,o=m>o?m:o,s=h>s?h:s}this.minX=i,this.minY=a,this.maxX=o,this.maxY=s}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}},Rh={grad:.9,turn:360,rad:360/(2*Math.PI)},zh=function(e){return typeof e==`string`?e.length>0:typeof e==`number`},Bh=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=10**t),Math.round(n*e)/n+0},Vh=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},Hh=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Uh=function(e){return{r:Vh(e.r,0,255),g:Vh(e.g,0,255),b:Vh(e.b,0,255),a:Vh(e.a)}},Wh=function(e){return{r:Bh(e.r),g:Bh(e.g),b:Bh(e.b),a:Bh(e.a,3)}},Gh=/^#([0-9a-f]{3,8})$/i,Kh=function(e){var t=e.toString(16);return t.length<2?`0`+t:t},qh=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},Jh=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),c=r*(1-(1-t+a)*n),l=a%6;return{r:255*[r,s,o,o,c,r][l],g:255*[c,r,r,s,o,o][l],b:255*[o,o,c,r,r,s][l],a:i}},Yh=function(e){return{h:Hh(e.h),s:Vh(e.s,0,100),l:Vh(e.l,0,100),a:Vh(e.a)}},Xh=function(e){return{h:Bh(e.h),s:Bh(e.s),l:Bh(e.l),a:Bh(e.a,3)}},Zh=function(e){return Jh((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},Qh=function(e){return{h:(t=qh(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},$h=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,tg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ng=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rg={string:[[function(e){var t=Gh.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Bh(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Bh(parseInt(e.substr(6,2),16)/255,2):1}:null:null},`hex`],[function(e){var t=tg.exec(e)||ng.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Uh({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},`rgb`],[function(e){var t=$h.exec(e)||eg.exec(e);if(!t)return null;var n,r;return Zh(Yh({h:(n=t[1],r=t[2],r===void 0&&(r=`deg`),Number(n)*(Rh[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}))},`hsl`]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=i===void 0?1:i;return zh(t)&&zh(n)&&zh(r)?Uh({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},`rgb`],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,a=i===void 0?1:i;return!zh(t)||!zh(n)||!zh(r)?null:Zh(Yh({h:Number(t),s:Number(n),l:Number(r),a:Number(a)}))},`hsl`],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,a=i===void 0?1:i;return!zh(t)||!zh(n)||!zh(r)?null:Jh(function(e){return{h:Hh(e.h),s:Vh(e.s,0,100),v:Vh(e.v,0,100),a:Vh(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(a)}))},`hsv`]]},ig=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},ag=function(e){return typeof e==`string`?ig(e.trim(),rg.string):typeof e==`object`&&e?ig(e,rg.object):[null,void 0]},og=function(e,t){var n=Qh(e);return{h:n.h,s:Vh(n.s+100*t,0,100),l:n.l,a:n.a}},sg=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},cg=function(e,t){var n=Qh(e);return{h:n.h,s:n.s,l:Vh(n.l+100*t,0,100),a:n.a}},lg=function(){function e(e){this.parsed=ag(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Bh(sg(this.rgba),2)},e.prototype.isDark=function(){return sg(this.rgba)<.5},e.prototype.isLight=function(){return sg(this.rgba)>=.5},e.prototype.toHex=function(){return e=Wh(this.rgba),t=e.r,n=e.g,r=e.b,a=(i=e.a)<1?Kh(Bh(255*i)):``,`#`+Kh(t)+Kh(n)+Kh(r)+a;var e,t,n,r,i,a},e.prototype.toRgb=function(){return Wh(this.rgba)},e.prototype.toRgbString=function(){return e=Wh(this.rgba),t=e.r,n=e.g,r=e.b,(i=e.a)<1?`rgba(`+t+`, `+n+`, `+r+`, `+i+`)`:`rgb(`+t+`, `+n+`, `+r+`)`;var e,t,n,r,i},e.prototype.toHsl=function(){return Xh(Qh(this.rgba))},e.prototype.toHslString=function(){return e=Xh(Qh(this.rgba)),t=e.h,n=e.s,r=e.l,(i=e.a)<1?`hsla(`+t+`, `+n+`%, `+r+`%, `+i+`)`:`hsl(`+t+`, `+n+`%, `+r+`%)`;var e,t,n,r,i},e.prototype.toHsv=function(){return e=qh(this.rgba),{h:Bh(e.h),s:Bh(e.s),v:Bh(e.v),a:Bh(e.a,3)};var e},e.prototype.invert=function(){return ug({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return e===void 0&&(e=.1),ug(og(this.rgba,e))},e.prototype.desaturate=function(e){return e===void 0&&(e=.1),ug(og(this.rgba,-e))},e.prototype.grayscale=function(){return ug(og(this.rgba,-1))},e.prototype.lighten=function(e){return e===void 0&&(e=.1),ug(cg(this.rgba,e))},e.prototype.darken=function(e){return e===void 0&&(e=.1),ug(cg(this.rgba,-e))},e.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return typeof e==`number`?ug({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Bh(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Qh(this.rgba);return typeof e==`number`?ug({h:e,s:t.s,l:t.l,a:t.a}):Bh(t.h)},e.prototype.isEqual=function(e){return this.toHex()===ug(e).toHex()},e}(),ug=function(e){return e instanceof lg?e:new lg(e)},dg=[],fg=function(e){e.forEach(function(e){dg.indexOf(e)<0&&(e(lg,rg),dg.push(e))})};function pg(e,t){var n={white:`#ffffff`,bisque:`#ffe4c4`,blue:`#0000ff`,cadetblue:`#5f9ea0`,chartreuse:`#7fff00`,chocolate:`#d2691e`,coral:`#ff7f50`,antiquewhite:`#faebd7`,aqua:`#00ffff`,azure:`#f0ffff`,whitesmoke:`#f5f5f5`,papayawhip:`#ffefd5`,plum:`#dda0dd`,blanchedalmond:`#ffebcd`,black:`#000000`,gold:`#ffd700`,goldenrod:`#daa520`,gainsboro:`#dcdcdc`,cornsilk:`#fff8dc`,cornflowerblue:`#6495ed`,burlywood:`#deb887`,aquamarine:`#7fffd4`,beige:`#f5f5dc`,crimson:`#dc143c`,cyan:`#00ffff`,darkblue:`#00008b`,darkcyan:`#008b8b`,darkgoldenrod:`#b8860b`,darkkhaki:`#bdb76b`,darkgray:`#a9a9a9`,darkgreen:`#006400`,darkgrey:`#a9a9a9`,peachpuff:`#ffdab9`,darkmagenta:`#8b008b`,darkred:`#8b0000`,darkorchid:`#9932cc`,darkorange:`#ff8c00`,darkslateblue:`#483d8b`,gray:`#808080`,darkslategray:`#2f4f4f`,darkslategrey:`#2f4f4f`,deeppink:`#ff1493`,deepskyblue:`#00bfff`,wheat:`#f5deb3`,firebrick:`#b22222`,floralwhite:`#fffaf0`,ghostwhite:`#f8f8ff`,darkviolet:`#9400d3`,magenta:`#ff00ff`,green:`#008000`,dodgerblue:`#1e90ff`,grey:`#808080`,honeydew:`#f0fff0`,hotpink:`#ff69b4`,blueviolet:`#8a2be2`,forestgreen:`#228b22`,lawngreen:`#7cfc00`,indianred:`#cd5c5c`,indigo:`#4b0082`,fuchsia:`#ff00ff`,brown:`#a52a2a`,maroon:`#800000`,mediumblue:`#0000cd`,lightcoral:`#f08080`,darkturquoise:`#00ced1`,lightcyan:`#e0ffff`,ivory:`#fffff0`,lightyellow:`#ffffe0`,lightsalmon:`#ffa07a`,lightseagreen:`#20b2aa`,linen:`#faf0e6`,mediumaquamarine:`#66cdaa`,lemonchiffon:`#fffacd`,lime:`#00ff00`,khaki:`#f0e68c`,mediumseagreen:`#3cb371`,limegreen:`#32cd32`,mediumspringgreen:`#00fa9a`,lightskyblue:`#87cefa`,lightblue:`#add8e6`,midnightblue:`#191970`,lightpink:`#ffb6c1`,mistyrose:`#ffe4e1`,moccasin:`#ffe4b5`,mintcream:`#f5fffa`,lightslategray:`#778899`,lightslategrey:`#778899`,navajowhite:`#ffdead`,navy:`#000080`,mediumvioletred:`#c71585`,powderblue:`#b0e0e6`,palegoldenrod:`#eee8aa`,oldlace:`#fdf5e6`,paleturquoise:`#afeeee`,mediumturquoise:`#48d1cc`,mediumorchid:`#ba55d3`,rebeccapurple:`#663399`,lightsteelblue:`#b0c4de`,mediumslateblue:`#7b68ee`,thistle:`#d8bfd8`,tan:`#d2b48c`,orchid:`#da70d6`,mediumpurple:`#9370db`,purple:`#800080`,pink:`#ffc0cb`,skyblue:`#87ceeb`,springgreen:`#00ff7f`,palegreen:`#98fb98`,red:`#ff0000`,yellow:`#ffff00`,slateblue:`#6a5acd`,lavenderblush:`#fff0f5`,peru:`#cd853f`,palevioletred:`#db7093`,violet:`#ee82ee`,teal:`#008080`,slategray:`#708090`,slategrey:`#708090`,aliceblue:`#f0f8ff`,darkseagreen:`#8fbc8f`,darkolivegreen:`#556b2f`,greenyellow:`#adff2f`,seagreen:`#2e8b57`,seashell:`#fff5ee`,tomato:`#ff6347`,silver:`#c0c0c0`,sienna:`#a0522d`,lavender:`#e6e6fa`,lightgreen:`#90ee90`,orange:`#ffa500`,orangered:`#ff4500`,steelblue:`#4682b4`,royalblue:`#4169e1`,turquoise:`#40e0d0`,yellowgreen:`#9acd32`,salmon:`#fa8072`,saddlebrown:`#8b4513`,sandybrown:`#f4a460`,rosybrown:`#bc8f8f`,darksalmon:`#e9967a`,lightgoldenrodyellow:`#fafad2`,snow:`#fffafa`,lightgrey:`#d3d3d3`,lightgray:`#d3d3d3`,dimgray:`#696969`,dimgrey:`#696969`,olivedrab:`#6b8e23`,olive:`#808000`},r={};for(var i in n)r[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return`transparent`;var i,o,s=r[this.toHex()];if(s)return s;if(t?.closest){var c=this.toRgb(),l=1/0,u=`black`;if(!a.length)for(var d in n)a[d]=new e(n[d]).toRgb();for(var f in n){var p=(i=c,o=a[f],(i.r-o.r)**2+(i.g-o.g)**2+(i.b-o.b)**2);p<l&&(l=p,u=f)}return u}},t.string.push([function(t){var r=t.toLowerCase(),i=r===`transparent`?`#0000`:n[r];return i?new e(i).toRgb():null},`name`])}fg([pg]);var mg=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else if(t===null)throw Error(`Cannot set Color#value to null`);else (this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}get value(){return this._value}_cloneSource(e){return typeof e==`string`||typeof e==`number`||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e==`object`&&e?{...e}:e}_isSourceEqual(e,t){let n=typeof e;if(n!==typeof t)return!1;if(n===`number`||n===`string`||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length?e.every((e,n)=>e===t[n]):!1;if(e!==null&&t!==null){let n=Object.keys(e),r=Object.keys(t);return n.length===r.length?n.every(n=>e[n]===t[n]):!1}return e===t}toRgba(){let[e,t,n,r]=this._components;return{r:e,g:t,b:n,a:r}}toRgb(){let[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){let[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){let[t,n,r]=this._components;return this._arrayRgb||=[],e||=this._arrayRgb,e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toArray(e){this._arrayRgba||=[],e||=this._arrayRgba;let[t,n,r,i]=this._components;return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}toRgbArray(e){this._arrayRgb||=[],e||=this._arrayRgb;let[t,n,r]=this._components;return e[0]=t,e[1]=n,e[2]=r,e}toNumber(){return this._int}toBgrNumber(){let[e,t,n]=this.toUint8RgbArray();return(n<<16)+(t<<8)+e}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(t){let[n,r,i,a]=e._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return t&&(n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+i}toHex(){let e=this._int.toString(16);return`#${`000000`.substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+`00`.substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(t){let n,r,i,a;if((typeof t==`number`||t instanceof Number)&&t>=0&&t<=16777215){let e=t;n=(e>>16&255)/255,r=(e>>8&255)/255,i=(e&255)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,r,i,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,r,i,a=255]=t,n/=255,r/=255,i/=255,a/=255;else if(typeof t==`string`||typeof t==`object`){if(typeof t==`string`){let n=e.HEX_PATTERN.exec(t);n&&(t=`#${n[2]}`)}let o=ug(t);o.isValid()&&({r:n,g:r,b:i,a}=o.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=a,this._refreshInt();else throw Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);let[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e==`number`?Math.min(Math.max(e,t),n):(e.forEach((r,i)=>{e[i]=Math.min(Math.max(r,t),n)}),e)}static isColorLike(t){return typeof t==`number`||typeof t==`string`||t instanceof Number||t instanceof e||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};mg.shared=new mg,mg._temp=new mg,mg.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var hg=mg,gg={cullArea:null,cullable:!1,cullableChildren:!0},_g=0,vg=500;function $(...e){_g!==vg&&(_g++,_g===vg?console.warn(`PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.`):console.warn(`PixiJS Warning: `,...e))}var yg={_registeredResources:new Set,register(e){this._registeredResources.add(e)},unregister(e){this._registeredResources.delete(e)},release(){this._registeredResources.forEach(e=>e.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(e){return this._registeredResources.has(e)},reset(){this._registeredResources.clear()}},bg=class{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}},xg=new class{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new bg(e)),this._poolsByClass.get(e)}stats(){let e={};return this._poolsByClass.forEach(t=>{let n=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[n]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}};yg.register(xg);var Sg={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(e){typeof e==`boolean`&&e===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(e===!0?{}:e))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(e){xh(`v8.6.0`,`cacheAsBitmap is deprecated, use cacheAsTexture instead.`),this.cacheAsTexture(e)}};function Cg(e,t,n){let r=e.length,i;if(t>=r||n===0)return;n=t+n>r?r-t:n;let a=r-n;for(i=t;i<a;++i)e[i]=e[i+n];e.length=a}var wg={allowChildren:!0,removeChildren(e=0,t){let n=t??this.children.length,r=n-e,i=[];if(r>0&&r<=n){for(let t=n-1;t>=e;t--){let e=this.children[t];e&&(i.push(e),e.parent=null)}Cg(this.children,e,n);let t=this.renderGroup||this.parentRenderGroup;t&&t.removeChildren(i);for(let e=0;e<i.length;++e){let t=i[e];t.parentRenderLayer?.detach(t),this.emit(`childRemoved`,t,this,e),i[e].emit(`removed`,this)}return i.length>0&&this._didViewChangeTick++,i}else if(r===0&&this.children.length===0)return i;throw RangeError(`removeChildren: numeric values are outside the acceptable range.`)},removeChildAt(e){let t=this.getChildAt(e);return this.removeChild(t)},getChildAt(e){if(e<0||e>=this.children.length)throw Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]},setChildIndex(e,t){if(t<0||t>=this.children.length)throw Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(e),this.addChildAt(e,t)},getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw Error(`The supplied Container must be a child of the caller`);return t},addChildAt(e,t){this.allowChildren||xh(vh,`addChildAt: Only Containers will be allowed to add children in v8.0.0`);let{children:n}=this;if(t<0||t>n.length)throw Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(e.parent){let n=e.parent.children.indexOf(e);if(e.parent===this&&n===t)return e;n!==-1&&e.parent.children.splice(n,1)}t===n.length?n.push(e):n.splice(t,0,e),e.parent=this,e.didChange=!0,e._updateFlags=15;let r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(e),this.sortableChildren&&(this.sortDirty=!0),this.emit(`childAdded`,e,this,t),e.emit(`added`,this),e},swapChildren(e,t){if(e===t)return;let n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e;let i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...e){return e.length===1?this.reparentChildAt(e[0],this.children.length):(e.forEach(e=>this.reparentChildAt(e,this.children.length)),e[0])},reparentChildAt(e,t){if(e.parent===this)return this.setChildIndex(e,t),e;let n=e.worldTransform.clone();e.removeFromParent(),this.addChildAt(e,t);let r=this.worldTransform.clone();return r.invert(),n.prepend(r),e.setFromMatrix(n),e},replaceChild(e,t){e.updateLocalTransform(),this.addChildAt(t,this.getChildIndex(e)),t.setFromMatrix(e.localTransform),t.updateLocalTransform(),this.removeChild(e)}},Tg={collectRenderables(e,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(e,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,e):this.collectRenderablesWithEffects(e,t,n))},collectRenderablesSimple(e,t,n){let r=this.children,i=r.length;for(let a=0;a<i;a++)r[a].collectRenderables(e,t,n)},collectRenderablesWithEffects(e,t,n){let{renderPipes:r}=t;for(let t=0;t<this.effects.length;t++){let n=this.effects[t];r[n.pipe].push(n,this,e)}this.collectRenderablesSimple(e,t,n);for(let t=this.effects.length-1;t>=0;t--){let n=this.effects[t];r[n.pipe].pop(n,this,e)}}},Eg=class{constructor(){this.pipe=`filter`,this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}},Dg=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){let n=this._tests[t];if(n.test(e))return xg.get(n.maskClass,e)}return e}returnMaskEffect(e){xg.return(e)}};Km.handleByList(X.MaskEffect,Dg._effectClasses);var Og={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0)},addEffect(e){this.effects.indexOf(e)===-1&&(this.effects.push(e),this.effects.sort((e,t)=>e.priority-t.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(e){let t=this.effects.indexOf(e);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(e){let t=this._maskEffect;t?.mask!==e&&(t&&(this.removeEffect(t),Dg.returnMaskEffect(t),this._maskEffect=null),e!=null&&(this._maskEffect=Dg.getMaskEffect(e),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(e){this._maskOptions={...this._maskOptions,...e},e.mask&&(this.mask=e.mask),this._markStructureAsChanged()},set filters(e){!Array.isArray(e)&&e&&(e=[e]);let t=this._filterEffect||=new Eg;e=e;let n=e?.length>0,r=n!==t.filters?.length>0;e=Array.isArray(e)?e.slice(0):e,t.filters=Object.freeze(e),r&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=e??null))},get filters(){return this._filterEffect?.filters},set filterArea(e){this._filterEffect||=new Eg,this._filterEffect.filterArea=e},get filterArea(){return this._filterEffect?.filterArea}},kg={label:null,get name(){return xh(vh,`Container.name property has been removed, use Container.label instead`),this.label},set name(e){xh(vh,`Container.name property has been removed, use Container.label instead`),this.label=e},getChildByName(e,t=!1){return this.getChildByLabel(e,t)},getChildByLabel(e,t=!1){let n=this.children;for(let t=0;t<n.length;t++){let r=n[t];if(r.label===e||e instanceof RegExp&&e.test(r.label))return r}if(t)for(let t=0;t<n.length;t++){let r=n[t].getChildByLabel(e,!0);if(r)return r}return null},getChildrenByLabel(e,t=!1,n=[]){let r=this.children;for(let t=0;t<r.length;t++){let i=r[t];(i.label===e||e instanceof RegExp&&e.test(i.label))&&n.push(i)}if(t)for(let t=0;t<r.length;t++)r[t].getChildrenByLabel(e,!0,n);return n}},Ag=xg.getPool(Z),jg=xg.getPool(Lh),Mg=new Z,Ng={getFastGlobalBounds(e,t){t||=new Lh,t.clear(),this._getGlobalBoundsRecursive(!!e,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);let n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(e,t,n){let r=t;if(e&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;let i=!!this.effects.length;if((this.renderGroup||i)&&(r=jg.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let e=this.bounds;r.addFrame(e.minX,e.minY,e.maxX,e.maxY,this.groupTransform)}let t=this.children;for(let i=0;i<t.length;i++)t[i]._getGlobalBoundsRecursive(e,r,n)}if(i){let e=!1,n=this.renderGroup||this.parentRenderGroup;for(let t=0;t<this.effects.length;t++)this.effects[t].addBounds&&(e||(e=!0,r.applyMatrix(n.worldTransform)),this.effects[t].addBounds(r,!0));e&&r.applyMatrix(n.worldTransform.copyTo(Mg).invert()),t.addBounds(r),jg.return(r)}else this.renderGroup&&(t.addBounds(r,this.relativeGroupTransform),jg.return(r))}};function Pg(e,t,n){n.clear();let r,i;return e.parent?t?r=e.parent.worldTransform:(i=Ag.get().identity(),r=Ig(e,i)):r=Z.IDENTITY,Fg(e,n,r,t),i&&Ag.return(i),n.isValid||n.set(0,0,0,0),n}function Fg(e,t,n,r){if(!e.visible||!e.measurable)return;let i;r?i=e.worldTransform:(e.updateLocalTransform(),i=Ag.get(),i.appendFrom(e.localTransform,n));let a=t,o=!!e.effects.length;if(o&&(t=jg.get().clear()),e.boundsArea)t.addRect(e.boundsArea,i);else{let n=e.bounds;n&&!n.isEmpty()&&(t.matrix=i,t.addBounds(n));for(let n=0;n<e.children.length;n++)Fg(e.children[n],t,i,r)}if(o){for(let n=0;n<e.effects.length;n++)e.effects[n].addBounds?.(t);a.addBounds(t,Z.IDENTITY),jg.return(t)}r||Ag.return(i)}function Ig(e,t){let n=e.parent;return n&&(Ig(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function Lg(e,t){if(e===16777215||!t)return t;if(t===16777215||!e)return e;let n=e>>16&255,r=e>>8&255,i=e&255,a=t>>16&255,o=t>>8&255,s=t&255,c=n*a/255|0,l=r*o/255|0,u=i*s/255|0;return(c<<16)+(l<<8)+u}var Rg=16777215;function zg(e,t){return e===Rg?t:t===Rg?e:Lg(e,t)}function Bg(e){return((e&255)<<16)+(e&65280)+(e>>16&255)}var Vg={getGlobalAlpha(e){if(e)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(e=new Z,t){if(t)return e.copyFrom(this.worldTransform);this.updateLocalTransform();let n=Ig(this,Ag.get().identity());return e.appendFrom(this.localTransform,n),Ag.return(n),e},getGlobalTint(e){if(e)return this.renderGroup?Bg(this.renderGroup.worldColor):this.parentRenderGroup?Bg(zg(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=zg(t,n.localColor),n=n.parent;return Bg(t)}};function Hg(e,t,n){return t.clear(),n||=Z.IDENTITY,Ug(e,t,n,e,!0),t.isValid||t.set(0,0,0,0),t}function Ug(e,t,n,r,i){let a;if(i)a=Ag.get(),a=n.copyTo(a);else{if(!e.visible||!e.measurable)return;e.updateLocalTransform();let t=e.localTransform;a=Ag.get(),a.appendFrom(t,n)}let o=t,s=!!e.effects.length;if(s&&(t=jg.get().clear()),e.boundsArea)t.addRect(e.boundsArea,a);else{e.renderPipeId&&(t.matrix=a,t.addBounds(e.bounds));let n=e.children;for(let e=0;e<n.length;e++)Ug(n[e],t,a,r,!1)}if(s){for(let n=0;n<e.effects.length;n++)e.effects[n].addLocalBounds?.(t,r);o.addBounds(t,Z.IDENTITY),jg.return(t)}Ag.return(a)}function Wg(e,t){let n=e.children;for(let e=0;e<n.length;e++){let r=n[e],i=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=t.index;(t.data[o]!==i||t.data[o+1]!==a)&&(t.data[t.index]=i,t.data[t.index+1]=a,t.didChange=!0),t.index=o+2,r.children.length&&Wg(r,t)}return t.didChange}var Gg=new Z,Kg={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(e,t){let n=Math.sign(this.scale.x)||1;t===0?this.scale.x=n:this.scale.x=e/t*n},_setHeight(e,t){let n=Math.sign(this.scale.y)||1;t===0?this.scale.y=n:this.scale.y=e/t*n},getLocalBounds(){this._localBoundsCacheData||={data:[],index:1,didChange:!1,localBounds:new Lh};let e=this._localBoundsCacheData;return e.index=1,e.didChange=!1,e.data[0]!==this._didViewChangeTick&&(e.didChange=!0,e.data[0]=this._didViewChangeTick),Wg(this,e),e.didChange&&Hg(this,e.localBounds,Gg),e.localBounds},getBounds(e,t){return Pg(this,e,t||new Lh)}},qg={_onRender:null,set onRender(e){let t=this.renderGroup||this.parentRenderGroup;if(!e){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=e},get onRender(){return this._onRender}},Jg={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Yg))}};function Yg(e,t){return e._zIndex-t._zIndex}var Xg={getGlobalPosition(e=new eh,t=!1){return this.parent?this.parent.toGlobal(this._position,e,t):(e.x=this._position.x,e.y=this._position.y),e},toGlobal(e,t,n=!1){let r=this.getGlobalTransform(Ag.get(),n);return t=r.apply(e,t),Ag.return(r),t},toLocal(e,t,n,r){t&&(e=t.toGlobal(e,n,r));let i=this.getGlobalTransform(Ag.get(),r);return n=i.applyInverse(e,n),Ag.return(i),n}},Zg=class{constructor(){this.uid=gh(`instructionSet`),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,[`type`,`action`])}},Qg=0,$g=new class{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new kh(this.textureOptions)}createTexture(e,t,n){return new Q({source:new jh({...this.textureOptions,width:e,height:t,resolution:1,antialias:n,autoGarbageCollect:!1}),label:`texturePool_${Qg++}`})}getOptimalTexture(e,t,n=1,r){let i=Math.ceil(e*n-1e-6),a=Math.ceil(t*n-1e-6);i=Ch(i),a=Ch(a);let o=(i<<17)+(a<<1)+(r?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let s=this._texturePool[o].pop();return s||=this.createTexture(i,a,r),s.source._resolution=n,s.source.width=i/n,s.source.height=a/n,s.source.pixelWidth=i,s.source.pixelHeight=a,s.frame.x=0,s.frame.y=0,s.frame.width=e,s.frame.height=t,s.updateUvs(),this._poolKeyHash[s.uid]=o,s}getSameSizeTexture(e,t=!1){let n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,t)}returnTexture(e,t=!1){let n=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(let e in this._texturePool){let t=this._texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this._texturePool={}}};yg.register($g);var e_=class{constructor(){this.renderPipeId=`renderGroup`,this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Z,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new Zg,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;let t=e.children;for(let e=0;e<t.length;e++){let n=t[e];n._updateFlags=15,this.addChild(n)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&=($g.returnTexture(this.texture,!0),null)}updateCacheTexture(){this.textureNeedsUpdate=!0;let e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){for(let e in this.renderGroupChildren.length=0,this.childrenToUpdate){let t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){let t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);let t=e.children;for(let e=0;e<t.length;e++)this.addChild(t[e])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}let t=e.children;for(let e=0;e<t.length;e++)this.removeChild(t[e])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]},t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){let t=this.root.children;for(let n=0;n<t.length;n++)this._getChildren(t[n],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;let n=e.children;for(let e=0;e<n.length;e++)this._getChildren(n[e],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||=new Z,this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||=new Z,this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;let e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||=new Z,this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}};function t_(e,t,n={}){for(let r in t)!n[r]&&t[r]!==void 0&&(e[r]=t[r])}var n_=new Ym(null),r_=new Ym(null),i_=new Ym(null,1,1),a_=new Ym(null),o_=class e extends Xm{constructor(e={}){super(),this.uid=gh(`renderable`),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Z,this.relativeGroupTransform=new Z,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Ym(this,0,0),this._scale=i_,this._pivot=r_,this._origin=a_,this._skew=n_,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode=`inherit`,this.groupBlendMode=`normal`,this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],t_(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(e=>this.addChild(e)),e.parent?.addChild(this)}static mixin(t){xh(`8.8.0`,`Container.mixin is deprecated, please use extensions.mixin instead.`),Km.mixin(e,t)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||xh(vh,`addChild: Only Containers will be allowed to add children in v8.0.0`),e.length>1){for(let t=0;t<e.length;t++)this.addChild(e[t]);return e[0]}let t=e[0],n=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),n&&(n.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,n&&n.addChild(t),this.emit(`childAdded`,t,this,this.children.length-1),t.emit(`added`,this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let t=0;t<e.length;t++)this.removeChild(e[t]);return e[0]}let t=e[0],n=this.children.indexOf(t);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit(`childRemoved`,t,this,n),t.emit(`removed`,this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=xg.get(e_,this),this.groupTransform=Z.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let e=this.parentRenderGroup;e?.removeChild(this),xg.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||=new Z,this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*Qm}set angle(e){this.rotation=e*$m}get pivot(){return this._pivot===r_&&(this._pivot=new Ym(this,0,0)),this._pivot}set pivot(e){this._pivot===r_&&(this._pivot=new Ym(this,0,0),this._origin!==a_&&$(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`)),typeof e==`number`?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===n_&&(this._skew=new Ym(this,0,0)),this._skew}set skew(e){this._skew===n_&&(this._skew=new Ym(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===i_&&(this._scale=new Ym(this,1,1)),this._scale}set scale(e){this._scale===i_&&(this._scale=new Ym(this,0,0)),typeof e==`string`&&(e=parseFloat(e)),typeof e==`number`?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===a_&&(this._origin=new Ym(this,0,0)),this._origin}set origin(e){this._origin===a_&&(this._origin=new Ym(this,0,0),this._pivot!==r_&&$(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`)),typeof e==`number`?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){let t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){let t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||={};let t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){let n=this.getLocalBounds();typeof e==`object`?(t=e.height??e.width,e=e.width):t??=e,e!==void 0&&this._setWidth(e,n.width),t!==void 0&&this._setHeight(t,n.height)}_updateSkew(){let e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x==`number`?e.x:this.position.x,typeof e.y==`number`?e.y:this.position.y),this.scale.set(typeof e.scaleX==`number`?e.scaleX||1:this.scale.x,typeof e.scaleY==`number`?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation==`number`?e.rotation:this.rotation,this.skew.set(typeof e.skewX==`number`?e.skewX:this.skew.x,typeof e.skewY==`number`?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX==`number`?e.pivotX:this.pivot.x,typeof e.pivotY==`number`?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX==`number`?e.originX:this.origin.x,typeof e.originY==`number`?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){let e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;let t=this.localTransform,n=this._scale,r=this._pivot,i=this._origin,a=this._position,o=n._x,s=n._y,c=r._x,l=r._y,u=-i._x,d=-i._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*s,t.d=this._sy*s,t.tx=a._x-(c*t.a+l*t.c)+(u*t.a+d*t.c)-u,t.ty=a._y-(c*t.b+l*t.d)+(u*t.b+d*t.d)-d}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){let t=hg.shared.setValue(e??16777215).toBgrNumber();t!==this.localColor&&(this.localColor=t,this._updateFlags|=1,this._onUpdate())}get tint(){return Bg(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=2,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){let t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){let t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){let t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=4,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit(`destroyed`,this),this.removeAllListeners(),(typeof e==`boolean`?e:e?.children)&&t)for(let n=0;n<t.length;++n)t[n].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}};Km.mixin(o_,wg,Ng,Xg,qg,Kg,Og,kg,Jg,gg,Sg,Vg,Tg);var s_=class extends o_{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new Lh(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){let t=this.bounds,{x:n,y:r}=e;return n>=t.minX&&n<=t.maxX&&r>=t.minY&&r<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){for(let e in this.emit(`unload`,this),this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,n){let{renderPipes:r}=t;r.blendMode.pushBlendMode(this,this.groupBlendMode,e),r[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;let i=this.children,a=i.length;for(let r=0;r<a;r++)i[r].collectRenderables(e,t,n);r.blendMode.popBlendMode(e)}},c_=class e extends s_{constructor(e=Q.EMPTY){e instanceof Q&&(e={texture:e});let{texture:t=Q.EMPTY,anchor:n,roundPixels:r,width:i,height:a,...o}=e;super({label:`Sprite`,...o}),this.renderPipeId=`sprite`,this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Ym({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=r??!1,i!==void 0&&(this.width=i),a!==void 0&&(this.height=a)}static from(t,n=!1){return t instanceof Q?new e(t):new e(Q.from(t,n))}set texture(e){e||=Q.EMPTY;let t=this._texture;t!==e&&(t&&t.dynamic&&t.off(`update`,this.onViewUpdate,this),e.dynamic&&e.on(`update`,this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return Fh(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return xh(`8.6.1`,`Sprite.sourceBounds is deprecated, use visualBounds instead.`),this.visualBounds}updateBounds(){let e=this._anchor,t=this._texture,n=this._bounds,{width:r,height:i}=t.orig;n.minX=-e._x*r,n.maxX=n.minX+r,n.minY=-e._y*i,n.maxY=n.minY+i}destroy(e=!1){if(super.destroy(e),typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._texture.destroy(t)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e==`number`?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||={},e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e==`object`?(t=e.height??e.width,e=e.width):t??=e,e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}},l_=new Lh;function u_(e,t,n){let r=l_;e.measurable=!0,Pg(e,n,r),t.addBoundsMask(r),e.measurable=!1}function d_(e,t,n){let r=jg.get();e.measurable=!0;let i=Ag.get().identity();Hg(e,r,f_(e,n,i)),e.measurable=!1,t.addBoundsMask(r),Ag.return(i),jg.return(r)}function f_(e,t,n){return e?(e!==t&&(f_(e.parent,t,n),e.updateLocalTransform(),n.append(e.localTransform)),n):($(`Mask bounds, renderable is not inside the root container`),n)}var p_=class{constructor(e){this.priority=0,this.inverse=!1,this.pipe=`alphaMask`,e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof c_),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||u_(this.mask,e,t)}addLocalBounds(e,t){d_(this.mask,e,t)}containsPoint(e,t){let n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof c_}};p_.extension=X.MaskEffect;var m_=class{constructor(e){this.priority=0,this.pipe=`colorMask`,e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e==`number`}};m_.extension=X.MaskEffect;var h_=class{constructor(e){this.priority=0,this.pipe=`stencilMask`,e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){u_(this.mask,e,t)}addLocalBounds(e,t){d_(this.mask,e,t)}containsPoint(e,t){let n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof o_}};h_.extension=X.MaskEffect;var g_={createCanvas:(e,t)=>{let n=document.createElement(`canvas`);return n.width=e,n.height=t,n},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,`text/xml`)},__={get(){return g_},set(e){g_=e}},v_=class extends jh{constructor(e){e.resource||=__.get().createCanvas(),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId=`image`,this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&`style`in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,n=this._resolution){let r=super.resize(e,t,n);return r&&this.resizeCanvas(),r}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||=this.resource.getContext(`2d`)}};v_.extension=X.TextureSource;var y_=class extends jh{constructor(e){super(e),this.uploadMethodId=`image`,this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<`u`&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}};y_.extension=X.TextureSource;var b_=(e=>(e[e.INTERACTION=50]=`INTERACTION`,e[e.HIGH=25]=`HIGH`,e[e.NORMAL=0]=`NORMAL`,e[e.LOW=-25]=`LOW`,e[e.UTILITY=-50]=`UTILITY`,e))(b_||{}),x_=class{constructor(e,t=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=n,this._once=r}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));let t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}},S_=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new x_(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=b_.NORMAL){return this._addListener(new x_(e,t,n))}addOnce(e,t,n=b_.NORMAL){return this._addListener(new x_(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){let e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*e.targetFPMS;let r=this._head,i=r.next;for(;i;)i=i.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){let n=Math.min(this.maxFPS,t);this._maxElapsedMS=1/Math.min(Math.max(0,n)/1e3,e.targetFPMS)}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){e===0?this._minElapsedMS=0:this._minElapsedMS=1/(Math.max(this.minFPS,e)/1e3)}static get shared(){if(!e._shared){let t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){let t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};S_.targetFPMS=.06;var C_=S_,w_;async function T_(){return w_??=(async()=>{let e=__.get().createCanvas(1,1).getContext(`webgl`);if(!e)return`premultiply-alpha-on-upload`;let t=await new Promise(e=>{let t=document.createElement(`video`);t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin=`anonymous`,t.preload=`auto`,t.src=`data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=`,t.load()});if(!t)return`premultiply-alpha-on-upload`;let n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);let i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(r),e.deleteTexture(n),e.getExtension(`WEBGL_lose_context`)?.loseContext(),i[0]<=i[3]?`premultiplied-alpha`:`premultiply-alpha-on-upload`})(),w_}var E_=class e extends jh{constructor(t){super(t),this.isReady=!1,this.uploadMethodId=`video`,t={...e.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??`premultiply-alpha-on-upload`,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let e=C_.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener(`play`,this._onPlayStart),e.addEventListener(`pause`,this._onPlayStop),e.addEventListener(`seeked`,this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener(`canplay`,this._onCanPlay),e.addEventListener(`canplaythrough`,this._onCanPlayThrough),e.addEventListener(`error`,this._onError,!0)),this.alphaMode=await T_(),this._load=new Promise((n,r)=>{this.isValid?n(this):(this._resolve=n,this._reject=r,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener(`error`,this._onError,!0),this.emit(`error`,e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener(`canplay`,this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener(`canplaythrough`,this._onCanPlay),this._preloadTimeout&&=(clearTimeout(this._preloadTimeout),void 0),this._mediaReady()}_mediaReady(){let e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let e=this.resource;e&&(e.removeEventListener(`play`,this._onPlayStart),e.removeEventListener(`pause`,this._onPlayStop),e.removeEventListener(`seeked`,this._onSeeked),e.removeEventListener(`canplay`,this._onCanPlay),e.removeEventListener(`canplaythrough`,this._onCanPlayThrough),e.removeEventListener(`error`,this._onError,!0),e.pause(),e.src=``,e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(C_.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(C_.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(C_.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};E_.extension=X.TextureSource,E_.defaultOptions={...jh.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},E_.MIME_TYPES={ogv:`video/ogg`,mov:`video/quicktime`,m4v:`video/mp4`};var D_=E_,O_=(e,t,n=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(e=>typeof e==`string`||n?t(e):e):e),k_=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||$(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let n=O_(e),r;for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];if(i.test(t)){r=i.getCacheableAssets(n,t);break}}let i=new Map(Object.entries(r||{}));r||n.forEach(e=>{i.set(e,t)});let a=[...i.keys()],o={cacheKeys:a,keys:n};n.forEach(e=>{this._cacheMap.set(e,o)}),a.forEach(e=>{let n=r?r[e]:t;this._cache.has(e)&&this._cache.get(e)!==n&&$(`[Cache] already has key:`,e),this._cache.set(e,i.get(e))})}remove(e){if(!this._cacheMap.has(e)){$(`[Assets] Asset id ${e} was not found in the Cache`);return}let t=this._cacheMap.get(e);t.cacheKeys.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}},A_=[];Km.handleByList(X.TextureSource,A_);function j_(e={}){let t=e&&e.resource,n=t?e.resource:e,r=t?e:{resource:e};for(let e=0;e<A_.length;e++){let t=A_[e];if(t.test(n))return new t(r)}throw Error(`Could not find a source type for resource: ${r.resource}`)}function M_(e={},t=!1){let n=e&&e.resource,r=n?e.resource:e,i=n?e:{resource:e};if(!t&&k_.has(r))return k_.get(r);let a=new Q({source:j_(i)});return a.on(`destroy`,()=>{k_.has(r)&&k_.remove(r)}),t||k_.set(r,a),a}function N_(e,t=!1){return typeof e==`string`?k_.get(e):e instanceof jh?new Q({source:e}):M_(e,t)}Q.from=N_,jh.from=j_,Km.add(p_,m_,h_,D_,y_,v_,Mh);var P_=(e=>(e[e.Low=0]=`Low`,e[e.Normal=1]=`Normal`,e[e.High=2]=`High`,e))(P_||{});function F_(e){if(typeof e!=`string`)throw TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function I_(e){return e.split(`?`)[0].split(`#`)[0]}function L_(e){return e.replace(/[.*+?^${}()|[\]\\]/g,`\\$&`)}function R_(e,t,n){return e.replace(new RegExp(L_(t),`g`),n)}function z_(e,t){let n=``,r=0,i=-1,a=0,o=-1;for(let s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else if(o===47)break;else o=47;if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){let e=n.lastIndexOf(`/`);if(e!==n.length-1){e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}}else if(n.length===2||n.length===1){n=``,r=0,i=s,a=0;continue}}t&&(n.length>0?n+=`/..`:n=`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a!==-1?++a:a=-1}return n}var B_={toPosix(e){return R_(e,`\\`,`/`)},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},isBlobUrl(e){return e.startsWith(`blob:`)},hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){F_(e),e=this.toPosix(e);let t=/^file:\/\/\//.exec(e);if(t)return t[0];let n=/^[^/:]+:\/{0,2}/.exec(e);return n?n[0]:``},toAbsolute(e,t,n){if(F_(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;let r=I_(this.toPosix(t??__.get().getBaseUrl())),i=I_(this.toPosix(n??this.rootname(r)));return e=this.toPosix(e),e.startsWith(`/`)?B_.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(r,e)},normalize(e){if(F_(e),e.length===0)return`.`;if(this.isDataUrl(e)||this.isBlobUrl(e))return e;e=this.toPosix(e);let t=``,n=e.startsWith(`/`);this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));let r=e.endsWith(`/`);return e=z_(e,!1),e.length>0&&r&&(e+=`/`),n?`/${e}`:t+e},isAbsolute(e){return F_(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith(`/`)},join(...e){if(e.length===0)return`.`;let t;for(let n=0;n<e.length;++n){let r=e[n];if(F_(r),r.length>0)if(t===void 0)t=r;else{let i=e[n-1]??``;this.joinExtensions.includes(this.extname(i).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?`.`:this.normalize(t)},dirname(e){if(F_(e),e.length===0)return`.`;e=this.toPosix(e);let t=e.charCodeAt(0),n=t===47,r=-1,i=!0,a=this.getProtocol(e),o=e;e=e.slice(a.length);for(let n=e.length-1;n>=1;--n)if(t=e.charCodeAt(n),t===47){if(!i){r=n;break}}else i=!1;return r===-1?n?`/`:this.isUrl(o)?a+e:a:n&&r===1?`//`:a+e.slice(0,r)},rootname(e){F_(e),e=this.toPosix(e);let t=``;if(t=e.startsWith(`/`)?`/`:this.getProtocol(e),this.isUrl(e)){let n=e.indexOf(`/`,t.length);t=n===-1?e:e.slice(0,n),t.endsWith(`/`)||(t+=`/`)}return t},basename(e,t){F_(e),t&&F_(t),e=I_(this.toPosix(e));let n=0,r=-1,i=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return``;let o=t.length-1,s=-1;for(a=e.length-1;a>=0;--a){let c=e.charCodeAt(a);if(c===47){if(!i){n=a+1;break}}else s===-1&&(i=!1,s=a+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=s))}return n===r?r=s:r===-1&&(r=e.length),e.slice(n,r)}for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!i){n=a+1;break}}else r===-1&&(i=!1,r=a+1);return r===-1?``:e.slice(n,r)},extname(e){F_(e),e=I_(this.toPosix(e));let t=-1,n=0,r=-1,i=!0,a=0;for(let o=e.length-1;o>=0;--o){let s=e.charCodeAt(o);if(s===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),s===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||r===-1||a===0||a===1&&t===r-1&&t===n+1?``:e.slice(t,r)},parse(e){F_(e);let t={root:``,dir:``,base:``,ext:``,name:``};if(e.length===0)return t;e=I_(this.toPosix(e));let n=e.charCodeAt(0),r=this.isAbsolute(e),i;t.root=this.rootname(e),i=r||this.hasProtocol(e)?1:0;let a=-1,o=0,s=-1,c=!0,l=e.length-1,u=0;for(;l>=i;--l){if(n=e.charCodeAt(l),n===47){if(!c){o=l+1;break}continue}s===-1&&(c=!1,s=l+1),n===46?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}return a===-1||s===-1||u===0||u===1&&a===s-1&&a===o+1?s!==-1&&(o===0&&r?t.base=t.name=e.slice(1,s):t.base=t.name=e.slice(o,s)):(o===0&&r?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(o,a),t.base=e.slice(o,s)),t.ext=e.slice(a,s)),t.dir=this.dirname(e),t},sep:`/`,delimiter:`:`,joinExtensions:[`.html`]};function V_(e,t,n,r,i){let a=t[n];for(let o=0;o<a.length;o++){let s=a[o];n<t.length-1?V_(e.replace(r[n],s),t,n+1,r,i):i.push(e.replace(r[n],s))}}function H_(e){let t=e.match(/\{(.*?)\}/g),n=[];if(t){let r=[];t.forEach(e=>{let t=e.substring(1,e.length-1).split(`,`);r.push(t)}),V_(e,r,0,t,n)}else n.push(e);return n}var U_=e=>!Array.isArray(e),W_=class{constructor(){this._defaultBundleIdentifierOptions={connector:`-`,createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,``)},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle(`foo`,this._createBundleAssetId(`foo`,`bar`))!==`bar`)throw Error(`[Resolver] GenerateBundleAssetId are not working correctly`)}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||=Object.keys(e.params)}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e==`string`)this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join(`&`)}}getAlias(e){let{alias:t,src:n}=e;return O_(t||n,e=>typeof e==`string`?e:Array.isArray(e)?e.map(e=>e?.src??e):e?.src?e.src:e,!0)}addManifest(e){this._manifest&&$(`[Resolver] Manifest already exists, this will be overwritten`),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){let n=[],r=t;Array.isArray(t)||(r=Object.entries(t).map(([e,t])=>typeof t==`string`||Array.isArray(t)?{alias:e,src:t}:{alias:e,...t})),r.forEach(t=>{let r=t.src,i=t.alias,a;if(typeof i==`string`){let t=this._createBundleAssetId(e,i);n.push(t),a=[i,t]}else{let t=i.map(t=>this._createBundleAssetId(e,t));n.push(...t),a=[...i,...t]}this.add({...t,alias:a,src:r})}),this._bundles[e]=n}add(e){let t=[];Array.isArray(e)?t.push(...e):t.push(e);let n=e=>{this.hasKey(e)&&$(`[Resolver] already has key: ${e} overwriting`)};O_(t).forEach(e=>{let{src:t}=e,{data:r,format:i,loadParser:a,parser:o}=e,s=O_(t).map(e=>typeof e==`string`?H_(e):Array.isArray(e)?e:[e]),c=this.getAlias(e);Array.isArray(c)?c.forEach(n):n(c);let l=[],u=e=>({...this._parsers.find(t=>t.test(e))?.parse(e),src:e});s.forEach(t=>{t.forEach(t=>{let n={};if(typeof t==`object`?(r=t.data??r,i=t.format??i,(t.loadParser||t.parser)&&(a=t.loadParser??a,o=t.parser??o),n={...u(t.src),...t}):n=u(t),!c)throw Error(`[Resolver] alias is undefined for this asset: ${n.src}`);n=this._buildResolvedAsset(n,{aliases:c,data:r,format:i,loadParser:a,parser:o,progressSize:e.progressSize}),l.push(n)})}),c.forEach(e=>{this._assetMap[e]=l})})}resolveBundle(e){let t=U_(e);e=O_(e);let n={};return e.forEach(e=>{let t=this._bundles[e];if(t){let r=this.resolve(t),i={};for(let t in r){let n=r[t];i[this._extractAssetIdFromBundle(e,t)]=n}n[e]=i}}),t?n[e[0]]:n}resolveUrl(e){let t=this.resolve(e);if(typeof e!=`string`){let e={};for(let n in t)e[n]=t[n].src;return e}return t.src}resolve(e){let t=U_(e);e=O_(e);let n={};return e.forEach(e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e],n=this._getPreferredOrder(t);n?.priority.forEach(e=>{n.params[e].forEach(n=>{let r=t.filter(t=>t[e]?t[e]===n:!1);r.length&&(t=r)})}),this._resolverHash[e]=t[0]}else this._resolverHash[e]=this._buildResolvedAsset({alias:[e],src:e},{});n[e]=this._resolverHash[e]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let n=e[t],r=this._preferredOrder.find(e=>e.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?`&`:`?`}${this._defaultSearchParams}`:e}_buildResolvedAsset(e,t){let{aliases:n,data:r,loadParser:i,parser:a,format:o,progressSize:s}=t;return(this._basePath||this._rootPath)&&(e.src=B_.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=i??e.loadParser,e.parser=a??e.parser,e.format=o??e.format??G_(e.src),s!==void 0&&(e.progressSize=s),e}};W_.RETINA_PREFIX=/@([0-9\.]+)x/;function G_(e){return e.split(`.`).pop().split(`?`).shift().split(`#`).shift()}var K_=(e,t)=>{let n=t.split(`?`)[1];return n&&(e+=`?${n}`),e},q_=class e{constructor(e,t){this.linkedSheets=[];let n=e;e?.source instanceof jh&&(n={texture:e,data:t});let{texture:r,data:i,cachePrefix:a=``}=n;this.cachePrefix=a,this._texture=r instanceof Q?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=i;let o=parseFloat(i.meta.scale);o?(this.resolution=o,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t,r=e.BATCH_SIZE;for(;n-t<r&&n<this._frameKeys.length;){let e=this._frameKeys[n],t=this._frames[e],r=t.frame;if(r){let n=null,i=null,a=t.trimmed!==!1&&t.sourceSize?t.sourceSize:t.frame,o=new mh(0,0,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution);n=t.rotated?new mh(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new mh(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),t.trimmed!==!1&&t.spriteSourceSize&&(i=new mh(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[e]=new Q({source:this.textureSource,frame:n,orig:o,trim:i,rotate:t.rotated?2:0,defaultAnchor:t.anchor,defaultBorders:t.borders,label:e.toString()})}n++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){let r=e[t][n];this.animations[t].push(this.textures[r])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};q_.BATCH_SIZE=1e3;var J_=q_,Y_=[`jpg`,`png`,`jpeg`,`avif`,`webp`,`basis`,`etc2`,`bc7`,`bc6h`,`bc5`,`bc4`,`bc3`,`bc2`,`bc1`,`eac`,`astc`];function X_(e,t,n){let r={};if(e.forEach(e=>{r[e]=t}),Object.keys(t.textures).forEach(e=>{r[`${t.cachePrefix}${e}`]=t.textures[e]}),!n){let n=B_.dirname(e[0]);t.linkedSheets.forEach((e,i)=>{let a=X_([`${n}/${t.data.meta.related_multi_packs[i]}`],e,!0);Object.assign(r,a)})}return r}var Z_={extension:X.Asset,cache:{test:e=>e instanceof J_,getCacheableAssets:(e,t)=>X_(e,t,!1)},resolver:{extension:{type:X.ResolveParser,name:`resolveSpritesheet`},test:e=>{let t=e.split(`?`)[0].split(`.`),n=t.pop(),r=t.pop();return n===`json`&&Y_.includes(r)},parse:e=>{let t=e.split(`.`);return{resolution:parseFloat(W_.RETINA_PREFIX.exec(e)?.[1]??`1`),format:t[t.length-2],src:e}}},loader:{name:`spritesheetLoader`,id:`spritesheet`,extension:{type:X.LoadParser,priority:P_.Normal,name:`spritesheetLoader`},async testParse(e,t){return B_.extname(t.src).toLowerCase()===`.json`&&!!e.frames},async parse(e,t,n){let{texture:r,imageFilename:i,textureOptions:a,cachePrefix:o}=t?.data??{},s=B_.dirname(t.src);s&&s.lastIndexOf(`/`)!==s.length-1&&(s+=`/`);let c;if(r instanceof Q)c=r;else{let r=K_(s+(i??e.meta.image),t.src);c=(await n.load([{src:r,data:a}]))[r]}let l=new J_({texture:c.source,data:e,cachePrefix:o});await l.parse();let u=e?.meta?.related_multi_packs;if(Array.isArray(u)){let e=[];for(let r of u){if(typeof r!=`string`)continue;let i=s+r;t.data?.ignoreMultiPack||(i=K_(i,t.src),e.push(n.load({src:i,data:{textureOptions:a,ignoreMultiPack:!0}})))}let r=await Promise.all(e);l.linkedSheets=r,r.forEach(e=>{e.linkedSheets=[l].concat(l.linkedSheets.filter(t=>t!==e))})}return l},async unload(e,t,n){await n.unload(e.textureSource._sourceOrigin),e.destroy(!1)}}};Km.add(Z_);var Q_=class{constructor(e){this._lastTransform=``,this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;let e=this._canvas.getBoundingClientRect(),t=this._canvas.width,n=this._canvas.height,r=e.width/t*this._renderer.resolution,i=e.height/n*this._renderer.resolution,a=`translate(${e.left}px, ${e.top}px) scale(${r}, ${i})`;a!==this._lastTransform&&(this._domElement.style.transform=a,this._lastTransform=a)},this._domElement=e.domElement,this._renderer=e.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){`ResizeObserver`in globalThis?(this._observer&&=(this._observer.disconnect(),null),this._observer=new ResizeObserver(e=>{for(let t of e){if(t.target!==this._canvas)continue;let e=this.canvas.width,n=this.canvas.height,r=t.contentRect.width/e*this._renderer.resolution,i=t.contentRect.height/n*this._renderer.resolution;(this._lastScaleX!==r||this._lastScaleY!==i)&&(this.updateTranslation(),this._lastScaleX=r,this._lastScaleY=i)}}),this._observer.observe(this._canvas)):this._tickerAttached||C_.shared.add(this.updateTranslation,this,b_.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&C_.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform=``,this._lastScaleX=null,this._lastScaleY=null}},$_=class e{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=e.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new eh,this.page=new eh,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw Error(`initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.`)}initUIEvent(e,t,n,r,i){throw Error(`initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.`)}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}},ev=/iPhone/i,tv=/iPod/i,nv=/iPad/i,rv=/\biOS-universal(?:.+)Mac\b/i,iv=/\bAndroid(?:.+)Mobile\b/i,av=/Android/i,ov=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,sv=/Silk/i,cv=/Windows Phone/i,lv=/\bWindows(?:.+)ARM\b/i,uv=/BlackBerry/i,dv=/BB10/i,fv=/Opera Mini/i,pv=/\b(CriOS|Chrome)(?:.+)Mobile/i,mv=/Mobile(?:.+)Firefox\b/i,hv=function(e){return e!==void 0&&e.platform===`MacIntel`&&typeof e.maxTouchPoints==`number`&&e.maxTouchPoints>1&&typeof MSStream>`u`};function gv(e){return function(t){return t.test(e)}}function _v(e){var t={userAgent:``,platform:``,maxTouchPoints:0};!e&&typeof navigator<`u`?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e==`string`?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var n=t.userAgent,r=n.split(`[FBAN`);r[1]!==void 0&&(n=r[0]),r=n.split(`Twitter`),r[1]!==void 0&&(n=r[0]);var i=gv(n),a={apple:{phone:i(ev)&&!i(cv),ipod:i(tv),tablet:!i(ev)&&(i(nv)||hv(t))&&!i(cv),universal:i(rv),device:(i(ev)||i(tv)||i(nv)||i(rv)||hv(t))&&!i(cv)},amazon:{phone:i(ov),tablet:!i(ov)&&i(sv),device:i(ov)||i(sv)},android:{phone:!i(cv)&&i(ov)||!i(cv)&&i(iv),tablet:!i(cv)&&!i(ov)&&!i(iv)&&(i(sv)||i(av)),device:!i(cv)&&(i(ov)||i(sv)||i(iv)||i(av))||i(/\bokhttp\b/i)},windows:{phone:i(cv),tablet:i(lv),device:i(cv)||i(lv)},other:{blackberry:i(uv),blackberry10:i(dv),opera:i(fv),firefox:i(mv),chrome:i(pv),device:i(uv)||i(dv)||i(fv)||i(mv)||i(pv)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var vv=(_v.default??_v)(globalThis.navigator),yv=9,bv=100,xv=0,Sv=0,Cv=2,wv=1,Tv=-1e3,Ev=-1e3,Dv=2,Ov=class e{constructor(e,t=vv){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){let e=document.createElement(`button`);e.style.width=`${wv}px`,e.style.height=`${wv}px`,e.style.position=`absolute`,e.style.top=`${Tv}px`,e.style.left=`${Ev}px`,e.style.zIndex=Dv.toString(),e.style.backgroundColor=`#FF0000`,e.title=`select to enable accessibility for this content`,e.addEventListener(`focus`,()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&=(document.body.removeChild(this._hookDiv),null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement(`div`),this._div.style.position=`absolute`,this._div.style.top=`${xv}px`,this._div.style.left=`${Sv}px`,this._div.style.pointerEvents=`none`,this._div.style.zIndex=Cv.toString(),this._canvasObserver=new Q_({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener(`keydown`,this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener(`mousemove`,this._boundOnMouseMove,!0);let e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{let t=new MutationObserver(()=>{e.parentNode&&(t.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener(`mousemove`,this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener(`keydown`,this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(let e of this._children)e._accessibleDiv?.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(let e in this._pools)this._pools[e].forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),delete this._pools[e];this._div?.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);let t=e.children;if(t)for(let e=0;e<t.length;e++)this._updateAccessibleObjects(t[e])}init(t){let n={accessibilityOptions:{...e.defaultOptions,...t?.accessibilityOptions||{}}};this.debug=n.accessibilityOptions.debug,this._activateOnTab=n.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=n.accessibilityOptions.deactivateOnMouseMove,n.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){let e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests))return;let t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(let e of this._children)e._renderId===this._renderId&&t.add(this._children.indexOf(e))}for(let e=this._children.length-1;e>=0;e--){let n=this._children[e];t.has(e)||(n._accessibleDiv&&n._accessibleDiv.parentNode&&(n._accessibleDiv.parentNode.removeChild(n._accessibleDiv),this._getPool(n.accessibleType).push(n._accessibleDiv),n._accessibleDiv=null),n._accessibleActive=!1,Cg(this._children,e,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let e=0;e<this._children.length;e++){let t=this._children[e];if(!t._accessibleActive||!t._accessibleDiv)continue;let n=t._accessibleDiv,r=t.hitArea||t.getBounds().rectangle;if(t.hitArea){let e=t.worldTransform;n.style.left=`${e.tx+r.x*e.a}px`,n.style.top=`${e.ty+r.y*e.d}px`,n.style.width=`${r.width*e.a}px`,n.style.height=`${r.height*e.d}px`}else this._capHitArea(r),n.style.left=`${r.x}px`,n.style.top=`${r.y}px`,n.style.width=`${r.width}px`,n.style.height=`${r.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:n}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let t=this._getPool(e.accessibleType).pop();t?(t.innerHTML=``,t.removeAttribute(`title`),t.removeAttribute(`aria-label`),t.tabIndex=0):(e.accessibleType===`button`?t=document.createElement(`button`):(t=document.createElement(e.accessibleType),t.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width=`${bv}px`,t.style.height=`${bv}px`,t.style.backgroundColor=this.debug?`rgba(255,255,255,0.5)`:`transparent`,t.style.position=`absolute`,t.style.zIndex=Cv.toString(),t.style.borderStyle=`none`,navigator.userAgent.toLowerCase().includes(`chrome`)?t.setAttribute(`aria-live`,`off`):t.setAttribute(`aria-live`,`polite`),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute(`aria-relevant`,`additions`):t.setAttribute(`aria-relevant`,`text`),t.addEventListener(`click`,this._onClick.bind(this)),t.addEventListener(`focus`,this._onFocus.bind(this)),t.addEventListener(`focusout`,this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute(`aria-label`,e.accessibleHint),e.interactive?t.tabIndex=e.tabIndex:t.tabIndex=0,this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,t){let{container:n}=e.target,r=this._renderer.events.rootBoundary,i=Object.assign(new $_(r),{target:n});r.rootTarget=this._renderer.lastObjectRendered,t.forEach(e=>r.dispatchEvent(i,e))}_onClick(e){this._dispatchEvent(e,[`click`,`pointertap`,`tap`])}_onFocus(e){e.target.getAttribute(`aria-live`)||e.target.setAttribute(`aria-live`,`assertive`),this._dispatchEvent(e,[`mouseover`])}_onFocusOut(e){e.target.getAttribute(`aria-live`)||e.target.setAttribute(`aria-live`,`polite`),this._dispatchEvent(e,[`mouseout`])}_onKeyDown(e){e.keyCode!==yv||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener(`keydown`,this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener(`mousemove`,this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}};Ov.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`accessibility`},Ov.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};var kv=Ov,Av={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:`button`,accessibleText:null,accessiblePointerEvents:`auto`,accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},jv=Object.create(null),Mv=Object.create(null);function Nv(e,t){let n=Mv[e];return n===void 0&&(jv[t]===void 0&&(jv[t]=1),Mv[e]=n=jv[t]++),n}var Pv;function Fv(){return(!Pv||Pv?.isContextLost())&&(Pv=__.get().createCanvas().getContext(`webgl`,{})),Pv}var Iv;function Lv(){if(!Iv){Iv=`mediump`;let e=Fv();e&&e.getShaderPrecisionFormat&&(Iv=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?`highp`:`mediump`)}return Iv}function Rv(e,t,n){return t?e:n?(e=e.replace(`out vec4 finalColor;`,``),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${e}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${e}
        `}function zv(e,t,n){let r=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(e.substring(0,9)!==`precision`){let i=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return i===`highp`&&r!==`highp`&&(i=`mediump`),`precision ${i} float;
${e}`}else if(r!==`highp`&&e.substring(0,15)===`precision highp`)return e.replace(`precision highp`,`precision mediump`);return e}function Bv(e,t){return t?`#version 300 es
${e}`:e}var Vv={},Hv={};function Uv(e,{name:t=`pixi-program`},n=!0){t=t.replace(/\s+/g,`-`),t+=n?`-fragment`:`-vertex`;let r=n?Vv:Hv;return r[t]?(r[t]++,t+=`-${r[t]}`):r[t]=1,e.indexOf(`#define SHADER_NAME`)===-1?`${`#define SHADER_NAME ${t}`}
${e}`:e}function Wv(e,t){return t?e.replace(`#version 300 es`,``):e}var Gv={stripVersion:Wv,ensurePrecision:zv,addProgramDefines:Rv,setProgramName:Uv,insertVersion:Bv},Kv=Object.create(null),qv=class e{constructor(t){t={...e.defaultOptions,...t};let n=t.fragment.indexOf(`#version 300 es`)!==-1,r={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:`highp`,maxSupportedFragmentPrecision:Lv()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n},i=t.fragment,a=t.vertex;Object.keys(Gv).forEach(e=>{let t=r[e];i=Gv[e](i,t,!0),a=Gv[e](a,t,!1)}),this.fragment=i,this.vertex=a,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Nv(`${this.vertex}:${this.fragment}`,`gl-program`)}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,Kv[this._cacheKey]=null}static from(t){let n=`${t.vertex}:${t.fragment}`;return Kv[n]||(Kv[n]=new e(t),Kv[n]._cacheKey=n),Kv[n]}};qv.defaultOptions={preferredVertexPrecision:`highp`,preferredFragmentPrecision:`mediump`};var Jv=qv,Yv={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Xv(e){return Yv[e]??Yv.float32}var Zv={f32:`float32`,"vec2<f32>":`float32x2`,"vec3<f32>":`float32x3`,"vec4<f32>":`float32x4`,vec2f:`float32x2`,vec3f:`float32x3`,vec4f:`float32x4`,i32:`sint32`,"vec2<i32>":`sint32x2`,"vec3<i32>":`sint32x3`,"vec4<i32>":`sint32x4`,u32:`uint32`,"vec2<u32>":`uint32x2`,"vec3<u32>":`uint32x3`,"vec4<u32>":`uint32x4`,bool:`uint32`,"vec2<bool>":`uint32x2`,"vec3<bool>":`uint32x3`,"vec4<bool>":`uint32x4`};function Qv({source:e,entryPoint:t}){let n={},r=e.indexOf(`fn ${t}`);if(r!==-1){let t=e.indexOf(`->`,r);if(t!==-1){let i=e.substring(r,t),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g,o;for(;(o=a.exec(i))!==null;){let e=Zv[o[3]]??`float32`;n[o[2]]={location:parseInt(o[1],10),format:e,stride:Xv(e).stride,offset:0,instance:!1,start:0}}}}return n}function $v(e){let t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,s=/(\w+)\s*:\s*([\w\<\>]+)/g,c=/struct\s+(\w+)/,l=e.match(t)?.map(e=>({group:parseInt(e.match(n)[1],10),binding:parseInt(e.match(r)[1],10),name:e.match(i)[2],isUniform:e.match(i)[1]===`<uniform>`,type:e.match(a)[1]}));return l?{groups:l,structs:e.match(o)?.map(e=>{let t=e.match(c)[1],n=e.match(s).reduce((e,t)=>{let[n,r]=t.split(`:`);return e[n.trim()]=r.trim(),e},{});return n?{name:t,members:n}:null}).filter(({name:e})=>l.some(t=>t.type===e))??[]}:{groups:[],structs:[]}}var ey=(e=>(e[e.VERTEX=1]=`VERTEX`,e[e.FRAGMENT=2]=`FRAGMENT`,e[e.COMPUTE=4]=`COMPUTE`,e))(ey||{});function ty({groups:e}){let t=[];for(let n=0;n<e.length;n++){let r=e[n];t[r.group]||(t[r.group]=[]),r.isUniform?t[r.group].push({binding:r.binding,visibility:ey.VERTEX|ey.FRAGMENT,buffer:{type:`uniform`}}):r.type===`sampler`?t[r.group].push({binding:r.binding,visibility:ey.FRAGMENT,sampler:{type:`filtering`}}):r.type===`texture_2d`&&t[r.group].push({binding:r.binding,visibility:ey.FRAGMENT,texture:{sampleType:`float`,viewDimension:`2d`,multisampled:!1}})}return t}function ny({groups:e}){let t=[];for(let n=0;n<e.length;n++){let r=e[n];t[r.group]||(t[r.group]={}),t[r.group][r.name]=r.binding}return t}function ry(e,t){let n=new Set,r=new Set;return{structs:[...e.structs,...t.structs].filter(e=>n.has(e.name)?!1:(n.add(e.name),!0)),groups:[...e.groups,...t.groups].filter(e=>{let t=`${e.name}-${e.binding}`;return r.has(t)?!1:(r.add(t),!0)})}}var iy=Object.create(null),ay=class e{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;let{fragment:t,vertex:n,layout:r,gpuLayout:i,name:a}=e;this.name=a,this.fragment=t,this.vertex=n,t.source===n.source?this.structsAndGroups=$v(t.source):this.structsAndGroups=ry($v(n.source),$v(t.source)),this.layout=r??ny(this.structsAndGroups),this.gpuLayout=i??ty(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:e,fragment:t}=this;this._layoutKey=Nv(e.source+t.source+e.entryPoint+t.entryPoint,`program`)}get attributeData(){return this._attributeData??=Qv(this.vertex),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,iy[this._cacheKey]=null}static from(t){let n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return iy[n]||(iy[n]=new e(t),iy[n]._cacheKey=n),iy[n]}},oy=[`f32`,`i32`,`vec2<f32>`,`vec3<f32>`,`vec4<f32>`,`mat2x2<f32>`,`mat3x3<f32>`,`mat4x4<f32>`,`mat3x2<f32>`,`mat4x2<f32>`,`mat2x3<f32>`,`mat4x3<f32>`,`mat2x4<f32>`,`mat3x4<f32>`,`vec2<i32>`,`vec3<i32>`,`vec4<i32>`],sy=oy.reduce((e,t)=>(e[t]=!0,e),{});function cy(e,t){switch(e){case`f32`:return 0;case`vec2<f32>`:return new Float32Array(2*t);case`vec3<f32>`:return new Float32Array(3*t);case`vec4<f32>`:return new Float32Array(4*t);case`mat2x2<f32>`:return new Float32Array([1,0,0,1]);case`mat3x3<f32>`:return new Float32Array([1,0,0,0,1,0,0,0,1]);case`mat4x4<f32>`:return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ly=class e{constructor(t,n){this._touched=0,this.uid=gh(`uniform`),this._resourceType=`uniformGroup`,this._resourceId=gh(`resource`),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...e.defaultOptions,...n},this.uniformStructures=t;let r={};for(let e in t){let n=t[e];if(n.name=e,n.size=n.size??1,!sy[n.type]){let e=n.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(e){let[,t,r]=e;throw Error(`Uniform type ${n.type} is not supported. Use type: '${t}', size: ${r} instead.`)}throw Error(`Uniform type ${n.type} is not supported. Supported uniform types are: ${oy.join(`, `)}`)}n.value??=cy(n.type,n.size),r[e]=n.value}this.uniforms=r,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=Nv(Object.keys(r).map(e=>`${e}-${t[e].type}`).join(`-`),`uniform-group`)}update(){this._dirtyId++}};ly.defaultOptions={ubo:!1,isStatic:!1};var uy=ly,dy=class{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(let n in e){let r=e[n];this.setResource(r,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let e=[],t=0;for(let n in this.resources)e[t++]=this.resources[n]._resourceId;this._key=e.join(`|`)}setResource(e,t){let n=this.resources[t];e!==n&&(n&&e.off?.(`change`,this.onResourceChange,this),e.on?.(`change`,this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,t){let n=this.resources;for(let r in n)n[r]._gcLastUsed=e,n[r]._touched=t}destroy(){let e=this.resources;for(let t in e)e[t]?.off?.(`change`,this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){let t=this.resources;for(let n in t)t[n]===e&&(t[n]=null)}else this._updateKey()}},fy=(e=>(e[e.WEBGL=1]=`WEBGL`,e[e.WEBGPU=2]=`WEBGPU`,e[e.BOTH=3]=`BOTH`,e))(fy||{}),py=class e extends Xm{constructor(e){super(),this.uid=gh(`shader`),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:n,groups:r,resources:i,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=t,this.glProgram=n,a===void 0&&(a=0,t&&(a|=fy.WEBGPU),n&&(a|=fy.WEBGL)),this.compatibleRenderers=a;let s={};if(!i&&!r&&(i={}),i&&r)throw Error(`[Shader] Cannot have both resources and groups`);if(!t&&r&&!o)throw Error(`[Shader] No group map or WebGPU shader provided - consider using resources instead.`);if(!t&&r&&o)for(let e in o)for(let t in o[e]){let n=o[e][t];s[n]={group:e,binding:t,name:n}}else if(t&&r&&!o){let e=t.structsAndGroups.groups;o={},e.forEach(e=>{o[e.group]=o[e.group]||{},o[e.group][e.binding]=e.name,s[e.name]=e})}else if(i){r={},o={},t&&t.structsAndGroups.groups.forEach(e=>{o[e.group]=o[e.group]||{},o[e.group][e.binding]=e.name,s[e.name]=e});let e=0;for(let t in i)s[t]||(r[99]||(r[99]=new dy,this._ownedBindGroups.push(r[99])),s[t]={group:99,binding:e,name:t},o[99]=o[99]||{},o[99][e]=t,e++);for(let e in i){let t=e,n=i[e];!n.source&&!n._resourceType&&(n=new uy(n));let a=s[t];a&&(r[a.group]||(r[a.group]=new dy,this._ownedBindGroups.push(r[a.group])),r[a.group].setResource(n,a.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,s)}addResource(e,t,n){var r,i;(r=this._uniformBindMap)[t]||(r[t]={}),(i=this._uniformBindMap[t])[n]||(i[n]=e),this.groups[t]||(this.groups[t]=new dy,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){let n={};for(let r in t){let i=t[r];Object.defineProperty(n,i.name,{get(){return e[i.group].getResource(i.binding)},set(t){e[i.group].setResource(t,i.binding)}})}return n}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit(`destroy`,this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(e=>{e.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(t){let{gpu:n,gl:r,...i}=t,a,o;return n&&(a=ay.from(n)),r&&(o=Jv.from(r)),new e({gpuProgram:a,glProgram:o,...i})}},my={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},hy=0,gy=1,_y=2,vy=3,yy=4,by=5,xy=class e{constructor(){this.data=0,this.blendMode=`normal`,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<hy)}set blend(e){!!(this.data&1<<hy)!==e&&(this.data^=1<<hy)}get offsets(){return!!(this.data&1<<gy)}set offsets(e){!!(this.data&1<<gy)!==e&&(this.data^=1<<gy)}set cullMode(e){if(e===`none`){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e===`front`}get cullMode(){return this.culling?this.clockwiseFrontFace?`front`:`back`:`none`}get culling(){return!!(this.data&1<<_y)}set culling(e){!!(this.data&1<<_y)!==e&&(this.data^=1<<_y)}get depthTest(){return!!(this.data&1<<vy)}set depthTest(e){!!(this.data&1<<vy)!==e&&(this.data^=1<<vy)}get depthMask(){return!!(this.data&1<<by)}set depthMask(e){!!(this.data&1<<by)!==e&&(this.data^=1<<by)}get clockwiseFrontFace(){return!!(this.data&1<<yy)}set clockwiseFrontFace(e){!!(this.data&1<<yy)!==e&&(this.data^=1<<yy)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==`none`,this._blendMode=e,this._blendModeId=my[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let t=new e;return t.depthTest=!1,t.blend=!0,t}};xy.default2d=xy.for2d();var Sy=xy,Cy=class e extends py{constructor(t){t={...e.defaultOptions,...t},super(t),this.enabled=!0,this._state=Sy.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias==`boolean`?this.antialias=t.antialias?`on`:`off`:this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource(`uTexture`,0,1),t.blendRequired&&this.addResource(`uBackTexture`,0,3)}apply(e,t,n,r){e.applyFilter(this,t,n,r)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(t){let{gpu:n,gl:r,...i}=t,a,o;return n&&(a=ay.from(n)),r&&(o=Jv.from(r)),new e({gpuProgram:a,glProgram:o,...i})}};Cy.defaultOptions={blendMode:`normal`,resolution:1,padding:0,antialias:`off`,blendRequired:!1,clipToViewport:!0};var wy=Cy,Ty=[];Km.handleByNamedList(X.Environment,Ty);async function Ey(e){if(!e)for(let e=0;e<Ty.length;e++){let t=Ty[e];if(t.value.test()){await t.value.load();return}}}var Dy;function Oy(){if(typeof Dy==`boolean`)return Dy;try{Dy=Function(`param1`,`param2`,`param3`,`return param1[param2] === param3;`)({a:`b`},`a`,`b`)===!0}catch{Dy=!1}return Dy}function ky(e,t,n=2){let r=t&&t.length,i=r?t[0]*n:e.length,a=Ay(e,0,i,n,!0),o=[];if(!a||a.next===a.prev)return o;let s,c,l;if(r&&(a=Ly(e,t,a,n)),e.length>80*n){s=e[0],c=e[1];let t=s,r=c;for(let a=n;a<i;a+=n){let n=e[a],i=e[a+1];n<s&&(s=n),i<c&&(c=i),n>t&&(t=n),i>r&&(r=i)}l=Math.max(t-s,r-c),l=l===0?0:32767/l}return My(a,o,n,s,c,l,0),o}function Ay(e,t,n,r,i){let a;if(i===sb(e,t,n,r)>0)for(let i=t;i<n;i+=r)a=ib(i/r|0,e[i],e[i+1],a);else for(let i=n-r;i>=t;i-=r)a=ib(i/r|0,e[i],e[i+1],a);return a&&Xy(a,a.next)&&(ab(a),a=a.next),a}function jy(e,t){if(!e)return e;t||=e;let n=e,r;do if(r=!1,!n.steiner&&(Xy(n,n.next)||Yy(n.prev,n,n.next)===0)){if(ab(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function My(e,t,n,r,i,a,o){if(!e)return;!o&&a&&Hy(e,r,i,a);let s=e;for(;e.prev!==e.next;){let c=e.prev,l=e.next;if(a?Py(e,r,i,a):Ny(e)){t.push(c.i,e.i,l.i),ab(e),e=l.next,s=l.next;continue}if(e=l,e===s){o?o===1?(e=Fy(jy(e),t),My(e,t,n,r,i,a,2)):o===2&&Iy(e,t,n,r,i,a):My(jy(e),t,n,r,i,a,1);break}}}function Ny(e){let t=e.prev,n=e,r=e.next;if(Yy(t,n,r)>=0)return!1;let i=t.x,a=n.x,o=r.x,s=t.y,c=n.y,l=r.y,u=Math.min(i,a,o),d=Math.min(s,c,l),f=Math.max(i,a,o),p=Math.max(s,c,l),m=r.next;for(;m!==t;){if(m.x>=u&&m.x<=f&&m.y>=d&&m.y<=p&&qy(i,s,a,c,o,l,m.x,m.y)&&Yy(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Py(e,t,n,r){let i=e.prev,a=e,o=e.next;if(Yy(i,a,o)>=0)return!1;let s=i.x,c=a.x,l=o.x,u=i.y,d=a.y,f=o.y,p=Math.min(s,c,l),m=Math.min(u,d,f),h=Math.max(s,c,l),g=Math.max(u,d,f),_=Wy(p,m,t,n,r),v=Wy(h,g,t,n,r),y=e.prevZ,b=e.nextZ;for(;y&&y.z>=_&&b&&b.z<=v;){if(y.x>=p&&y.x<=h&&y.y>=m&&y.y<=g&&y!==i&&y!==o&&qy(s,u,c,d,l,f,y.x,y.y)&&Yy(y.prev,y,y.next)>=0||(y=y.prevZ,b.x>=p&&b.x<=h&&b.y>=m&&b.y<=g&&b!==i&&b!==o&&qy(s,u,c,d,l,f,b.x,b.y)&&Yy(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;y&&y.z>=_;){if(y.x>=p&&y.x<=h&&y.y>=m&&y.y<=g&&y!==i&&y!==o&&qy(s,u,c,d,l,f,y.x,y.y)&&Yy(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=v;){if(b.x>=p&&b.x<=h&&b.y>=m&&b.y<=g&&b!==i&&b!==o&&qy(s,u,c,d,l,f,b.x,b.y)&&Yy(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Fy(e,t){let n=e;do{let r=n.prev,i=n.next.next;!Xy(r,i)&&Zy(r,n,n.next,i)&&tb(r,i)&&tb(i,r)&&(t.push(r.i,n.i,i.i),ab(n),ab(n.next),n=e=i),n=n.next}while(n!==e);return jy(n)}function Iy(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Jy(o,e)){let s=rb(o,e);o=jy(o,o.next),s=jy(s,s.next),My(o,t,n,r,i,a,0),My(s,t,n,r,i,a,0);return}e=e.next}o=o.next}while(o!==e)}function Ly(e,t,n,r){let i=[];for(let n=0,a=t.length;n<a;n++){let o=Ay(e,t[n]*r,n<a-1?t[n+1]*r:e.length,r,!1);o===o.next&&(o.steiner=!0),i.push(Gy(o))}i.sort(Ry);for(let e=0;e<i.length;e++)n=zy(i[e],n);return n}function Ry(e,t){let n=e.x-t.x;return n===0&&(n=e.y-t.y,n===0&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x))),n}function zy(e,t){let n=By(e,t);if(!n)return t;let r=rb(n,e);return jy(r,r.next),jy(n,n.next)}function By(e,t){let n=t,r=e.x,i=e.y,a=-1/0,o;if(Xy(e,n))return n;do{if(Xy(e,n.next))return n.next;if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){let e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a&&(a=e,o=n.x<n.next.x?n:n.next,e===r))return o}n=n.next}while(n!==t);if(!o)return null;let s=o,c=o.x,l=o.y,u=1/0;n=o;do{if(r>=n.x&&n.x>=c&&r!==n.x&&Ky(i<l?r:a,i,c,l,i<l?a:r,i,n.x,n.y)){let t=Math.abs(i-n.y)/(r-n.x);tb(n,e)&&(t<u||t===u&&(n.x>o.x||n.x===o.x&&Vy(o,n)))&&(o=n,u=t)}n=n.next}while(n!==s);return o}function Vy(e,t){return Yy(e.prev,e,t.prev)<0&&Yy(t.next,e,e.next)<0}function Hy(e,t,n,r){let i=e;do i.z===0&&(i.z=Wy(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Uy(i)}function Uy(e){let t,n=1;do{let r=e,i;e=null;let a=null;for(t=0;r;){t++;let o=r,s=0;for(let e=0;e<n&&(s++,o=o.nextZ,o);e++);let c=n;for(;s>0||c>0&&o;)s!==0&&(c===0||!o||r.z<=o.z)?(i=r,r=r.nextZ,s--):(i=o,o=o.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=o}a.nextZ=null,n*=2}while(t>1);return e}function Wy(e,t,n,r,i){return e=(e-n)*i|0,t=(t-r)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Gy(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Ky(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function qy(e,t,n,r,i,a,o,s){return!(e===o&&t===s)&&Ky(e,t,n,r,i,a,o,s)}function Jy(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!eb(e,t)&&(tb(e,t)&&tb(t,e)&&nb(e,t)&&(Yy(e.prev,e,t.prev)||Yy(e,t.prev,t))||Xy(e,t)&&Yy(e.prev,e,e.next)>0&&Yy(t.prev,t,t.next)>0)}function Yy(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Xy(e,t){return e.x===t.x&&e.y===t.y}function Zy(e,t,n,r){let i=$y(Yy(e,t,n)),a=$y(Yy(e,t,r)),o=$y(Yy(n,r,e)),s=$y(Yy(n,r,t));return!!(i!==a&&o!==s||i===0&&Qy(e,n,t)||a===0&&Qy(e,r,t)||o===0&&Qy(n,e,r)||s===0&&Qy(n,t,r))}function Qy(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $y(e){return e>0?1:e<0?-1:0}function eb(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Zy(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function tb(e,t){return Yy(e.prev,e,e.next)<0?Yy(e,t,e.next)>=0&&Yy(e,e.prev,t)>=0:Yy(e,t,e.prev)<0||Yy(e,e.next,t)<0}function nb(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function rb(e,t){let n=ob(e.i,e.x,e.y),r=ob(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ib(e,t,n,r){let i=ob(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ab(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ob(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sb(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}var cb=ky.default||ky,lb=(e=>(e[e.NONE=0]=`NONE`,e[e.COLOR=16384]=`COLOR`,e[e.STENCIL=1024]=`STENCIL`,e[e.DEPTH=256]=`DEPTH`,e[e.COLOR_DEPTH=16640]=`COLOR_DEPTH`,e[e.COLOR_STENCIL=17408]=`COLOR_STENCIL`,e[e.DEPTH_STENCIL=1280]=`DEPTH_STENCIL`,e[e.ALL=17664]=`ALL`,e))(lb||{}),ub=class{constructor(e){this.items=[],this._name=e}emit(e,t,n,r,i,a,o,s){let{name:c,items:l}=this;for(let u=0,d=l.length;u<d;u++)l[u][c](e,t,n,r,i,a,o,s);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}},db=[`init`,`destroy`,`contextChange`,`resolutionChange`,`resetState`,`renderEnd`,`renderStart`,`render`,`update`,`postrender`,`prerender`],fb=class e extends Xm{constructor(e){super(),this.tick=0,this.uid=gh(`renderer`),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;let t=[...db,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(t={}){for(let e in await Ey(t.skipExtensionImports===!0?!0:t.manageImports===!1),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors),this._systemsHash)t={...this._systemsHash[e].constructor.defaultOptions,...t};t={...e.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let e=0;e<this.runners.init.items.length;e++)await this.runners.init.items[e].init(t);this._initOptions=t}render(e,t){this.tick++;let n=e;n instanceof o_&&(n={container:n},t&&(xh(vh,`passing a second argument is deprecated, please use render options instead`),n.target=t.renderTexture)),n.target||=this.view.renderTarget,n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??=this.background.colorRgba,n.clear??=this.background.clearBeforeRender),n.clearColor&&=Array.isArray(n.clearColor)&&n.clearColor.length===4?n.clearColor:hg.shared.setValue(n.clearColor).toArray(),n.transform||=(n.container.updateLocalTransform(),n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,t,n){let r=this.view.resolution;this.view.resize(e,t,n),this.emit(`resize`,this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==r&&this.runners.resolutionChange.emit(n)}clear(e={}){let t=this;e.target||=t.renderTarget.renderTarget,e.clearColor||=this.background.colorRgba,e.clear??=lb.ALL;let{clear:n,clearColor:r,target:i}=e;hg.shared.setValue(r??this.background.colorRgba),t.renderTarget.clear(i,n,hg.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(e=>{this.runners[e]=new ub(e)})}_addSystems(e){let t;for(t in e){let n=e[t];this._addSystem(n.value,n.name)}}_addSystem(e,t){let n=new e(this);if(this[t])throw Error(`Whoops! The name "${t}" is already in use`);for(let e in this[t]=n,this._systemsHash[t]=n,this.runners)this.runners[e].add(n);return this}_addPipes(e,t){let n=t.reduce((e,t)=>(e[t.name]=t.value,e),{});e.forEach(e=>{let t=e.value,r=e.name,i=n[r];this.renderPipes[r]=new t(this,i?new i:null),this.runners.destroy.add(this.renderPipes[r])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e==`object`&&e.releaseGlobalResources)&&yg.release(),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!Oy())throw Error(`Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.`)}resetState(){this.runners.resetState.emit()}};fb.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};var pb=fb,mb;function hb(e){return mb===void 0&&(mb=(()=>{let t={stencil:!0,failIfMajorPerformanceCaveat:e??pb.defaultOptions.failIfMajorPerformanceCaveat};try{if(!__.get().getWebGLRenderingContext())return!1;let e=__.get().createCanvas().getContext(`webgl`,t),n=!!e?.getContextAttributes()?.stencil;if(e){let t=e.getExtension(`WEBGL_lose_context`);t&&t.loseContext()}return e=null,n}catch{return!1}})()),mb}var gb;async function _b(e={}){return gb===void 0&&(gb=await(async()=>{let t=__.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(e)).requestDevice(),!0}catch{return!1}})()),gb}var vb=[`webgl`,`webgpu`,`canvas`];async function yb(e){let t=[];e.preference?(t.push(e.preference),vb.forEach(n=>{n!==e.preference&&t.push(n)})):t=vb.slice();let n,r={};for(let i=0;i<t.length;i++){let a=t[i];if(a===`webgpu`&&await _b()){let{WebGPURenderer:t}=await D(async()=>{let{WebGPURenderer:e}=await import(`./WebGPURenderer-C8tNs1dg.js`);return{WebGPURenderer:e}},[]);n=t,r={...e,...e.webgpu};break}else if(a===`webgl`&&hb(e.failIfMajorPerformanceCaveat??pb.defaultOptions.failIfMajorPerformanceCaveat)){let{WebGLRenderer:t}=await D(async()=>{let{WebGLRenderer:e}=await import(`./WebGLRenderer-a8I-Zj1b.js`);return{WebGLRenderer:e}},[]);n=t,r={...e,...e.webgl};break}else if(a===`canvas`)throw r={...e},Error(`CanvasRenderer is not yet implemented`)}if(delete r.webgpu,delete r.webgl,!n)throw Error(`No available renderer for the current environment`);let i=new n;return await i.init(r),i}var bb=`8.15.0`,xb=class{static init(){globalThis.__PIXI_APP_INIT__?.(this,bb)}static destroy(){}};xb.extension=X.Application;var Sb=class{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,bb)}destroy(){this._renderer=null}};Sb.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`initHook`,priority:-10};var Cb=class e{constructor(...e){this.stage=new o_,e[0]!==void 0&&xh(vh,`Application constructor options are deprecated, please use Application.init() instead.`)}async init(t){t={...t},this.stage||=new o_,this.renderer=await yb(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return xh(vh,`Application.view is deprecated, please use Application.canvas instead.`),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){let r=e._plugins.slice(0);r.reverse(),r.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Cb._plugins=[];var wb=Cb;Km.handleByList(X.Application,wb._plugins),Km.add(xb);var Tb=class{static init(e){Object.defineProperty(this,`resizeTo`,{configurable:!0,set(e){globalThis.removeEventListener(`resize`,this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener(`resize`,this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&=(cancelAnimationFrame(this._resizeId),null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let e,t;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{let{clientWidth:n,clientHeight:r}=this._resizeTo;e=n,t=r}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener(`resize`,this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};Tb.extension=X.Application;var Eb=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,`ticker`,{configurable:!0,set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,b_.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?C_.shared:new C_,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};Eb.extension=X.Application;var Db=class extends Xm{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily=``,this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:`none`,range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return xh(vh,`BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.`),this.fontFamily}get pageTextures(){return xh(vh,`BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.`),this.pages}get size(){return xh(vh,`BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.`),this.fontMetrics.fontSize}get distanceFieldRange(){return xh(vh,`BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.`),this.distanceField.range}get distanceFieldType(){return xh(vh,`BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.`),this.distanceField.type}destroy(e=!1){for(let e in this.emit(`destroy`,this),this.removeAllListeners(),this.chars)this.chars[e].texture?.destroy();this.chars=null,e&&(this.pages.forEach(e=>e.texture.destroy(!0)),this.pages=null)}},Ob=class{constructor(e=0,t=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){let t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){let t=Array(e.length);for(let n=0;n<e.length;n++){let r=e[n];t[n]=[r,this.get(r)]}return t}evict(e=!1){if(e||this.size>0){let e=this.first;delete this.items[e.key],--this.size===0?(this.first=null,this.last=null):(this.first=e.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){let t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){let e=Array(this.size),t=this.first,n=0;for(;t!==null;)e[n++]=t.key,t=t.next;return e}setWithEvicted(e,t,n=this.resetTtl){let r=null;if(this.has(e))this.set(e,t,!0,n);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let n=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=n:this.last.next=n,this.last=n}return r}set(e,t,n=!1,r=this.resetTtl){let i=this.items[e];return n||i!==void 0?(i.value=t,n===!1&&r&&(i.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(i)):(this.max>0&&this.size===this.max&&this.evict(!0),i=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=i:this.last.next=i,this.last=i),this}values(e=this.keys()){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.get(e[n]);return t}};function kb(e=1e3,t=0,n=!1){if(isNaN(e)||e<0)throw TypeError(`Invalid max value`);if(isNaN(t)||t<0)throw TypeError(`Invalid ttl value`);if(typeof n!=`boolean`)throw TypeError(`Invalid resetTtl value`);return new Ob(e,t,n)}var Ab=[`serif`,`sans-serif`,`monospace`,`cursive`,`fantasy`,`system-ui`];function jb(e){let t=typeof e.fontSize==`number`?`${e.fontSize}px`:e.fontSize,n=e.fontFamily;Array.isArray(e.fontFamily)||(n=e.fontFamily.split(`,`));for(let e=n.length-1;e>=0;e--){let t=n[e].trim();!/([\"\'])[^\'\"]+\1/.test(t)&&!Ab.includes(t)&&(t=`"${t}"`),n[e]=t}return`${e.fontStyle} ${e.fontVariant} ${e.fontWeight} ${t} ${n.join(`,`)}`}var Mb={willReadFrequently:!0},Nb=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(t===void 0){let n=__.get().getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported=`letterSpacing`in n||`textLetterSpacing`in n}return t}constructor(e,t,n,r,i,a,o,s,c){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=s,this.fontProperties=c}static measureText(t=` `,n,r=e._canvas,i=n.wordWrap){let a=`${t}-${n.styleKey}-wordWrap-${i}`;if(e._measurementCache.has(a))return e._measurementCache.get(a);let o=jb(n),s=e.measureFont(o);s.fontSize===0&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);let c=e.__context;c.font=o;let l=(i?e._wordWrap(t,n,r):t).split(/(?:\r\n|\r|\n)/),u=Array(l.length),d=0;for(let t=0;t<l.length;t++){let r=e._measureText(l[t],n.letterSpacing,c);u[t]=r,d=Math.max(d,r)}let f=n._stroke?.width||0,p=d+f;n.dropShadow&&(p+=n.dropShadow.distance);let m=n.lineHeight||s.fontSize,h=Math.max(m,s.fontSize+f)+(l.length-1)*(m+n.leading);n.dropShadow&&(h+=n.dropShadow.distance);let g=new e(t,n,p,h,l,u,m+n.leading,d,s);return e._measurementCache.set(a,g),g}static _measureText(t,n,r){let i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing=`0px`,r.textLetterSpacing=`0px`));let a=r.measureText(t),o=a.width,s=-a.actualBoundingBoxLeft,c=a.actualBoundingBoxRight-s;if(o>0)if(i)o-=n,c-=n;else{let r=(e.graphemeSegmenter(t).length-1)*n;o+=r,c+=r}return Math.max(o,c)}static _wordWrap(t,n,r=e._canvas){let i=r.getContext(`2d`,Mb),a=0,o=``,s=``,c=Object.create(null),{letterSpacing:l,whiteSpace:u}=n,d=e._collapseSpaces(u),f=e._collapseNewlines(u),p=!d,m=n.wordWrapWidth+l,h=e._tokenize(t);for(let t=0;t<h.length;t++){let r=h[t];if(e._isNewline(r)){if(!f){s+=e._addLine(o),p=!d,o=``,a=0;continue}r=` `}if(d){let t=e.isBreakingSpace(r),n=e.isBreakingSpace(o[o.length-1]);if(t&&n)continue}let u=e._getFromCache(r,l,c,i);if(u>m)if(o!==``&&(s+=e._addLine(o),o=``,a=0),e.canBreakWords(r,n.breakWords)){let t=e.wordWrapSplit(r);for(let u=0;u<t.length;u++){let d=t[u],f=d,h=1;for(;t[u+h];){let i=t[u+h];if(!e.canBreakChars(f,i,r,u,n.breakWords))d+=i;else break;f=i,h++}u+=h-1;let g=e._getFromCache(d,l,c,i);g+a>m&&(s+=e._addLine(o),p=!1,o=``,a=0),o+=d,a+=g}}else{o.length>0&&(s+=e._addLine(o),o=``,a=0);let n=t===h.length-1;s+=e._addLine(r,!n),p=!1,o=``,a=0}else u+a>m&&(p=!1,s+=e._addLine(o),o=``,a=0),(o.length>0||!e.isBreakingSpace(r)||p)&&(o+=r,a+=u)}return s+=e._addLine(o,!1),s}static _addLine(t,n=!0){return t=e._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,r,i){let a=r[t];return typeof a!=`number`&&(a=e._measureText(t,n,i)+n,r[t]=a),a}static _collapseSpaces(e){return e===`normal`||e===`pre-line`}static _collapseNewlines(e){return e===`normal`}static _trimRight(t){if(typeof t!=`string`)return``;for(let n=t.length-1;n>=0;n--){let r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t==`string`?e._newlines.includes(t.charCodeAt(0)):!1}static isBreakingSpace(t,n){return typeof t==`string`?e._breakingSpaces.includes(t.charCodeAt(0)):!1}static _tokenize(t){let n=[],r=``;if(typeof t!=`string`)return n;for(let i=0;i<t.length;i++){let a=t[i],o=t[i+1];if(e.isBreakingSpace(a,o)||e._isNewline(a)){r!==``&&(n.push(r),r=``),a===`\r`&&o===`
`?(n.push(`\r
`),i++):n.push(a);continue}r+=a}return r!==``&&n.push(r),n}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,r,i){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];let n=e._context;n.font=t;let r=n.measureText(e.METRICS_STRING+e.BASELINE_SYMBOL),i={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return e._fonts[t]=i,i}static clearMetrics(t=``){t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let t;try{let n=new OffscreenCanvas(0,0);if(n.getContext(`2d`,Mb)?.measureText)return e.__canvas=n,n;t=__.get().createCanvas()}catch{t=__.get().createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}static get _context(){return e.__context||=e._canvas.getContext(`2d`,Mb),e.__context}};Nb.METRICS_STRING=`|q`,Nb.BASELINE_SYMBOL=`M`,Nb.BASELINE_MULTIPLIER=1.4,Nb.HEIGHT_MULTIPLIER=2,Nb.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter==`function`){let e=new Intl.Segmenter;return t=>{let n=e.segment(t),r=[],i=0;for(let e of n)r[i++]=e.segment;return r}}return e=>[...e]})(),Nb.experimentalLetterSpacing=!1,Nb._fonts={},Nb._newlines=[10,13],Nb._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],Nb._measurementCache=kb(1e3);var Pb=Nb,Fb=[{offset:0,color:`white`},{offset:1,color:`black`}],Ib=class e{constructor(...t){this.uid=gh(`fillGradient`),this._tick=0,this.type=`linear`,this.colorStops=[];let n=Bb(t);n={...n.type===`radial`?e.defaultRadialOptions:e.defaultLinearOptions,...Th(n)},this._textureSize=n.textureSize,this._wrapMode=n.wrapMode,n.type===`radial`?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(e=>{this.addColorStop(e.offset,e.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:hg.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:n,y:r}=this.end,i=n-e,a=r-t,o=i<0||a<0;if(this._wrapMode===`clamp-to-edge`){if(i<0){let t=e;e=n,n=t,i*=-1}if(a<0){let e=t;t=r,r=e,a*=-1}}let s=this.colorStops.length?this.colorStops:Fb,c=this._textureSize,{canvas:l,context:u}=zb(c,1),d=o?u.createLinearGradient(this._textureSize,0,0,0):u.createLinearGradient(0,0,this._textureSize,0);Rb(d,s),u.fillStyle=d,u.fillRect(0,0,c,1),this.texture=new Q({source:new y_({resource:l,addressMode:this._wrapMode})});let f=Math.sqrt(i*i+a*a),p=Math.atan2(a,i),m=new Z;m.scale(f/c,1),m.rotate(p),m.translate(e,t),this.textureSpace===`local`&&m.scale(c,c),this.transform=m}buildGradient(){this.texture||this._tick++,this.type===`linear`?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let e=this.colorStops.length?this.colorStops:Fb,t=this._textureSize,{canvas:n,context:r}=zb(t,t),{x:i,y:a}=this.center,{x:o,y:s}=this.outerCenter,c=this.innerRadius,l=this.outerRadius,u=o-l,d=s-l,f=t/(l*2),p=(i-u)*f,m=(a-d)*f,h=r.createRadialGradient(p,m,c*f,(o-u)*f,(s-d)*f,l*f);Rb(h,e),r.fillStyle=e[e.length-1].color,r.fillRect(0,0,t,t),r.fillStyle=h,r.translate(p,m),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-p,-m),r.fillRect(0,0,t,t),this.texture=new Q({source:new y_({resource:n,addressMode:this._wrapMode})});let g=new Z;g.scale(1/f,1/f),g.translate(u,d),this.textureSpace===`local`&&g.scale(t,t),this.transform=g}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};Ib.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:`local`,type:`linear`,textureSize:256,wrapMode:`clamp-to-edge`},Ib.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:`local`,type:`radial`,textureSize:256,wrapMode:`clamp-to-edge`};var Lb=Ib;function Rb(e,t){for(let n=0;n<t.length;n++){let r=t[n];e.addColorStop(r.offset,r.color)}}function zb(e,t){let n=__.get().createCanvas(e,t);return{canvas:n,context:n.getContext(`2d`)}}function Bb(e){let t=e[0]??{};return(typeof t==`number`||e[1])&&(xh(`8.5.2`,`use options object instead`),t={type:`linear`,start:{x:e[0],y:e[1]},end:{x:e[2],y:e[3]},textureSpace:e[4],textureSize:e[5]??Lb.defaultLinearOptions.textureSize}),t}var Vb={repeat:{addressModeU:`repeat`,addressModeV:`repeat`},"repeat-x":{addressModeU:`repeat`,addressModeV:`clamp-to-edge`},"repeat-y":{addressModeU:`clamp-to-edge`,addressModeV:`repeat`},"no-repeat":{addressModeU:`clamp-to-edge`,addressModeV:`clamp-to-edge`}},Hb=class{constructor(e,t){this.uid=gh(`fillPattern`),this._tick=0,this.transform=new Z,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=Vb[t].addressModeU,e.source.style.addressModeV=Vb[t].addressModeV)}setTransform(e){let t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}},Ub=u(s(((e,t)=>{t.exports=i;var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi;function i(e){var t=[];return e.replace(r,function(e,r,i){var a=r.toLowerCase();for(i=o(i),a==`m`&&i.length>2&&(t.push([r].concat(i.splice(0,2))),a=`l`,r=r==`m`?`l`:`L`);;){if(i.length==n[a])return i.unshift(r),t.push(i);if(i.length<n[a])throw Error(`malformed path data`);t.push([r].concat(i.splice(0,n[a])))}}),t}var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(e){var t=e.match(a);return t?t.map(Number):[]}}))(),1);function Wb(e,t){let n=(0,Ub.default)(e),r=[],i=null,a=0,o=0;for(let e=0;e<n.length;e++){let s=n[e],c=s[0],l=s;switch(c){case`M`:a=l[1],o=l[2],t.moveTo(a,o);break;case`m`:a+=l[1],o+=l[2],t.moveTo(a,o);break;case`H`:a=l[1],t.lineTo(a,o);break;case`h`:a+=l[1],t.lineTo(a,o);break;case`V`:o=l[1],t.lineTo(a,o);break;case`v`:o+=l[1],t.lineTo(a,o);break;case`L`:a=l[1],o=l[2],t.lineTo(a,o);break;case`l`:a+=l[1],o+=l[2],t.lineTo(a,o);break;case`C`:a=l[5],o=l[6],t.bezierCurveTo(l[1],l[2],l[3],l[4],a,o);break;case`c`:t.bezierCurveTo(a+l[1],o+l[2],a+l[3],o+l[4],a+l[5],o+l[6]),a+=l[5],o+=l[6];break;case`S`:a=l[3],o=l[4],t.bezierCurveToShort(l[1],l[2],a,o);break;case`s`:t.bezierCurveToShort(a+l[1],o+l[2],a+l[3],o+l[4]),a+=l[3],o+=l[4];break;case`Q`:a=l[3],o=l[4],t.quadraticCurveTo(l[1],l[2],a,o);break;case`q`:t.quadraticCurveTo(a+l[1],o+l[2],a+l[3],o+l[4]),a+=l[3],o+=l[4];break;case`T`:a=l[1],o=l[2],t.quadraticCurveToShort(a,o);break;case`t`:a+=l[1],o+=l[2],t.quadraticCurveToShort(a,o);break;case`A`:a=l[6],o=l[7],t.arcToSvg(l[1],l[2],l[3],l[4],l[5],a,o);break;case`a`:a+=l[6],o+=l[7],t.arcToSvg(l[1],l[2],l[3],l[4],l[5],a,o);break;case`Z`:case`z`:t.closePath(),r.length>0&&(i=r.pop(),i?(a=i.startX,o=i.startY):(a=0,o=0)),i=null;break;default:$(`Unknown SVG path command: ${c}`)}c!==`Z`&&c!==`z`&&i===null&&(i={startX:a,startY:o},r.push(i))}return t}var Gb=class e{constructor(e=0,t=0,n=0){this.type=`circle`,this.x=e,this.y=t,this.radius=n}clone(){return new e(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let n=this.radius*this.radius,r=this.x-e,i=this.y-t;return r*=r,i*=i,r+i<=n}strokeContains(e,t,n,r=.5){if(this.radius===0)return!1;let i=this.x-e,a=this.y-t,o=this.radius,s=(1-r)*n,c=Math.sqrt(i*i+a*a);return c<=o+s&&c>o-(n-s)}getBounds(e){return e||=new mh,e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},Kb=class e{constructor(e=0,t=0,n=0,r=0){this.type=`ellipse`,this.x=e,this.y=t,this.halfWidth=n,this.halfHeight=r}clone(){return new e(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,r=(t-this.y)/this.halfHeight;return n*=n,r*=r,n+r<=1}strokeContains(e,t,n,r=.5){let{halfWidth:i,halfHeight:a}=this;if(i<=0||a<=0)return!1;let o=n*(1-r),s=n-o,c=i-s,l=a-s,u=i+o,d=a+o,f=e-this.x,p=t-this.y,m=f*f/(c*c)+p*p/(l*l),h=f*f/(u*u)+p*p/(d*d);return m>1&&h<=1}getBounds(e){return e||=new mh,e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function qb(e,t,n,r,i,a){let o=e-n,s=t-r,c=i-n,l=a-r,u=o*c+s*l,d=c*c+l*l,f=-1;d!==0&&(f=u/d);let p,m;f<0?(p=n,m=r):f>1?(p=i,m=a):(p=n+f*c,m=r+f*l);let h=e-p,g=t-m;return h*h+g*g}var Jb,Yb,Xb=class e{constructor(...e){this.type=`polygon`;let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!=`number`){let e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n].x,t[n].y);t=e}this.points=t,this.closePath=!0}isClockwise(){let e=0,t=this.points,n=t.length;for(let r=0;r<n;r+=2){let i=t[r],a=t[r+1],o=t[(r+2)%n],s=t[(r+3)%n];e+=(o-i)*(s+a)}return e<0}containsPolygon(e){let t=this.getBounds(Jb),n=e.getBounds(Yb);if(!t.containsRect(n))return!1;let r=e.points;for(let e=0;e<r.length;e+=2){let t=r[e],n=r[e+1];if(!this.contains(t,n))return!1}return!0}clone(){let t=new e(this.points.slice());return t.closePath=this.closePath,t}contains(e,t){let n=!1,r=this.points.length/2;for(let i=0,a=r-1;i<r;a=i++){let r=this.points[i*2],o=this.points[i*2+1],s=this.points[a*2],c=this.points[a*2+1];o>t!=c>t&&e<(s-r)*((t-o)/(c-o))+r&&(n=!n)}return n}strokeContains(e,t,n,r=.5){let i=n*n,a=i*(1-r),o=i-a,{points:s}=this,c=s.length-(this.closePath?0:2);for(let n=0;n<c;n+=2){let r=s[n],i=s[n+1],c=s[(n+2)%s.length],l=s[(n+3)%s.length];if(qb(e,t,r,i,c,l)<=(Math.sign((c-r)*(t-i)-(l-i)*(e-r))<0?o:a))return!0}return!1}getBounds(e){e||=new mh;let t=this.points,n=1/0,r=-1/0,i=1/0,a=-1/0;for(let e=0,o=t.length;e<o;e+=2){let o=t[e],s=t[e+1];n=o<n?o:n,r=o>r?o:r,i=s<i?s:i,a=s>a?s:a}return e.x=n,e.width=r-n,e.y=i,e.height=a-i,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,``)}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return xh(`8.11.0`,`Polygon.lastX is deprecated, please use Polygon.lastX instead.`),this.points[this.points.length-2]}get y(){return xh(`8.11.0`,`Polygon.y is deprecated, please use Polygon.lastY instead.`),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}},Zb=(e,t,n,r,i,a,o)=>{let s=e-n,c=t-r,l=Math.sqrt(s*s+c*c);return l>=i-a&&l<=i+o},Qb=class e{constructor(e=0,t=0,n=0,r=0,i=20){this.type=`roundedRectangle`,this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i}getBounds(e){return e||=new mh,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new e(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),i=t-(this.y+n),a=n*n;if(r*r+i*i<=a||(r=e-(this.x+this.width-n),r*r+i*i<=a)||(i=t-(this.y+this.height-n),r*r+i*i<=a)||(r=e-(this.x+n),r*r+i*i<=a))return!0}return!1}strokeContains(e,t,n,r=.5){let{x:i,y:a,width:o,height:s,radius:c}=this,l=n*(1-r),u=n-l,d=i+c,f=a+c,p=o-c*2,m=s-c*2,h=i+o,g=a+s;return(e>=i-l&&e<=i+u||e>=h-u&&e<=h+l)&&t>=f&&t<=f+m||(t>=a-l&&t<=a+u||t>=g-u&&t<=g+l)&&e>=d&&e<=d+p?!0:e<d&&t<f&&Zb(e,t,d,f,c,u,l)||e>h-c&&t<f&&Zb(e,t,h-c,f,c,u,l)||e>h-c&&t>g-c&&Zb(e,t,h-c,g-c,c,u,l)||e<d&&t>g-c&&Zb(e,t,d,g-c,c,u,l)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}},$b={};function ex(e,t,n){let r=2166136261;for(let n=0;n<t;n++)r^=e[n].uid,r=Math.imul(r,16777619),r>>>=0;return $b[r]||tx(e,t,r,n)}function tx(e,t,n,r){let i={},a=0;for(let n=0;n<r;n++){let r=n<t?e[n]:Q.EMPTY.source;i[a++]=r.source,i[a++]=r.style}let o=new dy(i);return $b[n]=o,o}var nx=class{constructor(e){typeof e==`number`?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||=new Int8Array(this.rawBinaryData),this._int8View}get uint8View(){return this._uint8View||=new Uint8Array(this.rawBinaryData),this._uint8View}get int16View(){return this._int16View||=new Int16Array(this.rawBinaryData),this._int16View}get int32View(){return this._int32View||=new Int32Array(this.rawBinaryData),this._int32View}get float64View(){return this._float64Array||=new Float64Array(this.rawBinaryData),this._float64Array}get bigUint64View(){return this._bigUint64Array||=new BigUint64Array(this.rawBinaryData),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case`int8`:case`uint8`:return 1;case`int16`:case`uint16`:return 2;case`int32`:case`uint32`:case`float32`:return 4;default:throw Error(`${e} isn't a valid view type`)}}};function rx(e,t){let n=e.byteLength/8|0,r=new Float64Array(e,0,n);new Float64Array(t,0,n).set(r);let i=e.byteLength-n*8;if(i>0){let r=new Uint8Array(e,n*8,i);new Uint8Array(t,n*8,i).set(r)}}var ix={normal:`normal-npm`,add:`add-npm`,screen:`screen-npm`},ax=(e=>(e[e.DISABLED=0]=`DISABLED`,e[e.RENDERING_MASK_ADD=1]=`RENDERING_MASK_ADD`,e[e.MASK_ACTIVE=2]=`MASK_ACTIVE`,e[e.INVERSE_MASK_ACTIVE=3]=`INVERSE_MASK_ACTIVE`,e[e.RENDERING_MASK_REMOVE=4]=`RENDERING_MASK_REMOVE`,e[e.NONE=5]=`NONE`,e))(ax||{});function ox(e,t){return t.alphaMode===`no-premultiply-alpha`&&ix[e]||e}var sx=[`precision mediump float;`,`void main(void){`,`float test = 0.1;`,`%forloop%`,`gl_FragColor = vec4(0.0);`,`}`].join(`
`);function cx(e){let t=``;for(let n=0;n<e;++n)n>0&&(t+=`
else `),n<e-1&&(t+=`if(test == ${n}.0){}`);return t}function lx(e,t){if(e===0)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){let r=sx.replace(/%forloop%/gi,cx(e));if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))e=e/2|0;else break}}finally{t.deleteShader(n)}return e}var ux=null;function dx(){if(ux)return ux;let e=Fv();return ux=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),ux=lx(ux,e),e.getExtension(`WEBGL_lose_context`)?.loseContext(),ux}var fx=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){let t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}},px=class{constructor(){this.renderPipeId=`batch`,this.action=`startBatch`,this.start=0,this.size=0,this.textures=new fx,this.blendMode=`normal`,this.topology=`triangle-strip`,this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}},mx=[],hx=0;yg.register({clear:()=>{if(mx.length>0)for(let e of mx)e&&e.destroy();mx.length=0,hx=0}});function gx(){return hx>0?mx[--hx]:new px}function _x(e){mx[hx++]=e}var vx=0,yx=class e{constructor(t){this.uid=gh(`batcher`),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t={...e.defaultOptions,...t},t.maxTextures||=(xh(`v8.8.0`,`maxTextures is a required option for Batcher now, please pass it in the options`),dx());let{maxTextures:n,attributesInitialSize:r,indicesInitialSize:i}=t;this.attributeBuffer=new nx(r*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)_x(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){let n=e._batch.textures.ids[t._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=t,!0)}updateElement(e){this.dirty=!0;let t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){let t=this._elements;if(!t[this.elementStart])return;let n=gx(),r=n.textures;r.clear();let i=t[this.elementStart],a=ox(i.blendMode,i.texture._source),o=i.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let s=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,l=this.indexBuffer,u=this._batchIndexSize,d=this._batchIndexStart,f=`startBatch`,p=this.maxTextures;for(let i=this.elementStart;i<this.elementSize;++i){let m=t[i];t[i]=null;let h=m.texture._source,g=ox(m.blendMode,h),_=a!==g||o!==m.topology;if(h._batchTick===vx&&!_){m._textureId=h._textureBindLocation,u+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,s,c,m._attributeStart,m._textureId),this.packQuadIndex(l,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,s,c,m._attributeStart,m._textureId),this.packIndex(m,l,m._indexStart,m._attributeStart/this.vertexSize)),m._batch=n;continue}h._batchTick=vx,(r.count>=p||_)&&(this._finishBatch(n,d,u-d,r,a,o,e,f),f=`renderBatch`,d=u,a=g,o=m.topology,n=gx(),r=n.textures,r.clear(),++vx),m._textureId=h._textureBindLocation=r.count,r.ids[h.uid]=r.count,r.textures[r.count++]=h,m._batch=n,u+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,s,c,m._attributeStart,m._textureId),this.packQuadIndex(l,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,s,c,m._attributeStart,m._textureId),this.packIndex(m,l,m._indexStart,m._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(n,d,u-d,r,a,o,e,f),d=u,++vx),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=u}_finishBatch(e,t,n,r,i,a,o,s){e.gpuBindGroup=null,e.bindGroup=null,e.action=s,e.batcher=this,e.textures=r,e.blendMode=i,e.topology=a,e.start=t,e.size=n,++vx,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){let t=new nx(Math.max(e,this.attributeBuffer.size*2));rx(this.attributeBuffer.rawBinaryData,t.rawBinaryData),this.attributeBuffer=t}_resizeIndexBuffer(e){let t=this.indexBuffer,n=Math.max(e,t.length*1.5);n+=n%2;let r=n>65535?new Uint32Array(n):new Uint16Array(n);if(r.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let e=0;e<t.length;e++)r[e]=t[e];else rx(t.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(e,t,n){e[t]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3}packIndex(e,t,n,r){let i=e.indices,a=e.indexSize,o=e.indexOffset,s=e.attributeOffset;for(let e=0;e<a;e++)t[n++]=r+i[e+o]-s}destroy(e={}){if(this.batches!==null){for(let e=0;e<this.batchIndex;e++)_x(this.batches[e]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let e=0;e<this._elements.length;e++)this._elements[e]&&(this._elements[e]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};yx.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};var bx=yx,xx=(e=>(e[e.MAP_READ=1]=`MAP_READ`,e[e.MAP_WRITE=2]=`MAP_WRITE`,e[e.COPY_SRC=4]=`COPY_SRC`,e[e.COPY_DST=8]=`COPY_DST`,e[e.INDEX=16]=`INDEX`,e[e.VERTEX=32]=`VERTEX`,e[e.UNIFORM=64]=`UNIFORM`,e[e.STORAGE=128]=`STORAGE`,e[e.INDIRECT=256]=`INDIRECT`,e[e.QUERY_RESOLVE=512]=`QUERY_RESOLVE`,e[e.STATIC=1024]=`STATIC`,e))(xx||{}),Sx=class extends Xm{constructor(e){let{data:t,size:n}=e,{usage:r,label:i,shrinkToFit:a}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=gh(`buffer`),this._resourceType=`buffer`,this._resourceId=gh(`resource`),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,n??=t?.byteLength,this.descriptor={size:n,usage:r,mappedAtCreation:!!t,label:i},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||=new Int32Array(this.data.buffer),this._dataInt32}get static(){return!!(this.descriptor.usage&xx.STATIC)}set static(e){e?this.descriptor.usage|=xx.STATIC:this.descriptor.usage&=~xx.STATIC}setDataWithSize(e,t,n){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit(`update`,this);return}let r=this._data;if(this._data=e,this._dataInt32=null,!r||r.length!==e.length){!this.shrinkToFit&&r&&e.byteLength<r.byteLength?n&&this.emit(`update`,this):(this.descriptor.size=e.byteLength,this._resourceId=gh(`resource`),this.emit(`change`,this));return}n&&this.emit(`update`,this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit(`update`,this)}unload(){for(let e in this.emit(`unload`,this),this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit(`destroy`,this),this.emit(`change`,this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function Cx(e,t){if(!(e instanceof Sx)){let n=t?xx.INDEX:xx.VERTEX;e instanceof Array&&(t?(e=new Uint32Array(e),n=xx.INDEX|xx.COPY_DST):(e=new Float32Array(e),n=xx.VERTEX|xx.COPY_DST)),e=new Sx({data:e,label:t?`index-mesh-buffer`:`vertex-mesh-buffer`,usage:n})}return e}function wx(e,t,n){let r=e.getAttribute(t);if(!r)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;let i=r.buffer.data,a=1/0,o=1/0,s=-1/0,c=-1/0,l=i.BYTES_PER_ELEMENT,u=(r.offset||0)/l,d=(r.stride||8)/l;for(let e=u;e<i.length;e+=d){let t=i[e],n=i[e+1];t>s&&(s=t),n>c&&(c=n),t<a&&(a=t),n<o&&(o=n)}return n.minX=a,n.minY=o,n.maxX=s,n.maxY=c,n}function Tx(e){return(e instanceof Sx||Array.isArray(e)||e.BYTES_PER_ELEMENT)&&(e={buffer:e}),e.buffer=Cx(e.buffer,!1),e}var Ex=class extends Xm{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=gh(`geometry`),this._layoutKey=0,this.instanceCount=1,this._bounds=new Lh,this._boundsDirty=!0;let{attributes:t,indexBuffer:n,topology:r}=e;if(this.buffers=[],this.attributes={},t)for(let e in t)this.addAttribute(e,t[e]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=r||`triangle-list`}onBufferUpdate(){this._boundsDirty=!0,this.emit(`update`,this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(let e in this.attributes){let t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){let n=Tx(t);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on(`update`,this.onBufferUpdate,this),n.buffer.on(`change`,this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=Cx(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,wx(this,`aPosition`,this._bounds)):this._bounds}unload(){for(let e in this.emit(`unload`,this),this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){this.emit(`destroy`,this),this.removeAllListeners(),e&&this.buffers.forEach(e=>e.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}},Dx=new Float32Array(1),Ox=new Uint32Array(1),kx=class extends Ex{constructor(){let e=new Sx({data:Dx,label:`attribute-batch-buffer`,usage:xx.VERTEX|xx.COPY_DST,shrinkToFit:!1}),t=new Sx({data:Ox,label:`index-batch-buffer`,usage:xx.INDEX|xx.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:e,format:`float32x2`,stride:24,offset:0},aUV:{buffer:e,format:`float32x2`,stride:24,offset:8},aColor:{buffer:e,format:`unorm8x4`,stride:24,offset:16},aTextureIdAndRound:{buffer:e,format:`uint16x2`,stride:24,offset:20}},indexBuffer:t})}};function Ax(e,t,n){if(e)for(let r in e){let i=t[r.toLocaleLowerCase()];if(i){let t=e[r];r===`header`&&(t=t.replace(/@in\s+[^;]+;\s*/g,``).replace(/@out\s+[^;]+;\s*/g,``)),n&&i.push(`//----${n}----//`),i.push(t)}else $(`${r} placement hook does not exist in shader`)}}var jx=/\{\{(.*?)\}\}/g;function Mx(e){let t={};return(e.match(jx)?.map(e=>e.replace(/[{()}]/g,``))??[]).forEach(e=>{t[e]=[]}),t}function Nx(e,t){let n,r=/@in\s+([^;]+);/g;for(;(n=r.exec(e))!==null;)t.push(n[1])}function Px(e,t,n=!1){let r=[];Nx(t,r),e.forEach(e=>{e.header&&Nx(e.header,r)});let i=r;n&&i.sort();let a=i.map((e,t)=>`       @location(${t}) ${e},`).join(`
`),o=t.replace(/@in\s+[^;]+;\s*/g,``);return o=o.replace(`{{in}}`,`
${a}
`),o}function Fx(e,t){let n,r=/@out\s+([^;]+);/g;for(;(n=r.exec(e))!==null;)t.push(n[1])}function Ix(e){let t=/\b(\w+)\s*:/g.exec(e);return t?t[1]:``}function Lx(e){return e.replace(/@.*?\s+/g,``)}function Rx(e,t){let n=[];Fx(t,n),e.forEach(e=>{e.header&&Fx(e.header,n)});let r=0,i=n.sort().map(e=>e.indexOf(`builtin`)>-1?e:`@location(${r++}) ${e}`).join(`,
`),a=n.sort().map(e=>`       var ${Lx(e)};`).join(`
`),o=`return VSOutput(
            ${n.sort().map(e=>` ${Ix(e)}`).join(`,
`)});`,s=t.replace(/@out\s+[^;]+;\s*/g,``);return s=s.replace(`{{struct}}`,`
${i}
`),s=s.replace(`{{start}}`,`
${a}
`),s=s.replace(`{{return}}`,`
${o}
`),s}function zx(e,t){let n=e;for(let e in t){let r=t[e];n=r.join(`
`).length?n.replace(`{{${e}}}`,`//-----${e} START-----//
${r.join(`
`)}
//----${e} FINISH----//`):n.replace(`{{${e}}}`,``)}return n}var Bx=Object.create(null),Vx=new Map,Hx=0;function Ux({template:e,bits:t}){let n=Kx(e,t);if(Bx[n])return Bx[n];let{vertex:r,fragment:i}=Gx(e,t);return Bx[n]=qx(r,i,t),Bx[n]}function Wx({template:e,bits:t}){let n=Kx(e,t);return Bx[n]||(Bx[n]=qx(e.vertex,e.fragment,t)),Bx[n]}function Gx(e,t){let n=t.map(e=>e.vertex).filter(e=>!!e),r=t.map(e=>e.fragment).filter(e=>!!e),i=Px(n,e.vertex,!0);i=Rx(n,i);let a=Px(r,e.fragment,!0);return{vertex:i,fragment:a}}function Kx(e,t){return t.map(e=>(Vx.has(e)||Vx.set(e,Hx++),Vx.get(e))).sort((e,t)=>e-t).join(`-`)+e.vertex+e.fragment}function qx(e,t,n){let r=Mx(e),i=Mx(t);return n.forEach(e=>{Ax(e.vertex,r,e.name),Ax(e.fragment,i,e.name)}),{vertex:zx(e,r),fragment:zx(t,i)}}var Jx=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,Yx=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,Xx=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,Zx=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,Qx={name:`global-uniforms-bit`,vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},$x={name:`global-uniforms-bit`,vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function eS({bits:e,name:t}){let n=Ux({template:{fragment:Yx,vertex:Jx},bits:[Qx,...e]});return ay.from({name:t,vertex:{source:n.vertex,entryPoint:`main`},fragment:{source:n.fragment,entryPoint:`main`}})}function tS({bits:e,name:t}){return new Jv({name:t,...Wx({template:{vertex:Xx,fragment:Zx},bits:[$x,...e]})})}var nS={name:`color-bit`,vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},rS={name:`color-bit`,vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},iS={};function aS(e){let t=[];if(e===1)t.push(`@group(1) @binding(0) var textureSource1: texture_2d<f32>;`),t.push(`@group(1) @binding(1) var textureSampler1: sampler;`);else{let n=0;for(let r=0;r<e;r++)t.push(`@group(1) @binding(${n++}) var textureSource${r+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${r+1}: sampler;`)}return t.join(`
`)}function oS(e){let t=[];if(e===1)t.push(`outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);`);else{t.push(`switch vTextureId {`);for(let n=0;n<e;n++)n===e-1?t.push(`  default:{`):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push(`      break;}`);t.push(`}`)}return t.join(`
`)}function sS(e){return iS[e]||(iS[e]={name:`texture-batch-bit`,vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${aS(e)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${oS(e)}
            `}}),iS[e]}var cS={};function lS(e){let t=[];for(let n=0;n<e;n++)n>0&&t.push(`else`),n<e-1&&t.push(`if(vTextureId < ${n}.5)`),t.push(`{`),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push(`}`);return t.join(`
`)}function uS(e){return cS[e]||(cS[e]={name:`texture-batch-bit`,vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${e}];

            `,main:`

                ${lS(e)}
            `}}),cS[e]}var dS={name:`round-pixels-bit`,vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},fS={name:`round-pixels-bit`,vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},pS={};function mS(e){let t=pS[e];if(t)return t;let n=new Int32Array(e);for(let t=0;t<e;t++)n[t]=t;return t=pS[e]=new uy({uTextures:{value:n,type:`i32`,size:e}},{isStatic:!0}),t}var hS=class extends py{constructor(e){let t=tS({name:`batch`,bits:[rS,uS(e),fS]}),n=eS({name:`batch`,bits:[nS,sS(e),dS]});super({glProgram:t,gpuProgram:n,resources:{batchSamplers:mS(e)}}),this.maxTextures=e}},gS=null,_S=class e extends bx{constructor(t){super(t),this.geometry=new kx,this.name=e.extension.name,this.vertexSize=6,gS??=new hS(t.maxTextures),this.shader=gS}packAttributes(e,t,n,r,i){let a=i<<16|e.roundPixels&65535,o=e.transform,s=o.a,c=o.b,l=o.c,u=o.d,d=o.tx,f=o.ty,{positions:p,uvs:m}=e,h=e.color,g=e.attributeOffset,_=g+e.attributeSize;for(let e=g;e<_;e++){let i=e*2,o=p[i],g=p[i+1];t[r++]=s*o+l*g+d,t[r++]=u*g+c*o+f,t[r++]=m[i],t[r++]=m[i+1],n[r++]=h,n[r++]=a}}packQuadAttributes(e,t,n,r,i){let a=e.texture,o=e.transform,s=o.a,c=o.b,l=o.c,u=o.d,d=o.tx,f=o.ty,p=e.bounds,m=p.maxX,h=p.minX,g=p.maxY,_=p.minY,v=a.uvs,y=e.color,b=i<<16|e.roundPixels&65535;t[r+0]=s*h+l*_+d,t[r+1]=u*_+c*h+f,t[r+2]=v.x0,t[r+3]=v.y0,n[r+4]=y,n[r+5]=b,t[r+6]=s*m+l*_+d,t[r+7]=u*_+c*m+f,t[r+8]=v.x1,t[r+9]=v.y1,n[r+10]=y,n[r+11]=b,t[r+12]=s*m+l*g+d,t[r+13]=u*g+c*m+f,t[r+14]=v.x2,t[r+15]=v.y2,n[r+16]=y,n[r+17]=b,t[r+18]=s*h+l*g+d,t[r+19]=u*g+c*h+f,t[r+20]=v.x3,t[r+21]=v.y3,n[r+22]=y,n[r+23]=b}_updateMaxTextures(e){this.shader.maxTextures!==e&&(gS=new hS(e),this.shader=gS)}destroy(){this.shader=null,super.destroy()}};_S.extension={type:[X.Batcher],name:`default`};var vS=_S,yS=class{constructor(e){this.items=Object.create(null);let{renderer:t,type:n,onUnload:r,priority:i,name:a}=e;this._renderer=t,t.gc.addResourceHash(this,`items`,n,i??0),this._onUnload=r,this.name=a}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once(`unload`,this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...t){if(!this.items[e.uid])return;let n=e._gpuData[this._renderer.uid];n&&(this._onUnload?.(e,...t),n.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(t=>t&&this.remove(t,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}};function bS(e,t,n,r,i,a,o,s=null){let c=0;n*=t,i*=a;let l=s.a,u=s.b,d=s.c,f=s.d,p=s.tx,m=s.ty;for(;c<o;){let o=e[n],s=e[n+1];r[i]=l*o+d*s+p,r[i+1]=u*o+f*s+m,i+=a,n+=t,c++}}function xS(e,t,n,r){let i=0;for(t*=n;i<r;)e[t]=0,e[t+1]=0,t+=n,i++}function SS(e,t,n,r,i){let a=t.a,o=t.b,s=t.c,c=t.d,l=t.tx,u=t.ty;n||=0,r||=2,i||=e.length/r-n;let d=n*r;for(let t=0;t<i;t++){let t=e[d],n=e[d+1];e[d]=a*t+s*n+l,e[d+1]=o*t+c*n+u,d+=r}}var CS=new Z,wS=class{constructor(){this.packAsQuad=!1,this.batcherName=`default`,this.topology=`triangle-list`,this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:`normal`}get color(){let e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?Lg(t,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||CS}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology=`triangle-list`}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}},TS={extension:{type:X.ShapeBuilder,name:`circle`},build(e,t){let n,r,i,a,o,s;if(e.type===`circle`){let t=e;if(o=s=t.radius,o<=0)return!1;n=t.x,r=t.y,i=a=0}else if(e.type===`ellipse`){let t=e;if(o=t.halfWidth,s=t.halfHeight,o<=0||s<=0)return!1;n=t.x,r=t.y,i=a=0}else{let t=e,c=t.width/2,l=t.height/2;n=t.x+c,r=t.y+l,o=s=Math.max(0,Math.min(t.radius,Math.min(c,l))),i=c-o,a=l-s}if(i<0||a<0)return!1;let c=Math.ceil(2.3*Math.sqrt(o+s)),l=c*8+(i?4:0)+(a?4:0);if(l===0)return!1;if(c===0)return t[0]=t[6]=n+i,t[1]=t[3]=r+a,t[2]=t[4]=n-i,t[5]=t[7]=r-a,!0;let u=0,d=c*4+(i?2:0)+2,f=d,p=l,m=i+o,h=a,g=n+m,_=n-m,v=r+h;if(t[u++]=g,t[u++]=v,t[--d]=v,t[--d]=_,a){let e=r-h;t[f++]=_,t[f++]=e,t[--p]=e,t[--p]=g}for(let e=1;e<c;e++){let l=Math.PI/2*(e/c),m=i+Math.cos(l)*o,h=a+Math.sin(l)*s,g=n+m,_=n-m,v=r+h,y=r-h;t[u++]=g,t[u++]=v,t[--d]=v,t[--d]=_,t[f++]=_,t[f++]=y,t[--p]=y,t[--p]=g}m=i,h=a+s,g=n+m,_=n-m,v=r+h;let y=r-h;return t[u++]=g,t[u++]=v,t[--p]=y,t[--p]=g,i&&(t[u++]=_,t[u++]=v,t[--p]=y,t[--p]=_),!0},triangulate(e,t,n,r,i,a){if(e.length===0)return;let o=0,s=0;for(let t=0;t<e.length;t+=2)o+=e[t],s+=e[t+1];o/=e.length/2,s/=e.length/2;let c=r;t[c*n]=o,t[c*n+1]=s;let l=c++;for(let r=0;r<e.length;r+=2)t[c*n]=e[r],t[c*n+1]=e[r+1],r>0&&(i[a++]=c,i[a++]=l,i[a++]=c-1),c++;i[a++]=l+1,i[a++]=l,i[a++]=c-1}},ES={...TS,extension:{...TS.extension,name:`ellipse`}},DS={...TS,extension:{...TS.extension,name:`roundedRectangle`}},OS=1e-4,kS=1e-4;function AS(e){let t=e.length;if(t<6)return 1;let n=0;for(let r=0,i=e[t-2],a=e[t-1];r<t;r+=2){let t=e[r],o=e[r+1];n+=(t-i)*(o+a),i=t,a=o}return n<0?-1:1}function jS(e,t,n,r,i,a,o,s){let c=e-n*i,l=t-r*i,u=e+n*a,d=t+r*a,f,p;o?(f=r,p=-n):(f=-r,p=n);let m=c+f,h=l+p,g=u+f,_=d+p;return s.push(m,h),s.push(g,_),2}function MS(e,t,n,r,i,a,o,s){let c=n-e,l=r-t,u=Math.atan2(c,l),d=Math.atan2(i-e,a-t);s&&u<d?u+=Math.PI*2:!s&&u>d&&(d+=Math.PI*2);let f=u,p=d-u,m=Math.abs(p),h=Math.sqrt(c*c+l*l),g=(15*m*Math.sqrt(h)/Math.PI>>0)+1,_=p/g;if(f+=_,s){o.push(e,t),o.push(n,r);for(let n=1,r=f;n<g;n++,r+=_)o.push(e,t),o.push(e+Math.sin(r)*h,t+Math.cos(r)*h);o.push(e,t),o.push(i,a)}else{o.push(n,r),o.push(e,t);for(let n=1,r=f;n<g;n++,r+=_)o.push(e+Math.sin(r)*h,t+Math.cos(r)*h),o.push(e,t);o.push(i,a),o.push(e,t)}return g*2}function NS(e,t,n,r,i,a){let o=OS;if(e.length===0)return;let s=t,c=s.alignment;if(t.alignment!==.5){let t=AS(e);n&&(t*=-1),c=(c-.5)*t+.5}let l=new eh(e[0],e[1]),u=new eh(e[e.length-2],e[e.length-1]),d=r,f=Math.abs(l.x-u.x)<o&&Math.abs(l.y-u.y)<o;if(d){e=e.slice(),f&&(e.pop(),e.pop(),u.set(e[e.length-2],e[e.length-1]));let t=(l.x+u.x)*.5,n=(u.y+l.y)*.5;e.unshift(t,n),e.push(t,n)}let p=i,m=e.length/2,h=e.length,g=p.length/2,_=s.width/2,v=_*_,y=s.miterLimit*s.miterLimit,b=e[0],x=e[1],S=e[2],C=e[3],w=0,T=0,E=-(x-C),D=b-S,O=0,k=0,A=Math.sqrt(E*E+D*D);E/=A,D/=A,E*=_,D*=_;let j=c,M=(1-j)*2,N=j*2;d||(s.cap===`round`?h+=MS(b-E*(M-N)*.5,x-D*(M-N)*.5,b-E*M,x-D*M,b+E*N,x+D*N,p,!0)+2:s.cap===`square`&&(h+=jS(b,x,E,D,M,N,!0,p))),p.push(b-E*M,x-D*M),p.push(b+E*N,x+D*N);for(let t=1;t<m-1;++t){b=e[(t-1)*2],x=e[(t-1)*2+1],S=e[t*2],C=e[t*2+1],w=e[(t+1)*2],T=e[(t+1)*2+1],E=-(x-C),D=b-S,A=Math.sqrt(E*E+D*D),E/=A,D/=A,E*=_,D*=_,O=-(C-T),k=S-w,A=Math.sqrt(O*O+k*k),O/=A,k/=A,O*=_,k*=_;let n=S-b,r=x-C,i=S-w,a=T-C,o=n*i+r*a,c=r*i-a*n,l=c<0;if(Math.abs(c)<.001*Math.abs(o)){p.push(S-E*M,C-D*M),p.push(S+E*N,C+D*N),o>=0&&(s.join===`round`?h+=MS(S,C,S-E*M,C-D*M,S-O*M,C-k*M,p,!1)+4:h+=2,p.push(S-O*N,C-k*N),p.push(S+O*M,C+k*M));continue}let u=(-E+b)*(-D+C)-(-E+S)*(-D+x),d=(-O+w)*(-k+C)-(-O+S)*(-k+T),f=(n*d-i*u)/c,m=(a*u-r*d)/c,g=(f-S)*(f-S)+(m-C)*(m-C),j=S+(f-S)*M,P=C+(m-C)*M,F=S-(f-S)*N,I=C-(m-C)*N,L=Math.min(n*n+r*r,i*i+a*a),R=l?M:N;g<=L+R*R*v?s.join===`bevel`||g/v>y?(l?(p.push(j,P),p.push(S+E*N,C+D*N),p.push(j,P),p.push(S+O*N,C+k*N)):(p.push(S-E*M,C-D*M),p.push(F,I),p.push(S-O*M,C-k*M),p.push(F,I)),h+=2):s.join===`round`?l?(p.push(j,P),p.push(S+E*N,C+D*N),h+=MS(S,C,S+E*N,C+D*N,S+O*N,C+k*N,p,!0)+4,p.push(j,P),p.push(S+O*N,C+k*N)):(p.push(S-E*M,C-D*M),p.push(F,I),h+=MS(S,C,S-E*M,C-D*M,S-O*M,C-k*M,p,!1)+4,p.push(S-O*M,C-k*M),p.push(F,I)):(p.push(j,P),p.push(F,I)):(p.push(S-E*M,C-D*M),p.push(S+E*N,C+D*N),s.join===`round`?l?h+=MS(S,C,S+E*N,C+D*N,S+O*N,C+k*N,p,!0)+2:h+=MS(S,C,S-E*M,C-D*M,S-O*M,C-k*M,p,!1)+2:s.join===`miter`&&g/v<=y&&(l?(p.push(F,I),p.push(F,I)):(p.push(j,P),p.push(j,P)),h+=2),p.push(S-O*M,C-k*M),p.push(S+O*N,C+k*N),h+=2)}b=e[(m-2)*2],x=e[(m-2)*2+1],S=e[(m-1)*2],C=e[(m-1)*2+1],E=-(x-C),D=b-S,A=Math.sqrt(E*E+D*D),E/=A,D/=A,E*=_,D*=_,p.push(S-E*M,C-D*M),p.push(S+E*N,C+D*N),d||(s.cap===`round`?h+=MS(S-E*(M-N)*.5,C-D*(M-N)*.5,S-E*M,C-D*M,S+E*N,C+D*N,p,!1)+2:s.cap===`square`&&(h+=jS(S,C,E,D,M,N,!1,p)));let P=kS*kS;for(let e=g;e<h+g-2;++e)b=p[e*2],x=p[e*2+1],S=p[(e+1)*2],C=p[(e+1)*2+1],w=p[(e+2)*2],T=p[(e+2)*2+1],!(Math.abs(b*(C-T)+S*(T-x)+w*(x-C))<P)&&a.push(e,e+1,e+2)}function PS(e,t,n,r){let i=OS;if(e.length===0)return;let a=e[0],o=e[1],s=e[e.length-2],c=e[e.length-1],l=t||Math.abs(a-s)<i&&Math.abs(o-c)<i,u=n,d=e.length/2,f=u.length/2;for(let t=0;t<d;t++)u.push(e[t*2]),u.push(e[t*2+1]);for(let e=0;e<d-1;e++)r.push(f+e,f+e+1);l&&r.push(f+d-1,f)}function FS(e,t,n,r,i,a,o){let s=cb(e,t,2);if(!s)return;for(let e=0;e<s.length;e+=3)a[o++]=s[e]+i,a[o++]=s[e+1]+i,a[o++]=s[e+2]+i;let c=i*r;for(let t=0;t<e.length;t+=2)n[c]=e[t],n[c+1]=e[t+1],c+=r}var IS=[],LS={extension:{type:X.ShapeBuilder,name:`polygon`},build(e,t){for(let n=0;n<e.points.length;n++)t[n]=e.points[n];return!0},triangulate(e,t,n,r,i,a){FS(e,IS,t,n,r,i,a)}},RS={extension:{type:X.ShapeBuilder,name:`rectangle`},build(e,t){let n=e,r=n.x,i=n.y,a=n.width,o=n.height;return a>0&&o>0?(t[0]=r,t[1]=i,t[2]=r+a,t[3]=i,t[4]=r+a,t[5]=i+o,t[6]=r,t[7]=i+o,!0):!1},triangulate(e,t,n,r,i,a){let o=0;r*=n,t[r+o]=e[0],t[r+o+1]=e[1],o+=n,t[r+o]=e[2],t[r+o+1]=e[3],o+=n,t[r+o]=e[6],t[r+o+1]=e[7],o+=n,t[r+o]=e[4],t[r+o+1]=e[5],o+=n;let s=r/n;i[a++]=s,i[a++]=s+1,i[a++]=s+2,i[a++]=s+1,i[a++]=s+3,i[a++]=s+2}},zS={extension:{type:X.ShapeBuilder,name:`triangle`},build(e,t){return t[0]=e.x,t[1]=e.y,t[2]=e.x2,t[3]=e.y2,t[4]=e.x3,t[5]=e.y3,!0},triangulate(e,t,n,r,i,a){let o=0;r*=n,t[r+o]=e[0],t[r+o+1]=e[1],o+=n,t[r+o]=e[2],t[r+o+1]=e[3],o+=n,t[r+o]=e[4],t[r+o+1]=e[5];let s=r/n;i[a++]=s,i[a++]=s+1,i[a++]=s+2}},BS=new Z,VS=new mh;function HS(e,t,n,r){let i=t.matrix?e.copyFrom(t.matrix).invert():e.identity();if(t.textureSpace===`local`){let e=n.getBounds(VS);t.width&&e.pad(t.width);let{x:r,y:a}=e,o=1/e.width,s=1/e.height,c=-r*o,l=-a*s,u=i.a,d=i.b,f=i.c,p=i.d;i.a*=o,i.b*=o,i.c*=s,i.d*=s,i.tx=c*u+l*f+i.tx,i.ty=c*d+l*p+i.ty}else i.translate(t.texture.frame.x,t.texture.frame.y),i.scale(1/t.texture.source.width,1/t.texture.source.height);let a=t.texture.source.style;return!(t.fill instanceof Lb)&&a.addressMode===`clamp-to-edge`&&(a.addressMode=`repeat`,a.update()),r&&i.append(BS.copyFrom(r).invert()),i}var US={};Km.handleByMap(X.ShapeBuilder,US),Km.add(RS,LS,zS,TS,ES,DS);var WS=new mh,GS=new Z;function KS(e,t){let{geometryData:n,batches:r}=t;r.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let t=0;t<e.instructions.length;t++){let i=e.instructions[t];if(i.action===`texture`)qS(i.data,r,n);else if(i.action===`fill`||i.action===`stroke`){let e=i.action===`stroke`,t=i.data.path.shapePath,a=i.data.style,o=i.data.hole;e&&o&&JS(o.shapePath,a,!0,r,n),o&&(t.shapePrimitives[t.shapePrimitives.length-1].holes=o.shapePath.shapePrimitives),JS(t,a,e,r,n)}}}function qS(e,t,n){let r=[],i=US.rectangle,a=WS;a.x=e.dx,a.y=e.dy,a.width=e.dw,a.height=e.dh;let o=e.transform;if(!i.build(a,r))return;let{vertices:s,uvs:c,indices:l}=n,u=l.length,d=s.length/2;o&&SS(r,o),i.triangulate(r,s,2,d,l,u);let f=e.image,p=f.uvs;c.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);let m=xg.get(wS);m.indexOffset=u,m.indexSize=l.length-u,m.attributeOffset=d,m.attributeSize=s.length/2-d,m.baseColor=e.style,m.alpha=e.alpha,m.texture=f,m.geometryData=n,t.push(m)}function JS(e,t,n,r,i){let{vertices:a,uvs:o,indices:s}=i;e.shapePrimitives.forEach(({shape:e,transform:c,holes:l})=>{let u=[],d=US[e.type];if(!d.build(e,u))return;let f=s.length,p=a.length/2,m=`triangle-list`;if(c&&SS(u,c),n){let n=e.closePath??!0,r=t;r.pixelLine?(PS(u,n,a,s),m=`line-list`):NS(u,r,!1,n,a,s)}else if(l){let e=[],t=u.slice();YS(l).forEach(n=>{e.push(t.length/2),t.push(...n)}),FS(t,e,a,2,p,s,f)}else d.triangulate(u,a,2,p,s,f);let h=o.length/2,g=t.texture;if(g!==Q.WHITE){let n=HS(GS,t,e,c);bS(a,2,p,o,h,2,a.length/2-p,n)}else xS(o,h,2,a.length/2-p);let _=xg.get(wS);_.indexOffset=f,_.indexSize=s.length-f,_.attributeOffset=p,_.attributeSize=a.length/2-p,_.baseColor=t.color,_.alpha=t.alpha,_.texture=g,_.geometryData=i,_.topology=m,r.push(_)})}function YS(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n].shape,i=[];US[r.type].build(r,i)&&t.push(i)}return t}var XS=class{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{xg.return(e)}),this.graphicsData&&xg.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}},ZS=class{constructor(){this.instructions=new Zg}init(e){let t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new vS({maxTextures:t}),this.instructions.reset()}get geometry(){return xh(yh,`GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead.`),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}},QS=class e{constructor(e){this._renderer=e,this._managedContexts=new yS({renderer:e,type:`resource`,name:`graphicsContext`})}init(t){e.defaultOptions.bezierSmoothness=t?.bezierSmoothness??e.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){let t=!!e._gpuData[this._renderer.uid],n=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!t){t&&n.reset(),KS(e,n);let r=e.batchMode;e.customShader||r===`no-batch`?n.isBatchable=!1:r===`auto`?n.isBatchable=n.geometryData.vertices.length<400:n.isBatchable=!0,e.dirty=!1}return n}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){let t=xg.get(ZS,{maxTextures:this._renderer.limits.maxBatchableTextures}),n=e._gpuData[this._renderer.uid],{batches:r,geometryData:i}=n;n.graphicsData=t;let a=i.vertices.length,o=i.indices.length;for(let e=0;e<r.length;e++)r[e].applyTransform=!1;let s=t.batcher;s.ensureAttributeBuffer(a),s.ensureIndexBuffer(o),s.begin();for(let e=0;e<r.length;e++){let t=r[e];s.add(t)}s.finish(t.instructions);let c=s.geometry;c.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),c.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!0);let l=s.batches;for(let e=0;e<l.length;e++){let t=l[e];t.bindGroup=ex(t.textures.textures,t.textures.count,this._renderer.limits.maxBatchableTextures)}return t}_initContext(e){let t=new XS;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};QS.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`graphicsContext`},QS.defaultOptions={bezierSmoothness:.5};var $S=QS,eC=8,tC=1.1920929e-7,nC=1,rC=.01,iC=0,aC=0;function oC(e,t,n,r,i,a,o,s,c,l){let u=(nC-Math.min(.99,Math.max(0,l??$S.defaultOptions.bezierSmoothness)))/1;return u*=u,sC(t,n,r,i,a,o,s,c,e,u),e}function sC(e,t,n,r,i,a,o,s,c,l){cC(e,t,n,r,i,a,o,s,c,l,0),c.push(o,s)}function cC(e,t,n,r,i,a,o,s,c,l,u){if(u>eC)return;let d=Math.PI,f=(e+n)/2,p=(t+r)/2,m=(n+i)/2,h=(r+a)/2,g=(i+o)/2,_=(a+s)/2,v=(f+m)/2,y=(p+h)/2,b=(m+g)/2,x=(h+_)/2,S=(v+b)/2,C=(y+x)/2;if(u>0){let u=o-e,f=s-t,p=Math.abs((n-o)*f-(r-s)*u),m=Math.abs((i-o)*f-(a-s)*u),h,g;if(p>tC&&m>tC){if((p+m)*(p+m)<=l*(u*u+f*f)){if(iC<rC){c.push(S,C);return}let l=Math.atan2(a-r,i-n);if(h=Math.abs(l-Math.atan2(r-t,n-e)),g=Math.abs(Math.atan2(s-a,o-i)-l),h>=d&&(h=2*d-h),g>=d&&(g=2*d-g),h+g<iC){c.push(S,C);return}if(aC!==0){if(h>aC){c.push(n,r);return}if(g>aC){c.push(i,a);return}}}}else if(p>tC){if(p*p<=l*(u*u+f*f)){if(iC<rC){c.push(S,C);return}if(h=Math.abs(Math.atan2(a-r,i-n)-Math.atan2(r-t,n-e)),h>=d&&(h=2*d-h),h<iC){c.push(n,r),c.push(i,a);return}if(aC!==0&&h>aC){c.push(n,r);return}}}else if(m>tC){if(m*m<=l*(u*u+f*f)){if(iC<rC){c.push(S,C);return}if(h=Math.abs(Math.atan2(s-a,o-i)-Math.atan2(a-r,i-n)),h>=d&&(h=2*d-h),h<iC){c.push(n,r),c.push(i,a);return}if(aC!==0&&h>aC){c.push(i,a);return}}}else if(u=S-(e+o)/2,f=C-(t+s)/2,u*u+f*f<=l){c.push(S,C);return}}cC(e,t,f,p,v,y,S,C,c,l,u+1),cC(S,C,b,x,g,_,o,s,c,l,u+1)}var lC=8,uC=1.1920929e-7,dC=1,fC=.01,pC=0;function mC(e,t,n,r,i,a,o,s){let c=(dC-Math.min(.99,Math.max(0,s??$S.defaultOptions.bezierSmoothness)))/1;return c*=c,hC(t,n,r,i,a,o,e,c),e}function hC(e,t,n,r,i,a,o,s){gC(o,e,t,n,r,i,a,s,0),o.push(i,a)}function gC(e,t,n,r,i,a,o,s,c){if(c>lC)return;let l=Math.PI,u=(t+r)/2,d=(n+i)/2,f=(r+a)/2,p=(i+o)/2,m=(u+f)/2,h=(d+p)/2,g=a-t,_=o-n,v=Math.abs((r-a)*_-(i-o)*g);if(v>uC){if(v*v<=s*(g*g+_*_)){if(pC<fC){e.push(m,h);return}let s=Math.abs(Math.atan2(o-i,a-r)-Math.atan2(i-n,r-t));if(s>=l&&(s=2*l-s),s<pC){e.push(m,h);return}}}else if(g=m-(t+a)/2,_=h-(n+o)/2,g*g+_*_<=s){e.push(m,h);return}gC(e,t,n,u,d,m,h,s,c+1),gC(e,m,h,f,p,a,o,s,c+1)}function _C(e,t,n,r,i,a,o,s){let c=Math.abs(i-a);(!o&&i>a||o&&a>i)&&(c=2*Math.PI-c),s||=Math.max(6,Math.floor(6*r**(1/3)*(c/Math.PI))),s=Math.max(s,3);let l=c/s,u=i;l*=o?-1:1;for(let i=0;i<s+1;i++){let i=Math.cos(u),a=Math.sin(u),o=t+i*r,s=n+a*r;e.push(o,s),u+=l}}function vC(e,t,n,r,i,a){let o=e[e.length-2],s=e[e.length-1]-n,c=o-t,l=i-n,u=r-t,d=Math.abs(s*u-c*l);if(d<1e-8||a===0){(e[e.length-2]!==t||e[e.length-1]!==n)&&e.push(t,n);return}let f=s*s+c*c,p=l*l+u*u,m=s*l+c*u,h=a*Math.sqrt(f)/d,g=a*Math.sqrt(p)/d,_=h*m/f,v=g*m/p,y=h*u+g*c,b=h*l+g*s,x=c*(g+_),S=s*(g+_),C=u*(h+v),w=l*(h+v),T=Math.atan2(S-b,x-y),E=Math.atan2(w-b,C-y);_C(e,y+t,b+n,a,T,E,c*l>u*s)}var yC=Math.PI*2,bC={centerX:0,centerY:0,ang1:0,ang2:0},xC=({x:e,y:t},n,r,i,a,o,s,c)=>{e*=n,t*=r;let l=i*e-a*t,u=a*e+i*t;return c.x=l+o,c.y=u+s,c};function SC(e,t){let n=t===-1.5707963267948966?-.551915024494:4/3*Math.tan(t/4),r=t===1.5707963267948966?.551915024494:n,i=Math.cos(e),a=Math.sin(e),o=Math.cos(e+t),s=Math.sin(e+t);return[{x:i-a*r,y:a+i*r},{x:o+s*r,y:s-o*r},{x:o,y:s}]}var CC=(e,t,n,r)=>{let i=e*r-t*n<0?-1:1,a=e*n+t*r;return a>1&&(a=1),a<-1&&(a=-1),i*Math.acos(a)},wC=(e,t,n,r,i,a,o,s,c,l,u,d,f)=>{let p=i**2,m=a**2,h=u**2,g=d**2,_=p*m-p*g-m*h;_<0&&(_=0),_/=p*g+m*h,_=Math.sqrt(_)*(o===s?-1:1);let v=_*i/a*d,y=_*-a/i*u,b=l*v-c*y+(e+n)/2,x=c*v+l*y+(t+r)/2,S=(u-v)/i,C=(d-y)/a,w=(-u-v)/i,T=(-d-y)/a,E=CC(1,0,S,C),D=CC(S,C,w,T);s===0&&D>0&&(D-=yC),s===1&&D<0&&(D+=yC),f.centerX=b,f.centerY=x,f.ang1=E,f.ang2=D};function TC(e,t,n,r,i,a,o,s=0,c=0,l=0){if(a===0||o===0)return;let u=Math.sin(s*yC/360),d=Math.cos(s*yC/360),f=d*(t-r)/2+u*(n-i)/2,p=-u*(t-r)/2+d*(n-i)/2;if(f===0&&p===0)return;a=Math.abs(a),o=Math.abs(o);let m=f**2/a**2+p**2/o**2;m>1&&(a*=Math.sqrt(m),o*=Math.sqrt(m)),wC(t,n,r,i,a,o,c,l,u,d,f,p,bC);let{ang1:h,ang2:g}=bC,{centerX:_,centerY:v}=bC,y=Math.abs(g)/(yC/4);Math.abs(1-y)<1e-7&&(y=1);let b=Math.max(Math.ceil(y),1);g/=b;let x=e[e.length-2],S=e[e.length-1],C={x:0,y:0};for(let t=0;t<b;t++){let t=SC(h,g),{x:n,y:r}=xC(t[0],a,o,d,u,_,v,C),{x:i,y:s}=xC(t[1],a,o,d,u,_,v,C),{x:c,y:l}=xC(t[2],a,o,d,u,_,v,C);oC(e,x,S,n,r,i,s,c,l),x=c,S=l,h+=g}}function EC(e,t,n){let r=(e,t)=>{let n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return{len:i,nx:n/i,ny:r/i}},i=(t,n)=>{t===0?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y)},a=t[t.length-1];for(let o=0;o<t.length;o++){let s=t[o%t.length],c=s.radius??n;if(c<=0){i(o,s),a=s;continue}let l=t[(o+1)%t.length],u=r(s,a),d=r(s,l);if(u.len<1e-4||d.len<1e-4){i(o,s),a=s;continue}let f=Math.asin(u.nx*d.ny-u.ny*d.nx),p=1,m=!1;u.nx*d.nx-u.ny*-d.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,p=-1,m=!0):f>0&&(p=-1,m=!0);let h=f/2,g,_=Math.abs(Math.cos(h)*c/Math.sin(h));_>Math.min(u.len/2,d.len/2)?(_=Math.min(u.len/2,d.len/2),g=Math.abs(_*Math.sin(h)/Math.cos(h))):g=c;let v=s.x+d.nx*_+-d.ny*g*p,y=s.y+d.ny*_+d.nx*g*p,b=Math.atan2(u.ny,u.nx)+Math.PI/2*p,x=Math.atan2(d.ny,d.nx)-Math.PI/2*p;o===0&&e.moveTo(v+Math.cos(b)*g,y+Math.sin(b)*g),e.arc(v,y,g,b,x,m),a=s}}function DC(e,t,n,r){let i=(e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),a=(e,t,n)=>({x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}),o=t.length;for(let s=0;s<o;s++){let c=t[(s+1)%o],l=c.radius??n;if(l<=0){s===0?e.moveTo(c.x,c.y):e.lineTo(c.x,c.y);continue}let u=t[s],d=t[(s+2)%o],f=i(u,c),p;p=f<1e-4?c:a(c,u,Math.min(f/2,l)/f);let m=i(d,c),h;h=m<1e-4?c:a(c,d,Math.min(m/2,l)/m),s===0?e.moveTo(p.x,p.y):e.lineTo(p.x,p.y),e.quadraticCurveTo(c.x,c.y,h.x,h.y,r)}}var OC=new mh,kC=class{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Lh,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();let n=this._currentPoly.points,r=n[n.length-2],i=n[n.length-1];return(r!==e||i!==t)&&n.push(e,t),this}arc(e,t,n,r,i,a){this._ensurePoly(!1);let o=this._currentPoly.points;return _C(o,e,t,n,r,i,a),this}arcTo(e,t,n,r,i){this._ensurePoly();let a=this._currentPoly.points;return vC(a,e,t,n,r,i),this}arcToSvg(e,t,n,r,i,a,o){let s=this._currentPoly.points;return TC(s,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,t,n,r,i),this}bezierCurveTo(e,t,n,r,i,a,o){this._ensurePoly();let s=this._currentPoly;return oC(this._currentPoly.points,s.lastX,s.lastY,e,t,n,r,i,a,o),this}quadraticCurveTo(e,t,n,r,i){this._ensurePoly();let a=this._currentPoly;return mC(this._currentPoly.points,a.lastX,a.lastY,e,t,n,r,i),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));let n=this.shapePrimitives,r=n.length;for(let t=0;t<e.instructions.length;t++){let n=e.instructions[t];this[n.action](...n.data)}if(e.checkForHoles&&n.length-r>1){let e=null;for(let t=r;t<n.length;t++){let r=n[t];if(r.shape.type===`polygon`){let i=r.shape,a=e?.shape;a&&a.containsPolygon(i)?(e.holes||=[],e.holes.push(r),n.copyWithin(t,t+1),n.length--,t--):e=r}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,n,r,i){return this.drawShape(new mh(e,t,n,r),i),this}circle(e,t,n,r){return this.drawShape(new Gb(e,t,n),r),this}poly(e,t,n){let r=new Xb(e);return r.closePath=t,this.drawShape(r,n),this}regularPoly(e,t,n,r,i=0,a){r=Math.max(r|0,3);let o=-1*Math.PI/2+i,s=Math.PI*2/r,c=[];for(let i=0;i<r;i++){let r=o-i*s;c.push(e+n*Math.cos(r),t+n*Math.sin(r))}return this.poly(c,!0,a),this}roundPoly(e,t,n,r,i,a=0,o){if(r=Math.max(r|0,3),i<=0)return this.regularPoly(e,t,n,r,a);let s=n*Math.sin(Math.PI/r)-.001;i=Math.min(i,s);let c=-1*Math.PI/2+a,l=Math.PI*2/r,u=(r-2)*Math.PI/r/2;for(let a=0;a<r;a++){let r=a*l+c,s=e+n*Math.cos(r),d=t+n*Math.sin(r),f=r+Math.PI+u,p=r-Math.PI-u,m=s+i*Math.cos(f),h=d+i*Math.sin(f),g=s+i*Math.cos(p),_=d+i*Math.sin(p);a===0?this.moveTo(m,h):this.lineTo(m,h),this.quadraticCurveTo(s,d,g,_,o)}return this.closePath()}roundShape(e,t,n=!1,r){return e.length<3?this:(n?DC(this,e,t,r):EC(this,e,t),this.closePath())}filletRect(e,t,n,r,i){if(i===0)return this.rect(e,t,n,r);let a=Math.min(n,r)/2,o=Math.min(a,Math.max(-a,i)),s=e+n,c=t+r,l=o<0?-o:0,u=Math.abs(o);return this.moveTo(e,t+u).arcTo(e+l,t+l,e+u,t,u).lineTo(s-u,t).arcTo(s-l,t+l,s,t+u,u).lineTo(s,c-u).arcTo(s-l,c-l,e+n-u,c,u).lineTo(e+u,c).arcTo(e+l,c-l,e,c-u,u).closePath()}chamferRect(e,t,n,r,i,a){if(i<=0)return this.rect(e,t,n,r);let o=Math.min(i,Math.min(n,r)/2),s=e+n,c=t+r,l=[e+o,t,s-o,t,s,t+o,s,c-o,s-o,c,e+o,c,e,c-o,e,t+o];for(let e=l.length-1;e>=2;e-=2)l[e]===l[e-2]&&l[e-1]===l[e-3]&&l.splice(e-1,2);return this.poly(l,!0,a)}ellipse(e,t,n,r,i){return this.drawShape(new Kb(e,t,n,r),i),this}roundRect(e,t,n,r,i,a){return this.drawShape(new Qb(e,t,n,r,i),a),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let n=this._currentPoly;return n&&this.endPoly(),n=new Xb,n.points.push(e,t),this._currentPoly=n,this}endPoly(e=!1){let t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Xb,e)){let e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let t=e.shape.x,n=e.shape.y;if(e.transform&&!e.transform.isIdentity()){let r=e.transform,i=t;t=r.a*t+r.c*n+r.tx,n=r.b*i+r.d*n+r.ty}this._currentPoly.points.push(t,n)}else this._currentPoly.points.push(0,0)}}buildPath(){let e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){let n=e.instructions[t];this[n.action](...n.data)}this.finish()}get bounds(){let e=this._bounds;e.clear();let t=this.shapePrimitives;for(let n=0;n<t.length;n++){let r=t[n],i=r.shape.getBounds(OC);r.transform?e.addRect(i,r.transform):e.addRect(i)}return e}},AC=class e{constructor(e,t=!1){this.instructions=[],this.uid=gh(`graphicsPath`),this._dirty=!0,this.checkForHoles=t,typeof e==`string`?Wb(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||=new kC(this),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:`addPath`,data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:`arc`,data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:`arcTo`,data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:`arcToSvg`,data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:`bezierCurveTo`,data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,n,r,i){let a=this.instructions[this.instructions.length-1],o=this.getLastPoint(eh.shared),s=0,c=0;if(!a||a.action!==`bezierCurveTo`)s=o.x,c=o.y;else{s=a.data[2],c=a.data[3];let e=o.x,t=o.y;s=e+(e-s),c=t+(t-c)}return this.instructions.push({action:`bezierCurveTo`,data:[s,c,e,t,n,r,i]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:`closePath`,data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:`ellipse`,data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:`lineTo`,data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:`moveTo`,data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:`quadraticCurveTo`,data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,n){let r=this.instructions[this.instructions.length-1],i=this.getLastPoint(eh.shared),a=0,o=0;if(!r||r.action!==`quadraticCurveTo`)a=i.x,o=i.y;else{a=r.data[0],o=r.data[1];let e=i.x,t=i.y;a=e+(e-a),o=t+(t-o)}return this.instructions.push({action:`quadraticCurveTo`,data:[a,o,e,t,n]}),this._dirty=!0,this}rect(e,t,n,r,i){return this.instructions.push({action:`rect`,data:[e,t,n,r,i]}),this._dirty=!0,this}circle(e,t,n,r){return this.instructions.push({action:`circle`,data:[e,t,n,r]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:`roundRect`,data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:`poly`,data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:`regularPoly`,data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:`roundPoly`,data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:`roundShape`,data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:`filletRect`,data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:`chamferRect`,data:e}),this._dirty=!0,this}star(e,t,n,r,i,a,o){i||=r/2;let s=-1*Math.PI/2+a,c=n*2,l=Math.PI*2/c,u=[];for(let n=0;n<c;n++){let a=n%2?i:r,o=n*l+s;u.push(e+a*Math.cos(o),t+a*Math.sin(o))}return this.poly(u,!0,o),this}clone(t=!1){let n=new e;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let e=0;e<this.instructions.length;e++){let t=this.instructions[e];n.instructions.push({action:t.action,data:t.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;let t=e.a,n=e.b,r=e.c,i=e.d,a=e.tx,o=e.ty,s=0,c=0,l=0,u=0,d=0,f=0,p=0,m=0;for(let h=0;h<this.instructions.length;h++){let g=this.instructions[h],_=g.data;switch(g.action){case`moveTo`:case`lineTo`:s=_[0],c=_[1],_[0]=t*s+r*c+a,_[1]=n*s+i*c+o;break;case`bezierCurveTo`:l=_[0],u=_[1],d=_[2],f=_[3],s=_[4],c=_[5],_[0]=t*l+r*u+a,_[1]=n*l+i*u+o,_[2]=t*d+r*f+a,_[3]=n*d+i*f+o,_[4]=t*s+r*c+a,_[5]=n*s+i*c+o;break;case`quadraticCurveTo`:l=_[0],u=_[1],s=_[2],c=_[3],_[0]=t*l+r*u+a,_[1]=n*l+i*u+o,_[2]=t*s+r*c+a,_[3]=n*s+i*c+o;break;case`arcToSvg`:s=_[5],c=_[6],p=_[0],m=_[1],_[0]=t*p+r*m,_[1]=n*p+i*m,_[5]=t*s+r*c+a,_[6]=n*s+i*c+o;break;case`circle`:_[4]=jC(_[3],e);break;case`rect`:_[4]=jC(_[4],e);break;case`ellipse`:_[8]=jC(_[8],e);break;case`roundRect`:_[5]=jC(_[5],e);break;case`addPath`:_[0].transform(e);break;case`poly`:_[2]=jC(_[2],e);break;default:$(`unknown transform action`,g.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,n=this.instructions[t];if(!n)return e.x=0,e.y=0,e;for(;n.action===`closePath`;){if(t--,t<0)return e.x=0,e.y=0,e;n=this.instructions[t]}switch(n.action){case`moveTo`:case`lineTo`:e.x=n.data[0],e.y=n.data[1];break;case`quadraticCurveTo`:e.x=n.data[2],e.y=n.data[3];break;case`bezierCurveTo`:e.x=n.data[4],e.y=n.data[5];break;case`arc`:case`arcToSvg`:e.x=n.data[5],e.y=n.data[6];break;case`addPath`:n.data[0].getLastPoint(e);break}return e}};function jC(e,t){return e?e.prepend(t):t.clone()}function MC(e,t,n){let r=e.getAttribute(t);return r?Number(r):n}function NC(e,t){let n=e.querySelectorAll(`defs`);for(let e=0;e<n.length;e++){let r=n[e];for(let e=0;e<r.children.length;e++){let n=r.children[e];switch(n.nodeName.toLowerCase()){case`lineargradient`:t.defs[n.id]=PC(n);break;case`radialgradient`:t.defs[n.id]=FC(n);break;default:break}}}}function PC(e){let t=new Lb(MC(e,`x1`,0),MC(e,`y1`,0),MC(e,`x2`,1),MC(e,`y2`,0),(e.getAttribute(`gradientUnits`)||`objectBoundingBox`)===`objectBoundingBox`?`local`:`global`);for(let n=0;n<e.children.length;n++){let r=e.children[n],i=MC(r,`offset`,0),a=hg.shared.setValue(r.getAttribute(`stop-color`)).toNumber();t.addColorStop(i,a)}return t}function FC(e){return $(`[SVG Parser] Radial gradients are not yet supported`),new Lb(0,0,1,0)}function IC(e){let t=e.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:``}var LC={fill:{type:`paint`,default:0},"fill-opacity":{type:`number`,default:1},stroke:{type:`paint`,default:0},"stroke-width":{type:`number`,default:1},"stroke-opacity":{type:`number`,default:1},"stroke-linecap":{type:`string`,default:`butt`},"stroke-linejoin":{type:`string`,default:`miter`},"stroke-miterlimit":{type:`number`,default:10},"stroke-dasharray":{type:`string`,default:`none`},"stroke-dashoffset":{type:`number`,default:0},opacity:{type:`number`,default:1}};function RC(e,t){let n=e.getAttribute(`style`),r={},i={},a={strokeStyle:r,fillStyle:i,useFill:!1,useStroke:!1};for(let n in LC){let r=e.getAttribute(n);r&&zC(t,a,n,r.trim())}if(n){let e=n.split(`;`);for(let n=0;n<e.length;n++){let[r,i]=e[n].trim().split(`:`);LC[r]&&zC(t,a,r,i.trim())}}return{strokeStyle:a.useStroke?r:null,fillStyle:a.useFill?i:null,useFill:a.useFill,useStroke:a.useStroke}}function zC(e,t,n,r){switch(n){case`stroke`:if(r!==`none`){if(r.startsWith(`url(`)){let n=IC(r);t.strokeStyle.fill=e.defs[n]}else t.strokeStyle.color=hg.shared.setValue(r).toNumber();t.useStroke=!0}break;case`stroke-width`:t.strokeStyle.width=Number(r);break;case`fill`:if(r!==`none`){if(r.startsWith(`url(`)){let n=IC(r);t.fillStyle.fill=e.defs[n]}else t.fillStyle.color=hg.shared.setValue(r).toNumber();t.useFill=!0}break;case`fill-opacity`:t.fillStyle.alpha=Number(r);break;case`stroke-opacity`:t.strokeStyle.alpha=Number(r);break;case`opacity`:t.fillStyle.alpha=Number(r),t.strokeStyle.alpha=Number(r);break}}function BC(e){if(e.length<=2)return!0;let t=e.map(e=>e.area).sort((e,t)=>t-e),[n,r]=t,i=t[t.length-1],a=n/r,o=r/i;return!(a>3&&o<2)}function VC(e){return e.split(/(?=[Mm])/).filter(e=>e.trim().length>0)}function HC(e){let t=e.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!t||t.length<4)return 0;let n=t.map(Number),r=[],i=[];for(let e=0;e<n.length;e+=2)e+1<n.length&&(r.push(n[e]),i.push(n[e+1]));if(r.length===0||i.length===0)return 0;let a=Math.min(...r),o=Math.max(...r),s=Math.min(...i),c=Math.max(...i);return(o-a)*(c-s)}function UC(e,t){let n=new AC(e,!1);for(let e of n.instructions)t.instructions.push(e)}function WC(e,t){if(typeof e==`string`){let t=document.createElement(`div`);t.innerHTML=e.trim(),e=t.querySelector(`svg`)}let n={context:t,defs:{},path:new AC};NC(e,n);let r=e.children,{fillStyle:i,strokeStyle:a}=RC(e,n);for(let e=0;e<r.length;e++){let t=r[e];t.nodeName.toLowerCase()!==`defs`&&GC(t,n,i,a)}return t}function GC(e,t,n,r){let i=e.children,{fillStyle:a,strokeStyle:o}=RC(e,t);a&&n?n={...n,...a}:a&&(n=a),o&&r?r={...r,...o}:o&&(r=o);let s=!n&&!r;s&&(n={color:0});let c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w;switch(e.nodeName.toLowerCase()){case`path`:{x=e.getAttribute(`d`);let i=e.getAttribute(`fill-rule`),a=VC(x),o=i===`evenodd`,s=a.length>1;if(o&&s){let e=a.map(e=>({path:e,area:HC(e)}));if(e.sort((e,t)=>t.area-e.area),a.length>3||!BC(e))for(let i=0;i<e.length;i++){let a=e[i],o=i===0;t.context.beginPath();let s=new AC(void 0,!0);UC(a.path,s),t.context.path(s),o?(n&&t.context.fill(n),r&&t.context.stroke(r)):t.context.cut()}else for(let i=0;i<e.length;i++){let a=e[i],o=i%2==1;t.context.beginPath();let s=new AC(void 0,!0);UC(a.path,s),t.context.path(s),o?t.context.cut():(n&&t.context.fill(n),r&&t.context.stroke(r))}}else S=new AC(x,i?i===`evenodd`:!0),t.context.path(S),n&&t.context.fill(n),r&&t.context.stroke(r);break}case`circle`:m=MC(e,`cx`,0),h=MC(e,`cy`,0),g=MC(e,`r`,0),t.context.ellipse(m,h,g,g),n&&t.context.fill(n),r&&t.context.stroke(r);break;case`rect`:c=MC(e,`x`,0),l=MC(e,`y`,0),C=MC(e,`width`,0),w=MC(e,`height`,0),_=MC(e,`rx`,0),v=MC(e,`ry`,0),_||v?t.context.roundRect(c,l,C,w,_||v):t.context.rect(c,l,C,w),n&&t.context.fill(n),r&&t.context.stroke(r);break;case`ellipse`:m=MC(e,`cx`,0),h=MC(e,`cy`,0),_=MC(e,`rx`,0),v=MC(e,`ry`,0),t.context.beginPath(),t.context.ellipse(m,h,_,v),n&&t.context.fill(n),r&&t.context.stroke(r);break;case`line`:u=MC(e,`x1`,0),d=MC(e,`y1`,0),f=MC(e,`x2`,0),p=MC(e,`y2`,0),t.context.beginPath(),t.context.moveTo(u,d),t.context.lineTo(f,p),r&&t.context.stroke(r);break;case`polygon`:b=e.getAttribute(`points`),y=b.match(/-?\d+/g).map(e=>parseInt(e,10)),t.context.poly(y,!0),n&&t.context.fill(n),r&&t.context.stroke(r);break;case`polyline`:b=e.getAttribute(`points`),y=b.match(/-?\d+/g).map(e=>parseInt(e,10)),t.context.poly(y,!1),r&&t.context.stroke(r);break;case`g`:case`svg`:break;default:$(`[SVG parser] <${e.nodeName}> elements unsupported`);break}s&&(n=null);for(let e=0;e<i.length;e++)GC(i[e],t,n,r)}function KC(e){return hg.isColorLike(e)}function qC(e){return e instanceof Hb}function JC(e){return e instanceof Lb}function YC(e){return e instanceof Q}function XC(e,t,n){let r=hg.shared.setValue(t??0);return e.color=r.toNumber(),e.alpha=r.alpha===1?n.alpha:r.alpha,e.texture=Q.WHITE,{...n,...e}}function ZC(e,t,n){return e.texture=t,{...n,...e}}function QC(e,t,n){return e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,{...n,...e}}function $C(e,t,n){return t.buildGradient(),e.fill=t,e.color=16777215,e.texture=t.texture,e.matrix=t.transform,e.textureSpace=t.textureSpace,{...n,...e}}function ew(e,t){let n={...t,...e},r=hg.shared.setValue(n.color);return n.alpha*=r.alpha,n.color=r.toNumber(),n}function tw(e,t){if(e==null)return null;let n={},r=e;return KC(e)?XC(n,e,t):YC(e)?ZC(n,e,t):qC(e)?QC(n,e,t):JC(e)?$C(n,e,t):r.fill&&qC(r.fill)?QC(r,r.fill,t):r.fill&&JC(r.fill)?$C(r,r.fill,t):ew(r,t)}function nw(e,t){let{width:n,alignment:r,miterLimit:i,cap:a,join:o,pixelLine:s,...c}=t,l=tw(e,c);return l?{width:n,alignment:r,miterLimit:i,cap:a,join:o,pixelLine:s,...l}:null}var rw=new eh,iw=new Z,aw=class e extends Xm{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=gh(`graphicsContext`),this.dirty=!0,this.batchMode=`auto`,this.instructions=[],this.destroyed=!1,this._activePath=new AC,this._transform=new Z,this._fillStyle={...e.defaultFillStyle},this._strokeStyle={...e.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Lh,this._boundsDirty=!0}clone(){let t=new e;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=tw(t,e.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=nw(t,e.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=tw(t,e.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=tw(t,e.defaultStrokeStyle),this}texture(e,t,n,r,i,a){return this.instructions.push({action:`texture`,data:{image:e,dx:n||0,dy:r||0,dw:i||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?hg.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new AC,this}fill(t,n){let r,i=this.instructions[this.instructions.length-1];return r=this._tick===0&&i?.action===`stroke`?i.data.path:this._activePath.clone(),r?(t!=null&&(n!==void 0&&typeof t==`number`&&(xh(vh,`GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead`),t={color:t,alpha:n}),this._fillStyle=tw(t,e.defaultFillStyle)),this.instructions.push({action:`fill`,data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){let{x:e,y:t}=this._activePath.getLastPoint(eh.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(t){let n,r=this.instructions[this.instructions.length-1];return n=this._tick===0&&r?.action===`fill`?r.data.path:this._activePath.clone(),n?(t!=null&&(this._strokeStyle=nw(t,e.defaultStrokeStyle)),this.instructions.push({action:`stroke`,data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){let t=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(t&&(t.action===`stroke`||t.action===`fill`))if(t.data.hole)t.data.hole.addPath(n);else{t.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,t,n,r,i,a){this._tick++;let o=this._transform;return this._activePath.arc(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,n,r,i,a),this}arcTo(e,t,n,r,i){this._tick++;let a=this._transform;return this._activePath.arcTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,i),this}arcToSvg(e,t,n,r,i,a,o){this._tick++;let s=this._transform;return this._activePath.arcToSvg(e,t,n,r,i,s.a*a+s.c*o+s.tx,s.b*a+s.d*o+s.ty),this}bezierCurveTo(e,t,n,r,i,a,o){this._tick++;let s=this._transform;return this._activePath.bezierCurveTo(s.a*e+s.c*t+s.tx,s.b*e+s.d*t+s.ty,s.a*n+s.c*r+s.tx,s.b*n+s.d*r+s.ty,s.a*i+s.c*a+s.tx,s.b*i+s.d*a+s.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,n,r){return this._tick++,this._activePath.ellipse(e,t,n,r,this._transform.clone()),this}circle(e,t,n){return this._tick++,this._activePath.circle(e,t,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;let n=this._transform;return this._activePath.lineTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty),this}moveTo(e,t){this._tick++;let n=this._transform,r=this._activePath.instructions,i=n.a*e+n.c*t+n.tx,a=n.b*e+n.d*t+n.ty;return r.length===1&&r[0].action===`moveTo`?(r[0].data[0]=i,r[0].data[1]=a,this):(this._activePath.moveTo(i,a),this)}quadraticCurveTo(e,t,n,r,i){this._tick++;let a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*r+a.tx,a.b*n+a.d*r+a.ty,i),this}rect(e,t,n,r){return this._tick++,this._activePath.rect(e,t,n,r,this._transform.clone()),this}roundRect(e,t,n,r,i){return this._tick++,this._activePath.roundRect(e,t,n,r,i,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,n,r,i=0,a){return this._tick++,this._activePath.regularPoly(e,t,n,r,i,a),this}roundPoly(e,t,n,r,i,a){return this._tick++,this._activePath.roundPoly(e,t,n,r,i,a),this}roundShape(e,t,n,r){return this._tick++,this._activePath.roundShape(e,t,n,r),this}filletRect(e,t,n,r,i){return this._tick++,this._activePath.filletRect(e,t,n,r,i),this}chamferRect(e,t,n,r,i,a){return this._tick++,this._activePath.chamferRect(e,t,n,r,i,a),this}star(e,t,n,r,i=0,a=0){return this._tick++,this._activePath.star(e,t,n,r,i,a,this._transform.clone()),this}svg(e){return this._tick++,WC(e,this),this}restore(){let e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,n,r,i,a){return e instanceof Z?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,n,r,i,a),this)}transform(e,t,n,r,i,a){return e instanceof Z?(this._transform.append(e),this):(iw.set(e,t,n,r,i,a),this._transform.append(iw),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit(`update`,this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;let e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){let n=this.instructions[t],r=n.action;if(r===`fill`){let t=n.data;e.addBounds(t.path.bounds)}else if(r===`texture`){let t=n.data;e.addFrame(t.dx,t.dy,t.dx+t.dw,t.dy+t.dh,t.transform)}if(r===`stroke`){let t=n.data,r=t.style.alignment,i=t.style.width*(1-r),a=t.path.bounds;e.addFrame(a.minX-i,a.minY-i,a.maxX+i,a.maxY+i)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;let t=this.instructions,n=!1;for(let r=0;r<t.length;r++){let i=t[r],a=i.data,o=a.path;if(!i.action||!o)continue;let s=a.style,c=o.shapePath.shapePrimitives;for(let t=0;t<c.length;t++){let r=c[t].shape;if(!s||!r)continue;let o=c[t].transform,l=o?o.applyInverse(e,rw):e;if(i.action===`fill`)n=r.contains(l.x,l.y);else{let e=s;n=r.strokeContains(l.x,l.y,e.width,e.alignment)}let u=a.hole;if(u){let e=u.shapePath?.shapePrimitives;if(e)for(let t=0;t<e.length;t++)e[t].shape.contains(l.x,l.y)&&(n=!1)}if(n)return!0}}return n}unload(){for(let e in this.emit(`unload`,this),this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(!this.destroyed){if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit(`destroy`,this),this.removeAllListeners(),typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&`uid`in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(t)),this._strokeStyle.texture&&(this._strokeStyle.fill&&`uid`in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(t))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}}};aw.defaultFillStyle={color:16777215,alpha:1,texture:Q.WHITE,matrix:null,fill:null,textureSpace:`local`},aw.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:`butt`,join:`miter`,texture:Q.WHITE,matrix:null,fill:null,textureSpace:`local`,pixelLine:!1};var ow=aw,sw=class e extends Xm{constructor(t={}){super(),this.uid=gh(`textStyle`),this._tick=0,lw(t);let n={...e.defaultTextStyle,...t};for(let e in n){let t=e;this[t]=n[e]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(typeof t==`object`&&t?this._dropShadow=this._createProxy({...e.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...e.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e==`string`?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...ow.defaultFillStyle,...e},()=>{this._fill=tw({...this._originalFill},ow.defaultFillStyle)})),this._fill=tw(e===0?`black`:e,ow.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...ow.defaultStrokeStyle,...e},()=>{this._stroke=nw({...this._originalStroke},ow.defaultStrokeStyle)})),this._stroke=nw(e,ow.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit(`update`,this)}reset(){let t=e.defaultTextStyle;for(let e in t)this[e]=t[e]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new e({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e==`boolean`?e:e?.texture){let t=typeof e==`boolean`?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(t),this._originalFill?.texture&&this._originalFill.texture.destroy(t),this._stroke?.texture&&this._stroke.texture.destroy(t),this._originalStroke?.texture&&this._originalStroke.texture.destroy(t)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(e,n,r)=>e[n]===r?!0:(e[n]=r,t?.(n,r),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(hg.isColorLike(e)||e instanceof Lb||e instanceof Hb)}};sw.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:`black`,distance:5},sw.defaultTextStyle={align:`left`,breakWords:!1,dropShadow:null,fill:`black`,fontFamily:`Arial`,fontSize:26,fontStyle:`normal`,fontVariant:`normal`,fontWeight:`normal`,leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:`alphabetic`,trim:!1,whiteSpace:`pre`,wordWrap:!1,wordWrapWidth:100};var cw=sw;function lw(e){let t=e;if(typeof t.dropShadow==`boolean`&&t.dropShadow){let n=cw.defaultDropShadow;e.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){xh(vh,`strokeThickness is now a part of stroke`);let n=t.stroke,r={};if(hg.isColorLike(n))r.color=n;else if(n instanceof Lb||n instanceof Hb)r.fill=n;else if(Object.hasOwnProperty.call(n,`color`)||Object.hasOwnProperty.call(n,`fill`))r=n;else throw Error(`Invalid stroke value.`);e.stroke={...r,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if(xh(vh,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||t.fill.length===0)throw Error(`Invalid fill value. Expected an array of colors for gradient fill.`);t.fill.length!==t.fillGradientStops.length&&$(`The number of fill colors must match the number of fill gradient stops.`);let n=new Lb({start:{x:0,y:0},end:{x:0,y:1},textureSpace:`local`}),r=t.fillGradientStops.slice(),i=t.fill.map(e=>hg.shared.setValue(e).toNumber());r.forEach((e,t)=>{n.addColorStop(e,i[t])}),e.fill={fill:n}}}var uw=new class{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){let n=__.get().createCanvas();return n.width=e,n.height=t,{canvas:n,context:n.getContext(`2d`)}}getOptimalCanvasAndContext(e,t,n=1){e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),e=Ch(e),t=Ch(t);let r=(e<<17)+(t<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let i=this._canvasPool[r].pop();return i||=this._createCanvasAndContext(e,t),i}returnCanvasAndContext(e){let{width:t,height:n}=e.canvas,r=(t<<17)+(n<<1);e.context.resetTransform(),e.context.clearRect(0,0,t,n),this._canvasPool[r].push(e)}clear(){this._canvasPool={}}};yg.register(uw);var dw=1e5;function fw(e,t,n,r=0){if(e.texture===Q.WHITE&&!e.fill)return hg.shared.setValue(e.color).setAlpha(e.alpha??1).toHexa();if(e.fill){if(e.fill instanceof Hb){let n=e.fill,r=t.createPattern(n.texture.source.resource,`repeat`),i=n.transform.copyTo(Z.shared);return i.scale(n.texture.frame.width,n.texture.frame.height),r.setTransform(i),r}else if(e.fill instanceof Lb){let i=e.fill,a=i.type===`linear`,o=i.textureSpace===`local`,s=1,c=1;o&&n&&(s=n.width+r,c=n.height+r);let l,u=!1;if(a){let{start:e,end:n}=i;l=t.createLinearGradient(e.x*s,e.y*c,n.x*s,n.y*c),u=Math.abs(n.x-e.x)<Math.abs((n.y-e.y)*.1)}else{let{center:e,innerRadius:n,outerCenter:r,outerRadius:a}=i;l=t.createRadialGradient(e.x*s,e.y*c,n*s,r.x*s,r.y*c,a*s)}if(u&&o&&n){let e=n.lineHeight/c;for(let t=0;t<n.lines.length;t++){let a=(t*n.lineHeight+r/2)/c;i.colorStops.forEach(t=>{let n=a+t.offset*e;l.addColorStop(Math.floor(n*dw)/dw,hg.shared.setValue(t.color).toHex())})}}else i.colorStops.forEach(e=>{l.addColorStop(e.offset,hg.shared.setValue(e.color).toHex())});return l}}else{let n=t.createPattern(e.texture.source.resource,`repeat`),r=e.matrix.copyTo(Z.shared);return r.scale(e.texture.frame.width,e.texture.frame.height),n.setTransform(r),n}return $(`FillStyle not recognised`,e),`red`}var pw=class e extends Db{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;let n={...e.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;let r=n.style.clone();n.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=Q.WHITE,r._fill.fill=null),this.applyFillAsTint=n.overrideFill;let i=r.fontSize;r.fontSize=this.baseMeasurementFontSize;let a=jb(r);n.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/i):r.fontSize=this.baseRenderedFontSize=i,this._style=r,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,n.textureStyle&&(this._textureStyle=n.textureStyle instanceof kh?n.textureStyle:new kh(n.textureStyle)),this.fontMetrics=Pb.measureFont(a),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(e){let t=Pb.graphemeSegmenter(e).filter(e=>!this._currentChars.includes(e)).filter((e,t,n)=>n.indexOf(e)===t);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let n;n=this._currentPageIndex===-1?this._nextPage():this.pages[this._currentPageIndex];let{canvas:r,context:i}=n.canvasAndContext,a=n.texture.source,o=this._style,s=this._currentX,c=this._currentY,l=this._currentMaxCharHeight,u=this.baseRenderedFontSize/this.baseMeasurementFontSize,d=this._padding*u,f=!1,p=r.width/this.resolution,m=r.height/this.resolution;for(let e=0;e<t.length;e++){let n=t[e],h=Pb.measureText(n,o,r,!1);h.lineHeight=h.height;let g=h.width*u,_=Math.ceil((o.fontStyle===`italic`?2:1)*g),v=h.height*u,y=_+d*2,b=v+d*2;if(f=!1,n!==`
`&&n!==`\r`&&n!==`	`&&n!==` `&&(f=!0,l=Math.ceil(Math.max(b,l))),s+y>p&&(c+=l,l=b,s=0,c+l>m)){a.update();let e=this._nextPage();r=e.canvasAndContext.canvas,i=e.canvasAndContext.context,a=e.texture.source,s=0,c=0,l=0}let x=g/u-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[n]={id:n.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:x,kerning:{}},f){this._drawGlyph(i,h,s+d,c+d,u,o);let e=a.width*u,t=a.height*u,r=new mh(s/e*a.width,c/t*a.height,y/e*a.width,b/t*a.height);this.chars[n].texture=new Q({source:a,frame:r}),s+=Math.ceil(y)}}a.update(),this._currentX=s,this._currentY=c,this._currentMaxCharHeight=l,this._skipKerning&&this._applyKerning(t,i)}get pageTextures(){return xh(vh,`BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.`),this.pages}_applyKerning(e,t){let n=this._measureCache;for(let r=0;r<e.length;r++){let i=e[r];for(let e=0;e<this._currentChars.length;e++){let r=this._currentChars[e],a=n[i];a||=n[i]=t.measureText(i).width;let o=n[r];o||=n[r]=t.measureText(r).width;let s=t.measureText(i+r).width,c=s-(a+o);c&&(this.chars[i].kerning[r]=c),s=t.measureText(i+r).width,c=s-(a+o),c&&(this.chars[r].kerning[i]=c)}}}_nextPage(){this._currentPageIndex++;let e=this.resolution,t=uw.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);let n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new Q({source:new y_({resource:t.canvas,resolution:n,alphaMode:`premultiply-alpha-on-upload`,autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);let i={canvasAndContext:t,texture:r};return this.pages[this._currentPageIndex]=i,i}_setupContext(e,t,n){t.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=jb(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;let r=t._stroke,i=r?.width??0;if(r&&(e.lineWidth=i,e.lineJoin=r.join,e.miterLimit=r.miterLimit,e.strokeStyle=fw(r,e)),t._fill&&(e.fillStyle=fw(t._fill,e)),t.dropShadow){let r=t.dropShadow,i=hg.shared.setValue(r.color).toArray(),a=r.blur*n,o=r.distance*n;e.shadowColor=`rgba(${i[0]*255},${i[1]*255},${i[2]*255},${r.alpha})`,e.shadowBlur=a,e.shadowOffsetX=Math.cos(r.angle)*o,e.shadowOffsetY=Math.sin(r.angle)*o}else e.shadowColor=`black`,e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,n,r,i,a){let o=t.text,s=t.fontProperties,c=(a._stroke?.width??0)*i,l=n+c/2,u=r-c/2,d=s.descent*i,f=t.lineHeight*i,p=!1;a.stroke&&c&&(p=!0,e.strokeText(o,l,u+f-d));let{shadowBlur:m,shadowOffsetX:h,shadowOffsetY:g}=e;a._fill&&(p&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,l,u+f-d)),p&&(e.shadowBlur=m,e.shadowOffsetX=h,e.shadowOffsetY=g)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{canvasAndContext:t,texture:n}=this.pages[e];uw.returnCanvasAndContext(t),n.destroy(!0)}this.pages=null}};pw.defaultOptions={textureSize:512,style:new cw,mipmap:!0};var mw=pw;function hw(e,t,n,r){let i={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=n.baseLineOffset;let a=i.lines[0],o=null,s=!0,c={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=n.baseMeasurementFontSize/t.fontSize,u=t.letterSpacing*l,d=t.wordWrapWidth*l,f=t.lineHeight?t.lineHeight*l:n.lineHeight,p=t.wordWrap&&t.breakWords,m=e=>{let t=a.width;for(let n=0;n<c.index;n++){let r=e.positions[n];a.chars.push(e.chars[n]),a.charPositions.push(r+t)}a.width+=e.width,s=!1,c.width=0,c.index=0,c.chars.length=0},h=()=>{let e=a.chars.length-1;if(r){let t=a.chars[e];for(;t===` `;)a.width-=n.chars[t].xAdvance,t=a.chars[--e]}i.width=Math.max(i.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},s=!0,i.lines.push(a),i.height+=f},g=e=>e-u>d;for(let r=0;r<e.length+1;r++){let i,l=r===e.length;l||(i=e[r]);let d=n.chars[i]||n.chars[` `];if(/(?:\s)/.test(i)||i===`\r`||i===`
`||l){if(!s&&t.wordWrap&&g(a.width+c.width)?(h(),m(c),l||a.charPositions.push(0)):(c.start=a.width,m(c),l||a.charPositions.push(0)),i===`\r`||i===`
`)h();else if(!l){let e=d.xAdvance+(d.kerning[o]||0)+u;a.width+=e,a.spaceWidth=e,a.spacesIndex.push(a.charPositions.length),a.chars.push(i)}}else{let e=d.kerning[o]||0,t=d.xAdvance+e+u;p&&g(a.width+c.width+t)&&(m(c),h()),c.positions[c.index++]=c.width+e,c.chars.push(i),c.width+=t}o=i}return h(),t.align===`center`?gw(i):t.align===`right`?_w(i):t.align===`justify`&&vw(i),i}function gw(e){for(let t=0;t<e.lines.length;t++){let n=e.lines[t],r=e.width/2-n.width/2;for(let e=0;e<n.charPositions.length;e++)n.charPositions[e]+=r}}function _w(e){for(let t=0;t<e.lines.length;t++){let n=e.lines[t],r=e.width-n.width;for(let e=0;e<n.charPositions.length;e++)n.charPositions[e]+=r}}function vw(e){let t=e.width;for(let n=0;n<e.lines.length;n++){let r=e.lines[n],i=0,a=r.spacesIndex[i++],o=0,s=r.spacesIndex.length,c=(t-r.width)/s;for(let e=0;e<r.charPositions.length;e++)e===a&&(a=r.spacesIndex[i++],o+=c),r.charPositions[e]+=o}}function yw(e){if(e===``)return[];typeof e==`string`&&(e=[e]);let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];if(Array.isArray(r)){if(r.length!==2)throw Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw Error(`[BitmapFont]: Invalid character delimiter.`);let e=r[0].charCodeAt(0),n=r[1].charCodeAt(0);if(n<e)throw Error(`[BitmapFont]: Invalid character range.`);for(let r=e,i=n;r<=i;r++)t.push(String.fromCharCode(r))}else t.push(...Array.from(r))}if(t.length===0)throw Error(`[BitmapFont]: Empty set when resolving characters.`);return t}var bw=0,xw=new class{constructor(){this.ALPHA=[[`a`,`z`],[`A`,`Z`],` `],this.NUMERIC=[[`0`,`9`]],this.ALPHANUMERIC=[[`a`,`z`],[`A`,`Z`],[`0`,`9`],` `],this.ASCII=[[` `,`~`]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=kb(1e3)}getFont(e,t){let n=`${t.fontFamily}-bitmap`,r=!0;if(t._fill.fill&&!t._stroke?(n+=t._fill.fill.styleKey,r=!1):(t._stroke||t.dropShadow)&&(n=`${t.styleKey}-bitmap`,r=!1),!k_.has(n)){let e=Object.create(t);e.lineHeight=0;let i=new mw({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});bw++,bw>50&&$(`BitmapText`,`You have dynamically created ${bw} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),i.once(`destroy`,()=>{bw--,k_.remove(n)}),k_.set(n,i)}let i=k_.get(n);return i.ensureCharacters?.(e),i}getLayout(e,t,n=!0){let r=this.getFont(e,t),i=`${e}-${t.styleKey}-${n}`;if(this.measureCache.has(i))return this.measureCache.get(i);let a=hw(Pb.graphemeSegmenter(e),t,r,n);return this.measureCache.set(i,a),a}measureText(e,t,n=!0){return this.getLayout(e,t,n)}install(...e){let t=e[0];typeof t==`string`&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},xh(vh,`BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})`));let n=t?.name;if(!n)throw Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};let r=t.style,i=r instanceof cw?r:new cw(r),a=new mw({style:i,overrideFill:t.dynamicFill??this._canUseTintForStyle(i),skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),o=yw(t.chars);return a.ensureCharacters(o.join(``)),k_.set(`${n}-bitmap`,a),a.once(`destroy`,()=>k_.remove(`${n}-bitmap`)),a}uninstall(e){let t=`${e}-bitmap`,n=k_.get(t);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}},Sw=class extends Db{constructor(e,t){super();let{textures:n,data:r}=e;Object.keys(r.pages).forEach(e=>{let t=n[r.pages[parseInt(e,10)].id];this.pages.push({texture:t})}),Object.keys(r.chars).forEach(e=>{let t=r.chars[e],{frame:i,source:a,rotate:o}=n[t.page],s=new Q({frame:fh.transformRectCoords(t,i,o,new mh),orig:new mh(0,0,t.width,t.height),source:a,rotate:o});this.chars[e]={id:e.codePointAt(0),xOffset:t.xOffset,yOffset:t.yOffset,xAdvance:t.xAdvance,kerning:t.kerning??{},texture:s}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:`none`,range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){let{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){xw.install(e)}static uninstall(e){xw.uninstall(e)}},Cw={test(e){return typeof e==`string`&&e.startsWith(`info face=`)},parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let e in t){let r=t[e].match(/^[a-z]+/gm)[0],i=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(let e in i){let t=i[e].split(`=`),n=t[0],r=t[1].replace(/"/gm,``),o=parseFloat(r);a[n]=isNaN(o)?r:o}n[r].push(a)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},[i]=n.info,[a]=n.common,[o]=n.distanceField??[];o&&(r.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),r.fontSize=parseInt(i.size,10),r.fontFamily=i.face,r.lineHeight=parseInt(a.lineHeight,10);let s=n.page;for(let e=0;e<s.length;e++)r.pages.push({id:parseInt(s[e].id,10)||0,file:s[e].file});let c={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);let l=n.char;for(let e=0;e<l.length;e++){let t=l[e],n=parseInt(t.id,10),i=t.letter??t.char??String.fromCharCode(n);i===`space`&&(i=` `),c[n]=i,r.chars[i]={id:n,page:parseInt(t.page,10)||0,x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xOffset:parseInt(t.xoffset,10),yOffset:parseInt(t.yoffset,10),xAdvance:parseInt(t.xadvance,10),kerning:{}}}let u=n.kerning||[];for(let e=0;e<u.length;e++){let t=parseInt(u[e].first,10),n=parseInt(u[e].second,10),i=parseInt(u[e].amount,10);r.chars[c[n]].kerning[c[t]]=i}return r}},ww={test(e){let t=e;return typeof t!=`string`&&`getElementsByTagName`in t&&t.getElementsByTagName(`page`).length&&t.getElementsByTagName(`info`)[0].getAttribute(`face`)!==null},parse(e){let t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:``,distanceField:null,baseLineOffset:0},n=e.getElementsByTagName(`info`)[0],r=e.getElementsByTagName(`common`)[0],i=e.getElementsByTagName(`distanceField`)[0];i&&(t.distanceField={type:i.getAttribute(`fieldType`),range:parseInt(i.getAttribute(`distanceRange`),10)});let a=e.getElementsByTagName(`page`),o=e.getElementsByTagName(`char`),s=e.getElementsByTagName(`kerning`);t.fontSize=parseInt(n.getAttribute(`size`),10),t.fontFamily=n.getAttribute(`face`),t.lineHeight=parseInt(r.getAttribute(`lineHeight`),10);for(let e=0;e<a.length;e++)t.pages.push({id:parseInt(a[e].getAttribute(`id`),10)||0,file:a[e].getAttribute(`file`)});let c={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute(`base`),10);for(let e=0;e<o.length;e++){let n=o[e],r=parseInt(n.getAttribute(`id`),10),i=n.getAttribute(`letter`)??n.getAttribute(`char`)??String.fromCharCode(r);i===`space`&&(i=` `),c[r]=i,t.chars[i]={id:r,page:parseInt(n.getAttribute(`page`),10)||0,x:parseInt(n.getAttribute(`x`),10),y:parseInt(n.getAttribute(`y`),10),width:parseInt(n.getAttribute(`width`),10),height:parseInt(n.getAttribute(`height`),10),xOffset:parseInt(n.getAttribute(`xoffset`),10),yOffset:parseInt(n.getAttribute(`yoffset`),10),xAdvance:parseInt(n.getAttribute(`xadvance`),10),kerning:{}}}for(let e=0;e<s.length;e++){let n=parseInt(s[e].getAttribute(`first`),10),r=parseInt(s[e].getAttribute(`second`),10),i=parseInt(s[e].getAttribute(`amount`),10);t.chars[c[r]].kerning[c[n]]=i}return t}},Tw={test(e){return typeof e==`string`&&e.match(/<font(\s|>)/)?ww.test(__.get().parseXML(e)):!1},parse(e){return ww.parse(__.get().parseXML(e))}},Ew=[`.xml`,`.fnt`],Dw={extension:{type:X.CacheParser,name:`cacheBitmapFont`},test:e=>e instanceof Sw,getCacheableAssets(e,t){let n={};return e.forEach(e=>{n[e]=t,n[`${e}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},Ow={extension:{type:X.LoadParser,priority:P_.Normal},name:`loadBitmapFont`,id:`bitmap-font`,test(e){return Ew.includes(B_.extname(e).toLowerCase())},async testParse(e){return Cw.test(e)||Tw.test(e)},async parse(e,t,n){let r=Cw.test(e)?Cw.parse(e):Tw.parse(e),{src:i}=t,{pages:a}=r,o=[],s=r.distanceField?{scaleMode:`linear`,alphaMode:`premultiply-alpha-on-upload`,autoGenerateMipmaps:!1,resolution:1}:{};for(let e=0;e<a.length;++e){let t=a[e].file,n=B_.join(B_.dirname(i),t);n=K_(n,i),o.push({src:n,data:s})}let c=await n.load(o);return new Sw({data:r,textures:o.map(e=>c[e.src])},i)},async load(e,t){return await(await __.get().fetch(e)).text()},async unload(e,t,n){await Promise.all(e.pages.map(e=>n.unload(e.texture.source._sourceOrigin))),e.destroy()}},kw=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log(`[BackgroundLoader] assets: `,this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}},Aw={extension:{type:X.CacheParser,name:`cacheTextureArray`},test:e=>Array.isArray(e)&&e.every(e=>e instanceof Q),getCacheableAssets:(e,t)=>{let n={};return e.forEach(e=>{t.forEach((t,r)=>{n[e+(r===0?``:r+1)]=t})}),n}};async function jw(e){if(`Image`in globalThis)return new Promise(t=>{let n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e});if(`createImageBitmap`in globalThis&&`fetch`in globalThis){try{let t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}var Mw={extension:{type:X.DetectionParser,priority:1},test:async()=>jw(`data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=`),add:async e=>[...e,`avif`],remove:async e=>e.filter(e=>e!==`avif`)},Nw=[`png`,`jpg`,`jpeg`],Pw={extension:{type:X.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Nw],remove:async e=>e.filter(e=>!Nw.includes(e))},Fw=`WorkerGlobalScope`in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Iw(e){return Fw?!1:document.createElement(`video`).canPlayType(e)!==``}var Lw={extension:{type:X.DetectionParser,priority:0},test:async()=>Iw(`video/mp4`),add:async e=>[...e,`mp4`,`m4v`],remove:async e=>e.filter(e=>e!==`mp4`&&e!==`m4v`)},Rw={extension:{type:X.DetectionParser,priority:0},test:async()=>Iw(`video/ogg`),add:async e=>[...e,`ogv`],remove:async e=>e.filter(e=>e!==`ogv`)},zw={extension:{type:X.DetectionParser,priority:0},test:async()=>Iw(`video/webm`),add:async e=>[...e,`webm`],remove:async e=>e.filter(e=>e!==`webm`)},Bw={extension:{type:X.DetectionParser,priority:0},test:async()=>jw(`data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=`),add:async e=>[...e,`webp`],remove:async e=>e.filter(e=>e!==`webp`)},Vw=class e{constructor(){this.loadOptions={...e.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let n={promise:null,parser:null};return n.promise=(async()=>{let r=null,i=null;if((t.parser||t.loadParser)&&(i=this._parserHash[t.parser||t.loadParser],t.loadParser&&$(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),i||$(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!i){for(let n=0;n<this.parsers.length;n++){let r=this.parsers[n];if(r.load&&r.test?.(e,t,this)){i=r;break}}if(!i)return $(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await i.load(e,t,this),n.parser=i;for(let e=0;e<this.parsers.length;e++){let i=this.parsers[e];i.parse&&i.parse&&await i.testParse?.(r,t,this)&&(r=await i.parse(r,t,this)||r,n.parser=i)}return r})(),n}async load(t,n){this._parsersValidated||this._validateParsers();let{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s}=typeof n==`function`?{...e.defaultOptions,...this.loadOptions,onProgress:n}:{...e.defaultOptions,...this.loadOptions,...n||{}},c=0,l={},u=U_(t),d=O_(t,e=>({alias:[e],src:e,data:{}})),f=d.reduce((e,t)=>e+(t.progressSize||1),0),p=d.map(async e=>{let t=B_.toAbsolute(e.src);l[e.src]||(await this._loadAssetWithRetry(t,e,{onProgress:r,onError:i,strategy:a,retryCount:o,retryDelay:s},l),c+=e.progressSize||1,r&&r(c/f))});return await Promise.all(p),u?l[d[0].src]:l}async unload(e){let t=O_(e,e=>({alias:[e],src:e})).map(async e=>{let t=B_.toAbsolute(e.src),n=this.promiseCache[t];if(n){let r=await n.promise;delete this.promiseCache[t],await n.parser?.unload?.(r,e,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?$(`[Assets] parser should have an id`):(e[t.name]||e[t.id])&&$(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,n,r){let i=0,{onError:a,strategy:o,retryCount:s,retryDelay:c}=n,l=e=>new Promise(t=>setTimeout(t,e));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),r[t.src]=await this.promiseCache[e].promise;return}catch(n){if(delete this.promiseCache[e],delete r[t.src],i++,o===`retry`&&!(o!==`retry`||i>s)){a&&a(n,t),await l(c);continue}if(o===`skip`){a&&a(n,t);return}a&&a(n,t);let u=Error(`[Loader.load] Failed to load ${e}.
${n}`);throw n instanceof Error&&n.stack&&(u.stack=n.stack),u}}};Vw.defaultOptions={onProgress:void 0,onError:void 0,strategy:`throw`,retryCount:3,retryDelay:250};var Hw=Vw;function Uw(e,t){if(Array.isArray(t)){for(let n of t)if(e.startsWith(`data:${n}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Ww(e,t){let n=e.split(`?`)[0],r=B_.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var Gw=`.json`,Kw=`application/json`,qw={extension:{type:X.LoadParser,priority:P_.Low},name:`loadJson`,id:`json`,test(e){return Uw(e,Kw)||Ww(e,Gw)},async load(e){return await(await __.get().fetch(e)).json()}},Jw=`.txt`,Yw=`text/plain`,Xw={name:`loadTxt`,id:`text`,extension:{type:X.LoadParser,priority:P_.Low,name:`loadTxt`},test(e){return Uw(e,Yw)||Ww(e,Jw)},async load(e){return await(await __.get().fetch(e)).text()}},Zw=[`normal`,`bold`,`100`,`200`,`300`,`400`,`500`,`600`,`700`,`800`,`900`],Qw=[`.ttf`,`.otf`,`.woff`,`.woff2`],$w=[`font/ttf`,`font/otf`,`font/woff`,`font/woff2`],eT=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function tT(e){let t=B_.extname(e),n=B_.basename(e,t).replace(/(-|_)/g,` `).toLowerCase().split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1)),r=n.length>0;for(let e of n)if(!e.match(eT)){r=!1;break}let i=n.join(` `);return r||(i=`"${i.replace(/[\\"]/g,`\\$&`)}"`),i}var nT=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function rT(e){return nT.test(e)?e:encodeURI(e)}var iT={extension:{type:X.LoadParser,priority:P_.Low},name:`loadWebFont`,id:`web-font`,test(e){return Uw(e,$w)||Ww(e,Qw)},async load(e,t){let n=__.get().getFontFaceSet();if(n){let r=[],i=t.data?.family??tT(e),a=t.data?.weights?.filter(e=>Zw.includes(e))??[`normal`],o=t.data??{};for(let t=0;t<a.length;t++){let s=a[t],c=new FontFace(i,`url(${rT(e)})`,{...o,weight:s});await c.load(),n.add(c),r.push(c)}return k_.has(`${i}-and-url`)?k_.get(`${i}-and-url`).entries.push({url:e,faces:r}):k_.set(`${i}-and-url`,{entries:[{url:e,faces:r}]}),r.length===1?r[0]:r}return $(`[loadWebFont] FontFace API is not supported. Skipping loading font`),null},unload(e){let t=Array.isArray(e)?e:[e],n=t[0].family,r=k_.get(`${n}-and-url`),i=r.entries.find(e=>e.faces.some(e=>t.indexOf(e)!==-1));i.faces=i.faces.filter(e=>t.indexOf(e)===-1),i.faces.length===0&&(r.entries=r.entries.filter(e=>e!==i)),t.forEach(e=>{__.get().getFontFaceSet().delete(e)}),r.entries.length===0&&k_.remove(`${n}-and-url`)}};function aT(e,t=1){let n=W_.RETINA_PREFIX?.exec(e);return n?parseFloat(n[1]):t}function oT(e,t,n){e.label=n,e._sourceOrigin=n;let r=new Q({source:e,label:n}),i=()=>{delete t.promiseCache[n],k_.has(n)&&k_.remove(n)};return r.source.once(`destroy`,()=>{t.promiseCache[n]&&($(`[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.`),i())}),r.once(`destroy`,()=>{e.destroyed||($(`[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.`),i())}),r}var sT=`.svg`,cT=`image/svg+xml`,lT={extension:{type:X.LoadParser,priority:P_.Low,name:`loadSVG`},name:`loadSVG`,id:`svg`,config:{crossOrigin:`anonymous`,parseAsGraphicsContext:!1},test(e){return Uw(e,cT)||Ww(e,sT)},async load(e,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?dT(e):uT(e,t,n,this.config.crossOrigin)},unload(e){e.destroy(!0)}};async function uT(e,t,n,r){let i=await __.get().fetch(e),a=__.get().createImage();a.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,a.crossOrigin=r,await a.decode();let o=t.data?.width??a.width,s=t.data?.height??a.height,c=t.data?.resolution||aT(e),l=Math.ceil(o*c),u=Math.ceil(s*c),d=__.get().createCanvas(l,u),f=d.getContext(`2d`);f.imageSmoothingEnabled=!0,f.imageSmoothingQuality=`high`,f.drawImage(a,0,0,o*c,s*c);let{parseAsGraphicsContext:p,...m}=t.data??{};return oT(new y_({resource:d,alphaMode:`premultiply-alpha-on-upload`,resolution:c,...m}),n,e)}async function dT(e){let t=await(await __.get().fetch(e)).text(),n=new ow;return n.svg(t),n}var fT=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`,pT=null,mT=class{constructor(){pT||=URL.createObjectURL(new Blob([fT],{type:`application/javascript`})),this.worker=new Worker(pT)}};mT.revokeObjectURL=function(){pT&&=(URL.revokeObjectURL(pT),null)};var hT=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`,gT=null,_T=class{constructor(){gT||=URL.createObjectURL(new Blob([hT],{type:`application/javascript`})),this.worker=new Worker(gT)}};_T.revokeObjectURL=function(){gT&&=(URL.revokeObjectURL(gT),null)};var vT=0,yT,bT=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported===void 0&&(this._isImageBitmapSupported=new Promise(e=>{let{worker:t}=new mT;t.addEventListener(`message`,n=>{t.terminate(),mT.revokeObjectURL(),e(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(e,t){return this._run(`loadImageBitmap`,[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||=!0}_getWorker(){yT===void 0&&(yT=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<yT&&(this._createdWorkers++,e=new _T().worker,e.addEventListener(`message`,e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error===void 0?this._resolveHash[e.uuid].resolve(e.data):this._resolveHash[e.uuid].reject(e.error),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();let n=new Promise((n,r)=>{this._queue.push({id:e,arguments:t,resolve:n,reject:r})});return this._next(),n}_next(){if(!this._queue.length)return;let e=this._getWorker();if(!e)return;let t=this._queue.pop(),n=t.id;this._resolveHash[vT]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:vT++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(Error(`WorkerManager has been reset before completion`))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}},xT=[`.jpeg`,`.jpg`,`.png`,`.webp`,`.avif`],ST=[`image/jpeg`,`image/png`,`image/webp`,`image/avif`];async function CT(e,t){let n=await __.get().fetch(e);if(!n.ok)throw Error(`[loadImageBitmap] Failed to fetch ${e}: ${n.status} ${n.statusText}`);let r=await n.blob();return t?.data?.alphaMode===`premultiplied-alpha`?createImageBitmap(r,{premultiplyAlpha:`none`}):createImageBitmap(r)}var wT={name:`loadTextures`,id:`texture`,extension:{type:X.LoadParser,priority:P_.High,name:`loadTextures`},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:`anonymous`},test(e){return Uw(e,ST)||Ww(e,xT)},async load(e,t,n){let r=null;return r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await bT.isImageBitmapSupported()?await bT.loadImageBitmap(e,t):await CT(e,t):await new Promise((t,n)=>{r=__.get().createImage(),r.crossOrigin=this.config.crossOrigin,r.src=e,r.complete?t(r):(r.onload=()=>{t(r)},r.onerror=n)}),oT(new y_({resource:r,alphaMode:`premultiply-alpha-on-upload`,resolution:t.data?.resolution||aT(e),...t.data}),n,e)},unload(e){e.destroy(!0)}},TT=[`.mp4`,`.m4v`,`.webm`,`.ogg`,`.ogv`,`.h264`,`.avi`,`.mov`],ET,DT;function OT(e,t,n){n===void 0&&!t.startsWith(`data:`)?e.crossOrigin=AT(t):n!==!1&&(e.crossOrigin=typeof n==`string`?n:`anonymous`)}function kT(e){return new Promise((t,n)=>{e.addEventListener(`canplaythrough`,r),e.addEventListener(`error`,i),e.load();function r(){a(),t()}function i(e){a(),n(e)}function a(){e.removeEventListener(`canplaythrough`,r),e.removeEventListener(`error`,i)}})}function AT(e,t=globalThis.location){if(e.startsWith(`data:`))return``;t||=globalThis.location;let n=new URL(e,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?`anonymous`:``}function jT(){let e=[],t=[];for(let n of TT){let r=D_.MIME_TYPES[n.substring(1)]||`video/${n.substring(1)}`;Iw(r)&&(e.push(n),t.includes(r)||t.push(r))}return{validVideoExtensions:e,validVideoMime:t}}var MT={name:`loadVideo`,id:`video`,extension:{type:X.LoadParser,name:`loadVideo`},test(e){if(!ET||!DT){let{validVideoExtensions:e,validVideoMime:t}=jT();ET=e,DT=t}let t=Uw(e,DT),n=Ww(e,ET);return t||n},async load(e,t,n){let r={...D_.defaultOptions,resolution:t.data?.resolution||aT(e),alphaMode:t.data?.alphaMode||await T_(),...t.data},i=document.createElement(`video`),a={preload:r.autoLoad===!1?void 0:`auto`,"webkit-playsinline":r.playsinline===!1?void 0:``,playsinline:r.playsinline===!1?void 0:``,muted:r.muted===!0?``:void 0,loop:r.loop===!0?``:void 0,autoplay:r.autoPlay===!1?void 0:``};Object.keys(a).forEach(e=>{let t=a[e];t!==void 0&&i.setAttribute(e,t)}),r.muted===!0&&(i.muted=!0),OT(i,e,r.crossorigin);let o=document.createElement(`source`),s;if(r.mime)s=r.mime;else if(e.startsWith(`data:`))s=e.slice(5,e.indexOf(`;`));else if(!e.startsWith(`blob:`)){let t=e.split(`?`)[0].slice(e.lastIndexOf(`.`)+1).toLowerCase();s=D_.MIME_TYPES[t]||`video/${t}`}return o.src=e,s&&(o.type=s),new Promise(a=>{let s=async()=>{let o=new D_({...r,resource:i});i.removeEventListener(`canplay`,s),t.data.preload&&await kT(i),a(oT(o,n,e))};r.preload&&!r.autoPlay&&i.load(),i.addEventListener(`canplay`,s),i.appendChild(o)})},unload(e){e.destroy(!0)}},NT={extension:{type:X.ResolveParser,name:`resolveTexture`},test:wT.test,parse:e=>({resolution:parseFloat(W_.RETINA_PREFIX.exec(e)?.[1]??`1`),format:e.split(`.`).pop(),src:e})},PT={extension:{type:X.ResolveParser,priority:-2,name:`resolveJson`},test:e=>W_.RETINA_PREFIX.test(e)&&e.endsWith(`.json`),parse:NT.parse},FT=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new W_,this.loader=new Hw,this.cache=k_,this._backgroundLoader=new kw(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){$(`[Assets]AssetManager already initialized, did you load before calling this Assets.init()?`);return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;typeof t==`string`&&(t=await this.load(t)),this.resolver.addManifest(t)}let t=e.texturePreference?.resolution??1,n=typeof t==`number`?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();let n=U_(e),r=O_(e).map(e=>{if(typeof e!=`string`){let t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),i=this.resolver.resolve(r),a=await this._mapLoadToResolve(i,t);return n?a[r[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e==`string`&&(n=!0,e=[e]);let r=this.resolver.resolveBundle(e),i={},a=Object.keys(r),o=0,s=[],c=()=>{t?.(s.reduce((e,t)=>e+t,0)/o)},l=a.map((e,t)=>{let n=r[e],a=Object.values(n),l=[...new Set(a.flat())].reduce((e,t)=>e+(t.progressSize||1),0);return s.push(0),o+=l,this._mapLoadToResolve(n,e=>{s[t]=e*l,c()}).then(t=>{i[e]=t})});return await Promise.all(l),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e==`string`&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e==`string`)return k_.get(e);let t={};for(let n=0;n<e.length;n++)t[n]=k_.get(e[n]);return t}async _mapLoadToResolve(e,t){let n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;let r=await this.loader.load(n,t);this._backgroundLoader.active=!0;let i={};return n.forEach(e=>{let t=r[e.src],n=[e.src];e.alias&&n.push(...e.alias),n.forEach(e=>{i[e]=t}),k_.set(n,t)}),i}async unload(e){this._initialized||await this.init();let t=O_(e).map(e=>typeof e==`string`?e:e.src),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=O_(e);let t=this.resolver.resolveBundle(e),n=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(n)}async _unloadFromResolved(e){let t=Object.values(e);t.forEach(e=>{k_.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((e,n)=>t.indexOf(e)===n),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(n=>{t.config[n]=e[n]})})}};Km.handleByList(X.LoadParser,FT.loader.parsers).handleByList(X.ResolveParser,FT.resolver.parsers).handleByList(X.CacheParser,FT.cache.parsers).handleByList(X.DetectionParser,FT.detections),Km.add(Aw,Pw,Mw,Bw,Lw,Rw,zw,qw,Xw,iT,lT,wT,MT,Ow,Dw,NT,PT);var IT={loader:X.LoadParser,resolver:X.ResolveParser,cache:X.CacheParser,detection:X.DetectionParser};Km.handle(X.Asset,e=>{let t=e.ref;Object.entries(IT).filter(([e])=>!!t[e]).forEach(([e,n])=>Km.add(Object.assign(t[e],{extension:t[e].extension??n})))},e=>{let t=e.ref;Object.keys(IT).filter(e=>!!t[e]).forEach(e=>Km.remove(t[e]))});var LT=class{constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement(`div`),this._domElement.style.position=`absolute`,this._domElement.style.top=`0`,this._domElement.style.left=`0`,this._domElement.style.pointerEvents=`none`,this._domElement.style.zIndex=`1000`}init(){this._canvasObserver=new Q_({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,t){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){let e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let t=0;t<e.length;t++){let n=e[t],r=n.element;if(!n.parent||n.globalDisplayStatus<7)r?.remove(),e.splice(t,1),t--;else{this._domElement.contains(r)||(r.style.position=`absolute`,r.style.pointerEvents=`auto`,this._domElement.appendChild(r));let e=n.worldTransform,t=n._anchor,i=n.width*t.x,a=n.height*t.y;r.style.transformOrigin=`${i}px ${a}px`,r.style.transform=`matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.tx-i}, ${e.ty-a})`,r.style.opacity=n.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)this._attachedDomElements[e].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}};LT.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`dom`};var RT=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(C_.system.add(this._tickerUpdate,this,b_.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&=(C_.system.remove(this._tickerUpdate,this),!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType===`touch`||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent(`pointermove`,{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent(`mousemove`,{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}},zT=class extends $_{constructor(){super(...arguments),this.client=new eh,this.movement=new eh,this.offset=new eh,this.global=new eh,this.screen=new eh}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return`getModifierState`in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m){throw Error(`Method not implemented.`)}},BT=class extends zT{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type===`pointermove`||this.type===`mousemove`||this.type===`touchmove`?[this]:[]}getPredictedEvents(){throw Error(`getPredictedEvents is not supported!`)}},VT=class extends zT{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};VT.DOM_DELTA_PIXEL=0,VT.DOM_DELTA_LINE=1,VT.DOM_DELTA_PAGE=2;var HT=2048,UT=new eh,WT=new eh,GT=class{constructor(e){this.dispatch=new Xm,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping(`pointerdown`,this.mapPointerDown),this.addEventMapping(`pointermove`,this.mapPointerMove),this.addEventMapping(`pointerout`,this.mapPointerOut),this.addEventMapping(`pointerleave`,this.mapPointerOut),this.addEventMapping(`pointerover`,this.mapPointerOver),this.addEventMapping(`pointerup`,this.mapPointerUp),this.addEventMapping(`pointerupoutside`,this.mapPointerUpOutside),this.addEventMapping(`wheel`,this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let n=0,r=t.length;n<r;n++)t[n].fn(e);else $(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){RT.pauseUpdate=!0;let n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?`hitTestMoveRecursive`:`hitTestRecursive`,r=this[n](this.rootTarget,this.rootTarget.eventMode,UT.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;let n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,i=n.length-1;r<i;r++)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let r=Array.isArray(t)?t:[t];for(let t=n.length-1;t>=0;t--)r.forEach(r=>{e.currentTarget=n[t],this.notifyTarget(e,r)})}propagationPath(e){let t=[e];for(let n=0;n<HT&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw Error(`Cannot find propagation path to disconnected target`);t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,r,i,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode===`dynamic`||t===`dynamic`)&&(RT.pauseUpdate=!1),e.interactiveChildren&&e.children){let s=e.children;for(let c=s.length-1;c>=0;c--){let l=s[c],u=this.hitTestMoveRecursive(l,this._isInteractive(t)?t:l.eventMode,n,r,i,a||i(e,n));if(u){if(u.length>0&&!u[u.length-1].parent)continue;let t=e.isInteractive();(u.length>0||t)&&(t&&this._allInteractiveElements.push(e),u.push(e)),this._hitElements.length===0&&(this._hitElements=u),o=!0}}}let s=this._isInteractive(t),c=e.isInteractive();return c&&c&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:s&&!i(e,n)&&r(e,n)?c?[e]:[]:null}hitTestRecursive(e,t,n,r,i){if(this._interactivePrune(e)||i(e,n))return null;if((e.eventMode===`dynamic`||t===`dynamic`)&&(RT.pauseUpdate=!1),e.interactiveChildren&&e.children){let a=e.children,o=n;for(let n=a.length-1;n>=0;n--){let s=a[n],c=this.hitTestRecursive(s,this._isInteractive(t)?t:s.eventMode,o,r,i);if(c){if(c.length>0&&!c[c.length-1].parent)continue;let t=e.isInteractive();return(c.length>0||t)&&c.push(e),c}}}let a=this._isInteractive(t),o=e.isInteractive();return a&&r(e,n)?o?[e]:[]:null}_isInteractive(e){return e===`static`||e===`dynamic`}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode===`none`||e.eventMode===`passive`&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,WT),!e.hitArea.contains(WT.x,WT.y)))return!0;if(e.effects&&e.effects.length)for(let n=0;n<e.effects.length;n++){let r=e.effects[n];if(r.containsPoint&&!r.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e?.containsPoint?(e.worldTransform.applyInverse(t,WT),e.containsPoint(WT)):!1}notifyTarget(e,t){if(!e.currentTarget.isInteractive())return;t??=e.type;let n=`on${t}`;e.currentTarget[n]?.(e);let r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}let t=this.createPointerEvent(e);if(this.dispatchEvent(t,`pointerdown`),t.pointerType===`touch`)this.dispatchEvent(t,`touchstart`);else if(t.pointerType===`mouse`||t.pointerType===`pen`){let e=t.button===2;this.dispatchEvent(t,e?`rightdown`:`mousedown`)}let n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let n=t.pointerType===`mouse`||t.pointerType===`pen`,r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.overTargets);if(r.overTargets?.length>0&&i!==t.target){let r=e.type===`mousemove`?`mouseout`:`pointerout`,a=this.createPointerEvent(e,r,i);if(this.dispatchEvent(a,`pointerout`),n&&this.dispatchEvent(a,`mouseout`),!t.composedPath().includes(i)){let r=this.createPointerEvent(e,`pointerleave`,i);for(r.eventPhase=r.AT_TARGET;r.target&&!t.composedPath().includes(r.target);)r.currentTarget=r.target,this.notifyTarget(r),n&&this.notifyTarget(r,`mouseleave`),r.target=r.target.parent;this.freeEvent(r)}this.freeEvent(a)}if(i!==t.target){let r=e.type===`mousemove`?`mouseover`:`pointerover`,a=this.clonePointerEvent(t,r);this.dispatchEvent(a,`pointerover`),n&&this.dispatchEvent(a,`mouseover`);let o=i?.parent;for(;o&&o!==this.rootTarget.parent&&o!==t.target;)o=o.parent;if(!o||o===this.rootTarget.parent){let e=this.clonePointerEvent(t,`pointerenter`);for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==i&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),n&&this.notifyTarget(e,`mouseenter`),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(a)}let a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push(`pointermove`):this.dispatchEvent(t,`pointermove`),o&&a.push(`globalpointermove`),t.pointerType===`touch`&&(this.moveOnAll?a.splice(1,0,`touchmove`):this.dispatchEvent(t,`touchmove`),o&&a.push(`globaltouchmove`)),n&&(this.moveOnAll?a.splice(1,0,`mousemove`):this.dispatchEvent(t,`mousemove`),o&&a.push(`globalmousemove`),this.cursor=t.target?.cursor),a.length>0&&this.all(t,a),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}let t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),r=n.pointerType===`mouse`||n.pointerType===`pen`;this.dispatchEvent(n,`pointerover`),r&&this.dispatchEvent(n,`mouseover`),n.pointerType===`mouse`&&(this.cursor=n.target?.cursor);let i=this.clonePointerEvent(n,`pointerenter`);for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),r&&this.notifyTarget(i,`mouseenter`),i.target=i.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(i)}mapPointerOut(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}let t=this.trackingData(e.pointerId);if(t.overTargets){let n=e.pointerType===`mouse`||e.pointerType===`pen`,r=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,`pointerout`,r);this.dispatchEvent(i),n&&this.dispatchEvent(i,`mouseout`);let a=this.createPointerEvent(e,`pointerleave`,r);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,`mouseleave`),a.target=a.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}let t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,`pointerup`),n.pointerType===`touch`)this.dispatchEvent(n,`touchend`);else if(n.pointerType===`mouse`||n.pointerType===`pen`){let e=n.button===2;this.dispatchEvent(n,e?`rightup`:`mouseup`)}let r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[e.button]),a=i;if(i&&!n.composedPath().includes(i)){let t=i;for(;t&&!n.composedPath().includes(t);){if(n.currentTarget=t,this.notifyTarget(n,`pointerupoutside`),n.pointerType===`touch`)this.notifyTarget(n,`touchendoutside`);else if(n.pointerType===`mouse`||n.pointerType===`pen`){let e=n.button===2;this.notifyTarget(n,e?`rightupoutside`:`mouseupoutside`)}t=t.parent}delete r.pressTargetsByButton[e.button],a=t}if(a){let i=this.clonePointerEvent(n,`click`);i.target=a,i.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:i.target,timeStamp:t});let o=r.clicksByButton[e.button];if(o.target===i.target&&t-o.timeStamp<200?++o.clickCount:o.clickCount=1,o.target=i.target,o.timeStamp=t,i.detail=o.clickCount,i.pointerType===`mouse`){let e=i.button===2;this.dispatchEvent(i,e?`rightclick`:`click`)}else i.pointerType===`touch`&&this.dispatchEvent(i,`tap`);this.dispatchEvent(i,`pointertap`),this.freeEvent(i)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof BT)){$(`EventBoundary cannot map a non-pointer event as a pointer event`);return}let t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){let i=n;for(;i;)r.currentTarget=i,this.notifyTarget(r,`pointerupoutside`),r.pointerType===`touch`?this.notifyTarget(r,`touchendoutside`):(r.pointerType===`mouse`||r.pointerType===`pen`)&&this.notifyTarget(r,r.button===2?`rightupoutside`:`mouseupoutside`),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof VT)){$(`EventBoundary cannot map a non-wheel event as a wheel event`);return}let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){let r=this.allocateEvent(BT);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=n??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof t==`string`&&(r.type=t),r}createWheelEvent(e){let t=this.allocateEvent(VT);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let n=this.allocateEvent(BT);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof BT&&t instanceof BT&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof zT&&t instanceof zT&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw Error(`It is illegal to free an event not managed by this EventBoundary!`);let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){let n=e.currentTarget._events[t];if(n)if(`fn`in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let r=0,i=n.length;r<i&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(t,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}},KT=1,qT={touchstart:`pointerdown`,touchend:`pointerup`,touchendoutside:`pointerupoutside`,touchmove:`pointermove`,touchcancel:`pointercancel`},JT=class e{constructor(t){this.supportsTouchEvents=`ontouchstart`in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new GT(null),RT.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new BT(null),this._rootWheelEvent=new VT(null),this.cursorStyles={default:`inherit`,pointer:`pointer`},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,n)=>(t===`globalMove`&&(this.rootBoundary.enableGlobalMoveEvents=n),e[t]=n,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){let{canvas:n,resolution:r}=this.renderer;this.setTargetElement(n),this.resolution=r,e._defaultEventMode=t.eventMode??`passive`,Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){RT.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||=`default`;let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;let n=this.cursorStyles[e];if(n)switch(typeof n){case`string`:t&&(this.domElement.style.cursor=n);break;case`function`:n(e);break;case`object`:t&&Object.assign(this.domElement.style,n);break}else t&&typeof e==`string`&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!(`cancelable`in e))&&e.preventDefault();for(let e=0,n=t.length;e<n;e++){let n=t[e],r=this._bootstrapEvent(this._rootPointerEvent,n);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,RT.pointerMoved();let t=this._normalizeToPointerData(e);for(let e=0,n=t.length;e<n;e++){let n=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let n=t===this.domElement?``:`outside`,r=this._normalizeToPointerData(e);for(let e=0,t=r.length;e<t;e++){let t=this._bootstrapEvent(this._rootPointerEvent,r[e]);t.type+=n,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this._normalizeToPointerData(e);for(let e=0,n=t.length;e<n;e++){let n=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,RT.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;RT.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming=`none`,e.msTouchAction=`none`):this.supportsPointerEvents&&(e.touchAction=`none`)),this.supportsPointerEvents?(globalThis.document.addEventListener(`pointermove`,this._onPointerMove,!0),this.domElement.addEventListener(`pointerdown`,this._onPointerDown,!0),this.domElement.addEventListener(`pointerleave`,this._onPointerOverOut,!0),this.domElement.addEventListener(`pointerover`,this._onPointerOverOut,!0),globalThis.addEventListener(`pointerup`,this._onPointerUp,!0)):(globalThis.document.addEventListener(`mousemove`,this._onPointerMove,!0),this.domElement.addEventListener(`mousedown`,this._onPointerDown,!0),this.domElement.addEventListener(`mouseout`,this._onPointerOverOut,!0),this.domElement.addEventListener(`mouseover`,this._onPointerOverOut,!0),globalThis.addEventListener(`mouseup`,this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener(`touchstart`,this._onPointerDown,!0),this.domElement.addEventListener(`touchend`,this._onPointerUp,!0),this.domElement.addEventListener(`touchmove`,this._onPointerMove,!0))),this.domElement.addEventListener(`wheel`,this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;RT.removeTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming=``,e.msTouchAction=``):this.supportsPointerEvents&&(e.touchAction=``)),this.supportsPointerEvents?(globalThis.document.removeEventListener(`pointermove`,this._onPointerMove,!0),this.domElement.removeEventListener(`pointerdown`,this._onPointerDown,!0),this.domElement.removeEventListener(`pointerleave`,this._onPointerOverOut,!0),this.domElement.removeEventListener(`pointerover`,this._onPointerOverOut,!0),globalThis.removeEventListener(`pointerup`,this._onPointerUp,!0)):(globalThis.document.removeEventListener(`mousemove`,this._onPointerMove,!0),this.domElement.removeEventListener(`mousedown`,this._onPointerDown,!0),this.domElement.removeEventListener(`mouseout`,this._onPointerOverOut,!0),this.domElement.removeEventListener(`mouseover`,this._onPointerOverOut,!0),globalThis.removeEventListener(`mouseup`,this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener(`touchstart`,this._onPointerDown,!0),this.domElement.removeEventListener(`touchend`,this._onPointerUp,!0),this.domElement.removeEventListener(`touchmove`,this._onPointerMove,!0))),this.domElement.removeEventListener(`wheel`,this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,n){let r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*i,e.y=(n-r.top)*(this.domElement.height/r.height)*i}_normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,r=e.changedTouches.length;n<r;n++){let r=e.changedTouches[n];r.button===void 0&&(r.button=0),r.buttons===void 0&&(r.buttons=1),r.isPrimary===void 0&&(r.isPrimary=e.touches.length===1&&e.type===`touchstart`),r.width===void 0&&(r.width=r.radiusX||1),r.height===void 0&&(r.height=r.radiusY||1),r.tiltX===void 0&&(r.tiltX=0),r.tiltY===void 0&&(r.tiltY=0),r.pointerType===void 0&&(r.pointerType=`touch`),r.pointerId===void 0&&(r.pointerId=r.identifier||0),r.pressure===void 0&&(r.pressure=r.force||.5),r.twist===void 0&&(r.twist=0),r.tangentialPressure===void 0&&(r.tangentialPressure=0),r.layerX===void 0&&(r.layerX=r.offsetX=r.clientX),r.layerY===void 0&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,r.type=e.type,t.push(r)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let n=e;n.isPrimary===void 0&&(n.isPrimary=!0),n.width===void 0&&(n.width=1),n.height===void 0&&(n.height=1),n.tiltX===void 0&&(n.tiltX=0),n.tiltY===void 0&&(n.tiltY=0),n.pointerType===void 0&&(n.pointerType=`mouse`),n.pointerId===void 0&&(n.pointerId=KT),n.pressure===void 0&&(n.pressure=.5),n.twist===void 0&&(n.twist=0),n.tangentialPressure===void 0&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){let t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type===`pointerleave`&&(e.type=`pointerout`),e.type.startsWith(`mouse`)&&(e.type=e.type.replace(`mouse`,`pointer`)),e.type.startsWith(`touch`)&&(e.type=qT[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};JT.extension={name:`events`,type:[X.WebGLSystem,X.CanvasSystem,X.WebGPUSystem],priority:-1},JT.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var YT=JT,XT={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode===`dynamic`||this.eventMode===`static`},set interactive(e){this.eventMode=e?`static`:`passive`},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??YT.defaultEventMode},set eventMode(e){this._internalEventMode=e},isInteractive(){return this.eventMode===`static`||this.eventMode===`dynamic`},interactiveChildren:!0,hitArea:null,addEventListener(e,t,n){let r=typeof n==`boolean`&&n||typeof n==`object`&&n.capture,i=typeof n==`object`?n.signal:void 0,a=typeof n==`object`?n.once===!0:!1,o=typeof t==`function`?void 0:t;e=r?`${e}capture`:e;let s=typeof t==`function`?t:t.handleEvent,c=this;i&&i.addEventListener(`abort`,()=>{c.off(e,s,o)}),a?c.once(e,s,o):c.on(e,s,o)},removeEventListener(e,t,n){let r=typeof n==`boolean`&&n||typeof n==`object`&&n.capture,i=typeof t==`function`?void 0:t;e=r?`${e}capture`:e,t=typeof t==`function`?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof $_))throw Error(`Container cannot propagate events outside of the Federated Events API`);return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}},ZT=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,QT=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`,$T=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`,eE=class extends wy{constructor(){let e=ay.from({vertex:{source:$T,entryPoint:`mainVertex`},fragment:{source:$T,entryPoint:`mainFragment`},name:`passthrough-filter`}),t=Jv.from({vertex:ZT,fragment:QT,name:`passthrough-filter`});super({gpuProgram:e,glProgram:t})}},tE=class{constructor(e){this._renderer=e}push(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:`filter`,canBundle:!1,action:`pushFilter`,container:t,filterEffect:e})}pop(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:`filter`,action:`popFilter`,canBundle:!1})}execute(e){e.action===`pushFilter`?this._renderer.filter.push(e):e.action===`popFilter`&&this._renderer.filter.pop()}destroy(){this._renderer=null}};tE.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`filter`};var nE=new Z;function rE(e,t){t.clear();let n=t.matrix;for(let n=0;n<e.length;n++){let r=e[n];if(r.globalDisplayStatus<7)continue;let i=r.renderGroup??r.parentRenderGroup;i?.isCachedAsTexture?t.matrix=nE.copyFrom(i.textureOffsetInverseTransform).append(r.worldTransform):i?._parentCacheAsTextureRenderGroup?t.matrix=nE.copyFrom(i._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(r.groupTransform):t.matrix=r.worldTransform,t.addBounds(r.bounds)}return t.matrix=n,t}var iE=new Ex({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:`float32x2`,stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])}),aE=class{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new Lh,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}},oE=class{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new uy({uInputSize:{value:new Float32Array(4),type:`vec4<f32>`},uInputPixel:{value:new Float32Array(4),type:`vec4<f32>`},uInputClamp:{value:new Float32Array(4),type:`vec4<f32>`},uOutputFrame:{value:new Float32Array(4),type:`vec4<f32>`},uGlobalFrame:{value:new Float32Array(4),type:`vec4<f32>`},uOutputTexture:{value:new Float32Array(4),type:`vec4<f32>`}}),this._globalFilterBindGroup=new dy({}),this.renderer=e}get activeBackTexture(){return this._activeFilterData?.backTexture}push(e){let t=this.renderer,n=e.filterEffect.filters,r=this._pushFilterData();r.skip=!1,r.filters=n,r.container=e.container,r.outputRenderSurface=t.renderTarget.renderSurface;let i=t.renderTarget.renderTarget.colorTexture.source,a=i.resolution,o=i.antialias;if(n.every(e=>!e.enabled)){r.skip=!0;return}let s=r.bounds;if(this._calculateFilterArea(e,s),this._calculateFilterBounds(r,t.renderTarget.rootViewPort,o,a,1),r.skip)return;let c=this._getPreviousFilterData(),l=this._findFilterResolution(a),u=0,d=0;c&&(u=c.bounds.minX,d=c.bounds.minY),this._calculateGlobalFrame(r,u,d,l,i.width,i.height),this._setupFilterTextures(r,s,t,c)}generateFilteredTexture({texture:e,filters:t}){let n=this._pushFilterData();this._activeFilterData=n,n.skip=!1,n.filters=t;let r=e.source,i=r.resolution,a=r.antialias;if(t.every(e=>!e.enabled))return n.skip=!0,e;let o=n.bounds;if(o.addRect(e.frame),this._calculateFilterBounds(n,o.rectangle,a,i,0),n.skip)return e;let s=i;this._calculateGlobalFrame(n,0,0,s,r.width,r.height),n.outputRenderSurface=$g.getOptimalTexture(o.width,o.height,n.resolution,n.antialias),n.backTexture=Q.EMPTY,n.inputTexture=e,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(n,!0);let c=n.outputRenderSurface;return c.source.alphaMode=`premultiplied-alpha`,c}pop(){let e=this.renderer,t=this._popFilterData();t.skip||(e.globalUniforms.pop(),e.renderTarget.finishRenderPass(),this._activeFilterData=t,this._applyFiltersToTexture(t,!1),t.blendRequired&&$g.returnTexture(t.backTexture),$g.returnTexture(t.inputTexture))}getBackTexture(e,t,n){let r=e.colorTexture.source._resolution,i=$g.getOptimalTexture(t.width,t.height,r,!1),a=t.minX,o=t.minY;n&&(a-=n.minX,o-=n.minY),a=Math.floor(a*r),o=Math.floor(o*r);let s=Math.ceil(t.width*r),c=Math.ceil(t.height*r);return this.renderer.renderTarget.copyToTexture(e,i,{x:a,y:o},{width:s,height:c},{x:0,y:0}),i}applyFilter(e,t,n,r){let i=this.renderer,a=this._activeFilterData,o=a.outputRenderSurface===n,s=i.renderTarget.rootRenderTarget.colorTexture.source._resolution,c=this._findFilterResolution(s),l=0,u=0;if(o){let e=this._findPreviousFilterOffset();l=e.x,u=e.y}this._updateFilterUniforms(t,n,a,l,u,c,o,r);let d=e.enabled?e:this._getPassthroughFilter();this._setupBindGroupsAndRender(d,t,i)}calculateSpriteMatrix(e,t){let n=this._activeFilterData,r=e.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),i=t.worldTransform.copyTo(Z.shared),a=t.renderGroup||t.parentRenderGroup;return a&&a.cacheToLocalTransform&&i.prepend(a.cacheToLocalTransform),i.invert(),r.prepend(i),r.scale(1/t.texture.orig.width,1/t.texture.orig.height),r.translate(t.anchor.x,t.anchor.y),r}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??=new eE,this._passthroughFilter}_setupBindGroupsAndRender(e,t,n){if(n.renderPipes.uniformBatch){let e=n.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(e,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,n.encoder.draw({geometry:iE,shader:e,state:e._state,topology:`triangle-list`}),n.type===fy.WEBGL&&n.renderTarget.finishRenderPass()}_setupFilterTextures(e,t,n,r){if(e.backTexture=Q.EMPTY,e.inputTexture=$g.getOptimalTexture(t.width,t.height,e.resolution,e.antialias),e.blendRequired){n.renderTarget.finishRenderPass();let i=n.renderTarget.getRenderTarget(e.outputRenderSurface);e.backTexture=this.getBackTexture(i,t,r?.bounds)}n.renderTarget.bind(e.inputTexture,!0),n.globalUniforms.push({offset:t})}_calculateGlobalFrame(e,t,n,r,i,a){let o=e.globalFrame;o.x=t*r,o.y=n*r,o.width=i*r,o.height=a*r}_updateFilterUniforms(e,t,n,r,i,a,o,s){let c=this._filterGlobalUniforms.uniforms,l=c.uOutputFrame,u=c.uInputSize,d=c.uInputPixel,f=c.uInputClamp,p=c.uGlobalFrame,m=c.uOutputTexture;o?(l[0]=n.bounds.minX-r,l[1]=n.bounds.minY-i):(l[0]=0,l[1]=0),l[2]=e.frame.width,l[3]=e.frame.height,u[0]=e.source.width,u[1]=e.source.height,u[2]=1/u[0],u[3]=1/u[1],d[0]=e.source.pixelWidth,d[1]=e.source.pixelHeight,d[2]=1/d[0],d[3]=1/d[1],f[0]=.5*d[2],f[1]=.5*d[3],f[2]=e.frame.width*u[2]-.5*d[2],f[3]=e.frame.height*u[3]-.5*d[3];let h=this.renderer.renderTarget.rootRenderTarget.colorTexture;p[0]=r*a,p[1]=i*a,p[2]=h.source.width*a,p[3]=h.source.height*a,t instanceof Q&&(t.source.resource=null);let g=this.renderer.renderTarget.getRenderTarget(t);this.renderer.renderTarget.bind(t,!!s),t instanceof Q?(m[0]=t.frame.width,m[1]=t.frame.height):(m[0]=g.width,m[1]=g.height),m[2]=g.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(e){let t=this._filterStackIndex-1;for(;t>0&&this._filterStack[t].skip;)--t;return t>0&&this._filterStack[t].inputTexture?this._filterStack[t].inputTexture.source._resolution:e}_findPreviousFilterOffset(){let e=0,t=0,n=this._filterStackIndex;for(;n>0;){n--;let r=this._filterStack[n];if(!r.skip){e=r.bounds.minX,t=r.bounds.minY;break}}return{x:e,y:t}}_calculateFilterArea(e,t){if(e.renderables?rE(e.renderables,t):e.filterEffect.filterArea?(t.clear(),t.addRect(e.filterEffect.filterArea),t.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,t),e.container){let n=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;n&&t.applyMatrix(n)}}_applyFiltersToTexture(e,t){let n=e.inputTexture,r=e.bounds,i=e.filters,a=e.firstEnabledIndex,o=e.lastEnabledIndex;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(e.backTexture.source,3),a===o)i[a].apply(this,n,e.outputRenderSurface,t);else{let n=e.inputTexture,s=$g.getOptimalTexture(r.width,r.height,n.source._resolution,!1),c=s;for(let e=a;e<o;e++){let t=i[e];if(!t.enabled)continue;t.apply(this,n,c,!0);let r=n;n=c,c=r}i[o].apply(this,n,e.outputRenderSurface,t),$g.returnTexture(s)}}_calculateFilterBounds(e,t,n,r,i){let a=this.renderer,o=e.bounds,s=e.filters,c=1/0,l=0,u=!0,d=!1,f=!1,p=!0,m=-1,h=-1;for(let e=0;e<s.length;e++){let t=s[e];if(t.enabled){if(m===-1&&(m=e),h=e,c=Math.min(c,t.resolution===`inherit`?r:t.resolution),l+=t.padding,t.antialias===`off`?u=!1:t.antialias===`inherit`&&(u&&=n),t.clipToViewport||(p=!1),!(t.compatibleRenderers&a.type)){f=!1;break}if(t.blendRequired&&!(a.backBuffer?.useBackBuffer??!0)){$("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),f=!1;break}f=!0,d||=t.blendRequired}}if(!f){e.skip=!0;return}if(p&&o.fitBounds(0,t.width/r,0,t.height/r),o.scale(c).ceil().scale(1/c).pad((l|0)*i),!o.isPositive){e.skip=!0;return}e.antialias=u,e.resolution=c,e.blendRequired=d,e.firstEnabledIndex=m,e.lastEnabledIndex=h}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let e,t=this._filterStackIndex-1;for(;t>0&&(t--,e=this._filterStack[t],e.skip););return e}_pushFilterData(){let e=this._filterStack[this._filterStackIndex];return e||=this._filterStack[this._filterStackIndex]=new aE,this._filterStackIndex++,e}};oE.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`filter`};var sE=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,cE=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,lE=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`,uE=class extends wy{constructor(e){let{sprite:t,...n}=e,r=new Ph(t.texture),i=new uy({uFilterMatrix:{value:new Z,type:`mat3x3<f32>`},uMaskClamp:{value:r.uClampFrame,type:`vec4<f32>`},uAlpha:{value:1,type:`f32`},uInverse:{value:e.inverse?1:0,type:`f32`}}),a=ay.from({vertex:{source:lE,entryPoint:`mainVertex`},fragment:{source:lE,entryPoint:`mainFragment`}}),o=Jv.from({vertex:cE,fragment:sE,name:`mask-filter`});super({...n,gpuProgram:a,glProgram:o,clipToViewport:!1,resources:{filterUniforms:i,uMaskTexture:t.texture.source}}),this.sprite=t,this._textureMatrix=r}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,n,r){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,n,r)}},dE=class e extends s_{constructor(e){e instanceof ow&&(e={context:e});let{context:t,roundPixels:n,...r}=e||{};super({label:`Graphics`,...r}),this.renderPipeId=`graphics`,t?this.context=t:(this.context=this._ownedContext=new ow,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context&&(this._context.off(`update`,this.onViewUpdate,this),this._context.off(`unload`,this.unload,this)),this._context=e,this._context.on(`update`,this.onViewUpdate,this),this._context.on(`unload`,this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod(`setFillStyle`,e)}setStrokeStyle(...e){return this._callContextMethod(`setStrokeStyle`,e)}fill(...e){return this._callContextMethod(`fill`,e)}stroke(...e){return this._callContextMethod(`stroke`,e)}texture(...e){return this._callContextMethod(`texture`,e)}beginPath(){return this._callContextMethod(`beginPath`,[])}cut(){return this._callContextMethod(`cut`,[])}arc(...e){return this._callContextMethod(`arc`,e)}arcTo(...e){return this._callContextMethod(`arcTo`,e)}arcToSvg(...e){return this._callContextMethod(`arcToSvg`,e)}bezierCurveTo(...e){return this._callContextMethod(`bezierCurveTo`,e)}closePath(){return this._callContextMethod(`closePath`,[])}ellipse(...e){return this._callContextMethod(`ellipse`,e)}circle(...e){return this._callContextMethod(`circle`,e)}path(...e){return this._callContextMethod(`path`,e)}lineTo(...e){return this._callContextMethod(`lineTo`,e)}moveTo(...e){return this._callContextMethod(`moveTo`,e)}quadraticCurveTo(...e){return this._callContextMethod(`quadraticCurveTo`,e)}rect(...e){return this._callContextMethod(`rect`,e)}roundRect(...e){return this._callContextMethod(`roundRect`,e)}poly(...e){return this._callContextMethod(`poly`,e)}regularPoly(...e){return this._callContextMethod(`regularPoly`,e)}roundPoly(...e){return this._callContextMethod(`roundPoly`,e)}roundShape(...e){return this._callContextMethod(`roundShape`,e)}filletRect(...e){return this._callContextMethod(`filletRect`,e)}chamferRect(...e){return this._callContextMethod(`chamferRect`,e)}star(...e){return this._callContextMethod(`star`,e)}svg(...e){return this._callContextMethod(`svg`,e)}restore(...e){return this._callContextMethod(`restore`,e)}save(){return this._callContextMethod(`save`,[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod(`resetTransform`,[])}rotateTransform(...e){return this._callContextMethod(`rotate`,e)}scaleTransform(...e){return this._callContextMethod(`scale`,e)}setTransform(...e){return this._callContextMethod(`setTransform`,e)}transform(...e){return this._callContextMethod(`transform`,e)}translateTransform(...e){return this._callContextMethod(`translate`,e)}clear(){return this._callContextMethod(`clear`,[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(t=!1){return t?new e(this._context.clone()):(this._ownedContext=null,new e(this._context))}lineStyle(e,t,n){xh(vh,`Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.`);let r={};return e&&(r.width=e),t&&(r.color=t),n&&(r.alpha=n),this.context.strokeStyle=r,this}beginFill(e,t){xh(vh,`Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.`);let n={};return e!==void 0&&(n.color=e),t!==void 0&&(n.alpha=t),this.context.fillStyle=n,this}endFill(){xh(vh,`Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.`),this.context.fill();let e=this.context.strokeStyle;return(e.width!==ow.defaultStrokeStyle.width||e.color!==ow.defaultStrokeStyle.color||e.alpha!==ow.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return xh(vh,`Graphics#drawCircle has been renamed to Graphics#circle`),this._callContextMethod(`circle`,e)}drawEllipse(...e){return xh(vh,`Graphics#drawEllipse has been renamed to Graphics#ellipse`),this._callContextMethod(`ellipse`,e)}drawPolygon(...e){return xh(vh,`Graphics#drawPolygon has been renamed to Graphics#poly`),this._callContextMethod(`poly`,e)}drawRect(...e){return xh(vh,`Graphics#drawRect has been renamed to Graphics#rect`),this._callContextMethod(`rect`,e)}drawRoundedRect(...e){return xh(vh,`Graphics#drawRoundedRect has been renamed to Graphics#roundRect`),this._callContextMethod(`roundRect`,e)}drawStar(...e){return xh(vh,`Graphics#drawStar has been renamed to Graphics#star`),this._callContextMethod(`star`,e)}},fE=class e extends Ex{constructor(...t){let n=t[0]??{};n instanceof Float32Array&&(xh(vh,`use new MeshGeometry({ positions, uvs, indices }) instead`),n={positions:n,uvs:t[1],indices:t[2]}),n={...e.defaultOptions,...n};let r=n.positions||new Float32Array([0,0,1,0,1,1,0,1]),i=n.uvs;i||=n.positions?new Float32Array(r.length):new Float32Array([0,0,1,0,1,1,0,1]);let a=n.indices||new Uint32Array([0,1,2,0,2,3]),o=n.shrinkBuffersToFit,s=new Sx({data:r,label:`attribute-mesh-positions`,shrinkToFit:o,usage:xx.VERTEX|xx.COPY_DST}),c=new Sx({data:i,label:`attribute-mesh-uvs`,shrinkToFit:o,usage:xx.VERTEX|xx.COPY_DST}),l=new Sx({data:a,label:`index-mesh-buffer`,shrinkToFit:o,usage:xx.INDEX|xx.COPY_DST});super({attributes:{aPosition:{buffer:s,format:`float32x2`,stride:8,offset:0},aUV:{buffer:c,format:`float32x2`,stride:8,offset:0}},indexBuffer:l,topology:n.topology}),this.batchMode=`auto`}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};fE.defaultOptions={topology:`triangle-list`,shrinkBuffersToFit:!1};var pE=fE,mE=null,hE=null;function gE(e,t){mE||(mE=__.get().createCanvas(256,128),hE=mE.getContext(`2d`,{willReadFrequently:!0}),hE.globalCompositeOperation=`copy`,hE.globalAlpha=1),(mE.width<e||mE.height<t)&&(mE.width=Ch(e),mE.height=Ch(t))}function _E(e,t,n){for(let r=0,i=4*n*t;r<t;++r,i+=4)if(e[i+3]!==0)return!1;return!0}function vE(e,t,n,r,i){let a=4*t;for(let t=r,o=r*a+4*n;t<=i;++t,o+=a)if(e[o+3]!==0)return!1;return!0}function yE(...e){let t=e[0];t.canvas||(t={canvas:e[0],resolution:e[1]});let{canvas:n}=t,r=Math.min(t.resolution??1,1),i=t.width??n.width,a=t.height??n.height,o=t.output;if(gE(i,a),!hE)throw TypeError(`Failed to get canvas 2D context`);hE.drawImage(n,0,0,i,a,0,0,i*r,a*r);let s=hE.getImageData(0,0,i,a).data,c=0,l=0,u=i-1,d=a-1;for(;l<a&&_E(s,i,l);)++l;if(l===a)return mh.EMPTY;for(;_E(s,i,d);)--d;for(;vE(s,i,c,l,d);)++c;for(;vE(s,i,u,l,d);)--u;return++u,++d,hE.globalCompositeOperation=`source-over`,hE.strokeRect(c,l,u-c,d-l),hE.globalCompositeOperation=`copy`,o??=new mh,o.set(c/r,l/r,(u-c)/r,(d-l)/r),o}var bE=new mh,xE=new class{getCanvasAndContext(e){let{text:t,style:n,resolution:r=1}=e,i=n._getFinalPadding(),a=Pb.measureText(t||` `,n),o=Math.ceil(Math.ceil(Math.max(1,a.width)+i*2)*r),s=Math.ceil(Math.ceil(Math.max(1,a.height)+i*2)*r),c=uw.getOptimalCanvasAndContext(o,s);return this._renderTextToCanvas(t,n,i,r,c),{canvasAndContext:c,frame:n.trim?yE({canvas:c.canvas,width:o,height:s,resolution:1,output:bE}):bE.set(0,0,o,s)}}returnCanvasAndContext(e){uw.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,n,r,i){let{canvas:a,context:o}=i,s=jb(t),c=Pb.measureText(e||` `,t),l=c.lines,u=c.lineHeight,d=c.lineWidths,f=c.maxLineWidth,p=c.fontProperties,m=a.height;if(o.resetTransform(),o.scale(r,r),o.textBaseline=t.textBaseline,t._stroke?.width){let e=t._stroke;o.lineWidth=e.width,o.miterLimit=e.miterLimit,o.lineJoin=e.join,o.lineCap=e.cap}o.font=s;let h,g,_=t.dropShadow?2:1;for(let e=0;e<_;++e){let a=t.dropShadow&&e===0,s=a?Math.ceil(Math.max(1,m)+n*2):0,_=s*r;if(a){o.fillStyle=`black`,o.strokeStyle=`black`;let e=t.dropShadow,n=e.color,i=e.alpha;o.shadowColor=hg.shared.setValue(n).setAlpha(i).toRgbaString();let a=e.blur*r,s=e.distance*r;o.shadowBlur=a,o.shadowOffsetX=Math.cos(e.angle)*s,o.shadowOffsetY=Math.sin(e.angle)*s+_}else{if(o.fillStyle=t._fill?fw(t._fill,o,c,n*2):null,t._stroke?.width){let e=t._stroke.width*.5+n*2;o.strokeStyle=fw(t._stroke,o,c,e)}o.shadowColor=`black`}let v=(u-p.fontSize)/2;u-p.fontSize<0&&(v=0);let y=t._stroke?.width??0;for(let e=0;e<l.length;e++)h=y/2,g=y/2+e*u+p.ascent+v,t.align===`right`?h+=f-d[e]:t.align===`center`&&(h+=(f-d[e])/2),t._stroke?.width&&this._drawLetterSpacing(l[e],t,i,h+n,g+n-s,!0),t._fill!==void 0&&this._drawLetterSpacing(l[e],t,i,h+n,g+n-s)}}_drawLetterSpacing(e,t,n,r,i,a=!1){let{context:o}=n,s=t.letterSpacing,c=!1;if(Pb.experimentalLetterSpacingSupported&&(Pb.experimentalLetterSpacing?(o.letterSpacing=`${s}px`,o.textLetterSpacing=`${s}px`,c=!0):(o.letterSpacing=`0px`,o.textLetterSpacing=`0px`)),s===0||c){a?o.strokeText(e,r,i):o.fillText(e,r,i);return}let l=r,u=Pb.graphemeSegmenter(e),d=o.measureText(e).width,f=0;for(let e=0;e<u.length;++e){let t=u[e];a?o.strokeText(t,l,i):o.fillText(t,l,i);let n=``;for(let t=e+1;t<u.length;++t)n+=u[t];f=o.measureText(n).width,l+=d-f+s,d=f}}},SE=`http://www.w3.org/2000/svg`,CE=`http://www.w3.org/1999/xhtml`,wE=class{constructor(){this.svgRoot=document.createElementNS(SE,`svg`),this.foreignObject=document.createElementNS(SE,`foreignObject`),this.domElement=document.createElementNS(CE,`div`),this.styleElement=document.createElementNS(CE,`style`);let{foreignObject:e,svgRoot:t,styleElement:n,domElement:r}=this;e.setAttribute(`width`,`10000`),e.setAttribute(`height`,`10000`),e.style.overflow=`hidden`,t.appendChild(e),e.appendChild(n),e.appendChild(r),this.image=__.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src=``,this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}},TE;function EE(e,t,n,r){r||=TE||=new wE;let{domElement:i,styleElement:a,svgRoot:o}=r;i.innerHTML=`<style>${t.cssStyle};</style><div style='padding:0'>${e}</div>`,i.setAttribute(`style`,`transform-origin: top left; display: inline-block`),n&&(a.textContent=n),document.body.appendChild(o);let s=i.getBoundingClientRect();o.remove();let c=t.padding*2;return{width:s.width-c,height:s.height-c}}var DE=class{constructor(){this._tempState=Sy.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,n){let r=e.renderer,i=this._didUploadHash[n.uid];r.shader.bind(n,i),i||(this._didUploadHash[n.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(t,n.glProgram)}execute(e,t){let n=e.renderer;this._tempState.blendMode=t.blendMode,n.state.set(this._tempState);let r=t.textures.textures;for(let e=0;e<t.textures.count;e++)n.texture.bind(r[e],e);n.geometry.draw(t.topology,t.size,t.start)}};DE.extension={type:[X.WebGLPipesAdaptor],name:`batch`};var OE=Sy.for2d(),kE=class{start(e,t,n){let r=e.renderer,i=r.encoder,a=n.gpuProgram;this._shader=n,this._geometry=t,i.setGeometry(t,a),OE.blendMode=`normal`,r.pipeline.getPipeline(t,a,OE);let o=r.globalUniforms.bindGroup;i.resetBindGroup(1),i.setBindGroup(0,o,a)}execute(e,t){let n=this._shader.gpuProgram,r=e.renderer,i=r.encoder;if(!t.bindGroup){let e=t.textures;t.bindGroup=ex(e.textures,e.count,r.limits.maxBatchableTextures)}OE.blendMode=t.blendMode;let a=r.bindGroup.getBindGroup(t.bindGroup,n,1),o=r.pipeline.getPipeline(this._geometry,n,OE,t.topology);t.bindGroup._touch(r.gc.now,r.tick),i.setPipeline(o),i.renderPassEncoder.setBindGroup(1,a),i.renderPassEncoder.drawIndexed(t.size,1,t.start)}};kE.extension={type:[X.WebGPUPipesAdaptor],name:`batch`};var AE=class e{constructor(e,t){this.state=Sy.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=t,this._adaptor.init?.(this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];for(let n in t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||=new vS({maxTextures:this.renderer.limits.maxBatchableTextures})),this._activeBatches=t,this._activeBatch=this._activeBatches.default,this._activeBatches)this._activeBatches[n].begin()}addToBatch(t,n){if(this._activeBatch.name!==t.batcherName){this._activeBatch.break(n);let r=this._activeBatches[t.batcherName];r||(r=this._activeBatches[t.batcherName]=e.getBatcher(t.batcherName),r.begin()),this._activeBatch=r}this._activeBatch.add(t)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);let t=this._activeBatches;for(let e in t){let n=t[e],r=n.geometry;r.indexBuffer.setDataWithSize(n.indexBuffer,n.indexSize,!0),r.buffers[0].setDataWithSize(n.attributeBuffer.float32View,n.attributeSize,!1)}}upload(e){let t=this._batchersByInstructionSet[e.uid];for(let e in t){let n=t[e],r=n.geometry;n.dirty&&(n.dirty=!1,r.buffers[0].update(n.attributeSize*4))}}execute(e){if(e.action===`startBatch`){let t=e.batcher,n=t.geometry,r=t.shader;this._adaptor.start(this,n,r)}this._adaptor.execute(this,e)}destroy(){for(let e in this.state=null,this.renderer=null,this._adaptor=null,this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};AE.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`batch`},AE._availableBatchers=Object.create(null);var jE=AE;Km.handleByMap(X.Batcher,jE._availableBatchers),Km.add(vS);var ME={name:`local-uniform-bit`,vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},NE={...ME,vertex:{...ME.vertex,header:ME.vertex.header.replace(`group(1)`,`group(2)`)}},PE={name:`local-uniform-bit`,vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},FE={name:`texture-bit`,vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},IE={name:`texture-bit`,vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},LE=new Lh,RE=class extends Eg{constructor(){super(),this.filters=[new uE({sprite:new c_(Q.EMPTY),inverse:!1,resolution:`inherit`,antialias:`inherit`})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}},zE=class{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,n){let r=this._renderer;if(r.renderPipes.batch.break(n),n.add({renderPipeId:`alphaMask`,action:`pushMaskBegin`,mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){let t=e.mask;t.includeInBuild=!0,t.collectRenderables(n,r,null),t.includeInBuild=!1}r.renderPipes.batch.break(n),n.add({renderPipeId:`alphaMask`,action:`pushMaskEnd`,mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:`alphaMask`,action:`popMaskEnd`,mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){let t=this._renderer,n=e.mask.renderMaskToTexture;if(e.action===`pushMaskBegin`){let r=xg.get(RE);if(r.inverse=e.inverse,n){e.mask.mask.measurable=!0;let n=Pg(e.mask.mask,!0,LE);e.mask.mask.measurable=!1,n.ceil();let i=t.renderTarget.renderTarget.colorTexture.source,a=$g.getOptimalTexture(n.width,n.height,i._resolution,i.antialias);t.renderTarget.push(a,!0),t.globalUniforms.push({offset:n,worldColor:4294967295});let o=r.sprite;o.texture=a,o.worldTransform.tx=n.minX,o.worldTransform.ty=n.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer,filterTexture:a})}else r.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:e.maskedContainer})}else if(e.action===`pushMaskEnd`){let e=this._activeMaskStage[this._activeMaskStage.length-1];n&&(t.type===fy.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:`filter`,action:`pushFilter`,container:e.maskedContainer,filterEffect:e.filterEffect,canBundle:!1})}else if(e.action===`popMaskEnd`){t.filter.pop();let e=this._activeMaskStage.pop();n&&$g.returnTexture(e.filterTexture),xg.return(e.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}};zE.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`alphaMask`};var BE=class{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,n){this._renderer.renderPipes.batch.break(n);let r=this._colorStack;r[this._colorStackIndex]=r[this._colorStackIndex-1]&e.mask;let i=this._colorStack[this._colorStackIndex];i!==this._currentColor&&(this._currentColor=i,n.add({renderPipeId:`colorMask`,colorMask:i,canBundle:!1})),this._colorStackIndex++}pop(e,t,n){this._renderer.renderPipes.batch.break(n);let r=this._colorStack;this._colorStackIndex--;let i=r[this._colorStackIndex-1];i!==this._currentColor&&(this._currentColor=i,n.add({renderPipeId:`colorMask`,colorMask:i,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._renderer=null,this._colorStack=null}};BE.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`colorMask`};var VE=class{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,n){var r;let i=e,a=this._renderer;a.renderPipes.batch.break(n),a.renderPipes.blendMode.setBlendMode(i.mask,`none`,n),n.add({renderPipeId:`stencilMask`,action:`pushMaskBegin`,mask:e,inverse:t._maskOptions.inverse,canBundle:!1});let o=i.mask;o.includeInBuild=!0,this._maskHash.has(i)||this._maskHash.set(i,{instructionsStart:0,instructionsLength:0});let s=this._maskHash.get(i);s.instructionsStart=n.instructionSize,o.collectRenderables(n,a,null),o.includeInBuild=!1,a.renderPipes.batch.break(n),n.add({renderPipeId:`stencilMask`,action:`pushMaskEnd`,mask:e,inverse:t._maskOptions.inverse,canBundle:!1}),s.instructionsLength=n.instructionSize-s.instructionsStart-1;let c=a.renderTarget.renderTarget.uid;(r=this._maskStackHash)[c]??(r[c]=0)}pop(e,t,n){let r=e,i=this._renderer;i.renderPipes.batch.break(n),i.renderPipes.blendMode.setBlendMode(r.mask,`none`,n),n.add({renderPipeId:`stencilMask`,action:`popMaskBegin`,inverse:t._maskOptions.inverse,canBundle:!1});let a=this._maskHash.get(e);for(let e=0;e<a.instructionsLength;e++)n.instructions[n.instructionSize++]=n.instructions[a.instructionsStart++];n.add({renderPipeId:`stencilMask`,action:`popMaskEnd`,canBundle:!1})}execute(e){var t;let n=this._renderer,r=n.renderTarget.renderTarget.uid,i=(t=this._maskStackHash)[r]??(t[r]=0);e.action===`pushMaskBegin`?(n.renderTarget.ensureDepthStencil(),n.stencil.setStencilMode(ax.RENDERING_MASK_ADD,i),i++,n.colorMask.setMask(0)):e.action===`pushMaskEnd`?(e.inverse?n.stencil.setStencilMode(ax.INVERSE_MASK_ACTIVE,i):n.stencil.setStencilMode(ax.MASK_ACTIVE,i),n.colorMask.setMask(15)):e.action===`popMaskBegin`?(n.colorMask.setMask(0),i===0?(n.renderTarget.clear(null,lb.STENCIL),n.stencil.setStencilMode(ax.DISABLED,i)):n.stencil.setStencilMode(ax.RENDERING_MASK_REMOVE,i),i--):e.action===`popMaskEnd`&&(e.inverse?n.stencil.setStencilMode(ax.INVERSE_MASK_ACTIVE,i):n.stencil.setStencilMode(ax.MASK_ACTIVE,i),n.colorMask.setMask(15)),this._maskStackHash[r]=i}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}};VE.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`stencilMask`};var HE=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]=`ELEMENT_ARRAY_BUFFER`,e[e.ARRAY_BUFFER=34962]=`ARRAY_BUFFER`,e[e.UNIFORM_BUFFER=35345]=`UNIFORM_BUFFER`,e))(HE||{}),UE=class{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}destroy(){this.buffer=null,this.updateID=-1,this.byteLength=-1,this.type=-1,this._lastBindBaseLocation=-1,this._lastBindCallId=-1}},WE=class{constructor(e){this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._managedBuffers=new yS({renderer:e,type:`resource`,onUnload:this.onBufferUnload.bind(this),name:`glBuffer`})}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gl=null,this._boundBufferBases={}}contextChange(){this._gl=this._renderer.gl,this.destroyAll(!0),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this.createGLBuffer(e)}bind(e){let{_gl:t}=this,n=this.getGlBuffer(e);t.bindBuffer(n.type,n.buffer)}bindBufferBase(e,t){let{_gl:n}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,n.bindBufferBase(n.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let n=0,r=this._nextBindBaseIndex;for(;n<2;){r>=this._maxBindings&&(r=this._minBaseLocation,n++);let e=this._boundBufferBases[r];if(e&&e._lastBindCallId===this._bindCallId){r++;continue}break}return t=r,this._nextBindBaseIndex=r+1,n>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){let t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,n,r){let{_gl:i}=this;n||=0,t||=0,this._boundBufferBases[t]=null,i.bindBufferRange(i.UNIFORM_BUFFER,t||0,e.buffer,n*256,r||256)}updateBuffer(e){let{_gl:t}=this,n=this.getGlBuffer(e);if(e._updateID===n.updateID)return n;n.updateID=e._updateID,t.bindBuffer(n.type,n.buffer);let r=e.data,i=e.descriptor.usage&xx.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return r?n.byteLength>=r.byteLength?t.bufferSubData(n.type,0,r,0,e._updateSize/r.BYTES_PER_ELEMENT):(n.byteLength=r.byteLength,t.bufferData(n.type,r,i)):(n.byteLength=e.descriptor.size,t.bufferData(n.type,n.byteLength,i)),n}destroyAll(e=!1){this._managedBuffers.removeAll(e)}onBufferUnload(e,t=!1){let n=e._gpuData[this._renderer.uid];n&&(t||this._gl.deleteBuffer(n.buffer))}createGLBuffer(e){let{_gl:t}=this,n=HE.ARRAY_BUFFER;e.descriptor.usage&xx.INDEX?n=HE.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&xx.UNIFORM&&(n=HE.UNIFORM_BUFFER);let r=new UE(t.createBuffer(),n);return e._gpuData[this._renderer.uid]=r,this._managedBuffers.add(e),r}resetState(){this._boundBufferBases=Object.create(null)}};WE.extension={type:[X.WebGLSystem],name:`buffer`};var GE=class e{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(t){t={...e.defaultOptions,...t};let n=this.multiView=t.multiView;if(t.context&&n&&($(`Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together.`),n=!1),n?this.canvas=__.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,t.context)this.initFromContext(t.context);else{let e=this._renderer.background.alpha<1,n=t.premultipliedAlpha??!0,r=t.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(t.preferWebGLVersion,{alpha:e,premultipliedAlpha:n,antialias:r,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference??`default`})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&$(`multiView is disabled, but targetCanvas is not the main canvas`);return}let{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof __.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);let t=this._renderer.view.canvas;t.addEventListener(`webglcontextlost`,this.handleContextLost,!1),t.addEventListener(`webglcontextrestored`,this.handleContextRestored,!1)}createContext(e,t){let n,r=this.canvas;if(e===2&&(n=r.getContext(`webgl2`,t)),!n&&(n=r.getContext(`webgl`,t),!n))throw Error(`This browser does not support WebGL. Try using the canvas renderer`);this.gl=n,this.initFromContext(this.gl)}getExtensions(){let{gl:e}=this,t={anisotropicFiltering:e.getExtension(`EXT_texture_filter_anisotropic`),floatTextureLinear:e.getExtension(`OES_texture_float_linear`),s3tc:e.getExtension(`WEBGL_compressed_texture_s3tc`),s3tc_sRGB:e.getExtension(`WEBGL_compressed_texture_s3tc_srgb`),etc:e.getExtension(`WEBGL_compressed_texture_etc`),etc1:e.getExtension(`WEBGL_compressed_texture_etc1`),pvrtc:e.getExtension(`WEBGL_compressed_texture_pvrtc`)||e.getExtension(`WEBKIT_WEBGL_compressed_texture_pvrtc`),atc:e.getExtension(`WEBGL_compressed_texture_atc`),astc:e.getExtension(`WEBGL_compressed_texture_astc`),bptc:e.getExtension(`EXT_texture_compression_bptc`),rgtc:e.getExtension(`EXT_texture_compression_rgtc`),loseContext:e.getExtension(`WEBGL_lose_context`)};if(this.webGLVersion===1)this.extensions={...t,drawBuffers:e.getExtension(`WEBGL_draw_buffers`),depthTexture:e.getExtension(`WEBGL_depth_texture`),vertexArrayObject:e.getExtension(`OES_vertex_array_object`)||e.getExtension(`MOZ_OES_vertex_array_object`)||e.getExtension(`WEBKIT_OES_vertex_array_object`),uint32ElementIndex:e.getExtension(`OES_element_index_uint`),floatTexture:e.getExtension(`OES_texture_float`),floatTextureLinear:e.getExtension(`OES_texture_float_linear`),textureHalfFloat:e.getExtension(`OES_texture_half_float`),textureHalfFloatLinear:e.getExtension(`OES_texture_half_float_linear`),vertexAttribDivisorANGLE:e.getExtension(`ANGLE_instanced_arrays`),srgb:e.getExtension(`EXT_sRGB`)};else{this.extensions={...t,colorBufferFloat:e.getExtension(`EXT_color_buffer_float`)};let n=e.getExtension(`WEBGL_provoking_vertex`);n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener(`webglcontextlost`,this.handleContextLost),e.removeEventListener(`webglcontextrestored`,this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){let t=e.getContextAttributes();t&&!t.stencil&&$(`Provided WebGL context does not have a stencil buffer, masks may not render correctly`);let n=this.supports,r=this.webGLVersion===2,i=this.extensions;n.uint32Indices=r||!!i.uint32ElementIndex,n.uniformBufferObject=r,n.vertexArrayObject=r||!!i.vertexArrayObject,n.srgbTextures=r||!!i.srgb,n.nonPowOf2wrapping=r,n.nonPowOf2mipmaps=r,n.msaa=r,n.uint32Indices||$(`Provided WebGL context does not support 32 index buffer, large scenes may not render correctly`)}};GE.extension={type:[X.WebGLSystem],name:`context`},GE.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};var KE=GE;function qE(e,t){for(let n in e.attributes){let r=e.attributes[n],i=t[n];i?(r.format??=i.format,r.offset??=i.offset,r.instance??=i.instance):$(`Attribute ${n} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}JE(e)}function JE(e){let{buffers:t,attributes:n}=e,r={},i={};for(let e in t){let n=t[e];r[n.uid]=0,i[n.uid]=0}for(let e in n){let t=n[e];r[t.buffer.uid]+=Xv(t.format).stride}for(let e in n){let t=n[e];t.stride??=r[t.buffer.uid],t.start??=i[t.buffer.uid],i[t.buffer.uid]+=Xv(t.format).stride}}var YE=(e=>(e[e.RGBA=6408]=`RGBA`,e[e.RGB=6407]=`RGB`,e[e.RG=33319]=`RG`,e[e.RED=6403]=`RED`,e[e.RGBA_INTEGER=36249]=`RGBA_INTEGER`,e[e.RGB_INTEGER=36248]=`RGB_INTEGER`,e[e.RG_INTEGER=33320]=`RG_INTEGER`,e[e.RED_INTEGER=36244]=`RED_INTEGER`,e[e.ALPHA=6406]=`ALPHA`,e[e.LUMINANCE=6409]=`LUMINANCE`,e[e.LUMINANCE_ALPHA=6410]=`LUMINANCE_ALPHA`,e[e.DEPTH_COMPONENT=6402]=`DEPTH_COMPONENT`,e[e.DEPTH_STENCIL=34041]=`DEPTH_STENCIL`,e))(YE||{}),XE=(e=>(e[e.TEXTURE_2D=3553]=`TEXTURE_2D`,e[e.TEXTURE_CUBE_MAP=34067]=`TEXTURE_CUBE_MAP`,e[e.TEXTURE_2D_ARRAY=35866]=`TEXTURE_2D_ARRAY`,e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=`TEXTURE_CUBE_MAP_POSITIVE_X`,e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=`TEXTURE_CUBE_MAP_NEGATIVE_X`,e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=`TEXTURE_CUBE_MAP_POSITIVE_Y`,e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=`TEXTURE_CUBE_MAP_NEGATIVE_Y`,e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=`TEXTURE_CUBE_MAP_POSITIVE_Z`,e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=`TEXTURE_CUBE_MAP_NEGATIVE_Z`,e))(XE||{}),ZE=(e=>(e[e.UNSIGNED_BYTE=5121]=`UNSIGNED_BYTE`,e[e.UNSIGNED_SHORT=5123]=`UNSIGNED_SHORT`,e[e.UNSIGNED_SHORT_5_6_5=33635]=`UNSIGNED_SHORT_5_6_5`,e[e.UNSIGNED_SHORT_4_4_4_4=32819]=`UNSIGNED_SHORT_4_4_4_4`,e[e.UNSIGNED_SHORT_5_5_5_1=32820]=`UNSIGNED_SHORT_5_5_5_1`,e[e.UNSIGNED_INT=5125]=`UNSIGNED_INT`,e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]=`UNSIGNED_INT_10F_11F_11F_REV`,e[e.UNSIGNED_INT_2_10_10_10_REV=33640]=`UNSIGNED_INT_2_10_10_10_REV`,e[e.UNSIGNED_INT_24_8=34042]=`UNSIGNED_INT_24_8`,e[e.UNSIGNED_INT_5_9_9_9_REV=35902]=`UNSIGNED_INT_5_9_9_9_REV`,e[e.BYTE=5120]=`BYTE`,e[e.SHORT=5122]=`SHORT`,e[e.INT=5124]=`INT`,e[e.FLOAT=5126]=`FLOAT`,e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=`FLOAT_32_UNSIGNED_INT_24_8_REV`,e[e.HALF_FLOAT=36193]=`HALF_FLOAT`,e))(ZE||{}),QE={uint8x2:ZE.UNSIGNED_BYTE,uint8x4:ZE.UNSIGNED_BYTE,sint8x2:ZE.BYTE,sint8x4:ZE.BYTE,unorm8x2:ZE.UNSIGNED_BYTE,unorm8x4:ZE.UNSIGNED_BYTE,snorm8x2:ZE.BYTE,snorm8x4:ZE.BYTE,uint16x2:ZE.UNSIGNED_SHORT,uint16x4:ZE.UNSIGNED_SHORT,sint16x2:ZE.SHORT,sint16x4:ZE.SHORT,unorm16x2:ZE.UNSIGNED_SHORT,unorm16x4:ZE.UNSIGNED_SHORT,snorm16x2:ZE.SHORT,snorm16x4:ZE.SHORT,float16x2:ZE.HALF_FLOAT,float16x4:ZE.HALF_FLOAT,float32:ZE.FLOAT,float32x2:ZE.FLOAT,float32x3:ZE.FLOAT,float32x4:ZE.FLOAT,uint32:ZE.UNSIGNED_INT,uint32x2:ZE.UNSIGNED_INT,uint32x3:ZE.UNSIGNED_INT,uint32x4:ZE.UNSIGNED_INT,sint32:ZE.INT,sint32x2:ZE.INT,sint32x3:ZE.INT,sint32x4:ZE.INT};function $E(e){return QE[e]??QE.float32}var eD={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5},tD=class{constructor(){this.vaoCache=Object.create(null)}destroy(){this.vaoCache=Object.create(null)}},nD=class{constructor(e){this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._managedGeometries=new yS({renderer:e,type:`resource`,onUnload:this.onGeometryUnload.bind(this),name:`glGeometry`})}contextChange(){let e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw Error(`[PixiJS] Vertex Array Objects are not supported on this device`);this.destroyAll(!0);let t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e));let n=this._renderer.context.extensions.vertexAttribDivisorANGLE;n&&(e.drawArraysInstanced=(e,t,r,i)=>{n.drawArraysInstancedANGLE(e,t,r,i)},e.drawElementsInstanced=(e,t,r,i,a)=>{n.drawElementsInstancedANGLE(e,t,r,i,a)},e.vertexAttribDivisor=(e,t)=>n.vertexAttribDivisorANGLE(e,t)),this._activeGeometry=null,this._activeVao=null}bind(e,t){let n=this.gl;this._activeGeometry=e;let r=this.getVao(e,t);this._activeVao!==r&&(this._activeVao=r,n.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this._renderer.buffer;for(let n=0;n<e.buffers.length;n++){let r=e.buffers[n];t.updateBuffer(r)}e._gcLastUsed=this._renderer.gc.now}checkCompatibility(e,t){let n=e.attributes,r=t._attributeData;for(let e in r)if(!n[e])throw Error(`shader and geometry incompatible, geometry missing the "${e}" attribute`)}getSignature(e,t){let n=e.attributes,r=t._attributeData,i=[`g`,e.uid];for(let e in n)r[e]&&i.push(e,r[e].location);return i.join(`-`)}getVao(e,t){return e._gpuData[this._renderer.uid]?.vaoCache[t._key]||this.initGeometryVao(e,t)}initGeometryVao(e,t,n=!0){let r=this._renderer.gl,i=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);let a=this.getSignature(e,t),o=new tD;e._gpuData[this._renderer.uid]=o,this._managedGeometries.add(e);let s=o.vaoCache,c=s[a];if(c)return s[t._key]=c,c;qE(e,t._attributeData);let l=e.buffers;c=r.createVertexArray(),r.bindVertexArray(c);for(let e=0;e<l.length;e++){let t=l[e];i.bind(t)}return this.activateVao(e,t),s[t._key]=c,s[a]=c,r.bindVertexArray(null),c}onGeometryUnload(e,t=!1){let n=e._gpuData[this._renderer.uid];if(!n)return;let r=n.vaoCache;if(!t)for(let e in r)this._activeVao!==r[e]&&this.resetState(),this.gl.deleteVertexArray(r[e])}destroyAll(e=!1){this._managedGeometries.removeAll(e)}activateVao(e,t){let n=this._renderer.gl,r=this._renderer.buffer,i=e.attributes;e.indexBuffer&&r.bind(e.indexBuffer);let a=null;for(let e in i){let o=i[e],s=o.buffer,c=r.getGlBuffer(s),l=t._attributeData[e];if(l){a!==c&&(r.bind(s),a=c);let e=l.location;n.enableVertexAttribArray(e);let t=Xv(o.format),i=$E(o.format);if(l.format?.substring(1,4)===`int`?n.vertexAttribIPointer(e,t.size,i,o.stride,o.offset):n.vertexAttribPointer(e,t.size,i,t.normalised,o.stride,o.offset),o.instance)if(this.hasInstance){let t=o.divisor??1;n.vertexAttribDivisor(e,t)}else throw Error(`geometry error, GPU Instancing is not supported on this device`)}}}draw(e,t,n,r){let{gl:i}=this._renderer,a=this._activeGeometry,o=eD[e||a.topology];if(r??=a.instanceCount,a.indexBuffer){let e=a.indexBuffer.data.BYTES_PER_ELEMENT,s=e===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;r===1?i.drawElements(o,t||a.indexBuffer.data.length,s,(n||0)*e):i.drawElementsInstanced(o,t||a.indexBuffer.data.length,s,(n||0)*e,r)}else r===1?i.drawArrays(o,n||0,t||a.getSize()):i.drawArraysInstanced(o,n||0,t||a.getSize(),r);return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._managedGeometries.destroy(),this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}};nD.extension={type:[X.WebGLSystem],name:`geometry`};var rD=new Ex({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),iD=class e{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(t={}){let{useBackBuffer:n,antialias:r}={...e.defaultOptions,...t};this.useBackBuffer=n,this._antialias=r,this._renderer.context.supports.msaa||($(`antialiasing, is not supported on when using the back buffer`),this._antialias=!1),this._state=Sy.for2d(),this._bigTriangleShader=new py({glProgram:new Jv({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:`big-triangle`}),resources:{uTexture:Q.WHITE.source}})}renderStart(e){let t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){let t=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=t.colorTexture,e.target=this._getBackBufferTexture(t.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){let e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:rD,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new Q({source:new jh({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&=(this._backBufferTexture.destroy(),null)}};iD.extension={type:[X.WebGLSystem],name:`backBuffer`,priority:1},iD.defaultOptions={useBackBuffer:!1};var aD=iD,oD=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}};oD.extension={type:[X.WebGLSystem],name:`colorMask`};var sD=class{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){let t=this._renderer,{geometry:n,shader:r,state:i,skipSync:a,topology:o,size:s,start:c,instanceCount:l}=e;t.shader.bind(r,a),t.geometry.bind(n,t.shader._activeProgram),i&&t.state.set(i),t.geometry.draw(o,s,c,l??n.instanceCount)}destroy(){this._renderer=null}};sD.extension={type:[X.WebGLSystem],name:`encoder`};var cD=class{constructor(e){this._renderer=e}contextChange(){let e=this._renderer.gl;this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=lx(this.maxTextures,e),this.maxUniformBindings=this._renderer.context.webGLVersion===2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}};cD.extension={type:[X.WebGLSystem],name:`limits`};var lD=class{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}},uD=[];uD[ax.NONE]=void 0,uD[ax.DISABLED]={stencilWriteMask:0,stencilReadMask:0},uD[ax.RENDERING_MASK_ADD]={stencilFront:{compare:`equal`,passOp:`increment-clamp`},stencilBack:{compare:`equal`,passOp:`increment-clamp`}},uD[ax.RENDERING_MASK_REMOVE]={stencilFront:{compare:`equal`,passOp:`decrement-clamp`},stencilBack:{compare:`equal`,passOp:`decrement-clamp`}},uD[ax.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:`equal`,passOp:`keep`},stencilBack:{compare:`equal`,passOp:`keep`}},uD[ax.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:`not-equal`,passOp:`keep`},stencilBack:{compare:`not-equal`,passOp:`keep`}};var dD=class{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:ax.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||=this._renderTargetStencilState[e.uid]={stencilMode:ax.DISABLED,stencilReference:0},this.setStencilMode(t.stencilMode,t.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=ax.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,t){let n=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,i=uD[e],a=this._stencilCache;if(n.stencilMode=e,n.stencilReference=t,e===ax.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),(e!==a.stencilMode||a.stencilReference!==t)&&(a.stencilMode=e,a.stencilReference=t,r.stencilFunc(this._comparisonFuncMapping[i.stencilBack.compare],t,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[i.stencilBack.passOp]))}};dD.extension={type:[X.WebGLSystem],name:`stencil`};var fD=class{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!Oy())throw Error(`Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.`)}ensureUniformGroup(e){let t=this.getUniformGroupData(e);e.buffer||=new Sx({data:new Float32Array(t.layout.size/4),usage:xx.UNIFORM|xx.COPY_DST})}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){let t=e._signature,n=this._syncFunctionHash[t];if(!n){let r=Object.keys(e.uniformStructures).map(t=>e.uniformStructures[t]),i=this._adaptor.createUboElements(r),a=this._generateUboSync(i.uboElements);n=this._syncFunctionHash[t]={layout:i,syncFunction:a}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,n){let r=this.getUniformGroupData(e);e.buffer||=new Sx({data:new Float32Array(r.layout.size/4),usage:xx.UNIFORM|xx.COPY_DST});let i=null;return t||(t=e.buffer.data,i=e.buffer.dataInt32),n||=0,r.syncFunction(e.uniforms,t,i,n),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;let t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}},pD={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function mD(e){let t=e.map(e=>({data:e,offset:0,size:0})),n=0,r=0;for(let e=0;e<t.length;e++){let i=t[e];if(n=pD[i.data.type],!n)throw Error(`Unknown type ${i.data.type}`);i.data.size>1&&(n=Math.max(n,16)*i.data.size);let a=n===12?16:n;i.size=n;let o=r%16;o>0&&16-o<a?r+=(16-o)%16:r+=(n-o%n)%n,i.offset=r,r+=n}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}var hD=[{type:`mat3x3<f32>`,test:e=>e.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:`vec4<f32>`,test:e=>e.type===`vec4<f32>`&&e.size===1&&e.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:`vec2<f32>`,test:e=>e.type===`vec2<f32>`&&e.size===1&&e.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:`vec4<f32>`,test:e=>e.type===`vec4<f32>`&&e.size===1&&e.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:`vec3<f32>`,test:e=>e.type===`vec3<f32>`&&e.size===1&&e.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function gD(e,t,n,r){let i=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `],a=0;for(let o=0;o<e.length;o++){let s=e[o],c=s.data.name,l=!1,u=0;for(let e=0;e<hD.length;e++)if(hD[e].test(s.data)){u=s.offset/4,i.push(`name = "${c}";`,`offset += ${u-a};`,hD[e][t]||hD[e].ubo),l=!0;break}if(!l)if(s.data.size>1)u=s.offset/4,i.push(n(s,u-a));else{let e=r[s.data.type];u=s.offset/4,i.push(`
                    v = uv.${c};
                    offset += ${u-a};
                    ${e};
                `)}a=u}let o=i.join(`
`);return Function(`uv`,`data`,`dataInt32`,`offset`,o)}function _D(e,t){return`
        for (let i = 0; i < ${e*t}; i++) {
            data[offset + (((i / ${e})|0) * 4) + (i % ${e})] = v[i];
        }
    `}var vD={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":_D(3,2),"mat4x2<f32>":_D(4,2),"mat2x3<f32>":_D(2,3),"mat4x3<f32>":_D(4,3),"mat2x4<f32>":_D(2,4),"mat3x4<f32>":_D(3,4)},yD={...vD,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function bD(e,t){let n=Math.max(pD[e.data.type]/16,1),r=e.data.value.length/e.data.size,i=(4-r%4)%4,a=e.data.type.indexOf(`i32`)>=0?`dataInt32`:`data`;return`
        v = uv.${e.data.name};
        offset += ${t};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${e.data.size*n}; i++)
        {
            for(var j = 0; j < ${r}; j++)
            {
                ${a}[arrayOffset++] = v[t++];
            }
            ${i===0?``:`arrayOffset += ${i};`}
        }
    `}function xD(e){return gD(e,`uboStd40`,bD,vD)}var SD=class extends fD{constructor(){super({createUboElements:mD,generateUboSync:xD})}};SD.extension={type:[X.WebGLSystem],name:`ubo`};var CD=class{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new mh}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new mh;let e=this._renderer.gl;this._drawBuffersCache=[];for(let t=1;t<=16;t++)this._drawBuffersCache[t]=Array.from({length:t},(t,n)=>e.COLOR_ATTACHMENT0+n)}copyToTexture(e,t,n,r,i){let a=this._renderTargetSystem,o=this._renderer,s=a.getGpuRenderTarget(e),c=o.gl;return this.finishRenderPass(e),c.bindFramebuffer(c.FRAMEBUFFER,s.resolveTargetFramebuffer),o.texture.bind(t,0),c.copyTexSubImage2D(c.TEXTURE_2D,0,i.x,i.y,n.x,n.y,r.width,r.height),t}startRenderPass(e,t=!0,n,r){let i=this._renderTargetSystem,a=e.colorTexture,o=i.getGpuRenderTarget(e),s=r.y;e.isRoot&&(s=a.pixelHeight-r.height-r.y),e.colorTextures.forEach(e=>{this._renderer.texture.unbind(e)});let c=this._renderer.gl;c.bindFramebuffer(c.FRAMEBUFFER,o.framebuffer),e.colorTextures.length>1&&this._setDrawBuffers(e,c);let l=this._viewPortCache;(l.x!==r.x||l.y!==s||l.width!==r.width||l.height!==r.height)&&(l.x=r.x,l.y=s,l.width=r.width,l.height=r.height,c.viewport(r.x,s,r.width,r.height)),!o.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(o),this.clear(e,t,n)}finishRenderPass(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);if(!t.msaa)return;let n=this._renderer.gl;n.bindFramebuffer(n.FRAMEBUFFER,t.resolveTargetFramebuffer),n.bindFramebuffer(n.READ_FRAMEBUFFER,t.framebuffer),n.blitFramebuffer(0,0,t.width,t.height,0,0,t.width,t.height,n.COLOR_BUFFER_BIT,n.NEAREST),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer)}initGpuRenderTarget(e){let t=this._renderer.gl,n=new lD;return e.colorTexture instanceof v_?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),n.framebuffer=null,n):(this._initColor(e,n),t.bindFramebuffer(t.FRAMEBUFFER,null),n)}destroyGpuRenderTarget(e){let t=this._renderer.gl;e.framebuffer&&=(t.deleteFramebuffer(e.framebuffer),null),e.resolveTargetFramebuffer&&=(t.deleteFramebuffer(e.resolveTargetFramebuffer),null),e.depthStencilRenderBuffer&&=(t.deleteRenderbuffer(e.depthStencilRenderBuffer),null),e.msaaRenderBuffer.forEach(e=>{t.deleteRenderbuffer(e)}),e.msaaRenderBuffer=null}clear(e,t,n){if(!t)return;let r=this._renderTargetSystem;typeof t==`boolean`&&(t=t?lb.ALL:lb.NONE);let i=this._renderer.gl;if(t&lb.COLOR){n??=r.defaultClearColor;let e=this._clearColorCache,t=n;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],i.clearColor(t[0],t[1],t[2],t[3]))}i.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;let t=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,t),(e.stencil||e.depth)&&this._resizeStencil(t)}_initColor(e,t){let n=this._renderer,r=n.gl,i=r.createFramebuffer();if(t.resolveTargetFramebuffer=i,r.bindFramebuffer(r.FRAMEBUFFER,i),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((e,i)=>{let a=e.source;a.antialias&&(n.context.supports.msaa?t.msaa=!0:$(`[RenderTexture] Antialiasing on textures is not supported in WebGL1`)),n.texture.bindSource(a,0);let o=n.texture.getGlSource(a).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+i,3553,o,0)}),t.msaa){let n=r.createFramebuffer();t.framebuffer=n,r.bindFramebuffer(r.FRAMEBUFFER,n),e.colorTextures.forEach((e,n)=>{let i=r.createRenderbuffer();t.msaaRenderBuffer[n]=i})}else t.framebuffer=i;this._resizeColor(e,t)}_resizeColor(e,t){let n=e.colorTexture.source;if(t.width=n.pixelWidth,t.height=n.pixelHeight,e.colorTextures.forEach((e,t)=>{t!==0&&e.source.resize(n.width,n.height,n._resolution)}),t.msaa){let n=this._renderer,r=n.gl,i=t.framebuffer;r.bindFramebuffer(r.FRAMEBUFFER,i),e.colorTextures.forEach((e,i)=>{let a=e.source;n.texture.bindSource(a,0);let o=n.texture.getGlSource(a).internalFormat,s=t.msaaRenderBuffer[i];r.bindRenderbuffer(r.RENDERBUFFER,s),r.renderbufferStorageMultisample(r.RENDERBUFFER,4,o,a.pixelWidth,a.pixelHeight),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+i,r.RENDERBUFFER,s)})}}_initStencil(e){if(e.framebuffer===null)return;let t=this._renderer.gl,n=t.createRenderbuffer();e.depthStencilRenderBuffer=n,t.bindRenderbuffer(t.RENDERBUFFER,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n),this._resizeStencil(e)}_resizeStencil(e){let t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){let t=e.colorTexture.resource;this._renderer.context.multiView&&v_.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&v_.test(e.colorTexture.resource)){let t=this._renderer.context.canvas,n=e.colorTexture;n.context2D.drawImage(t,0,n.pixelHeight-t.height)}}_setDrawBuffers(e,t){let n=e.colorTextures.length,r=this._drawBuffersCache[n];if(this._renderer.context.webGLVersion===1){let e=this._renderer.context.extensions.drawBuffers;e?e.drawBuffersWEBGL(r):$(`[RenderTexture] This WebGL1 context does not support rendering to multiple targets`)}else t.drawBuffers(r)}};function wD(e,t,n,r,i,a){let o=a?1:-1;return e.identity(),e.a=1/r*2,e.d=o*(1/i*2),e.tx=-1-t*e.a,e.ty=-o-n*e.d,e}var TD=new Map;yg.register(TD);function ED(e,t){if(!TD.has(e)){let n=new Q({source:new v_({resource:e,...t})}),r=()=>{TD.get(e)===n&&TD.delete(e)};n.once(`destroy`,r),n.source.once(`destroy`,r),TD.set(e,n)}return TD.get(e)}function DD(e){let t=e.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement&&document.body.contains(t)}var OD=class e{constructor(t={}){if(this.uid=gh(`renderTarget`),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,t={...e.defaultOptions,...t},this.stencil=t.stencil,this.depth=t.depth,this.isRoot=t.isRoot,typeof t.colorTextures==`number`){this._managedColorTextures=!0;for(let e=0;e<t.colorTextures;e++)this.colorTextures.push(new jh({width:t.width,height:t.height,resolution:t.resolution,antialias:t.antialias}))}else{this.colorTextures=[...t.colorTextures.map(e=>e.source)];let e=this.colorTexture.source;this.resize(e.width,e.height,e._resolution)}this.colorTexture.source.on(`resize`,this.onSourceResize,this),(t.depthStencilTexture||this.stencil)&&(t.depthStencilTexture instanceof Q||t.depthStencilTexture instanceof jh?this.depthStencilTexture=t.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){let e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||=new jh({width:this.width,height:this.height,resolution:this.resolution,format:`depth24plus-stencil8`,autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1})}resize(e,t,n=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((i,a)=>{r&&a===0||i.source.resize(e,t,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,n)}destroy(){this.colorTexture.source.off(`resize`,this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};OD.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};var kD=OD,AD=class{constructor(e){this.rootViewPort=new mh,this.viewport=new mh,this.onRenderTargetChange=new ub(`onRenderTargetChange`),this.projectionMatrix=new Z,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,`_gpuRenderTargetHash`)}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:n,frame:r}){this._renderTargetStack.length=0,this.push(e,t,n,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=DD(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(e,t=!0,n,r){let i=this.getRenderTarget(e),a=this.renderTarget!==i;this.renderTarget=i,this.renderSurface=e;let o=this.getGpuRenderTarget(i);(i.pixelWidth!==o.width||i.pixelHeight!==o.height)&&(this.adaptor.resizeGpuRenderTarget(i),o.width=i.pixelWidth,o.height=i.pixelHeight);let s=i.colorTexture,c=this.viewport,l=s.pixelWidth,u=s.pixelHeight;if(!r&&e instanceof Q&&(r=e.frame),r){let e=s._resolution;c.x=r.x*e+.5|0,c.y=r.y*e+.5|0,c.width=r.width*e+.5|0,c.height=r.height*e+.5|0}else c.x=0,c.y=0,c.width=l,c.height=u;return wD(this.projectionMatrix,0,0,c.width/s.resolution,c.height/s.resolution,!i.isRoot),this.adaptor.startRenderPass(i,t,n,c),a&&this.onRenderTargetChange.emit(i),i}clear(e,t=lb.ALL,n){t&&(e&&=this.getRenderTarget(e),this.adaptor.clear(e||this.renderTarget,t,n,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=lb.ALL,n,r){let i=this.bind(e,t,n,r);return this._renderTargetStack.push({renderTarget:i,frame:r}),i}pop(){this._renderTargetStack.pop();let e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,t,n,r,i){n.x<0&&(r.width+=n.x,i.x-=n.x,n.x=0),n.y<0&&(r.height+=n.y,i.y-=n.y,n.y=0);let{pixelWidth:a,pixelHeight:o}=e;return r.width=Math.min(r.width,a-n.x),r.height=Math.min(r.height,o-n.y),this.adaptor.copyToTexture(e,t,n,r,i)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return v_.test(e)&&(e=ED(e).source),e instanceof kD?t=e:e instanceof jh&&(t=new kD({colorTextures:[e]}),e.source instanceof v_&&(t.isRoot=!0),e.once(`destroy`,()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);let n=this._gpuRenderTargetHash[t.uid];n&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(n))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}},jD=class extends AD{constructor(e){super(e),this.adaptor=new CD,this.adaptor.init(e,this)}};jD.extension={type:[X.WebGLSystem],name:`renderTarget`};var MD=class extends Xm{constructor({buffer:e,offset:t,size:n}){super(),this.uid=gh(`buffer`),this._resourceType=`bufferResource`,this._touched=0,this._resourceId=gh(`resource`),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=n,this.buffer.on(`change`,this.onBufferChange,this)}onBufferChange(){this._resourceId=gh(`resource`),this.emit(`change`,this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit(`change`,this),this.buffer=null,this.removeAllListeners()}};function ND(e,t){let n=[],r=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `],i=!1,a=0,o=t._getProgramData(e.glProgram);for(let s in e.groups){let c=e.groups[s];for(let l in n.push(`
            resources = g[${s}].resources;
        `),c.resources){let u=c.resources[l];if(u instanceof uy)if(u.ubo){let t=e._uniformBindMap[s][Number(l)];n.push(`
                        sS.bindUniformBlock(
                            resources[${l}],
                            '${t}',
                            ${e.glProgram._uniformBlockData[t].index}
                        );
                    `)}else n.push(`
                        ugS.updateUniformGroup(resources[${l}], p, sD);
                    `);else if(u instanceof MD){let t=e._uniformBindMap[s][Number(l)];n.push(`
                    sS.bindUniformBlock(
                        resources[${l}],
                        '${t}',
                        ${e.glProgram._uniformBlockData[t].index}
                    );
                `)}else if(u instanceof jh){let c=e._uniformBindMap[s][l],u=o.uniformData[c];u&&(i||(i=!0,r.push(`
                        var tS = r.texture;
                        `)),t._gl.uniform1i(u.location,a),n.push(`
                        tS.bind(resources[${l}], ${a});
                    `),a++)}}}let s=[...r,...n].join(`
`);return Function(`r`,`s`,`sD`,s)}var PD=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}};function FD(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function ID(e){let t=Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return t}function LD(e,t){switch(e){case`float`:return 0;case`vec2`:return new Float32Array(2*t);case`vec3`:return new Float32Array(3*t);case`vec4`:return new Float32Array(4*t);case`int`:case`uint`:case`sampler2D`:case`sampler2DArray`:return 0;case`ivec2`:return new Int32Array(2*t);case`ivec3`:return new Int32Array(3*t);case`ivec4`:return new Int32Array(4*t);case`uvec2`:return new Uint32Array(2*t);case`uvec3`:return new Uint32Array(3*t);case`uvec4`:return new Uint32Array(4*t);case`bool`:return!1;case`bvec2`:return ID(2*t);case`bvec3`:return ID(3*t);case`bvec4`:return ID(4*t);case`mat2`:return new Float32Array([1,0,0,1]);case`mat3`:return new Float32Array([1,0,0,0,1,0,0,0,1]);case`mat4`:return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var RD=null,zD={FLOAT:`float`,FLOAT_VEC2:`vec2`,FLOAT_VEC3:`vec3`,FLOAT_VEC4:`vec4`,INT:`int`,INT_VEC2:`ivec2`,INT_VEC3:`ivec3`,INT_VEC4:`ivec4`,UNSIGNED_INT:`uint`,UNSIGNED_INT_VEC2:`uvec2`,UNSIGNED_INT_VEC3:`uvec3`,UNSIGNED_INT_VEC4:`uvec4`,BOOL:`bool`,BOOL_VEC2:`bvec2`,BOOL_VEC3:`bvec3`,BOOL_VEC4:`bvec4`,FLOAT_MAT2:`mat2`,FLOAT_MAT3:`mat3`,FLOAT_MAT4:`mat4`,SAMPLER_2D:`sampler2D`,INT_SAMPLER_2D:`sampler2D`,UNSIGNED_INT_SAMPLER_2D:`sampler2D`,SAMPLER_CUBE:`samplerCube`,INT_SAMPLER_CUBE:`samplerCube`,UNSIGNED_INT_SAMPLER_CUBE:`samplerCube`,SAMPLER_2D_ARRAY:`sampler2DArray`,INT_SAMPLER_2D_ARRAY:`sampler2DArray`,UNSIGNED_INT_SAMPLER_2D_ARRAY:`sampler2DArray`},BD={float:`float32`,vec2:`float32x2`,vec3:`float32x3`,vec4:`float32x4`,int:`sint32`,ivec2:`sint32x2`,ivec3:`sint32x3`,ivec4:`sint32x4`,uint:`uint32`,uvec2:`uint32x2`,uvec3:`uint32x3`,uvec4:`uint32x4`,bool:`uint32`,bvec2:`uint32x2`,bvec3:`uint32x3`,bvec4:`uint32x4`};function VD(e,t){if(!RD){let t=Object.keys(zD);RD={};for(let n=0;n<t.length;++n){let r=t[n];RD[e[r]]=zD[r]}}return RD[t]}function HD(e,t){return BD[VD(e,t)]||`float32`}function UD(e,t,n=!1){let r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){let i=t.getActiveAttrib(e,n);if(i.name.startsWith(`gl_`))continue;let a=HD(t,i.type);r[i.name]={location:0,format:a,stride:Xv(a).stride,offset:0,instance:!1,start:0}}let a=Object.keys(r);if(n){a.sort((e,t)=>e>t?1:-1);for(let n=0;n<a.length;n++)r[a[n]].location=n,t.bindAttribLocation(e,n,a[n]);t.linkProgram(e)}else for(let n=0;n<a.length;n++)r[a[n]].location=t.getAttribLocation(e,a[n]);return r}function WD(e,t){if(!t.ACTIVE_UNIFORM_BLOCKS)return{};let n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<r;i++){let r=t.getActiveUniformBlockName(e,i);n[r]={name:r,index:t.getUniformBlockIndex(e,r),size:t.getActiveUniformBlockParameter(e,i,t.UNIFORM_BLOCK_DATA_SIZE)}}return n}function GD(e,t){let n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){let r=t.getActiveUniform(e,i),a=r.name.replace(/\[.*?\]$/,``),o=!!r.name.match(/\[.*?\]$/),s=VD(t,r.type);n[a]={name:a,index:i,type:s,size:r.size,isArray:o,value:LD(s,r.size)}}return n}function KD(e,t){let n=e.getShaderSource(t).split(`
`).map((e,t)=>`${t}: ${e}`),r=e.getShaderInfoLog(t),i=r.split(`
`),a={},o=i.map(e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,`$1`))).filter(e=>e&&!a[e]?(a[e]=!0,!0):!1),s=[``];o.forEach(e=>{n[e-1]=`%c${n[e-1]}%c`,s.push(`background: #FF0000; color:#FFFFFF; font-size: 10px`,`font-size: 10px`)}),s[0]=n.join(`
`),console.error(r),console.groupCollapsed(`click to view full shader code`),console.warn(...s),console.groupEnd()}function qD(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||KD(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||KD(e,r),console.error(`PixiJS Error: Could not initialize shader.`),e.getProgramInfoLog(t)!==``&&console.warn(`PixiJS Warning: gl.getProgramInfoLog()`,e.getProgramInfoLog(t)))}function JD(e,t){let n=FD(e,e.VERTEX_SHADER,t.vertex),r=FD(e,e.FRAGMENT_SHADER,t.fragment),i=e.createProgram();e.attachShader(i,n),e.attachShader(i,r);let a=t.transformFeedbackVaryings;a&&(typeof e.transformFeedbackVaryings==`function`?e.transformFeedbackVaryings(i,a.names,a.bufferMode===`separate`?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS):$(`TransformFeedback is not supported but TransformFeedbackVaryings are given.`)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||qD(e,i,n,r),t._attributeData=UD(i,e,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertex)),t._uniformData=GD(i,e),t._uniformBlockData=WD(i,e),e.deleteShader(n),e.deleteShader(r);let o={};for(let n in t._uniformData){let r=t._uniformData[n];o[n]={location:e.getUniformLocation(i,n),value:LD(r.type,r.size)}}return new PD(i,o)}var YD={textureCount:0,blockIndex:0},XD=class{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(e,t){if(this._setProgram(e.glProgram),t)return;YD.textureCount=0,YD.blockIndex=0;let n=this._shaderSyncFunctions[e.glProgram._key];n||=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),n(this._renderer,e,YD)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,YD)}bindUniformBlock(e,t,n=0){let r=this._renderer.buffer,i=this._getProgramData(this._activeProgram),a=e._bufferResource;a||this._renderer.ubo.updateUniformGroup(e);let o=e.buffer,s=r.updateBuffer(o),c=r.freeLocationForBufferBase(s);if(a){let{offset:t,size:n}=e;t===0&&n===o.data.byteLength?r.bindBufferBase(s,c):r.bindBufferRange(s,c,t)}else r.getLastBindBaseLocation(s)!==c&&r.bindBufferBase(s,c);let l=this._activeProgram._uniformBlockData[t].index;i.uniformBlockBindings[n]!==c&&(i.uniformBlockBindings[n]=c,this._renderer.gl.uniformBlockBinding(i.program,l,c))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;let t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){let t=e._key;return this._programDataHash[t]=JD(this._gl,e),this._programDataHash[t]}destroy(){for(let e of Object.keys(this._programDataHash))this._programDataHash[e].destroy();this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(e,t){return ND(e,t)}resetState(){this._activeProgram=null}};XD.extension={type:[X.WebGLSystem],name:`shader`};var ZD={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":`gl.uniformMatrix2fv(location, false, v);`,"mat3x3<f32>":`gl.uniformMatrix3fv(location, false, v);`,"mat4x4<f32>":`gl.uniformMatrix4fv(location, false, v);`},QD={f32:`gl.uniform1fv(location, v);`,"vec2<f32>":`gl.uniform2fv(location, v);`,"vec3<f32>":`gl.uniform3fv(location, v);`,"vec4<f32>":`gl.uniform4fv(location, v);`,"mat2x2<f32>":`gl.uniformMatrix2fv(location, false, v);`,"mat3x3<f32>":`gl.uniformMatrix3fv(location, false, v);`,"mat4x4<f32>":`gl.uniformMatrix4fv(location, false, v);`,i32:`gl.uniform1iv(location, v);`,"vec2<i32>":`gl.uniform2iv(location, v);`,"vec3<i32>":`gl.uniform3iv(location, v);`,"vec4<i32>":`gl.uniform4iv(location, v);`,u32:`gl.uniform1iv(location, v);`,"vec2<u32>":`gl.uniform2iv(location, v);`,"vec3<u32>":`gl.uniform3iv(location, v);`,"vec4<u32>":`gl.uniform4iv(location, v);`,bool:`gl.uniform1iv(location, v);`,"vec2<bool>":`gl.uniform2iv(location, v);`,"vec3<bool>":`gl.uniform3iv(location, v);`,"vec4<bool>":`gl.uniform4iv(location, v);`};function $D(e,t){let n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(let r in e.uniforms){if(!t[r]){e.uniforms[r]instanceof uy?e.uniforms[r].ubo?n.push(`
                        renderer.shader.bindUniformBlock(uv.${r}, "${r}");
                    `):n.push(`
                        renderer.shader.updateUniformGroup(uv.${r});
                    `):e.uniforms[r]instanceof MD&&n.push(`
                        renderer.shader.bindBufferResource(uv.${r}, "${r}");
                    `);continue}let i=e.uniformStructures[r],a=!1;for(let e=0;e<hD.length;e++){let t=hD[e];if(i.type===t.type&&t.test(i)){n.push(`name = "${r}";`,hD[e].uniform),a=!0;break}}if(!a){let e=(i.size===1?ZD:QD)[i.type].replace(`location`,`ud["${r}"].location`);n.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${e};`)}}return Function(`ud`,`uv`,`renderer`,`syncData`,n.join(`
`))}var eO=class{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,n){let r=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==r.uniformDirtyGroups[e.uid])&&(r.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(r.uniformData,e.uniforms,this._renderer,n))}_getUniformSyncFunction(e,t){return this._uniformGroupSyncHash[e._signature]?.[t._key]||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){let n=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),r=this._getSignature(e,t._uniformData,`u`);return this._cache[r]||(this._cache[r]=this._generateUniformsSync(e,t._uniformData)),n[t._key]=this._cache[r],n[t._key]}_generateUniformsSync(e,t){return $D(e,t)}_getSignature(e,t,n){let r=e.uniforms,i=[`${n}-`];for(let e in r)i.push(e),t[e]&&i.push(t[e].type);return i.join(`-`)}destroy(){this._renderer=null,this._cache=null}};eO.extension={type:[X.WebGLSystem],name:`uniformGroup`};function tO(e){let t={};if(t.normal=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.add=[e.ONE,e.ONE],t.multiply=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.screen=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.none=[0,0],t[`normal-npm`]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[`add-npm`]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[`screen-npm`]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t.erase=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],!(e instanceof __.get().getWebGLRenderingContext()))t.min=[e.ONE,e.ONE,e.ONE,e.ONE,e.MIN,e.MIN],t.max=[e.ONE,e.ONE,e.ONE,e.ONE,e.MAX,e.MAX];else{let n=e.getExtension(`EXT_blend_minmax`);n&&(t.min=[e.ONE,e.ONE,e.ONE,e.ONE,n.MIN_EXT,n.MIN_EXT],t.max=[e.ONE,e.ONE,e.ONE,e.ONE,n.MAX_EXT,n.MAX_EXT])}return t}var nO=0,rO=1,iO=2,aO=3,oO=4,sO=5,cO=class e{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=`none`,this._blendEq=!1,this.map=[],this.map[nO]=this.setBlend,this.map[rO]=this.setOffset,this.map[iO]=this.setCullFace,this.map[aO]=this.setDepthTest,this.map[oO]=this.setFrontFace,this.map[sO]=this.setDepthMask,this.checks=[],this.defaultState=Sy.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=tO(e),this.resetState()}set(e){if(e||=this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||=this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this._updateCheck(e._checkBlendMode,t),this.gl[t?`enable`:`disable`](this.gl.BLEND)}setOffset(t){this._updateCheck(e._checkPolygonOffset,t),this.gl[t?`enable`:`disable`](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?`enable`:`disable`](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?`enable`:`disable`](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;let t=this._invertFrontFace?!e:e;this._glFrontFace!==t&&(this._glFrontFace=t,this.gl.frontFace(this.gl[t?`CW`:`CCW`]))}setBlendMode(e){if(this.blendModesMap[e]||(e=`normal`),e===this.blendMode)return;this.blendMode=e;let t=this.blendModesMap[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=``,this.setBlendMode(`normal`)}_updateCheck(e,t){let n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};cO.extension={type:[X.WebGLSystem],name:`state`};var lO=cO,uO=class{constructor(e){this.target=XE.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=ZE.UNSIGNED_BYTE,this.internalFormat=YE.RGBA,this.format=YE.RGBA,this.samplerType=0}destroy(){}},dO={id:`buffer`,upload(e,t,n){t.width===e.width||t.height===e.height?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.width,e.height,t.format,t.type,e.resource):n.texImage2D(t.target,0,t.internalFormat,e.width,e.height,0,t.format,t.type,e.resource),t.width=e.width,t.height=e.height}},fO={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},pO={id:`compressed`,upload(e,t,n){n.pixelStorei(n.UNPACK_ALIGNMENT,4);let r=e.pixelWidth,i=e.pixelHeight,a=!!fO[e.format];for(let o=0;o<e.resource.length;o++){let s=e.resource[o];a?n.compressedTexImage2D(n.TEXTURE_2D,o,t.internalFormat,r,i,0,s):n.texImage2D(n.TEXTURE_2D,o,t.internalFormat,r,i,0,t.format,t.type,s),r=Math.max(r>>1,1),i=Math.max(i>>1,1)}}},mO={id:`image`,upload(e,t,n,r){let i=t.width,a=t.height,o=e.pixelWidth,s=e.pixelHeight,c=e.resourceWidth,l=e.resourceHeight;c<o||l<s?((i!==o||a!==s)&&n.texImage2D(t.target,0,t.internalFormat,o,s,0,t.format,t.type,null),r===2?n.texSubImage2D(n.TEXTURE_2D,0,0,0,c,l,t.format,t.type,e.resource):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,t.type,e.resource)):i===o&&a===s?n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,t.type,e.resource):r===2?n.texImage2D(t.target,0,t.internalFormat,o,s,0,t.format,t.type,e.resource):n.texImage2D(t.target,0,t.internalFormat,t.format,t.type,e.resource),t.width=o,t.height=s}},hO={id:`video`,upload(e,t,n,r){if(!e.isValid){n.texImage2D(t.target,0,t.internalFormat,1,1,0,t.format,t.type,null);return}mO.upload(e,t,n,r)}},gO={linear:9729,nearest:9728},_O={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},vO={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},yO={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function bO(e,t,n,r,i,a,o,s){let c=a;if(!s||e.addressModeU!==`repeat`||e.addressModeV!==`repeat`||e.addressModeW!==`repeat`){let n=vO[o?`clamp-to-edge`:e.addressModeU],r=vO[o?`clamp-to-edge`:e.addressModeV],a=vO[o?`clamp-to-edge`:e.addressModeW];t[i](c,t.TEXTURE_WRAP_S,n),t[i](c,t.TEXTURE_WRAP_T,r),t.TEXTURE_WRAP_R&&t[i](c,t.TEXTURE_WRAP_R,a)}if((!s||e.magFilter!==`linear`)&&t[i](c,t.TEXTURE_MAG_FILTER,gO[e.magFilter]),n){if(!s||e.mipmapFilter!==`linear`){let n=_O[e.minFilter][e.mipmapFilter];t[i](c,t.TEXTURE_MIN_FILTER,n)}}else t[i](c,t.TEXTURE_MIN_FILTER,gO[e.minFilter]);if(r&&e.maxAnisotropy>1){let n=Math.min(e.maxAnisotropy,t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));t[i](c,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}e.compare&&t[i](c,t.TEXTURE_COMPARE_FUNC,yO[e.compare])}function xO(e){return{r8unorm:e.RED,r8snorm:e.RED,r8uint:e.RED,r8sint:e.RED,r16uint:e.RED,r16sint:e.RED,r16float:e.RED,rg8unorm:e.RG,rg8snorm:e.RG,rg8uint:e.RG,rg8sint:e.RG,r32uint:e.RED,r32sint:e.RED,r32float:e.RED,rg16uint:e.RG,rg16sint:e.RG,rg16float:e.RG,rgba8unorm:e.RGBA,"rgba8unorm-srgb":e.RGBA,rgba8snorm:e.RGBA,rgba8uint:e.RGBA,rgba8sint:e.RGBA,bgra8unorm:e.RGBA,"bgra8unorm-srgb":e.RGBA,rgb9e5ufloat:e.RGB,rgb10a2unorm:e.RGBA,rg11b10ufloat:e.RGB,rg32uint:e.RG,rg32sint:e.RG,rg32float:e.RG,rgba16uint:e.RGBA,rgba16sint:e.RGBA,rgba16float:e.RGBA,rgba32uint:e.RGBA,rgba32sint:e.RGBA,rgba32float:e.RGBA,stencil8:e.STENCIL_INDEX8,depth16unorm:e.DEPTH_COMPONENT,depth24plus:e.DEPTH_COMPONENT,"depth24plus-stencil8":e.DEPTH_STENCIL,depth32float:e.DEPTH_COMPONENT,"depth32float-stencil8":e.DEPTH_STENCIL}}function SO(e,t){let n={},r=e.RGBA;return e instanceof __.get().getWebGLRenderingContext()?t.srgb&&(n={"rgba8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":t.srgb.SRGB8_ALPHA8_EXT}):(n={"rgba8unorm-srgb":e.SRGB8_ALPHA8,"bgra8unorm-srgb":e.SRGB8_ALPHA8},r=e.RGBA8),{r8unorm:e.R8,r8snorm:e.R8_SNORM,r8uint:e.R8UI,r8sint:e.R8I,r16uint:e.R16UI,r16sint:e.R16I,r16float:e.R16F,rg8unorm:e.RG8,rg8snorm:e.RG8_SNORM,rg8uint:e.RG8UI,rg8sint:e.RG8I,r32uint:e.R32UI,r32sint:e.R32I,r32float:e.R32F,rg16uint:e.RG16UI,rg16sint:e.RG16I,rg16float:e.RG16F,rgba8unorm:e.RGBA,...n,rgba8snorm:e.RGBA8_SNORM,rgba8uint:e.RGBA8UI,rgba8sint:e.RGBA8I,bgra8unorm:r,rgb9e5ufloat:e.RGB9_E5,rgb10a2unorm:e.RGB10_A2,rg11b10ufloat:e.R11F_G11F_B10F,rg32uint:e.RG32UI,rg32sint:e.RG32I,rg32float:e.RG32F,rgba16uint:e.RGBA16UI,rgba16sint:e.RGBA16I,rgba16float:e.RGBA16F,rgba32uint:e.RGBA32UI,rgba32sint:e.RGBA32I,rgba32float:e.RGBA32F,stencil8:e.STENCIL_INDEX8,depth16unorm:e.DEPTH_COMPONENT16,depth24plus:e.DEPTH_COMPONENT24,"depth24plus-stencil8":e.DEPTH24_STENCIL8,depth32float:e.DEPTH_COMPONENT32F,"depth32float-stencil8":e.DEPTH32F_STENCIL8,...t.s3tc?{"bc1-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":t.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...t.s3tc_sRGB?{"bc1-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":t.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...t.rgtc?{"bc4-r-unorm":t.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":t.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":t.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":t.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...t.bptc?{"bc6h-rgb-float":t.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":t.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":t.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":t.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...t.etc?{"etc2-rgb8unorm":t.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":t.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":t.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":t.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":t.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":t.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":t.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":t.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...t.astc?{"astc-4x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":t.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":t.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function CO(e){return{r8unorm:e.UNSIGNED_BYTE,r8snorm:e.BYTE,r8uint:e.UNSIGNED_BYTE,r8sint:e.BYTE,r16uint:e.UNSIGNED_SHORT,r16sint:e.SHORT,r16float:e.HALF_FLOAT,rg8unorm:e.UNSIGNED_BYTE,rg8snorm:e.BYTE,rg8uint:e.UNSIGNED_BYTE,rg8sint:e.BYTE,r32uint:e.UNSIGNED_INT,r32sint:e.INT,r32float:e.FLOAT,rg16uint:e.UNSIGNED_SHORT,rg16sint:e.SHORT,rg16float:e.HALF_FLOAT,rgba8unorm:e.UNSIGNED_BYTE,"rgba8unorm-srgb":e.UNSIGNED_BYTE,rgba8snorm:e.BYTE,rgba8uint:e.UNSIGNED_BYTE,rgba8sint:e.BYTE,bgra8unorm:e.UNSIGNED_BYTE,"bgra8unorm-srgb":e.UNSIGNED_BYTE,rgb9e5ufloat:e.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:e.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:e.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:e.UNSIGNED_INT,rg32sint:e.INT,rg32float:e.FLOAT,rgba16uint:e.UNSIGNED_SHORT,rgba16sint:e.SHORT,rgba16float:e.HALF_FLOAT,rgba32uint:e.UNSIGNED_INT,rgba32sint:e.INT,rgba32float:e.FLOAT,stencil8:e.UNSIGNED_BYTE,depth16unorm:e.UNSIGNED_SHORT,depth24plus:e.UNSIGNED_INT,"depth24plus-stencil8":e.UNSIGNED_INT_24_8,depth32float:e.FLOAT,"depth32float-stencil8":e.FLOAT_32_UNSIGNED_INT_24_8_REV}}var wO=4,TO=class{constructor(e){this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:mO,buffer:dO,video:hO,compressed:pO},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._managedTextures=new yS({renderer:e,type:`resource`,onUnload:this.onSourceUnload.bind(this),name:`glTexture`})}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=SO(e,this._renderer.context.extensions),this._mapFormatToType=CO(e),this._mapFormatToFormat=xO(e)),this._managedTextures.removeAll(!0),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let e=0;e<16;e++)this.bind(Q.EMPTY,e)}initSource(e){this.bind(e)}bind(e,t=0){let n=e.source;e?(this.bindSource(n,t),this._useSeparateSamplers&&this._bindSampler(n.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){let n=this._gl;if(e._gcLastUsed=this._renderer.gc.now,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||=Q.EMPTY.source;let r=this.getGlSource(e);n.bindTexture(r.target,r.texture)}}_bindSampler(e,t=0){let n=this._gl;if(!e){this._boundSamplers[t]=null,n.bindSampler(t,null);return}let r=this._getGlSampler(e);this._boundSamplers[t]!==r&&(this._boundSamplers[t]=r,n.bindSampler(t,r))}unbind(e){let t=e.source,n=this._boundTextures,r=this._gl;for(let e=0;e<n.length;e++)if(n[e]===t){this._activateLocation(e);let i=this.getGlSource(t);r.bindTexture(i.target,null),n[e]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){let t=this._gl,n=new uO(t.createTexture());if(n.type=this._mapFormatToType[e.format],n.internalFormat=this._mapFormatToInternalFormat[e.format],n.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){let t=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(t))+1}return e._gpuData[this._renderer.uid]=n,this._managedTextures.add(e)&&(e.on(`update`,this.onSourceUpdate,this),e.on(`resize`,this.onSourceUpdate,this),e.on(`styleChange`,this.onStyleChange,this),e.on(`updateMipmaps`,this.onUpdateMipmaps,this)),this.onSourceUpdate(e),this.updateStyle(e,!1),n}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){let n=this._gl,r=this.getGlSource(e);n.bindTexture(n.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=e,bO(e.style,n,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,`texParameteri`,n.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e,t=!1){let n=e._gpuData[this._renderer.uid];n&&(t||(this.unbind(e),this._gl.deleteTexture(n.texture)),e.off(`update`,this.onSourceUpdate,this),e.off(`resize`,this.onSourceUpdate,this),e.off(`styleChange`,this.onStyleChange,this),e.off(`updateMipmaps`,this.onUpdateMipmaps,this))}onSourceUpdate(e){let t=this._gl,n=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=e;let r=e.alphaMode===`premultiply-alpha-on-upload`;this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,n,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,n.internalFormat,e.pixelWidth,e.pixelHeight,0,n.format,n.type,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);let n=this.getGlSource(e);this._gl.generateMipmap(n.target)}_initSampler(e){let t=this._gl,n=this._gl.createSampler();return this._glSamplers[e._resourceId]=n,bO(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,`samplerParameteri`,n,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this._initSource(e)}generateCanvas(e){let{pixels:t,width:n,height:r}=this.getPixels(e),i=__.get().createCanvas();i.width=n,i.height=r;let a=i.getContext(`2d`);if(a){let e=a.createImageData(n,r);e.data.set(t),a.putImageData(e,0,0)}return i}getPixels(e){let t=e.source.resolution,n=e.frame,r=Math.max(Math.round(n.width*t),1),i=Math.max(Math.round(n.height*t),1),a=new Uint8Array(wO*r*i),o=this._renderer,s=o.renderTarget.getRenderTarget(e),c=o.renderTarget.getGpuRenderTarget(s),l=o.gl;return l.bindFramebuffer(l.FRAMEBUFFER,c.resolveTargetFramebuffer),l.readPixels(Math.round(n.x*t),Math.round(n.y*t),r,i,l.RGBA,l.UNSIGNED_BYTE,a),{pixels:new Uint8ClampedArray(a.buffer),width:r,height:i}}destroy(){this._managedTextures.destroy(),this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(Q.EMPTY.source),this._boundSamplers=Object.create(null);let e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}};TO.extension={type:[X.WebGLSystem],name:`texture`};var EO=class{contextChange(e){let t=new uy({uColor:{value:new Float32Array([1,1,1,1]),type:`vec4<f32>`},uTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uRound:{value:0,type:`f32`}}),n=e.limits.maxBatchableTextures;this.shader=new py({glProgram:tS({name:`graphics`,bits:[rS,uS(n),PE,fS]}),resources:{localUniforms:t,batchSamplers:mS(n)}})}execute(e,t){let n=t.context,r=n.customShader||this.shader,i=e.renderer,{batcher:a,instructions:o}=i.graphicsContext.getContextRenderData(n);r.groups[0]=i.globalUniforms.bindGroup,i.state.set(e.state),i.shader.bind(r),i.geometry.bind(a.geometry,r.glProgram);let s=o.instructions;for(let e=0;e<o.instructionSize;e++){let t=s[e];if(t.size){for(let e=0;e<t.textures.count;e++)i.texture.bind(t.textures.textures[e],e);i.geometry.draw(t.topology,t.size,t.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}};EO.extension={type:[X.WebGLPipesAdaptor],name:`graphics`};var DO=class{init(){this._shader=new py({glProgram:tS({name:`mesh`,bits:[PE,IE,fS]}),resources:{uTexture:Q.EMPTY.source,textureUniforms:{uTextureMatrix:{type:`mat3x3<f32>`,value:new Z}}}})}execute(e,t){let n=e.renderer,r=t._shader;if(r){if(!r.glProgram){$(`Mesh shader has no glProgram`,t.shader);return}}else{r=this._shader;let e=t.texture,n=e.source;r.resources.uTexture=n,r.resources.uSampler=n.style,r.resources.textureUniforms.uniforms.uTextureMatrix=e.textureMatrix.mapCoord}r.groups[100]=n.globalUniforms.bindGroup,r.groups[101]=e.localUniformsBindGroup,n.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};DO.extension={type:[X.WebGLPipesAdaptor],name:`mesh`};var OO=class{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}};OO.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`customRender`};var kO=class{constructor(){this.batcherName=`default`,this.topology=`triangle-list`,this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}};function AO(e,t){let n=e.instructionSet,r=n.instructions;for(let e=0;e<n.instructionSize;e++){let n=r[e];t[n.renderPipeId].execute(n)}}var jO=new Z,MO=class{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&=(xg.return(e._batchableRenderGroup),null),t.add(e)}_addRenderableCacheAsTexture(e,t){let n=e._batchableRenderGroup??=xg.get(kO);n.renderable=e.root,n.transform=e.root.relativeGroupTransform,n.texture=e.texture,n.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.blendMode.pushBlendMode(e,e.root.groupBlendMode,t),this._renderer.renderPipes.batch.addToBatch(n,t),this._renderer.renderPipes.blendMode.popBlendMode(t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;let t=jO.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295,offset:{x:0,y:0}}),AO(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),AO(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}};MO.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`renderGroup`};function NO(e,t){t||=0;for(let n=t;n<e.length&&e[n];n++)e[n]=null}var PO=new o_,FO=7;function IO(e,t=!1){LO(e);let n=e.childrenToUpdate,r=e.updateTick++;for(let t in n){let i=Number(t),a=n[t],o=a.list,s=a.index;for(let t=0;t<s;t++){let n=o[t];n.parentRenderGroup===e&&n.relativeRenderGroupDepth===i&&RO(n,r,0)}NO(o,s),a.index=0}if(t)for(let n=0;n<e.renderGroupChildren.length;n++)IO(e.renderGroupChildren[n],t)}function LO(e){let t=e.root,n;if(e.renderGroupParent){let r=e.renderGroupParent;e.worldTransform.appendFrom(t.relativeGroupTransform,r.worldTransform),e.worldColor=zg(t.groupColor,r.worldColor),n=t.groupAlpha*r.worldAlpha}else e.worldTransform.copyFrom(t.localTransform),e.worldColor=t.localColor,n=t.localAlpha;n=n<0?0:n>1?1:n,e.worldAlpha=n,e.worldColorAlpha=e.worldColor+((n*255|0)<<24)}function RO(e,t,n){if(t===e.updateTick)return;e.updateTick=t,e.didChange=!1;let r=e.localTransform;e.updateLocalTransform();let i=e.parent;if(i&&!i.renderGroup?(n|=e._updateFlags,e.relativeGroupTransform.appendFrom(r,i.relativeGroupTransform),n&FO&&zO(e,i,n)):(n=e._updateFlags,e.relativeGroupTransform.copyFrom(r),n&FO&&zO(e,PO,n)),!e.renderGroup){let r=e.children,i=r.length;for(let e=0;e<i;e++)RO(r[e],t,n);let a=e.parentRenderGroup,o=e;o.renderPipeId&&!a.structureDidChange&&a.updateRenderable(o)}}function zO(e,t,n){if(n&1){e.groupColor=zg(e.localColor,t.groupColor);let n=e.localAlpha*t.groupAlpha;n=n<0?0:n>1?1:n,e.groupAlpha=n,e.groupColorAlpha=e.groupColor+((n*255|0)<<24)}n&2&&(e.groupBlendMode=e.localBlendMode===`inherit`?t.groupBlendMode:e.localBlendMode),n&4&&(e.globalDisplayStatus=e.localDisplayStatus&t.globalDisplayStatus),e._updateFlags=0}function BO(e,t){let{list:n}=e.childrenRenderablesToUpdate,r=!1;for(let i=0;i<e.childrenRenderablesToUpdate.index;i++){let e=n[i];if(r=t[e.renderPipeId].validateRenderable(e),r)break}return e.structureDidChange=r,r}var VO=new Z,HO=class{constructor(e){this._renderer=e}render({container:e,transform:t}){let n=e.parent,r=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;let i=this._renderer,a=VO;t&&(a.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));let o=i.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),i.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),AO(e.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(a),e.parent=n,e.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){if(e._parentCacheAsTextureRenderGroup=t,e.isCachedAsTexture){if(!e.textureNeedsUpdate)return;t=e}for(let n=e.renderGroupChildren.length-1;n>=0;n--)this._updateCachedRenderGroups(e.renderGroupChildren[n],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){let t=e.root.getLocalBounds();t.ceil();let n=e.texture;e.texture&&$g.returnTexture(e.texture,!0);let r=this._renderer,i=e.textureOptions.resolution||r.view.resolution,a=e.textureOptions.antialias??r.view.antialias,o=e.textureOptions.scaleMode??`linear`,s=$g.getOptimalTexture(t.width,t.height,i,a);s._source.style=new kh({scaleMode:o}),e.texture=s,e._textureBounds||=new Lh,e._textureBounds.copyFrom(t),n!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&=($g.returnTexture(e.texture,!0),null)}_updateRenderGroups(e){let t=this._renderer,n=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=n,e.structureDidChange?NO(e.childrenRenderablesToUpdate.list,0):BO(e,n),IO(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let t=0;t<e.renderGroupChildren.length;t++)this._updateRenderGroups(e.renderGroupChildren[t])}_updateRenderables(e){let{list:t,index:n}=e.childrenRenderablesToUpdate;for(let r=0;r<n;r++){let n=t[r];n.didViewUpdate&&e.updateRenderable(n)}NO(t,n)}_buildInstructions(e,t){let n=e.root,r=e.instructionSet;r.reset();let i=t.renderPipes?t:t.batch.renderer,a=i.renderPipes;a.batch.buildStart(r),a.blendMode.buildStart(),a.colorMask.buildStart(),n.sortableChildren&&n.sortChildren(),n.collectRenderablesWithEffects(r,i,null),a.batch.buildEnd(r),a.blendMode.buildEnd(r)}};HO.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`renderGroup`};var UO=class{constructor(e){this._renderer=e}addRenderable(e,t){let n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){let t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=new kO;return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,t}destroy(){this._renderer=null}};UO.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`sprite`};var WO=class e{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new hg(0),this.color=this._backgroundColor,this.alpha=1}init(t){t={...e.defaultOptions,...t},this.clearBeforeRender=t.clearBeforeRender,this.color=t.background||t.backgroundColor||this._backgroundColor,this.alpha=t.backgroundAlpha,this._backgroundColor.setAlpha(t.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){hg.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&$(`Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application.`),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};WO.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`background`,priority:0},WO.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};var GO=WO,KO={};Km.handle(X.BlendMode,e=>{if(!e.name)throw Error(`BlendMode extension must have a name property`);KO[e.name]=e.ref},e=>{delete KO[e.name]});var qO=class{constructor(e){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode=`normal`,this._isAdvanced=!1}pushBlendMode(e,t,n){this._blendModeStack.push(t),this.setBlendMode(e,t,n)}popBlendMode(e){this._blendModeStack.pop();let t=this._blendModeStack[this._activeBlendMode.length-1]??`normal`;this.setBlendMode(null,t,e)}setBlendMode(e,t,n){let r=e instanceof e_;if(this._activeBlendMode===t){this._isAdvanced&&e&&!r&&this._renderableList?.push(e);return}this._isAdvanced&&this._endAdvancedBlendMode(n),this._activeBlendMode=t,e&&(this._isAdvanced=!!KO[t],this._isAdvanced&&this._beginAdvancedBlendMode(e,n))}_beginAdvancedBlendMode(e,t){this._renderer.renderPipes.batch.break(t);let n=this._activeBlendMode;if(!KO[n]){$(`Unable to assign BlendMode: '${n}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let r=this._ensureFilterEffect(n),i=e instanceof e_,a={renderPipeId:`filter`,action:`pushFilter`,filterEffect:r,renderables:i?null:[e],container:i?e.root:null,canBundle:!1};this._renderableList=a.renderables,t.add(a)}_ensureFilterEffect(e){let t=this._filterHash[e];return t||(t=this._filterHash[e]=new Eg,t.filters=[new KO[e]]),t}_endAdvancedBlendMode(e){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:`filter`,action:`popFilter`,canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){for(let e in this._renderer=null,this._renderableList=null,this._filterHash)this._filterHash[e].destroy();this._filterHash=null}};qO.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`blendMode`};var JO={png:`image/png`,jpg:`image/jpeg`,webp:`image/webp`},YO=class e{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof o_||e instanceof Q?{target:e,...t}:{...t,...e}}async image(e){let t=__.get().createImage();return t.src=await this.base64(e),t}async base64(t){t=this._normalizeOptions(t,e.defaultImageOptions);let{format:n,quality:r}=t,i=this.canvas(t);if(i.toBlob!==void 0)return new Promise((e,t)=>{i.toBlob(n=>{if(!n){t(Error(`ICanvas.toBlob failed!`));return}let r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsDataURL(n)},JO[n],r)});if(i.toDataURL!==void 0)return i.toDataURL(JO[n],r);if(i.convertToBlob!==void 0){let e=await i.convertToBlob({type:JO[n],quality:r});return new Promise((t,n)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}throw Error(`Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented`)}canvas(e){e=this._normalizeOptions(e);let t=e.target,n=this._renderer;if(t instanceof Q)return n.texture.generateCanvas(t);let r=n.textureGenerator.generateTexture(e),i=n.texture.generateCanvas(r);return r.destroy(!0),i}pixels(e){e=this._normalizeOptions(e);let t=e.target,n=this._renderer,r=t instanceof Q?t:n.textureGenerator.generateTexture(e),i=n.texture.getPixels(r);return t instanceof o_&&r.destroy(!0),i}texture(e){return e=this._normalizeOptions(e),e.target instanceof Q?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);let t=this.canvas(e),n=document.createElement(`a`);n.download=e.filename??`image.png`,n.href=t.toDataURL(`image/png`),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(e){let t=e.width??200;e=this._normalizeOptions(e);let n=this.canvas(e),r=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);let i=[`font-size: 1px;`,`padding: ${t}px 300px;`,`background: url(${r}) no-repeat;`,`background-size: contain;`].join(` `);console.log(`%c `,i)}destroy(){this._renderer=null}};YO.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`extract`},YO.defaultImageOptions={format:`png`,quality:1};var XO=YO,ZO=class e extends Q{static create(t){let{dynamic:n,...r}=t;return new e({source:new jh(r),dynamic:n??!1})}resize(e,t,n){return this.source.resize(e,t,n),this}},QO=new mh,$O=new Lh,ek=[0,0,0,0],tk=class{constructor(e){this._renderer=e}generateTexture(e){e instanceof o_&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});let t=e.resolution||this._renderer.resolution,n=e.antialias||this._renderer.view.antialias,r=e.target,i=e.clearColor;i=i?Array.isArray(i)&&i.length===4?i:hg.shared.setValue(i).toArray():ek;let a=e.frame?.copyTo(QO)||Hg(r,$O).rectangle;a.width=Math.max(a.width,1/t)|0,a.height=Math.max(a.height,1/t)|0;let o=ZO.create({...e.textureSourceOptions,width:a.width,height:a.height,resolution:t,antialias:n}),s=Z.shared.translate(-a.x,-a.y);return this._renderer.render({container:r,transform:s,target:o,clearColor:i}),o.source.updateMipmaps(),o}destroy(){this._renderer=null}};tk.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`textureGenerator`};var nk=class e{constructor(e){this._managedResources=[],this._managedResourceHashes=[],this._ready=!1,this._renderer=e}init(t){t={...e.defaultOptions,...t},this.maxUnusedTime=t.gcMaxUnusedTime,this._frequency=t.gcFrequency,this.enabled=t.gcActive,this.now=performance.now()}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?this._handler=this._renderer.scheduler.repeat(()=>{this._ready=!0},this._frequency,!1):(this._renderer.scheduler.cancel(this._handler),this._handler=0))}prerender({container:e}){this.now=performance.now(),e.renderGroup.gcTick=this._renderer.tick++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}postrender(){!this._ready||!this.enabled||(this.run(),this._ready=!1)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let n of e.renderGroupChildren)this._updateInstructionGCTick(n,t)}addResource(e,t){if(e._gcLastUsed!==-1){e._gcLastUsed=this.now,e._onTouch?.(this.now);return}e._gcData={index:this._managedResources.length,type:t},e._gcLastUsed=this.now,e._onTouch?.(this.now),e.once(`unload`,this.removeResource,this),this._managedResources.push(e)}removeResource(e){let t=e._gcData;if(!t)return;let n=t.index,r=this._managedResources.length-1;if(n!==r){let e=this._managedResources[r];this._managedResources[n]=e,e._gcData.index=n}this._managedResources.length--,e._gcData=null,e._gcLastUsed=-1}addResourceHash(e,t,n,r=0){this._managedResourceHashes.push({context:e,hash:t,type:n,priority:r}),this._managedResourceHashes.sort((e,t)=>e.priority-t.priority)}run(){let e=performance.now(),t=this._managedResourceHashes;for(let n of t)this.runOnHash(n,e);let n=0;for(let t=0;t<this._managedResources.length;t++){let r=this._managedResources[t];n=this.runOnResource(r,e,n)}this._managedResources.length=n}updateRenderableGCTick(e,t){let n=e.renderGroup??e.parentRenderGroup,r=n?.instructionSet?.gcTick??-1;(n?.gcTick??0)===r&&(e._gcLastUsed=t,e._onTouch?.(t))}runOnResource(e,t,n){let r=e._gcData;return r.type===`renderable`&&this.updateRenderableGCTick(e,t),t-e._gcLastUsed<this.maxUnusedTime||!e.autoGarbageCollect?(this._managedResources[n]=e,r.index=n,n++):(e.unload(),e._gcData=null,e._gcLastUsed=-1,e.off(`unload`,this.removeResource,this)),n}_createHashClone(e,t){let n=Object.create(null);for(let r in e){if(r===t)break;e[r]!==null&&(n[r]=e[r])}return n}runOnHash(e,t){let{context:n,hash:r,type:i}=e,a=n[r],o=null,s=0;for(let e in a){let n=a[e];if(n===null){s++,s===1e4&&!o&&(o=this._createHashClone(a,e));continue}if(n._gcLastUsed===-1){n._gcLastUsed=t,n._onTouch?.(t),o&&(o[e]=n);continue}i===`renderable`&&this.updateRenderableGCTick(n,t),!(t-n._gcLastUsed<this.maxUnusedTime)&&n.autoGarbageCollect?(o||(s+1===1e4?o=this._createHashClone(a,e):(a[e]=null,s++)),n.unload(),n._gcData=null,n._gcLastUsed=-1):o&&(o[e]=n)}o&&(n[r]=o)}destroy(){this.enabled=!1,this._managedResources.forEach(e=>{e.off(`unload`,this.removeResource,this)}),this._managedResources.length=0,this._managedResourceHashes.length=0,this._renderer=null}};nk.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`gc`,priority:0},nk.defaultOptions={gcActive:!0,gcMaxUnusedTime:6e4,gcFrequency:3e4};var rk=nk;function ik(e,t,n){let r=(e>>24&255)/255;t[n++]=(e&255)/255*r,t[n++]=(e>>8&255)/255*r,t[n++]=(e>>16&255)/255*r,t[n++]=r}var ak=class{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:n,worldColor:r,offset:i}){let a=this._renderer.renderTarget.renderTarget,o=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:a,worldTransformMatrix:new Z,worldColor:4294967295,offset:new eh},s={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||a.size,worldTransformMatrix:n||o.worldTransformMatrix,worldColor:r||o.worldColor,offset:i||o.offset,bindGroup:null},c=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(c);let l=c.uniforms;l.uProjectionMatrix=s.projectionMatrix,l.uResolution=s.resolution,l.uWorldTransformMatrix.copyFrom(s.worldTransformMatrix),l.uWorldTransformMatrix.tx-=s.offset.x,l.uWorldTransformMatrix.ty-=s.offset.y,ik(s.worldColor,l.uWorldColorAlpha,0),c.update();let u;this._renderer.renderPipes.uniformBatch?u=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(c,!1):(u=this._bindGroupPool.pop()||new dy,this._activeBindGroups.push(u),u.setResource(c,0)),s.bindGroup=u,this._currentGlobalUniformData=s}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===fy.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new uy({uProjectionMatrix:{value:new Z,type:`mat3x3<f32>`},uWorldTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uWorldColorAlpha:{value:new Float32Array(4),type:`vec4<f32>`},uResolution:{value:[0,0],type:`vec2<f32>`}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}};ak.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`globalUniforms`};var ok=1,sk=class{constructor(){this._tasks=[],this._offset=0}init(){C_.system.add(this._update,this)}repeat(e,t,n=!0){let r=ok++,i=0;return n&&(this._offset+=1e3,i=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:i,last:performance.now(),repeat:!0,id:r}),r}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){let e=performance.now();for(let t=0;t<this._tasks.length;t++){let n=this._tasks[t];if(e-n.offset-n.last>=n.duration){let t=e-n.start;n.func(t),n.last=e}}}destroy(){C_.system.remove(this._update,this),this._tasks.length=0}};sk.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`scheduler`,priority:0};var ck=!1;function lk(e){if(!ck){if(__.get().getNavigator().userAgent.toLowerCase().indexOf(`chrome`)>-1){let t=[`%c  %c  %c  %c  %c PixiJS %c v${bb} (${e}) http://www.pixijs.com/

`,`background: #E72264; padding:5px 0;`,`background: #6CA2EA; padding:5px 0;`,`background: #B5D33D; padding:5px 0;`,`background: #FED23F; padding:5px 0;`,`color: #FFFFFF; background: #E72264; padding:5px 0;`,`color: #E72264; background: #FFFFFF; padding:5px 0;`];globalThis.console.log(...t)}else globalThis.console&&globalThis.console.log(`PixiJS ${bb} - ${e} - http://www.pixijs.com/`);ck=!0}}var uk=class{constructor(e){this._renderer=e}init(e){if(e.hello){let e=this._renderer.name;this._renderer.type===fy.WEBGL&&(e+=` ${this._renderer.context.webGLVersion}`),lk(e)}}};uk.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`hello`,priority:-2},uk.defaultOptions={hello:!1};function dk(e){let t=!1;for(let n in e)if(e[n]==null){t=!0;break}if(!t)return e;let n=Object.create(null);for(let t in e){let r=e[t];r&&(n[t]=r)}return n}function fk(e){let t=0;for(let n=0;n<e.length;n++)e[n]==null?t++:e[n-t]=e[n];return e.length-=t,e}var pk=0,mk=class e{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(t){t={...e.defaultOptions,...t},this.maxUnusedTime=t.renderableGCMaxUnusedTime,this._frequency=t.renderableGCFrequency,this.enabled=t.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(let e of this._managedHashes)e.context[e.hash]=dk(e.context[e.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(let e of this._managedArrays)fk(e.context[e.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=pk++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once(`destroyed`,this._removeRenderable,this)),e._lastUsed=this._now)}run(){let e=this._now,t=this._managedRenderables,n=this._renderer.renderPipes,r=0;for(let i=0;i<t.length;i++){let a=t[i];if(a===null){r++;continue}let o=a.renderGroup??a.parentRenderGroup,s=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===s&&(a._lastUsed=e),e-a._lastUsed>this.maxUnusedTime){if(!a.destroyed){let e=n;o&&(o.structureDidChange=!0),e[a.renderPipeId].destroyRenderable(a)}a._lastUsed=-1,r++,a.off(`destroyed`,this._removeRenderable,this)}else t[i-r]=a}t.length-=r}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){let t=this._managedRenderables.indexOf(e);t>=0&&(e.off(`destroyed`,this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(let n of e.renderGroupChildren)this._updateInstructionGCTick(n,t)}};mk.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`renderableGC`,priority:0},mk.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};var hk=mk,gk=class e{get count(){return this._renderer.tick}get checkCount(){return this._checkCount}set checkCount(e){xh(`8.15.0`,`TextureGCSystem.run is deprecated, please use the GCSystem instead.`),this._checkCount=e}get maxIdle(){return this._renderer.gc.maxUnusedTime/1e3*60}set maxIdle(e){xh(`8.15.0`,`TextureGCSystem.run is deprecated, please use the GCSystem instead.`),this._renderer.gc.maxUnusedTime=e/60*1e3}get checkCountMax(){return Math.floor(this._renderer.gc._frequency/1e3)}set checkCountMax(e){xh(`8.15.0`,`TextureGCSystem.run is deprecated, please use the GCSystem instead.`)}get active(){return this._renderer.gc.enabled}set active(e){xh(`8.15.0`,`TextureGCSystem.run is deprecated, please use the GCSystem instead.`),this._renderer.gc.enabled=e}constructor(e){this._renderer=e,this._checkCount=0}init(t){t.textureGCActive!==e.defaultOptions.textureGCActive&&(this.active=t.textureGCActive),t.textureGCMaxIdle!==e.defaultOptions.textureGCMaxIdle&&(this.maxIdle=t.textureGCMaxIdle),t.textureGCCheckCountMax!==e.defaultOptions.textureGCCheckCountMax&&(this.checkCountMax=t.textureGCCheckCountMax)}run(){xh(`8.15.0`,`TextureGCSystem.run is deprecated, please use the GCSystem instead.`),this._renderer.gc.run()}destroy(){this._renderer=null}};gk.extension={type:[X.WebGLSystem,X.WebGPUSystem],name:`textureGC`},gk.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};var _k=gk,vk=class e{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(t){t={...e.defaultOptions,...t},t.view&&(xh(vh,`ViewSystem.view has been renamed to ViewSystem.canvas`),t.canvas=t.view),this.screen=new mh(0,0,t.width,t.height),this.canvas=t.canvas||__.get().createCanvas(),this.antialias=!!t.antialias,this.texture=ED(this.canvas,t),this.renderTarget=new kD({colorTextures:[this.texture],depth:!!t.depth,isRoot:!0}),this.texture.source.transparent=t.backgroundAlpha<1,this.resolution=t.resolution}resize(e,t,n){this.texture.source.resize(e,t,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e==`boolean`?e:e?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.texture.destroy()}};vk.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`view`,priority:0},vk.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};var yk=[GO,ak,uk,vk,HO,rk,_k,tk,XO,Sb,hk,sk],bk=[qO,jE,UO,MO,zE,VE,BE,OO],xk=[...yk,SD,aD,KE,cD,WE,TO,jD,nD,eO,XD,sD,lO,dD,oD],Sk=[...bk],Ck=[DE,DO,EO],wk=[],Tk=[],Ek=[];Km.handleByNamedList(X.WebGLSystem,wk),Km.handleByNamedList(X.WebGLPipes,Tk),Km.handleByNamedList(X.WebGLPipesAdaptor,Ek),Km.add(...xk,...Sk,...Ck);var Dk=class extends pb{constructor(){let e={name:`webgl`,type:fy.WEBGL,systems:wk,renderPipes:Tk,renderPipeAdaptors:Ek};super(e)}},Ok=class{constructor(e){this._hash=Object.create(null),this._renderer=e}contextChange(e){this._gpu=e}getBindGroup(e,t,n){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,n)}_createBindGroup(e,t,n){let r=this._gpu.device,i=t.layout[n],a=[],o=this._renderer;for(let t in i){let n=e.resources[t]??e.resources[i[t]],r;if(n._resourceType===`uniformGroup`){let e=n;o.ubo.updateUniformGroup(e);let t=e.buffer;r={buffer:o.buffer.getGPUBuffer(t),offset:0,size:t.descriptor.size}}else if(n._resourceType===`buffer`){let e=n;r={buffer:o.buffer.getGPUBuffer(e),offset:0,size:e.descriptor.size}}else if(n._resourceType===`bufferResource`){let e=n;r={buffer:o.buffer.getGPUBuffer(e.buffer),offset:e.offset,size:e.size}}else if(n._resourceType===`textureSampler`){let e=n;r=o.texture.getGpuSampler(e)}else if(n._resourceType===`textureSource`){let e=n;r=o.texture.getGpuSource(e).createView()}a.push({binding:i[t],resource:r})}let s=o.shader.getProgramData(t).bindGroups[n],c=r.createBindGroup({layout:s,entries:a});return this._hash[e._key]=c,c}destroy(){this._hash=null,this._renderer=null}};Ok.extension={type:[X.WebGPUSystem],name:`bindGroup`};var kk=class{constructor(e){this.gpuBuffer=e}destroy(){this.gpuBuffer.destroy(),this.gpuBuffer=null}},Ak=class{constructor(e){this._renderer=e,this._managedBuffers=new yS({renderer:e,type:`resource`,onUnload:this.onBufferUnload.bind(this),name:`gpuBuffer`})}contextChange(e){this._gpu=e}getGPUBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuBuffer||this.createGPUBuffer(e)}updateBuffer(e){let t=this.getGPUBuffer(e),n=e.data;return e._updateID&&n&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,n.buffer,0,(e._updateSize||n.byteLength)+3&-4)),t}destroyAll(){this._managedBuffers.removeAll()}onBufferUnload(e){e.off(`update`,this.updateBuffer,this),e.off(`change`,this.onBufferChange,this)}createGPUBuffer(e){let t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e._resourceId=gh(`resource`),e.data&&(rx(e.data.buffer,t.getMappedRange()),t.unmap()),e._gpuData[this._renderer.uid]=new kk(t),this._managedBuffers.add(e)&&(e.on(`update`,this.updateBuffer,this),e.on(`change`,this.onBufferChange,this)),t}onBufferChange(e){this._managedBuffers.remove(e),e._updateID=0,this.createGPUBuffer(e)}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gpu=null}};Ak.extension={type:[X.WebGPUSystem],name:`buffer`};var jk=class{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw Error(`UniformBufferBatch: array is too large: ${e*4}`);let t=this.byteIndex,n=t+e*4;if(n=Math.ceil(n/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,n>this.data.length*4)throw Error(`UniformBufferBatch: ubo batch got too big`);return this.byteIndex=n,t}addGroup(e){let t=this.addEmptyGroup(e.length);for(let n=0;n<e.length;n++)this.data[t/4+n]=e[n];return t}destroy(){this.data=null}},Mk=class{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}};Mk.extension={type:[X.WebGPUSystem],name:`colorMask`};var Nk=class{constructor(e){this._renderer=e}async init(e){return this._initPromise||=(e.gpu?Promise.resolve(e.gpu):this._createDeviceAndAdaptor(e)).then(e=>{this.gpu=e,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){let t=await __.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),n=[`texture-compression-bc`,`texture-compression-astc`,`texture-compression-etc2`].filter(e=>t.features.has(e));return{adapter:t,device:await t.requestDevice({requiredFeatures:n})}}destroy(){this.gpu=null,this._renderer=null}};Nk.extension={type:[X.WebGPUSystem],name:`device`},Nk.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};var Pk=class{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,n,r){let i=this._renderer.pipeline.getPipeline(e,t,n,r);this.setPipeline(i)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;let t=e.data.BYTES_PER_ELEMENT===2?`uint16`:`uint32`;this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,n){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.gc.now,this._renderer.tick);let r=this._renderer.bindGroup.getBindGroup(t,n,e);this.renderPassEncoder.setBindGroup(e,r)}setGeometry(e,t){let n=this._renderer.pipeline.getBufferNamesToBind(e,t);for(let t in n)this._setVertexBuffer(parseInt(t,10),e.attributes[n[t]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(let n in e.groups){let r=e.groups[n];t||this._syncBindGroup(r),this.setBindGroup(n,r,e.gpuProgram)}}_syncBindGroup(e){for(let t in e.resources){let n=e.resources[t];n.isUniformGroup&&this._renderer.ubo.updateUniformGroup(n)}}draw(e){let{geometry:t,shader:n,state:r,topology:i,size:a,start:o,instanceCount:s,skipSync:c}=e;this.setPipelineFromGeometryProgramAndState(t,n.gpuProgram,r,i),this.setGeometry(t,n.gpuProgram),this._setShaderBindGroups(n,c),t.indexBuffer?this.renderPassEncoder.drawIndexed(a||t.indexBuffer.data.length,s??t.instanceCount,o||0):this.renderPassEncoder.draw(a||t.getSize(),s??t.instanceCount,o||0)}finishRenderPass(){this.renderPassEncoder&&=(this.renderPassEncoder.end(),null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){let e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);let t=this._boundPipeline,n={...this._boundVertexBuffer},r=this._boundIndexBuffer,i={...this._boundBindGroup};this._clearCache();let a=this._renderer.renderTarget.viewport;for(let e in this.renderPassEncoder.setViewport(a.x,a.y,a.width,a.height,0,1),this.setPipeline(t),n)this._setVertexBuffer(e,n[e]);for(let e in i)this.setBindGroup(e,i[e],null);this._setIndexBuffer(r)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}};Pk.extension={type:[X.WebGPUSystem],name:`encoder`,priority:1};var Fk=class{constructor(e){this._renderer=e}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}};Fk.extension={type:[X.WebGPUSystem],name:`limits`};var Ik=class{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||=this._renderTargetStencilState[e.uid]={stencilMode:ax.DISABLED,stencilReference:0},this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){let n=this._renderTargetStencilState[this._activeRenderTarget.uid];n.stencilMode=e,n.stencilReference=t;let r=this._renderer;r.pipeline.setStencilMode(e),r.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}};Ik.extension={type:[X.WebGPUSystem],name:`stencil`};var Lk={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Rk(e){let t=e.map(e=>({data:e,offset:0,size:0})),n=0;for(let e=0;e<t.length;e++){let r=t[e],i=Lk[r.data.type].size,a=Lk[r.data.type].align;if(!Lk[r.data.type])throw Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${r.data.type}`);r.data.size>1&&(i=Math.max(i,a)*r.data.size),n=Math.ceil(n/a)*a,r.size=i,r.offset=n,n+=i}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function zk(e,t){let{size:n,align:r}=Lk[e.data.type],i=(r-n)/4,a=e.data.type.indexOf(`i32`)>=0?`dataInt32`:`data`;return`
         v = uv.${e.data.name};
         ${t===0?``:`offset += ${t};`}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${e.data.size*(n/4)}; i++)
         {
             for(var j = 0; j < ${n/4}; j++)
             {
                 ${a}[arrayOffset++] = v[t++];
             }
             ${i===0?``:`arrayOffset += ${i};`}
         }
     `}function Bk(e){return gD(e,`uboWgsl`,zk,yD)}var Vk=class extends fD{constructor(){super({createUboElements:Rk,generateUboSync:Bk})}};Vk.extension={type:[X.WebGPUSystem],name:`ubo`};var Hk=128,Uk=class{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._batchBuffer=new jk({minUniformOffsetAlignment:Hk});let t=256/Hk;for(let e=0;e<t;e++){let t=xx.UNIFORM|xx.COPY_DST;e===0&&(t|=xx.COPY_SRC),this._buffers.push(new Sx({data:this._batchBuffer.data,usage:t}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){this._bindGroupHash=Object.create(null),this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);let n=e.buffer.data,r=this._batchBuffer.addEmptyGroup(n.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,r/4),this._bindGroupHash[e.uid]=this._getBindGroup(r/Hk),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);let t=e.buffer.data,n=this._batchBuffer.addGroup(t);return this._getBufferResource(n/Hk)}getArrayBindGroup(e){let t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Hk)}getArrayBufferResource(e){let t=this._batchBuffer.addGroup(e)/Hk;return this._getBufferResource(t)}_getBufferResource(e){if(!this._bufferResources[e]){let t=this._buffers[e%2];this._bufferResources[e]=new MD({buffer:t,offset:(e/2|0)*256,size:Hk})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){let t=new dy({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){let e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);let n=this._renderer.gpu.device.createCommandEncoder();for(let r=1;r<this._buffers.length;r++){let i=this._buffers[r];n.copyBufferToBuffer(e.getGPUBuffer(t),Hk,e.getGPUBuffer(i),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([n.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._renderer=null}};Uk.extension={type:[X.WebGPUPipes],name:`uniformBatch`};var Wk={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function Gk(e,t,n,r,i){return e<<24|t<<16|n<<10|r<<5|i}function Kk(e,t,n,r,i){return n<<8|e<<5|r<<3|i<<1|t}var qk=class{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._colorTargetCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(ax.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._colorTargetCount=e.colorTargetCount,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=uD[e],this._updatePipeHash())}setPipeline(e,t,n,r){let i=this.getPipeline(e,t,n);r.setPipeline(i)}getPipeline(e,t,n,r){e._layoutKey||(qE(e,t.attributeData),this._generateBufferKey(e)),r||=e.topology;let i=Gk(e._layoutKey,t._layoutKey,n.data,n._blendModeId,Wk[r]);return this._pipeCache[i]||(this._pipeCache[i]=this._createPipeline(e,t,n,r)),this._pipeCache[i]}_createPipeline(e,t,n,r){let i=this._gpu.device,a=this._createVertexBufferLayouts(e,t),o=this._renderer.state.getColorTargets(n,this._colorTargetCount),s=this._stencilMode===ax.RENDERING_MASK_ADD?0:this._colorMask;for(let e=0;e<o.length;e++)o[e].writeMask=s;let c=this._renderer.shader.getProgramData(t).pipeline,l={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:a},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:o},primitive:{topology:r,cullMode:n.cullMode},layout:c,multisample:{count:this._multisampleCount},label:`PIXI Pipeline`};return this._depthStencilAttachment&&(l.depthStencil={...this._stencilState,format:`depth24plus-stencil8`,depthWriteEnabled:n.depthTest,depthCompare:n.depthTest?`less`:`always`}),i.createRenderPipeline(l)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){let t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){let t=[],n=0,r=Object.keys(e.attributes).sort();for(let i=0;i<r.length;i++){let a=e.attributes[r[i]];t[n++]=a.offset,t[n++]=a.format,t[n++]=a.stride,t[n++]=a.instance}return e._layoutKey=Nv(t.join(`|`),`geometry`),e._layoutKey}_generateAttributeLocationsKey(e){let t=[],n=0,r=Object.keys(e.attributeData).sort();for(let i=0;i<r.length;i++){let a=e.attributeData[r[i]];t[n++]=a.location}return e._attributeLocationsKey=Nv(t.join(`|`),`programAttributes`),e._attributeLocationsKey}getBufferNamesToBind(e,t){let n=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[n])return this._bindingNamesCache[n];let r=this._createVertexBufferLayouts(e,t),i=Object.create(null),a=t.attributeData;for(let e=0;e<r.length;e++){let t=Object.values(r[e].attributes)[0].shaderLocation;for(let n in a)if(a[n].location===t){i[e]=n;break}}return this._bindingNamesCache[n]=i,i}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);let n=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[n])return this._bufferLayoutsCache[n];let r=[];return e.buffers.forEach(n=>{let i={arrayStride:0,stepMode:`vertex`,attributes:[]},a=i.attributes;for(let r in t.attributeData){let o=e.attributes[r];(o.divisor??1)!==1&&$(`Attribute ${r} has an invalid divisor value of '${o.divisor}'. WebGPU only supports a divisor value of 1`),o.buffer===n&&(i.arrayStride=o.stride,i.stepMode=o.instance?`instance`:`vertex`,a.push({shaderLocation:t.attributeData[r].location,offset:o.offset,format:o.format}))}a.length&&r.push(i)}),this._bufferLayoutsCache[n]=r,r}_updatePipeHash(){let e=Kk(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment,this._colorTargetCount);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}};qk.extension={type:[X.WebGPUSystem],name:`pipeline`};var Jk=class{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}},Yk=class{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,n,r,i){let a=this._renderer,o=this._getGpuColorTexture(e),s=a.texture.getGpuSource(t.source);return a.encoder.commandEncoder.copyTextureToTexture({texture:o,origin:n},{texture:s,origin:i},r),t}startRenderPass(e,t=!0,n,r){let i=this._renderTargetSystem.getGpuRenderTarget(e);i.descriptor=this.getDescriptor(e,t,n),this._renderer.pipeline.setRenderTarget(i),this._renderer.encoder.beginRenderPass(i),this._renderer.encoder.setViewport(r)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,n){typeof t==`boolean`&&(t=t?lb.ALL:lb.NONE);let r=this._renderTargetSystem,i=r.getGpuRenderTarget(e),a=e.colorTextures.map((e,a)=>{let o=i.contexts[a],s,c;s=o?o.getCurrentTexture().createView():this._renderer.texture.getGpuSource(e).createView({mipLevelCount:1}),i.msaaTextures[a]&&(c=s,s=this._renderer.texture.getTextureView(i.msaaTextures[a]));let l=t&lb.COLOR?`clear`:`load`;return n??=r.defaultClearColor,{view:s,resolveTarget:c,clearValue:n,storeOp:`store`,loadOp:l}}),o;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=i.msaa?4:1),e.depthStencilTexture){let n=t&lb.STENCIL?`clear`:`load`,r=t&lb.DEPTH?`clear`:`load`;o={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:`store`,stencilLoadOp:n,depthClearValue:1,depthLoadOp:r,depthStoreOp:`store`}}return{colorAttachments:a,depthStencilAttachment:o}}clear(e,t=!0,n,r){if(!t)return;let{gpu:i,encoder:a}=this._renderer,o=i.device;if(a.commandEncoder===null){let i=o.createCommandEncoder(),a=this.getDescriptor(e,t,n),s=i.beginRenderPass(a);s.setViewport(r.x,r.y,r.width,r.height,0,1),s.end();let c=i.finish();o.queue.submit([c])}else this.startRenderPass(e,t,n,r)}initGpuRenderTarget(e){e.isRoot=!0;let t=new Jk;return t.colorTargetCount=e.colorTextures.length,e.colorTextures.forEach((e,n)=>{if(e instanceof v_){let r=e.resource.getContext(`webgpu`),i=e.transparent?`premultiplied`:`opaque`;try{r.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:`bgra8unorm`,alphaMode:i})}catch(e){console.error(e)}t.contexts[n]=r}if(t.msaa=e.source.antialias,e.source.antialias){let e=new jh({width:0,height:0,sampleCount:4});t.msaaTextures[n]=e}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(e=>{e.unconfigure()}),e.msaaTextures.forEach(e=>{e.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){let t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((e,n)=>{t.msaaTextures[n]?.resize(e.source.width,e.source.height,e.source._resolution)})}},Xk=class extends AD{constructor(e){super(e),this.adaptor=new Yk,this.adaptor.init(e,this)}};Xk.extension={type:[X.WebGPUSystem],name:`renderTarget`};var Zk=class{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){let t=this._gpu.device,n=e.gpuLayout.map(e=>t.createBindGroupLayout({entries:e})),r={bindGroupLayouts:n};return this._gpuProgramData[e._layoutKey]={bindGroups:n,pipeline:t.createPipelineLayout(r)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}};Zk.extension={type:[X.WebGPUSystem],name:`shader`};var Qk={};Qk.normal={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`}},Qk.add={alpha:{srcFactor:`src-alpha`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`one`,dstFactor:`one`,operation:`add`}},Qk.multiply={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`dst`,dstFactor:`one-minus-src-alpha`,operation:`add`}},Qk.screen={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`one`,dstFactor:`one-minus-src`,operation:`add`}},Qk.overlay={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`one`,dstFactor:`one-minus-src`,operation:`add`}},Qk.none={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`zero`,dstFactor:`zero`,operation:`add`}},Qk[`normal-npm`]={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`src-alpha`,dstFactor:`one-minus-src-alpha`,operation:`add`}},Qk[`add-npm`]={alpha:{srcFactor:`one`,dstFactor:`one`,operation:`add`},color:{srcFactor:`src-alpha`,dstFactor:`one`,operation:`add`}},Qk[`screen-npm`]={alpha:{srcFactor:`one`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`src-alpha`,dstFactor:`one-minus-src`,operation:`add`}},Qk.erase={alpha:{srcFactor:`zero`,dstFactor:`one-minus-src-alpha`,operation:`add`},color:{srcFactor:`zero`,dstFactor:`one-minus-src`,operation:`add`}},Qk.min={alpha:{srcFactor:`one`,dstFactor:`one`,operation:`min`},color:{srcFactor:`one`,dstFactor:`one`,operation:`min`}},Qk.max={alpha:{srcFactor:`one`,dstFactor:`one`,operation:`max`},color:{srcFactor:`one`,dstFactor:`one`,operation:`max`}};var $k=class{constructor(){this.defaultState=new Sy,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e,t){let n=Qk[e.blendMode]||Qk.normal,r=[],i={format:`bgra8unorm`,writeMask:0,blend:n};for(let e=0;e<t;e++)r[e]=i;return r}destroy(){this.gpu=null}};$k.extension={type:[X.WebGPUSystem],name:`state`};var eA={type:`image`,upload(e,t,n){let r=e.resource,i=(e.pixelWidth|0)*(e.pixelHeight|0),a=r.byteLength/i;n.device.queue.writeTexture({texture:t},r,{offset:0,rowsPerImage:e.pixelHeight,bytesPerRow:e.pixelWidth*a},{width:e.pixelWidth,height:e.pixelHeight,depthOrArrayLayers:1})}},tA={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},nA={blockBytes:4,blockWidth:1,blockHeight:1},rA={type:`compressed`,upload(e,t,n){let r=e.pixelWidth,i=e.pixelHeight,a=tA[e.format]||nA;for(let o=0;o<e.resource.length;o++){let s=e.resource[o],c=Math.ceil(r/a.blockWidth)*a.blockBytes;n.device.queue.writeTexture({texture:t,mipLevel:o},s,{offset:0,bytesPerRow:c},{width:Math.ceil(r/a.blockWidth)*a.blockWidth,height:Math.ceil(i/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),r=Math.max(r>>1,1),i=Math.max(i>>1,1)}}},iA={type:`image`,upload(e,t,n){let r=e.resource;if(!r)return;if(globalThis.HTMLImageElement&&r instanceof HTMLImageElement){let t=__.get().createCanvas(r.width,r.height);t.getContext(`2d`).drawImage(r,0,0,r.width,r.height),e.resource=t,$(`ImageSource: Image element passed, converting to canvas and replacing resource.`)}let i=Math.min(t.width,e.resourceWidth||e.pixelWidth),a=Math.min(t.height,e.resourceHeight||e.pixelHeight),o=e.alphaMode===`premultiply-alpha-on-upload`;n.device.queue.copyExternalImageToTexture({source:r},{texture:t,premultipliedAlpha:o},{width:i,height:a})}},aA={type:`video`,upload(e,t,n){iA.upload(e,t,n)}},oA=class{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:`linear`}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `}),t=this.device.createRenderPipeline({layout:`auto`,vertex:{module:this.mipmapShaderModule,entryPoint:`vertexMain`},fragment:{module:this.mipmapShaderModule,entryPoint:`fragmentMain`,targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){let t=this._getMipmapPipeline(e.format);if(e.dimension===`3d`||e.dimension===`1d`)throw Error(`Generating mipmaps for non-2d textures is currently unsupported!`);let n=e,r=e.depthOrArrayLayers||1,i=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!i){let t={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};n=this.device.createTexture(t)}let a=this.device.createCommandEncoder({}),o=t.getBindGroupLayout(0);for(let s=0;s<r;++s){let r=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:`2d`,baseArrayLayer:s,arrayLayerCount:1}),c=i?1:0;for(let i=1;i<e.mipLevelCount;++i){let e=n.createView({baseMipLevel:c++,mipLevelCount:1,dimension:`2d`,baseArrayLayer:s,arrayLayerCount:1}),i=a.beginRenderPass({colorAttachments:[{view:e,storeOp:`store`,loadOp:`clear`,clearValue:{r:0,g:0,b:0,a:0}}]}),l=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.sampler},{binding:1,resource:r}]});i.setPipeline(t),i.setBindGroup(0,l),i.draw(3,1,0,0),i.end(),r=e}}if(!i){let t={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:r};for(let r=1;r<e.mipLevelCount;++r)a.copyTextureToTexture({texture:n,mipLevel:r-1},{texture:e,mipLevel:r},t),t.width=Math.ceil(t.width/2),t.height=Math.ceil(t.height/2)}return this.device.queue.submit([a.finish()]),i||n.destroy(),e}},sA=class{constructor(e){this.textureView=null,this.gpuTexture=e}destroy(){this.gpuTexture.destroy(),this.textureView=null,this.gpuTexture=null}},cA=class{constructor(e){this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._uploads={image:iA,buffer:eA,video:aA,compressed:rA},this._renderer=e,e.renderableGC.addManagedHash(this,`_bindGroupHash`),this._managedTextures=new yS({renderer:e,type:`resource`,onUnload:this.onSourceUnload.bind(this),name:`gpuTextureSource`})}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gpu=e}initSource(e){return e._gpuData[this._renderer.uid]?.gpuTexture||this._initSource(e)}_initSource(e){if(e.autoGenerateMipmaps){let t=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(t))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!==`compressed`&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);let n=tA[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},r=Math.ceil(e.pixelWidth/n.blockWidth)*n.blockWidth,i=Math.ceil(e.pixelHeight/n.blockHeight)*n.blockHeight,a={label:e.label,size:{width:r,height:i},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},o=this._gpu.device.createTexture(a);return e._gpuData[this._renderer.uid]=new sA(o),this._managedTextures.add(e)&&(e.on(`update`,this.onSourceUpdate,this),e.on(`resize`,this.onSourceResize,this),e.on(`updateMipmaps`,this.onUpdateMipmaps,this)),this.onSourceUpdate(e),o}onSourceUpdate(e){let t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onUpdateMipmaps(e){this._mipmapGenerator||=new oA(this._gpu.device);let t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceUnload(e){e.off(`update`,this.onSourceUpdate,this),e.off(`resize`,this.onSourceResize,this),e.off(`updateMipmaps`,this.onUpdateMipmaps,this)}onSourceResize(e){e._gcLastUsed=this._renderer.gc.now;let t=e._gpuData[this._renderer.uid],n=t?.gpuTexture;n?(n.width!==e.pixelWidth||n.height!==e.pixelHeight)&&(t.destroy(),this._bindGroupHash[e.uid]=null,e._gpuData[this._renderer.uid]=null,this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuTexture||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]||this._createTextureBindGroup(e)}_createTextureBindGroup(e){let t=e.source;return this._bindGroupHash[e.uid]=new dy({0:t,1:t.style,2:new uy({uTextureMatrix:{type:`mat3x3<f32>`,value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){let t=e.source;t._gcLastUsed=this._renderer.gc.now;let n=t._gpuData[this._renderer.uid],r=null;return n||=(this.initSource(t),t._gpuData[this._renderer.uid]),r=n.textureView||n.gpuTexture.createView(),r}generateCanvas(e){let t=this._renderer,n=t.gpu.device.createCommandEncoder(),r=__.get().createCanvas();r.width=e.source.pixelWidth,r.height=e.source.pixelHeight;let i=r.getContext(`webgpu`);return i.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:__.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:`premultiplied`}),n.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:i.getCurrentTexture()},{width:r.width,height:r.height}),t.gpu.device.queue.submit([n.finish()]),r}getPixels(e){let t=this.generateCanvas(e),n=uw.getOptimalCanvasAndContext(t.width,t.height),r=n.context;r.drawImage(t,0,0);let{width:i,height:a}=t,o=r.getImageData(0,0,i,a),s=new Uint8ClampedArray(o.data.buffer);return uw.returnCanvasAndContext(n),{pixels:s,width:i,height:a}}destroy(){this._managedTextures.destroy();for(let e of Object.keys(this._bindGroupHash)){let t=Number(e);this._bindGroupHash[t]?.destroy()}this._renderer=null,this._gpu=null,this._mipmapGenerator=null,this._gpuSamplers=null,this._bindGroupHash=null}};cA.extension={type:[X.WebGPUSystem],name:`texture`};var lA=class{constructor(){this._maxTextures=0}contextChange(e){let t=new uy({uTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uColor:{value:new Float32Array([1,1,1,1]),type:`vec4<f32>`},uRound:{value:0,type:`f32`}});this._maxTextures=e.limits.maxBatchableTextures,this.shader=new py({gpuProgram:eS({name:`graphics`,bits:[nS,sS(this._maxTextures),NE,dS]}),resources:{localUniforms:t}})}execute(e,t){let n=t.context,r=n.customShader||this.shader,i=e.renderer,{batcher:a,instructions:o}=i.graphicsContext.getContextRenderData(n),s=i.encoder;s.setGeometry(a.geometry,r.gpuProgram);let c=i.globalUniforms.bindGroup;s.setBindGroup(0,c,r.gpuProgram);let l=i.renderPipes.uniformBatch.getUniformBindGroup(r.resources.localUniforms,!0);s.setBindGroup(2,l,r.gpuProgram);let u=o.instructions,d=null;for(let t=0;t<o.instructionSize;t++){let n=u[t];if(n.topology!==d&&(d=n.topology,s.setPipelineFromGeometryProgramAndState(a.geometry,r.gpuProgram,e.state,n.topology)),r.groups[1]=n.bindGroup,!n.gpuBindGroup){let e=n.textures;n.bindGroup=ex(e.textures,e.count,this._maxTextures),n.gpuBindGroup=i.bindGroup.getBindGroup(n.bindGroup,r.gpuProgram,1)}s.setBindGroup(1,n.bindGroup,r.gpuProgram),s.renderPassEncoder.drawIndexed(n.size,1,n.start)}}destroy(){this.shader.destroy(!0),this.shader=null}};lA.extension={type:[X.WebGPUPipesAdaptor],name:`graphics`};var uA=class{init(){this._shader=new py({gpuProgram:eS({name:`mesh`,bits:[ME,FE,dS]}),resources:{uTexture:Q.EMPTY._source,uSampler:Q.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:`mat3x3<f32>`,value:new Z}}}})}execute(e,t){let n=e.renderer,r=t._shader;if(!r)r=this._shader,r.groups[2]=n.texture.getTextureBindGroup(t.texture);else if(!r.gpuProgram){$(`Mesh shader has no gpuProgram`,t.shader);return}let i=r.gpuProgram;if(i.autoAssignGlobalUniforms&&(r.groups[0]=n.globalUniforms.bindGroup),i.autoAssignLocalUniforms){let t=e.localUniforms;r.groups[1]=n.renderPipes.uniformBatch.getUniformBindGroup(t,!0)}n.encoder.draw({geometry:t._geometry,shader:r,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}};uA.extension={type:[X.WebGPUPipesAdaptor],name:`mesh`};var dA=[...yk,Vk,Pk,Nk,Fk,Ak,cA,Xk,Zk,$k,qk,Mk,Ik,Ok],fA=[...bk,Uk],pA=[kE,uA,lA],mA=[],hA=[],gA=[];Km.handleByNamedList(X.WebGPUSystem,mA),Km.handleByNamedList(X.WebGPUPipes,hA),Km.handleByNamedList(X.WebGPUPipesAdaptor,gA),Km.add(...dA,...fA,...pA);var _A=class extends pb{constructor(){let e={name:`webgpu`,type:fy.WEBGPU,systems:mA,renderPipes:hA,renderPipeAdaptors:gA};super(e)}},vA=class{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{xg.return(e)}),this.batches.length=0}},yA=class{constructor(e,t){this.state=Sy.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new yS({renderer:e,type:`renderable`,priority:-1,name:`graphics`})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){let t=e.context,n=!!e._gpuData,r=this.renderer.graphicsContext.updateGpuContext(t);return!!(r.isBatchable||n!==r.isBatchable)}addRenderable(e,t){let n=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),n.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){let t=this._getGpuDataForRenderable(e).batches;for(let e=0;e<t.length;e++){let n=t[e];n._batcher.updateElement(n)}}execute(e){if(!e.isRenderable)return;let t=this.renderer,n=e.context;if(!t.graphicsContext.getGpuContext(n).batches.length)return;let r=n.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;let i=r.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=t._roundPixels|e._roundPixels,ik(e.groupColorAlpha,i.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){let t=this._getGpuDataForRenderable(e),n=this.renderer.graphicsContext.updateGpuContext(e.context);t.destroy(),n.isBatchable&&this._updateBatchesForRenderable(e,t)}_addToBatcher(e,t){let n=this.renderer.renderPipes.batch,r=this._getGpuDataForRenderable(e).batches;for(let e=0;e<r.length;e++){let i=r[e];n.addToBatch(i,t)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){let t=new vA;return e._gpuData[this.renderer.uid]=t,this._managedGraphics.add(e),t}_updateBatchesForRenderable(e,t){let n=e.context,r=this.renderer.graphicsContext.getGpuContext(n),i=this.renderer._roundPixels|e._roundPixels;t.batches=r.batches.map(t=>{let n=xg.get(wS);return t.copyTo(n),n.renderable=e,n.roundPixels=i,n})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}};yA.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`graphics`};var bA=class e extends pE{constructor(...e){super({});let t=e[0]??{};typeof t==`number`&&(xh(vh,`PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead`),t={width:t,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(t)}build(t){t={...e.defaultOptions,...t},this.verticesX=this.verticesX??t.verticesX,this.verticesY=this.verticesY??t.verticesY,this.width=this.width??t.width,this.height=this.height??t.height;let n=this.verticesX*this.verticesY,r=[],i=[],a=[],o=this.verticesX-1,s=this.verticesY-1,c=this.width/o,l=this.height/s;for(let e=0;e<n;e++){let t=e%this.verticesX,n=e/this.verticesX|0;r.push(t*c,n*l),i.push(t/o,n/s)}let u=o*s;for(let e=0;e<u;e++){let t=e%o,n=e/o|0,r=n*this.verticesX+t,i=n*this.verticesX+t+1,s=(n+1)*this.verticesX+t,c=(n+1)*this.verticesX+t+1;a.push(r,i,s,i,c,s)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};bA.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};var xA=bA,SA=class{constructor(){this.batcherName=`default`,this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){let e=this.geometry.getBuffer(`aUV`),t=e.data,n=t,r=this.texture.textureMatrix;return r.isSimple||(n=this._transformedUvs,(this._textureMatrixUpdateId!==r._updateID||this._uvUpdateId!==e._updateID)&&((!n||n.length<t.length)&&(n=this._transformedUvs=new Float32Array(t.length)),this._textureMatrixUpdateId=r._updateID,this._uvUpdateId=e._updateID,r.multiplyUvs(t,n))),n}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}},CA=class{destroy(){}},wA=class{constructor(e,t){this.localUniforms=new uy({uTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uColor:{value:new Float32Array([1,1,1,1]),type:`vec4<f32>`},uRound:{value:0,type:`f32`}}),this.localUniformsBindGroup=new dy({0:this.localUniforms}),this.renderer=e,this._adaptor=t,this._adaptor.init()}validateRenderable(e){let t=this._getMeshData(e),n=t.batched,r=e.batched;if(t.batched=r,n!==r)return!0;if(r){let n=e._geometry;if(n.indices.length!==t.indexSize||n.positions.length!==t.vertexSize)return t.indexSize=n.indices.length,t.vertexSize=n.positions.length,!0;let r=this._getBatchableMesh(e);return r.texture.uid!==e._texture.uid&&(r._textureMatrixUpdateId=-1),!r._batcher.checkAndUpdateTexture(r,e._texture)}return!1}addRenderable(e,t){let n=this.renderer.renderPipes.batch,r=this._getMeshData(e);if(e.didViewUpdate&&(r.indexSize=e._geometry.indices?.length,r.vertexSize=e._geometry.positions?.length),r.batched){let r=this._getBatchableMesh(e);r.setTexture(e._texture),r.geometry=e._geometry,n.addToBatch(r,t)}else n.break(t),t.add(e)}updateRenderable(e){if(e.batched){let t=this._getBatchableMesh(e);t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}execute(e){if(!e.isRenderable)return;e.state.blendMode=ox(e.groupBlendMode,e.texture._source);let t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),ik(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){var t,n;return(t=e._gpuData)[n=this.renderer.uid]||(t[n]=new CA),e._gpuData[this.renderer.uid].meshData||this._initMeshData(e)}_initMeshData(e){return e._gpuData[this.renderer.uid].meshData={batched:e.batched,indexSize:0,vertexSize:0},e._gpuData[this.renderer.uid].meshData}_getBatchableMesh(e){var t,n;return(t=e._gpuData)[n=this.renderer.uid]||(t[n]=new CA),e._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(e)}_initBatchableMesh(e){let t=new SA;return t.renderable=e,t.setTexture(e._texture),t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,e._gpuData[this.renderer.uid].batchableMesh=t,t}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}};wA.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`mesh`};var TA=class{execute(e,t){let n=e.state,r=e.renderer,i=t.shader||e.defaultShader;i.resources.uTexture=t.texture._source,i.resources.uniforms=e.localUniforms;let a=r.gl,o=e.getBuffers(t);r.shader.bind(i),r.state.set(n),r.geometry.bind(o.geometry,i.glProgram);let s=o.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,t.particleChildren.length*6,s,0)}},EA=class{execute(e,t){let n=e.renderer,r=t.shader||e.defaultShader;r.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),r.groups[1]=n.texture.getTextureBindGroup(t.texture);let i=e.state,a=e.getBuffers(t);n.encoder.draw({geometry:a.geometry,shader:t.shader||e.defaultShader,state:i,size:t.particleChildren.length*6})}};function DA(e,t=null){let n=e*6;if(n>65535?t||=new Uint32Array(n):t||=new Uint16Array(n),t.length!==n)throw Error(`Out buffer length is incorrect, got ${t.length} and expected ${n}`);for(let e=0,r=0;e<n;e+=6,r+=4)t[e+0]=r+0,t[e+1]=r+1,t[e+2]=r+2,t[e+3]=r+0,t[e+4]=r+2,t[e+5]=r+3;return t}function OA(e){return{dynamicUpdate:kA(e,!0),staticUpdate:kA(e,!1)}}function kA(e,t){let n=[];n.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let r=0;for(let i in e){let a=e[i];if(t!==a.dynamic)continue;n.push(`offset = index + ${r}`),n.push(a.code);let o=Xv(a.format);r+=o.stride/4}n.push(`
            index += stride * 4;
        }
    `),n.unshift(`
        var stride = ${r};
    `);let i=n.join(`
`);return Function(`ps`,`f32v`,`u32v`,i)}var AA=class{constructor(e){this._size=0,this._generateParticleUpdateCache={};let t=this._size=e.size??1e3,n=e.properties,r=0,i=0;for(let e in n){let t=n[e],a=Xv(t.format);t.dynamic?i+=a.stride:r+=a.stride}this._dynamicStride=i/4,this._staticStride=r/4,this.staticAttributeBuffer=new nx(t*4*r),this.dynamicAttributeBuffer=new nx(t*4*i),this.indexBuffer=DA(t);let a=new Ex,o=0,s=0;for(let e in this._staticBuffer=new Sx({data:new Float32Array(1),label:`static-particle-buffer`,shrinkToFit:!1,usage:xx.VERTEX|xx.COPY_DST}),this._dynamicBuffer=new Sx({data:new Float32Array(1),label:`dynamic-particle-buffer`,shrinkToFit:!1,usage:xx.VERTEX|xx.COPY_DST}),n){let t=n[e],r=Xv(t.format);t.dynamic?(a.addAttribute(t.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:o*4,format:t.format}),o+=r.size):(a.addAttribute(t.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:s*4,format:t.format}),s+=r.size)}a.addIndex(this.indexBuffer);let c=this.getParticleUpdate(n);this._dynamicUpload=c.dynamicUpdate,this._staticUpload=c.staticUpdate,this.geometry=a}getParticleUpdate(e){let t=jA(e);return this._generateParticleUpdateCache[t]||(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e)),this._generateParticleUpdateCache[t]}generateParticleUpdate(e){return OA(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new nx(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new nx(this._size*this._dynamicStride*4*4),this.indexBuffer=DA(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));let n=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){let t=this.staticAttributeBuffer;this._staticUpload(e,t.float32View,t.uint32View),this._staticBuffer.setDataWithSize(t.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}};function jA(e){let t=[];for(let n in e){let r=e[n];t.push(n,r.code,r.dynamic?`d`:`s`)}return t.join(`_`)}var MA=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,NA=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,PA=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`,FA=class extends py{constructor(){let e=Jv.from({vertex:NA,fragment:MA}),t=ay.from({fragment:{source:PA,entryPoint:`mainFragment`},vertex:{source:PA,entryPoint:`mainVertex`}});super({glProgram:e,gpuProgram:t,resources:{uTexture:Q.WHITE.source,uSampler:new kh({}),uniforms:{uTranslationMatrix:{value:new Z,type:`mat3x3<f32>`},uColor:{value:new hg(16777215),type:`vec4<f32>`},uRound:{value:1,type:`f32`},uResolution:{value:[0,0],type:`vec2<f32>`}}}})}},IA=class{constructor(e,t){this.state=Sy.for2d(),this.localUniforms=new uy({uTranslationMatrix:{value:new Z,type:`mat3x3<f32>`},uColor:{value:new Float32Array(4),type:`vec4<f32>`},uRound:{value:1,type:`f32`},uResolution:{value:[0,0],type:`vec2<f32>`}}),this.renderer=e,this.adaptor=t,this.defaultShader=new FA,this.state=Sy.for2d(),this._managedContainers=new yS({renderer:e,type:`renderable`,name:`particleContainer`})}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return e._gpuData[this.renderer.uid]||this._initBuffer(e)}_initBuffer(e){return e._gpuData[this.renderer.uid]=new AA({size:e.particleChildren.length,properties:e._properties}),this._managedContainers.add(e),e._gpuData[this.renderer.uid]}updateRenderable(e){}execute(e){let t=e.particleChildren;if(t.length===0)return;let n=this.renderer,r=this.getBuffers(e);e.texture||=t[0].texture;let i=this.state;r.update(t,e._childrenDirty),e._childrenDirty=!1,i.blendMode=ox(e.blendMode,e.texture._source);let a=this.localUniforms.uniforms,o=a.uTranslationMatrix;e.worldTransform.copyTo(o),o.prepend(n.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=n.globalUniforms.globalUniformData.resolution,a.uRound=n._roundPixels|e._roundPixels,ik(e.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,e)}destroy(){this._managedContainers.destroy(),this.renderer=null,this.defaultShader&&=(this.defaultShader.destroy(),null)}},LA=class extends IA{constructor(e){super(e,new TA)}};LA.extension={type:[X.WebGLPipes],name:`particle`};var RA=class extends IA{constructor(e){super(e,new EA)}};RA.extension={type:[X.WebGPUPipes],name:`particle`};var zA=class e extends xA{constructor(t={}){t={...e.defaultOptions,...t},super({width:t.width,height:t.height,verticesX:4,verticesY:4}),this.update(t)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){let e=this.positions,{width:t,height:n,_leftWidth:r,_rightWidth:i,_topHeight:a,_bottomHeight:o,_anchorX:s,_anchorY:c}=this,l=r+i,u=t>l?1:t/l,d=a+o,f=n>d?1:n/d,p=Math.min(u,f),m=s*t,h=c*n;e[0]=e[8]=e[16]=e[24]=-m,e[2]=e[10]=e[18]=e[26]=r*p-m,e[4]=e[12]=e[20]=e[28]=t-i*p-m,e[6]=e[14]=e[22]=e[30]=t-m,e[1]=e[3]=e[5]=e[7]=-h,e[9]=e[11]=e[13]=e[15]=a*p-h,e[17]=e[19]=e[21]=e[23]=n-o*p-h,e[25]=e[27]=e[29]=e[31]=n-h,this.getBuffer(`aPosition`).update()}updateUvs(){let e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;let t=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer(`aUV`).update()}};zA.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};var BA=zA,VA=class extends SA{constructor(){super(),this.geometry=new BA}destroy(){this.geometry.destroy()}},HA=class{constructor(e){this._renderer=e,this._managedSprites=new yS({renderer:e,type:`renderable`,name:`nineSliceSprite`})}addRenderable(e,t){let n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){let t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){let t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){let t=e._gpuData[this._renderer.uid]=new VA,n=t;return n.renderable=e,n.transform=e.groupTransform,n.texture=e._texture,n.roundPixels=this._renderer._roundPixels|e._roundPixels,this._managedSprites.add(e),e.didViewUpdate||this._updateBatchableSprite(e,n),t}destroy(){this._managedSprites.destroy(),this._renderer=null}};HA.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`nineSliceSprite`};var UA={name:`tiling-bit`,vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},WA={name:`tiling-bit`,vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}},GA,KA,qA=class extends py{constructor(){GA??=eS({name:`tiling-sprite-shader`,bits:[ME,UA,dS]}),KA??=tS({name:`tiling-sprite-shader`,bits:[PE,WA,fS]});let e=new uy({uMapCoord:{value:new Z,type:`mat3x3<f32>`},uClampFrame:{value:new Float32Array([0,0,1,1]),type:`vec4<f32>`},uClampOffset:{value:new Float32Array([0,0]),type:`vec2<f32>`},uTextureTransform:{value:new Z,type:`mat3x3<f32>`},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:`vec4<f32>`}});super({glProgram:KA,gpuProgram:GA,resources:{localUniforms:new uy({uTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uColor:{value:new Float32Array([1,1,1,1]),type:`vec4<f32>`},uRound:{value:0,type:`f32`}}),tilingUniforms:e,uTexture:Q.EMPTY.source,uSampler:Q.EMPTY.source.style}})}updateUniforms(e,t,n,r,i,a){let o=this.resources.tilingUniforms,s=a.width,c=a.height,l=a.textureMatrix,u=o.uniforms.uTextureTransform;u.set(n.a*s/e,n.b*s/t,n.c*c/e,n.d*c/t,n.tx/e,n.ty/t),u.invert(),o.uniforms.uMapCoord=l.mapCoord,o.uniforms.uClampFrame=l.uClampFrame,o.uniforms.uClampOffset=l.uClampOffset,o.uniforms.uTextureTransform=u,o.uniforms.uSizeAnchor[0]=e,o.uniforms.uSizeAnchor[1]=t,o.uniforms.uSizeAnchor[2]=r,o.uniforms.uSizeAnchor[3]=i,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}},JA=class extends pE{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}};function YA(e,t){let n=e.anchor.x,r=e.anchor.y;t[0]=-n*e.width,t[1]=-r*e.height,t[2]=(1-n)*e.width,t[3]=-r*e.height,t[4]=(1-n)*e.width,t[5]=(1-r)*e.height,t[6]=-n*e.width,t[7]=(1-r)*e.height}function XA(e,t,n,r){let i=0,a=e.length/(t||2),o=r.a,s=r.b,c=r.c,l=r.d,u=r.tx,d=r.ty;for(n*=t;i<a;){let r=e[n],a=e[n+1];e[n]=o*r+c*a+u,e[n+1]=s*r+l*a+d,n+=t,i++}}function ZA(e,t){let n=e.texture,r=n.frame.width,i=n.frame.height,a=0,o=0;e.applyAnchorToTexture&&(a=e.anchor.x,o=e.anchor.y),t[0]=t[6]=-a,t[2]=t[4]=1-a,t[1]=t[3]=-o,t[5]=t[7]=1-o;let s=Z.shared;s.copyFrom(e._tileTransform.matrix),s.tx/=e.width,s.ty/=e.height,s.invert(),s.scale(e.width/r,e.height/i),XA(t,2,0,s)}var QA=new JA,$A=class{constructor(){this.canBatch=!0,this.geometry=new pE({indices:QA.indices.slice(),positions:QA.positions.slice(),uvs:QA.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}},ej=class{constructor(e){this._state=Sy.default2d,this._renderer=e,this._managedTilingSprites=new yS({renderer:e,type:`renderable`,name:`tilingSprite`})}validateRenderable(e){let t=this._getTilingSpriteData(e),n=t.canBatch;this._updateCanBatch(e);let r=t.canBatch;if(r&&r===n){let{batchableMesh:n}=t;return!n._batcher.checkAndUpdateTexture(n,e.texture)}return n!==r}addRenderable(e,t){let n=this._renderer.renderPipes.batch;this._updateCanBatch(e);let r=this._getTilingSpriteData(e),{geometry:i,canBatch:a}=r;if(a){r.batchableMesh||=new SA;let a=r.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),a.geometry=i,a.renderable=e,a.transform=e.groupTransform,a.setTexture(e._texture)),a.roundPixels=this._renderer._roundPixels|e._roundPixels,n.addToBatch(a,t)}else n.break(t),r.shader||=new qA,this.updateRenderable(e),t.add(e)}execute(e){let{shader:t}=this._getTilingSpriteData(e);t.groups[0]=this._renderer.globalUniforms.bindGroup;let n=t.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=this._renderer._roundPixels|e._roundPixels,ik(e.groupColorAlpha,n.uColor,0),this._state.blendMode=ox(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:QA,shader:t,state:this._state})}updateRenderable(e){let t=this._getTilingSpriteData(e),{canBatch:n}=t;if(n){let{batchableMesh:n}=t;e.didViewUpdate&&this._updateBatchableMesh(e),n._batcher.updateElement(n)}else if(e.didViewUpdate){let{shader:n}=t;n.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){let t=new $A;return t.renderable=e,e._gpuData[this._renderer.uid]=t,this._managedTilingSprites.add(e),t}_updateBatchableMesh(e){let{geometry:t}=this._getTilingSpriteData(e),n=e.texture.source.style;n.addressMode!==`repeat`&&(n.addressMode=`repeat`,n.update()),ZA(e,t.uvs),YA(e,t.positions)}destroy(){this._managedTilingSprites.destroy(),this._renderer=null}_updateCanBatch(e){let t=this._getTilingSpriteData(e),n=e.texture,r=!0;return this._renderer.type===fy.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=n.textureMatrix.isSimple&&(r||n.source.isPowerOfTwo),t.canBatch}};ej.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`tilingSprite`};var tj={name:`local-uniform-msdf-bit`,vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},nj={name:`local-uniform-msdf-bit`,vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},rj={name:`msdf-bit`,fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},ij={name:`msdf-bit`,fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}},aj,oj,sj=class extends py{constructor(e){let t=new uy({uColor:{value:new Float32Array([1,1,1,1]),type:`vec4<f32>`},uTransformMatrix:{value:new Z,type:`mat3x3<f32>`},uDistance:{value:4,type:`f32`},uRound:{value:0,type:`f32`}});aj??=eS({name:`sdf-shader`,bits:[nS,sS(e),tj,rj,dS]}),oj??=tS({name:`sdf-shader`,bits:[rS,uS(e),nj,ij,fS]}),super({glProgram:oj,gpuProgram:aj,resources:{localUniforms:t,batchSamplers:mS(e)}})}},cj=class extends dE{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}},lj=class{constructor(e){this._renderer=e,this._managedBitmapTexts=new yS({renderer:e,type:`renderable`,priority:-2,name:`bitmapText`})}validateRenderable(e){let t=this._getGpuBitmapText(e);return this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){let n=this._getGpuBitmapText(e);uj(e,n),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,n)),this._renderer.renderPipes.graphics.addRenderable(n,t),n.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){let t=this._getGpuBitmapText(e);uj(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){let{context:n}=t,r=xw.getFont(e.text,e._style);n.clear(),r.distanceField.type!==`none`&&(n.customShader||=new sj(this._renderer.limits.maxBatchableTextures));let i=Pb.graphemeSegmenter(e.text),a=e._style,o=r.baseLineOffset,s=hw(i,a,r,!0),c=a.padding,l=s.scale,u=s.width,d=s.height+s.offsetY;a._stroke&&(u+=a._stroke.width/l,d+=a._stroke.width/l),n.translate(-e._anchor._x*u-c,-e._anchor._y*d-c).scale(l,l);let f=r.applyFillAsTint?a._fill.color:16777215,p=r.fontMetrics.fontSize,m=r.lineHeight;a.lineHeight&&(p=a.fontSize/l,m=a.lineHeight/l);let h=(m-p)/2;h-r.baseLineOffset<0&&(h=0);for(let e=0;e<s.lines.length;e++){let t=s.lines[e];for(let e=0;e<t.charPositions.length;e++){let i=t.chars[e],a=r.chars[i];if(a?.texture){let r=a.texture;n.texture(r,f||`black`,Math.round(t.charPositions[e]+a.xOffset),Math.round(o+a.yOffset+h),r.orig.width,r.orig.height)}}o+=m}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){let t=new cj;return e._gpuData[this._renderer.uid]=t,this._updateContext(e,t),this._managedBitmapTexts.add(e),t}_updateDistanceField(e){let t=this._getGpuBitmapText(e).context,n=e._style.fontFamily,r=k_.get(`${n}-bitmap`),{a:i,b:a,c:o,d:s}=e.groupTransform,c=Math.sqrt(i*i+a*a),l=Math.sqrt(o*o+s*s),u=(Math.abs(c)+Math.abs(l))/2,d=r.baseRenderedFontSize/e._style.fontSize,f=u*r.distanceField.range*(1/d);t.customShader.resources.localUniforms.uniforms.uDistance=f}destroy(){this._managedBitmapTexts.destroy(),this._renderer=null,this._managedBitmapTexts=null}};lj.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`bitmapText`};function uj(e,t){t.groupTransform=e.groupTransform,t.groupColorAlpha=e.groupColorAlpha,t.groupColor=e.groupColor,t.groupBlendMode=e.groupBlendMode,t.globalDisplayStatus=e.globalDisplayStatus,t.groupTransform=e.groupTransform,t.localDisplayStatus=e.localDisplayStatus,t.groupAlpha=e.groupAlpha,t._roundPixels=e._roundPixels}var dj=class extends kO{constructor(){super(...arguments),this.generatingTexture=!1,this.currentKey=`--`}destroy(){this.texturePromise=null,this.generatingTexture=!1,this.currentKey=`--`,super.destroy()}};function fj(e,t){let{texture:n,bounds:r}=e,i=t._style._getFinalPadding();Fh(r,t._anchor,n);let a=t._anchor._x*i*2,o=t._anchor._y*i*2;r.minX-=i-a,r.minY-=i-o,r.maxX-=i-a,r.maxY-=i-o}var pj=class{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new yS({renderer:e,type:`renderable`,onUnload:this.onTextUnload.bind(this),name:`htmlText`})}resolutionChange(){for(let e in this._managedTexts.items){let t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){let t=this._getGpuText(e),n=e.styleKey;return t.currentKey!==n}addRenderable(e,t){let n=this._getGpuText(e);if(e._didTextUpdate){let t=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==t)&&this._updateGpuText(e).catch(e=>{console.error(e)}),e._didTextUpdate=!1,fj(n,e)}this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){let t=this._getGpuText(e);t._batcher.updateElement(t)}async _updateGpuText(e){e._didTextUpdate=!1;let t=this._getGpuText(e);if(t.generatingTexture)return;let n=t.texturePromise;t.texturePromise=null,t.generatingTexture=!0,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let r=this._renderer.htmlText.getTexturePromise(e);n&&(r=r.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(t.currentKey),this._renderer.htmlText.returnTexturePromise(n)})),t.texturePromise=r,t.currentKey=e.styleKey,t.texture=await r;let i=e.renderGroup||e.parentRenderGroup;i&&(i.structureDidChange=!0),t.generatingTexture=!1,fj(t,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){let t=new dj;return t.renderable=e,t.transform=e.groupTransform,t.texture=Q.EMPTY,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){let t=e._gpuData[this._renderer.uid];if(!t)return;let{htmlText:n}=this._renderer;n.getReferenceCount(t.currentKey)===null?n.returnTexturePromise(t.texturePromise):n.decreaseReferenceCount(t.currentKey)}destroy(){this._managedTexts.destroy(),this._renderer=null}};pj.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`htmlText`};function mj(){let{userAgent:e}=__.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}var hj=new Lh;function gj(e,t,n,r){let i=hj;i.minX=0,i.minY=0,i.maxX=e.width/r|0,i.maxY=e.height/r|0;let a=$g.getOptimalTexture(i.width,i.height,r,!1);return a.source.uploadMethodId=`image`,a.source.resource=e,a.source.alphaMode=`premultiply-alpha-on-upload`,a.frame.width=t/r,a.frame.height=n/r,a.source.emit(`update`,a.source),a.updateUvs(),a}function _j(e,t){let n=t.fontFamily,r=[],i={},a=e.match(/font-family:([^;"\s]+)/g);function o(e){i[e]||(r.push(e),i[e]=!0)}if(Array.isArray(n))for(let e=0;e<n.length;e++)o(n[e]);else o(n);for(let e in a&&a.forEach(e=>{o(e.split(`:`)[1].trim())}),t.tagStyles){let n=t.tagStyles[e].fontFamily;o(n)}return r}async function vj(e){let t=await(await __.get().fetch(e)).blob(),n=new FileReader;return await new Promise((e,r)=>{n.onloadend=()=>e(n.result),n.onerror=r,n.readAsDataURL(t)})}async function yj(e,t){let n=await vj(t);return`@font-face {
        font-family: "${e.fontFamily}";
        font-weight: ${e.fontWeight};
        font-style: ${e.fontStyle};
        src: url('${n}');
    }`}var bj=new Map;async function xj(e){let t=e.filter(e=>k_.has(`${e}-and-url`)).map(e=>{if(!bj.has(e)){let{entries:t}=k_.get(`${e}-and-url`),n=[];t.forEach(t=>{let r=t.url,i=t.faces.map(e=>({weight:e.weight,style:e.style}));n.push(...i.map(t=>yj({fontWeight:t.weight,fontStyle:t.style,fontFamily:e},r)))}),bj.set(e,Promise.all(n).then(e=>e.join(`
`)))}return bj.get(e)});return(await Promise.all(t)).join(`
`)}function Sj(e,t,n,r,i){let{domElement:a,styleElement:o,svgRoot:s}=i;a.innerHTML=`<style>${t.cssStyle}</style><div style='padding:0;'>${e}</div>`,a.setAttribute(`style`,`transform: scale(${n});transform-origin: top left; display: inline-block`),o.textContent=r;let{width:c,height:l}=i.image;return s.setAttribute(`width`,c.toString()),s.setAttribute(`height`,l.toString()),new XMLSerializer().serializeToString(s)}function Cj(e,t){let n=uw.getOptimalCanvasAndContext(e.width,e.height,t),{context:r}=n;return r.clearRect(0,0,e.width,e.height),r.drawImage(e,0,0),n}function wj(e,t,n){return new Promise(async r=>{n&&await new Promise(e=>setTimeout(e,100)),e.onload=()=>{r()},e.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(t)}`,e.crossOrigin=`anonymous`})}var Tj=class{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===fy.WEBGPU}getTexture(e){return this.getTexturePromise(e)}getManagedTexture(e){let t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].promise;let n=this._buildTexturePromise(e).then(e=>(this._activeTextures[t].texture=e,e));return this._activeTextures[t]={texture:null,promise:n,usageCount:1},n}getReferenceCount(e){return this._activeTextures[e]?.usageCount??null}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){let t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t.texture):t.promise.then(e=>{t.texture=e,this._cleanUp(t.texture)}).catch(()=>{$(`HTMLTextSystem: Failed to clean texture`)}),this._activeTextures[e]=null))}getTexturePromise(e){return this._buildTexturePromise(e)}async _buildTexturePromise(e){let{text:t,style:n,resolution:r,textureStyle:i}=e,a=xg.get(wE),o=_j(t,n),s=await xj(o),c=EE(t,n,s,a),l=Math.ceil(Math.ceil(Math.max(1,c.width)+n.padding*2)*r),u=Math.ceil(Math.ceil(Math.max(1,c.height)+n.padding*2)*r),d=a.image;d.width=(l|0)+2,d.height=(u|0)+2,await wj(d,Sj(t,n,r,s,a),mj()&&o.length>0);let f=d,p;this._createCanvas&&(p=Cj(d,r));let m=gj(p?p.canvas:f,d.width-2,d.height-2,r);return i&&(m.source.style=i),this._createCanvas&&(this._renderer.texture.initSource(m.source),uw.returnCanvasAndContext(p)),xg.return(a),m}returnTexturePromise(e){e.then(e=>{this._cleanUp(e)}).catch(()=>{$(`HTMLTextSystem: Failed to clean texture`)})}_cleanUp(e){$g.returnTexture(e,!0),e.source.resource=null,e.source.uploadMethodId=`unknown`}destroy(){for(let e in this._renderer=null,this._activeTextures)this._activeTextures[e]&&this.returnTexturePromise(this._activeTextures[e].promise);this._activeTextures=null}};Tj.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`htmlText`};var Ej=class extends kO{},Dj=class{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new yS({renderer:e,type:`renderable`,onUnload:this.onTextUnload.bind(this),name:`canvasText`})}resolutionChange(){for(let e in this._managedTexts.items){let t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){let t=this._getGpuText(e),n=e.styleKey;return t.currentKey===n?e._didTextUpdate:!0}addRenderable(e,t){let n=this._getGpuText(e);if(e._didTextUpdate){let t=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==t)&&this._updateGpuText(e),e._didTextUpdate=!1,fj(n,e)}this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){let t=this._getGpuText(e);t._batcher.updateElement(t)}_updateGpuText(e){let t=this._getGpuText(e);t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,t.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){let t=new Ej;return t.currentKey=`--`,t.renderable=e,t.transform=e.groupTransform,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){let t=e._gpuData[this._renderer.uid];if(!t)return;let{canvasText:n}=this._renderer;n.getReferenceCount(t.currentKey)>0?n.decreaseReferenceCount(t.currentKey):t.texture&&n.returnTexture(t.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}};Dj.extension={type:[X.WebGLPipes,X.WebGPUPipes,X.CanvasPipes],name:`text`};var Oj=class{constructor(e){this._activeTextures={},this._renderer=e}getTexture(e,t,n,r){typeof e==`string`&&(xh(`8.0.0`,`CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments`),e={text:e,style:n,resolution:t}),e.style instanceof cw||(e.style=new cw(e.style)),e.textureStyle instanceof kh||(e.textureStyle=new kh(e.textureStyle)),typeof e.text!=`string`&&(e.text=e.text.toString());let{text:i,style:a,textureStyle:o}=e,s=e.resolution??this._renderer.resolution,{frame:c,canvasAndContext:l}=xE.getCanvasAndContext({text:i,style:a,resolution:s}),u=gj(l.canvas,c.width,c.height,s);if(o&&(u.source.style=o),a.trim&&(c.pad(a.padding),u.frame.copyFrom(c),u.frame.scale(1/s),u.updateUvs()),a.filters){let e=this._applyFilters(u,a.filters);return this.returnTexture(u),xE.returnCanvasAndContext(l),e}return this._renderer.texture.initSource(u._source),xE.returnCanvasAndContext(l),u}returnTexture(e){let t=e.source;t.resource=null,t.uploadMethodId=`unknown`,t.alphaMode=`no-premultiply-alpha`,$g.returnTexture(e,!0)}renderTextToCanvas(){xh(`8.10.0`,`CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead`)}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;let n=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[t]={texture:n,usageCount:1},n}decreaseReferenceCount(e){let t=this._activeTextures[e];t.usageCount--,t.usageCount===0&&(this.returnTexture(t.texture),this._activeTextures[e]=null)}getReferenceCount(e){return this._activeTextures[e]?.usageCount??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,t){let n=this._renderer.renderTarget.renderTarget,r=this._renderer.filter.generateFilteredTexture({texture:e,filters:t});return this._renderer.renderTarget.bind(n,!1),r}destroy(){for(let e in this._renderer=null,this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}};Oj.extension={type:[X.WebGLSystem,X.WebGPUSystem,X.CanvasSystem],name:`canvasText`},Km.add(qm,Jm);var kj=s((e=>{e.ConcurrentRoot=1,e.ContinuousEventPriority=8,e.DefaultEventPriority=32,e.DiscreteEventPriority=2})),Aj=s(((e,t)=>{t.exports=kj()})),jj=Aj(),Mj=(0,b.createContext)({}),Nj=Mj.Provider;Mj.Consumer;function Pj(e,t){let n=Object.getPrototypeOf(e),r=Object.getOwnPropertyDescriptor(n,t);return!(r===void 0||r.writable||r.set)}var Fj={currentUpdatePriority:jj.DefaultEventPriority,debug:!1,unmountQueue:new Set};function Ij(e,...t){if(!Fj.debug)return;let n=console[e];if(!(n instanceof Function)){console.warn(`Attempted to create an invalid log type: "${e}"`);return}n(`@pixi/react`,...t)}function Lj(e,t={}){let n=e;return n.__pixireact=Object.assign({filters:[],parent:null,root:null,type:``},t),n}var Rj=`@pixi/react`,zj=`0.0.0-development`,Bj=`Write PixiJS applications using React declarative style.`,Vj=[`react`,`pixi`],Hj=`https://github.com/pixijs/pixi-react#readme`,Uj={url:`https://github.com/pixijs/pixi-react/issues`},Wj={type:`git`,url:`git+https://github.com/pixijs/pixi-react.git`},Gj={".":{import:{types:`./types/index.d.ts`,default:`./lib/index.mjs`},require:{types:`./types/index.d.ts`,default:`./lib/index.js`}}},Kj=`lib/index.js`,qj=`lib/index.mjs`,Jj=`types/index.d.ts`,Yj=[`lib`,`dist`,`types`],Xj=[`docs`],Zj={build:`rimraf dist lib types && rollup -c && tsc`,"build:docs":`npm run --workspace docs build`,deploy:`npm run deploy --workspace docs`,"start:docs":`npm run --workspace docs start`,clean:`xs clean`,docs:`xs docs`,lint:`xs lint`,"lint:fix":`xs lint --fix`,prepare:`husky install`,prerelease:`npm run test:lint && npm run build`,release:`xs bump,publish,git-push`,test:`tsc --project tsconfig.test.json && vitest run`,"test:e2e":`tsc --project tsconfig.test.json && vitest run e2e`,"test:unit":`tsc --project tsconfig.test.json && vitest run unit`,"test:lint":`xs lint`,"test:watch":`vitest`,"test:types":`tsc --noEmit --emitDeclarationOnly false`},Qj={hooks:{"pre-commit":`lint-staged`}},$j={"its-fine":`^2.0.0`,"react-reconciler":`0.31.0`},eM={"@pixi/extension-scripts":`^4.0.0`,"@rollup/plugin-commonjs":`^25.0.8`,"@rollup/plugin-json":`^6.1.0`,"@rollup/plugin-node-resolve":`^15.2.3`,"@testing-library/jest-dom":`^6.4.8`,"@testing-library/react":`^16.1.0`,"@testing-library/user-event":`^14.5.2`,"@types/react":`^19.0.0`,"@types/react-reconciler":`^0.28.9`,"@vitejs/plugin-react":`^4.3.1`,"@vitest/browser":`^2.0.4`,"eslint-plugin-react-hooks":`^5.2.0`,husky:`^8.0.0`,jsdom:`^25.0.0`,"pixi.js":`8.2.6`,playwright:`^1.45.3`,react:`^19.0.0`,"react-dom":`^19.0.0`,rollup:`^4.18.0`,"rollup-plugin-esbuild":`^6.1.1`,"rollup-plugin-inject-process-env":`^1.3.1`,"rollup-plugin-peer-deps-external":`^2.2.4`,"rollup-plugin-sourcemaps":`^0.6.3`,typescript:`^5.4.5`,vitest:`^2.0.0`},tM={"pixi.js":`^8.2.6`,react:`>=19.0.0`},nM={rollup:`^4.18.0`},rM={access:`public`},iM={lint:[`test`,`src`,`docs`],environments:[`node`],docsName:`PixiJS React`,docsTitle:`PixiJS React API Documentation`,docsDescription:`Documentation for PixiJS React library`,docsKeyword:`docs, documentation, pixi, pixijs, react, html5, javascript, jsdoc`},aM={name:Rj,version:zj,description:Bj,keywords:Vj,homepage:Hj,bugs:Uj,repository:Wj,license:`MIT`,exports:Gj,main:Kj,module:qj,types:Jj,files:Yj,workspaces:Xj,scripts:Zj,husky:Qj,"lint-staged":{"*.{ts,js,mjs}":[`eslint --cache --fix --max-warnings 0`]},dependencies:$j,devDependencies:eM,peerDependencies:tM,overrides:nM,publishConfig:rM,extensionConfig:iM};function oM(){Ij(`info`,`lifecycle::afterActiveInstanceBlur`)}function sM(e,t,n){t instanceof wy&&(t.__pixireact.parent=e,typeof n==`number`?e.__pixireact.filters.splice(n,0,t):e.__pixireact.filters.push(t),e.filters=e.__pixireact.filters)}function cM(e,t){Ij(`info`,`lifecycle::appendChild`),t&&(t instanceof o_?e.addChild(t):t instanceof wy&&sM(e,t))}function lM(){Ij(`info`,`lifecycle::beforeActiveInstanceBlur`)}function uM(){return Ij(`info`,`lifecycle::clearContainer`),!1}var dM=Object.freeze({onclick:`onClick`,onglobalmousemove:`onGlobalMouseMove`,onglobalpointermove:`onGlobalPointerMove`,onglobaltouchmove:`onGlobalTouchMove`,onmousedown:`onMouseDown`,onmouseenter:`onMouseEnter`,onmouseleave:`onMouseLeave`,onmousemove:`onMouseMove`,onmouseout:`onMouseOut`,onmouseover:`onMouseOver`,onmouseup:`onMouseUp`,onmouseupoutside:`onMouseUpOutside`,onpointercancel:`onPointerCancel`,onpointerdown:`onPointerDown`,onpointerenter:`onPointerEnter`,onpointerleave:`onPointerLeave`,onpointermove:`onPointerMove`,onpointerout:`onPointerOut`,onpointerover:`onPointerOver`,onpointertap:`onPointerTap`,onpointerup:`onPointerUp`,onpointerupoutside:`onPointerUpOutside`,onrightclick:`onRightClick`,onrightdown:`onRightDown`,onrightup:`onRightUp`,onrightupoutside:`onRightUpOutside`,ontap:`onTap`,ontouchcancel:`onTouchCancel`,ontouchend:`onTouchEnd`,ontouchendoutside:`onTouchEndOutside`,ontouchmove:`onTouchMove`,ontouchstart:`onTouchStart`,onwheel:`onWheel`}),fM=Object.freeze({onClick:`onclick`,onGlobalMouseMove:`onglobalmousemove`,onGlobalPointerMove:`onglobalpointermove`,onGlobalTouchMove:`onglobaltouchmove`,onMouseDown:`onmousedown`,onMouseEnter:`onmouseenter`,onMouseLeave:`onmouseleave`,onMouseMove:`onmousemove`,onMouseOut:`onmouseout`,onMouseOver:`onmouseover`,onMouseUp:`onmouseup`,onMouseUpOutside:`onmouseupoutside`,onPointerCancel:`onpointercancel`,onPointerDown:`onpointerdown`,onPointerEnter:`onpointerenter`,onPointerLeave:`onpointerleave`,onPointerMove:`onpointermove`,onPointerOut:`onpointerout`,onPointerOver:`onpointerover`,onPointerTap:`onpointertap`,onPointerUp:`onpointerup`,onPointerUpOutside:`onpointerupoutside`,onRightClick:`onrightclick`,onRightDown:`onrightdown`,onRightUp:`onrightup`,onRightUpOutside:`onrightupoutside`,onTap:`ontap`,onTouchCancel:`ontouchcancel`,onTouchEnd:`ontouchend`,onTouchEndOutside:`ontouchendoutside`,onTouchMove:`ontouchmove`,onTouchStart:`ontouchstart`,onWheel:`onwheel`});function pM(e){return Array.isArray(e)}function mM(e,t,n={arrays:`reference`,objects:`reference`,strict:!0}){let{arrays:r,objects:i,strict:a}=n;if(typeof e!=typeof t||!!e!=!!t)return!1;if(vM(e)||gM(e))return e===t;let o=_M(e);if(o&&i===`reference`)return e===t;let s=pM(e);if(s&&r===`reference`)return e===t;if((s||o)&&e===t)return!0;let c;for(c in e)if(!(c in t))return!1;let l=e;if(a&&(l=t),o&&r===`shallow`&&i===`shallow`){for(c in l)if(!mM(e[c],t[c],{strict:a,objects:`reference`}))return!1}else for(c in l)if(e[c]!==t[c])return!1;if(yM(c)){if(s&&e.length===0&&t.length===0||o&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}function hM(e){return e===null}function gM(e){return typeof e==`number`}function _M(e){return!(e!==Object(e)||pM(e)||typeof e==`function`)}function vM(e){return typeof e==`string`}function yM(e){return e===void 0}var bM=Object.freeze([`children`,`key`,`ref`]);function xM(e,t=[]){return Object.entries(e).reduce((e,[n,r])=>(t.includes(n)||(e[n]=r),e),{})}function SM(e,t=[]){return xM(e,bM.concat(t))}var CM=`__default`;function wM(e,t={},n=!1){let r=SM(e),i=SM(t),a=Object.entries(r),o=[];if(n){let e=Object.keys(i),t=0;for(;t<e.length;){let n=e[t];n in r||a.unshift([n,`${CM}remove`]),t+=1}}return a.forEach(([e,t])=>{if(mM(t,i[e]))return;if(e in fM){o.push([e,t,!0,[]]);return}let n=[];for(let i in e.includes(`-`)&&(n=e.split(`-`)),o.push([e,t,!1,n]),r){let t=r[i];i.startsWith(`${e}-`)&&o.push([i,t,!1,i.split(`-`)])}}),{changes:o}}function TM(e){let t=e;return!(!t||!t.changes)}var EM=`__default`,DM=new Map,OM={};function kM(e,t){if(e){let n=e[t];if(!yM(n)&&!hM(n))return n}return e}function AM(e,t){let{__pixireact:n={},...r}=e,i;i=TM(t)?t:wM(t,r);let{changes:a}=i,o=0;for(;o<a.length;){let t=a[o],r=!1,i=t[0],s=t[1],c=t[2],l=t[3],u=e,d=u[i];if(i===`draw`&&typeof s==`function`&&(e instanceof dE?s(e):(r=!0,Ij(`warn`,`The \`draw\` prop was used on a \`${n.type}\` component, but it's only valid on \`graphics\` components.`))),i in dM){let e=i;r=!0,OM[i]||(OM[i]=!0,Ij(`warn`,`Event names must be pascal case; instead of \`${i}\`, you probably want \`${dM[e]}\`.`))}if(!r){if(l.length&&(d=l.reduce(kM,u),!(d&&d.set))){let[e,...t]=l.reverse();u=t.reverse().reduce(kM,u),i=e}if(s===`${EM}remove`)if(u instanceof o_){let e=DM.get(u.constructor);e||(e=u.constructor,e=new e,DM.set(u.constructor,e)),s=e[i]}else s=0;if(c&&n){let e=fM[i];s?u[e]=s:delete u[e]}else Pj(u,i)||(u[i]=s)}o+=1}return e}function jM(e,t,n,r){Ij(`info`,`lifecycle::prepareUpdate`);let{children:i,...a}=r,{children:o,...s}=n,c=wM(a,s,!0);return c.changes.length?c:null}function MM(e,t,n,r){Ij(`info`,`lifecycle::commitUpdate`);let i=jM(e,t,n,r);i&&AM(e,i)}var NM=Object.freeze([...Object.keys(dM),`draw`]),PM={};function FM(e){let t=e.charAt(0),n=e.substring(1);return`${t.toUpperCase()}${n}`}function IM(e,t){return t.toLowerCase()}function LM(e){let t=e;return e.startsWith(`pixi`)&&(t=e.replace(/^pixi([A-Z])/,IM)),t}function RM(e,t,n){Ij(`info`,`lifecycle::createInstance`);let r=LM(e),i=FM(r);if(!(i in PM))throw Error(`${i} is not part of the PIXI namespace! Did you forget to extend?`);let a=PM[i],o=SM(t,NM);Object.entries(t).forEach(([e,t])=>{if(e in fM){let n=fM[e];o[n]=t}});let s=Lj(new a(o),{root:n,type:r});return AM(s,t),s}var zM=s((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=typeof setTimeout==`function`?setTimeout:null,_=typeof clearTimeout==`function`?clearTimeout:null,v=typeof setImmediate<`u`?setImmediate:null;function y(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function b(e){if(h=!1,y(e),!m)if(n(c)!==null)m=!0,A();else{var t=n(l);t!==null&&j(b,t.startTime-e)}}var x=!1,S=-1,C=5,w=-1;function T(){return!(e.unstable_now()-w<C)}function E(){if(x){var t=e.unstable_now();w=t;var i=!0;try{a:{m=!1,h&&(h=!1,_(S),S=-1),p=!0;var a=f;try{b:{for(y(t),d=n(c);d!==null&&!(d.expirationTime>t&&T());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,y(t),i=!0;break b}d===n(c)&&r(c),y(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&j(b,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?D():x=!1}}}var D;if(typeof v==`function`)D=function(){v(E)};else if(typeof MessageChannel<`u`){var O=new MessageChannel,k=O.port2;O.port1.onmessage=E,D=function(){k.postMessage(null)}}else D=function(){g(E,0)};function A(){x||(x=!0,D())}function j(t,n){S=g(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,A())},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):C=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(_(S),S=-1):h=!0,j(b,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,A())),r},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),BM=s(((e,t)=>{t.exports=zM()})),VM=s(((e,t)=>{t.exports=function(e){function t(e,t,n,r){return new qi(e,t,n,r)}function n(){}function r(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function i(e){return typeof e!=`object`||!e?null:(e=ka&&e[ka]||e[`@@iterator`],typeof e==`function`?e:null)}function a(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===Aa?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case ga:return`Fragment`;case ha:return`Portal`;case va:return`Profiler`;case _a:return`StrictMode`;case Ca:return`Suspense`;case wa:return`SuspenseList`}if(typeof e==`object`)switch(e.$$typeof){case xa:return(e.displayName||`Context`)+`.Provider`;case ba:return(e._context.displayName||`Context`)+`.Consumer`;case Sa:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case Ta:return t=e.displayName||null,t===null?a(e.type)||`Memo`:t;case Ea:t=e._payload,e=e._init;try{return a(e(t))}catch{}}return null}function o(e){if(ja===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ja=t&&t[1]||``,Ma=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+ja+e+Ma}function s(e,t){if(!e||Na)return``;Na=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),s=a[0],c=a[1];if(s&&c){var l=s.split(`
`),u=c.split(`
`);for(i=r=0;r<l.length&&!l[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<u.length&&!u[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(r!==1||i!==1)do if(r--,i--,0>i||l[r]!==u[i]){var d=`
`+l[r].replace(` at new `,` at `);return e.displayName&&d.includes(`<anonymous>`)&&(d=d.replace(`<anonymous>`,e.displayName)),d}while(1<=r&&0<=i);break}}}finally{Na=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?o(n):``}function c(e){switch(e.tag){case 26:case 27:case 5:return o(e.type);case 16:return o(`Lazy`);case 13:return o(`Suspense`);case 19:return o(`SuspenseList`);case 0:case 15:return e=s(e.type,!1),e;case 11:return e=s(e.type.render,!1),e;case 1:return e=s(e.type,!0),e;default:return``}}function l(e){try{var t=``;do t+=c(e),e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function u(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(u(e)!==e)throw Error(r(188))}function f(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(r(188));return t===e?e:null}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return d(a),e;if(o===i)return d(a),t;o=o.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=o;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,i=o;break}if(c===i){s=!0,i=a,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,i=a;break}if(c===i){s=!0,i=o,n=a;break}c=c.sibling}if(!s)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(n.tag!==3)throw Error(r(188));return n.stateNode.current===n?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}function h(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(t=h(e),t!==null))return t;e=e.sibling}return null}function g(e){return{current:e}}function _(e){0>Bs||(e.current=zs[Bs],zs[Bs]=null,Bs--)}function v(e,t){Bs++,zs[Bs]=e.current,e.current=t}function y(e){return e>>>=0,e===0?32:31-(Us(e)/Ws|0)|0}function b(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function x(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=e.warmLanes;e=e.finishedLanes!==0;var s=n&134217727;return s===0?(s=n&~i,s===0?a===0?e||(o=n&~o,o!==0&&(r=b(o))):r=b(a):r=b(s)):(n=s&~i,n===0?(a&=s,a===0?e||(o=s&~o,o!==0&&(r=b(o))):r=b(a)):r=b(n)),r===0?0:t!==0&&t!==r&&(t&i)===0&&(i=r&-r,o=t&-t,i>=o||i===32&&o&4194176)?t:r}function S(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function C(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w(){var e=Gs;return Gs<<=1,!(Gs&4194176)&&(Gs=128),e}function T(){var e=Ks;return Ks<<=1,!(Ks&62914560)&&(Ks=4194304),e}function E(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function D(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function O(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Hs(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&k(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function k(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Hs(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&4194218}function A(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Hs(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function j(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function M(e){if(ac&&typeof ac.onCommitFiberRoot==`function`)try{ac.onCommitFiberRoot(ic,e,void 0,(e.current.flags&128)==128)}catch{}}function N(e){if(typeof nc==`function`&&rc(e),ac&&typeof ac.setStrictMode==`function`)try{ac.setStrictMode(ic,e)}catch{}}function P(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}function F(e,t){if(typeof e==`object`&&e){var n=sc.get(e);return n===void 0?(t={value:e,source:t,stack:l(t)},sc.set(e,t),t):n}return{value:e,source:t,stack:l(t)}}function I(e,t){cc[lc++]=dc,cc[lc++]=uc,uc=e,dc=t}function L(e,t,n){fc[pc++]=hc,fc[pc++]=gc,fc[pc++]=mc,mc=e;var r=hc;e=gc;var i=32-Hs(r)-1;r&=~(1<<i),n+=1;var a=32-Hs(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,hc=1<<32-Hs(t)+i|n<<i|r,gc=a+e}else hc=1<<a|n<<i|r,gc=e}function R(e){e.return!==null&&(I(e,1),L(e,1,0))}function z(e){for(;e===uc;)uc=cc[--lc],cc[lc]=null,dc=cc[--lc],cc[lc]=null;for(;e===mc;)mc=fc[--pc],fc[pc]=null,gc=fc[--pc],fc[pc]=null,hc=fc[--pc],fc[pc]=null}function B(e,t){v(yc,t),v(vc,e),v(_c,null),e=za(t),_(_c),v(_c,e)}function V(){_(_c),_(vc),_(yc)}function ee(e){e.memoizedState!==null&&v(bc,e);var t=_c.current,n=Ba(t,e.type);t!==n&&(v(vc,e),v(_c,n))}function H(e){vc.current===e&&(_(_c),_(vc)),bc.current===e&&(_(bc),Za?ho._currentValue=mo:ho._currentValue2=mo)}function te(e){throw oe(F(Error(r(418,``)),e)),Ec}function ne(e,t){if(!eo)throw Error(r(175));cs(e.stateNode,e.type,e.memoizedProps,t,e)||te(e)}function re(e){for(xc=e.return;xc;)switch(xc.tag){case 3:case 27:Tc=!0;return;case 5:case 13:Tc=!1;return;default:xc=xc.return}}function ie(e){if(!eo||e!==xc)return!1;if(!Cc)return re(e),Cc=!0,!1;var t=!1;if(Ns?e.tag!==3&&e.tag!==27&&(e.tag!==5||gs(e.type)&&!Ka(e.type,e.memoizedProps))&&(t=!0):e.tag!==3&&(e.tag!==5||gs(e.type)&&!Ka(e.type,e.memoizedProps))&&(t=!0),t&&Sc&&te(e),re(e),e.tag===13){if(!eo)throw Error(r(316));if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(r(317));Sc=ds(e)}else Sc=xc?ts(e.stateNode):null;return!0}function ae(){eo&&(Sc=xc=null,Cc=!1)}function oe(e){wc===null?wc=[e]:wc.push(e)}function se(){for(var e=Oc,t=kc=Oc=0;t<e;){var n=Dc[t];Dc[t++]=null;var r=Dc[t];Dc[t++]=null;var i=Dc[t];Dc[t++]=null;var a=Dc[t];if(Dc[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&de(n,i,a)}}function ce(e,t,n,r){Dc[Oc++]=e,Dc[Oc++]=t,Dc[Oc++]=n,Dc[Oc++]=r,kc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function le(e,t,n,r){return ce(e,t,n,r),fe(e)}function ue(e,t){return ce(e,null,null,t),fe(e)}function de(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;i&&t!==null&&e.tag===3&&(a=e.stateNode,i=31-Hs(n),a=a.hiddenUpdates,e=a[i],e===null?a[i]=[t]:e.push(t),t.lane=n|536870912)}function fe(e){if(50<Su)throw Su=0,Cu=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}function pe(e){e!==jc&&e.next===null&&(jc===null?Ac=jc=e:jc=jc.next=e),Nc=!0,Mc||(Mc=!0,ye(he))}function me(e,t){if(!Pc&&Nc){Pc=!0;do for(var n=!1,r=Ac;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Hs(42|e)+1)-1,a&=i&~(o&~s),a=a&201326677?a&201326677|1:a?a|2:0}a!==0&&(n=!0,ve(r,a))}else a=q,a=x(r,r===Xl?a:0),!(a&3)||S(r,a)||(n=!0,ve(r,a));r=r.next}while(n);Pc=!1}}function he(){Nc=Mc=!1;var e=0;Fc!==0&&(oo()&&(e=Fc),Fc=0);for(var t=Zs(),n=null,r=Ac;r!==null;){var i=r.next,a=ge(r,t);a===0?(r.next=null,n===null?Ac=i:n.next=i,i===null&&(jc=n)):(n=r,(e!==0||a&3)&&(Nc=!0)),r=i}me(e,!1)}function ge(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Hs(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=C(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Xl,n=q,n=x(e,e===t?n:0),r=e.callbackNode,n===0||e===t&&Ql===2||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Js(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||S(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Js(r),j(n)){case 2:case 8:n=$s;break;case 32:n=ec;break;case 268435456:n=tc;break;default:n=ec}return r=_e.bind(null,e),n=qs(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Js(r),e.callbackPriority=2,e.callbackNode=null,2}function _e(e,t){var n=e.callbackNode;if(Ri()&&e.callbackNode!==n)return null;var r=q;return r=x(e,e===Xl?r:0),r===0?null:(pi(e,r,t),ge(e,Zs()),e.callbackNode!=null&&e.callbackNode===n?_e.bind(null,e):null)}function ve(e,t){if(Ri())return null;pi(e,t,!0)}function ye(e){_o?vo(function(){Yl&6?qs(Qs,e):e()}):qs(Qs,e)}function be(){return Fc===0&&(Fc=w()),Fc}function xe(e,t){if(Ic===null){var n=Ic=[];Lc=0,Rc=be(),zc={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return Lc++,t.then(Se,Se),t}function Se(){if(--Lc===0&&Ic!==null){zc!==null&&(zc.status=`fulfilled`);var e=Ic;Ic=null,Rc=0,zc=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ce(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}function we(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Te(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ee(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function De(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yl&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=fe(e),de(e,null,n),t}return ce(e,r,t,n),fe(e)}function Oe(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194176)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,A(e,n)}}function ke(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ae(){if(Vc){var e=zc;if(e!==null)throw e}}function je(e,t,n,r){Vc=!1;var i=e.updateQueue;Bc=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(q&f)===f:(r&f)===f){f!==0&&f===Rc&&(Vc=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var m=e,h=s;f=t;var g=n;switch(h.tag){case 1:if(m=h.payload,typeof m==`function`){d=m.call(g,d,f);break a}d=m;break a;case 3:m.flags=m.flags&-65537|128;case 0:if(m=h.payload,f=typeof m==`function`?m.call(g,d,f):m,f==null)break a;d=fa({},d,f);break a;case 2:Bc=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),au|=o,e.lanes=o,e.memoizedState=d}}function Me(e,t){if(typeof e!=`function`)throw Error(r(191,e));e.call(t)}function Ne(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Me(n[e],t)}function Pe(e,t){if(oc(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Hc.call(t,i)||!oc(e[i],t[i]))return!1}return!0}function Fe(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Ie(){}function Le(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Ie,Ie),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,e===Uc?Error(r(483)):e;default:if(typeof t.status==`string`)t.then(Ie,Ie);else{if(e=Xl,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,e===Uc?Error(r(483)):e}throw Kc=t,Uc}}function Re(){if(Kc===null)throw Error(r(459));var e=Kc;return Kc=null,e}function ze(e){var t=Jc;return Jc+=1,qc===null&&(qc=[]),Le(qc,e,t)}function Be(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ve(e,t){throw t.$$typeof===pa?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function He(e){var t=e._init;return t(e._payload)}function Ue(e){function n(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function a(t,r){if(!e)return null;for(;r!==null;)n(t,r),r=r.sibling;return null}function o(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function s(e,t){return e=Yi(e,t),e.index=0,e.sibling=null,e}function c(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=33554434,n):(r=r.index,r<n?(t.flags|=33554434,n):r)):(t.flags|=1048576,n)}function l(t){return e&&t.alternate===null&&(t.flags|=33554434),t}function u(e,t,n,r){return t===null||t.tag!==6?(t=ea(n,e.mode,r),t.return=e,t):(t=s(t,n),t.return=e,t)}function d(e,t,n,r){var i=n.type;return i===ga?p(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===Ea&&He(i)===t.type)?(t=s(t,n.props),Be(t,n),t.return=e,t):(t=Zi(n.type,n.key,n.props,null,e.mode,r),Be(t,n),t.return=e,t)}function f(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=ta(n,e.mode,r),t.return=e,t):(t=s(t,n.children||[]),t.return=e,t)}function p(e,t,n,r,i){return t===null||t.tag!==7?(t=Qi(n,e.mode,r,i),t.return=e,t):(t=s(t,n),t.return=e,t)}function m(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=ea(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case ma:return n=Zi(t.type,t.key,t.props,null,e.mode,n),Be(n,t),n.return=e,n;case ha:return t=ta(t,e.mode,n),t.return=e,t;case Ea:var r=t._init;return t=r(t._payload),m(e,t,n)}if(Pa(t)||i(t))return t=Qi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return m(e,ze(t),n);if(t.$$typeof===xa)return m(e,Qn(e,t),n);Ve(e,t)}return null}function h(e,t,n,r){var a=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return a===null?u(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case ma:return n.key===a?d(e,t,n,r):null;case ha:return n.key===a?f(e,t,n,r):null;case Ea:return a=n._init,n=a(n._payload),h(e,t,n,r)}if(Pa(n)||i(n))return a===null?p(e,t,n,r,null):null;if(typeof n.then==`function`)return h(e,t,ze(n),r);if(n.$$typeof===xa)return h(e,t,Qn(e,n),r);Ve(e,n)}return null}function g(e,t,n,r,a){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,u(t,e,``+r,a);if(typeof r==`object`&&r){switch(r.$$typeof){case ma:return e=e.get(r.key===null?n:r.key)||null,d(t,e,r,a);case ha:return e=e.get(r.key===null?n:r.key)||null,f(t,e,r,a);case Ea:var o=r._init;return r=o(r._payload),g(e,t,n,r,a)}if(Pa(r)||i(r))return e=e.get(n)||null,p(t,e,r,a,null);if(typeof r.then==`function`)return g(e,t,n,ze(r),a);if(r.$$typeof===xa)return g(e,t,n,Qn(t,r),a);Ve(t,r)}return null}function _(t,r,i,s){for(var l=null,u=null,d=r,f=r=0,p=null;d!==null&&f<i.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var _=h(t,d,i[f],s);if(_===null){d===null&&(d=p);break}e&&d&&_.alternate===null&&n(t,d),r=c(_,r,f),u===null?l=_:u.sibling=_,u=_,d=p}if(f===i.length)return a(t,d),Cc&&I(t,f),l;if(d===null){for(;f<i.length;f++)d=m(t,i[f],s),d!==null&&(r=c(d,r,f),u===null?l=d:u.sibling=d,u=d);return Cc&&I(t,f),l}for(d=o(d);f<i.length;f++)p=g(d,t,f,i[f],s),p!==null&&(e&&p.alternate!==null&&d.delete(p.key===null?f:p.key),r=c(p,r,f),u===null?l=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return n(t,e)}),Cc&&I(t,f),l}function v(t,i,s,l){if(s==null)throw Error(r(151));for(var u=null,d=null,f=i,p=i=0,_=null,v=s.next();f!==null&&!v.done;p++,v=s.next()){f.index>p?(_=f,f=null):_=f.sibling;var y=h(t,f,v.value,l);if(y===null){f===null&&(f=_);break}e&&f&&y.alternate===null&&n(t,f),i=c(y,i,p),d===null?u=y:d.sibling=y,d=y,f=_}if(v.done)return a(t,f),Cc&&I(t,p),u;if(f===null){for(;!v.done;p++,v=s.next())v=m(t,v.value,l),v!==null&&(i=c(v,i,p),d===null?u=v:d.sibling=v,d=v);return Cc&&I(t,p),u}for(f=o(f);!v.done;p++,v=s.next())v=g(f,t,p,v.value,l),v!==null&&(e&&v.alternate!==null&&f.delete(v.key===null?p:v.key),i=c(v,i,p),d===null?u=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return n(t,e)}),Cc&&I(t,p),u}function y(e,t,o,c){if(typeof o==`object`&&o&&o.type===ga&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case ma:a:{for(var u=o.key;t!==null;){if(t.key===u){if(u=o.type,u===ga){if(t.tag===7){a(e,t.sibling),c=s(t,o.props.children),c.return=e,e=c;break a}}else if(t.elementType===u||typeof u==`object`&&u&&u.$$typeof===Ea&&He(u)===t.type){a(e,t.sibling),c=s(t,o.props),Be(c,o),c.return=e,e=c;break a}a(e,t);break}else n(e,t);t=t.sibling}o.type===ga?(c=Qi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=Zi(o.type,o.key,o.props,null,e.mode,c),Be(c,o),c.return=e,e=c)}return l(e);case ha:a:{for(u=o.key;t!==null;){if(t.key===u)if(t.tag===4&&t.stateNode.containerInfo===o.containerInfo&&t.stateNode.implementation===o.implementation){a(e,t.sibling),c=s(t,o.children||[]),c.return=e,e=c;break a}else{a(e,t);break}else n(e,t);t=t.sibling}c=ta(o,e.mode,c),c.return=e,e=c}return l(e);case Ea:return u=o._init,o=u(o._payload),y(e,t,o,c)}if(Pa(o))return _(e,t,o,c);if(i(o)){if(u=i(o),typeof u!=`function`)throw Error(r(150));return o=u.call(o),v(e,t,o,c)}if(typeof o.then==`function`)return y(e,t,ze(o),c);if(o.$$typeof===xa)return y(e,t,Qn(e,o),c);Ve(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,t!==null&&t.tag===6?(a(e,t.sibling),c=s(t,o),c.return=e,e=c):(a(e,t),c=ea(o,e.mode,c),c.return=e,e=c),l(e)):a(e,t)}return function(e,n,r,i){try{Jc=0;var a=y(e,n,r,i);return qc=null,a}catch(n){if(n===Uc)throw n;var o=t(29,n,null,e.mode);return o.lanes=i,o.return=e,o}}}function We(e,t){e=ru,v(Qc,e),v(Zc,t),ru=e|t.baseLanes}function Ge(){v(Qc,ru),v(Zc,Zc.current)}function Ke(){ru=Qc.current,_(Zc),_(Qc)}function qe(e){var t=e.alternate;v(tl,tl.current&1),v($c,e),el===null&&(t===null||Zc.current!==null||t.memoizedState!==null)&&(el=e)}function Je(e){if(e.tag===22){if(v(tl,tl.current),v($c,e),el===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(el=e)}}else Ye(e)}function Ye(){v(tl,tl.current),v($c,$c.current)}function Xe(e){_($c),el===e&&(el=null),_(tl)}function Ze(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Yo(n)||Xo(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Qe(){throw Error(r(321))}function $e(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oc(e[n],t[n]))return!1;return!0}function et(e,t,n,r,i,a){return nl=a,K=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?ml:hl,sl=!1,a=n(r,i),sl=!1,ol&&(a=nt(t,n,r,i)),tt(e),a}function tt(e){G.H=pl;var t=rl!==null&&rl.next!==null;if(nl=0,il=rl=K=null,al=!1,ll=0,ul=null,t)throw Error(r(300));e===null||bl||(e=e.dependencies,e!==null&&Yn(e)&&(bl=!0))}function nt(e,t,n,i){K=e;var a=0;do{if(ol&&(ul=null),ll=0,ol=!1,25<=a)throw Error(r(301));if(a+=1,il=rl=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}G.H=gl,o=t(n,i)}while(ol);return o}function rt(){var e=G.H,t=e.useState()[0];return t=typeof t.then==`function`?lt(t):t,e=e.useState()[0],(rl===null?null:rl.memoizedState)!==e&&(K.flags|=1024),t}function it(){var e=cl!==0;return cl=0,e}function at(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function ot(e){if(al){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}al=!1}nl=0,il=rl=K=null,ol=!1,ll=cl=0,ul=null}function st(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return il===null?K.memoizedState=il=e:il=il.next=e,il}function ct(){if(rl===null){var e=K.alternate;e=e===null?null:e.memoizedState}else e=rl.next;var t=il===null?K.memoizedState:il.next;if(t!==null)il=t,rl=e;else{if(e===null)throw K.alternate===null?Error(r(467)):Error(r(310));rl=e,e={memoizedState:rl.memoizedState,baseState:rl.baseState,baseQueue:rl.baseQueue,queue:rl.queue,next:null},il===null?K.memoizedState=il=e:il=il.next=e}return il}function lt(e){var t=ll;return ll+=1,ul===null&&(ul=[]),e=Le(ul,e,t),t=K,(il===null?t.memoizedState:il.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?ml:hl),e}function ut(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return lt(e);if(e.$$typeof===xa)return Zn(e)}throw Error(r(438,String(e)))}function dt(e){var t=null,n=K.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=K.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=fl(),K.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=Oa;return t.index++,n}function ft(e,t){return typeof t==`function`?t(e):t}function pt(e){return mt(ct(),rl,e)}function mt(e,t,n){var i=e.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=n;var a=e.baseQueue,o=i.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,i.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(nl&f)===f:(q&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Rc&&(d=!0);else if((nl&p)===p){u=u.next,p===Rc&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,K.lanes|=p,au|=p;f=u.action,sl&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,K.lanes|=f,au|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!oc(o,e.memoizedState)&&(bl=!0,d&&(n=zc,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,i.lastRenderedState=o}return a===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ht(e){var t=ct(),n=t.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);oc(o,t.memoizedState)||(bl=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function gt(e,t,n){var i=K,a=ct(),o=Cc;if(o){if(n===void 0)throw Error(r(407));n=n()}else n=t();var s=!oc((rl||a).memoizedState,n);if(s&&(a.memoizedState=n,bl=!0),a=a.queue,Vt(yt.bind(null,i,a,e),[e]),a.getSnapshot!==t||s||il!==null&&il.memoizedState.tag&1){if(i.flags|=2048,It(9,vt.bind(null,i,a,n,t),{destroy:void 0},null),Xl===null)throw Error(r(349));o||nl&60||_t(i,t,n)}return n}function _t(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=K.updateQueue,t===null?(t=fl(),K.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vt(e,t,n,r){t.value=n,t.getSnapshot=r,bt(t)&&xt(e)}function yt(e,t,n){return n(function(){bt(t)&&xt(e)})}function bt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oc(e,n)}catch{return!0}}function xt(e){var t=ue(e,2);t!==null&&fi(t,e,2)}function St(e){var t=st();if(typeof e==`function`){var n=e;if(e=n(),sl){N(!0);try{n()}finally{N(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:e},t}function Ct(e,t,n,r){return e.baseState=n,mt(e,rl,typeof r==`function`?r:ft)}function wt(e,t,n,i,a){if(cn(e))throw Error(r(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};G.T===null?o.isTransition=!1:n(!0),i(o),n=t.pending,n===null?(o.next=t.pending=o,Tt(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Tt(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=G.T,o={};G.T=o;try{var s=n(i,r),c=G.S;c!==null&&c(o,s),Et(e,t,s)}catch(n){Ot(e,t,n)}finally{G.T=a}}else try{a=n(i,r),Et(e,t,a)}catch(n){Ot(e,t,n)}}function Et(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Dt(e,t,n)},function(n){return Ot(e,t,n)}):Dt(e,t,n)}function Dt(e,t,n){t.status=`fulfilled`,t.value=n,kt(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Tt(e,n)))}function Ot(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,kt(t),t=t.next;while(t!==r)}e.action=null}function kt(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function At(e,t){return t}function jt(e,t){if(Cc){var n=Xl.formState;if(n!==null){a:{var r=K;if(Cc){if(Sc){var i=$o(Sc,Tc);if(i){Sc=ts(i),r=es(i);break a}}te(r)}r=!1}r&&(t=n[0])}}n=st(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:At,lastRenderedState:t},n.queue=r,n=an.bind(null,K,r),r.dispatch=n,r=St(!1);var a=sn.bind(null,K,!1,r.queue);return r=st(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=wt.bind(null,K,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Mt(e){return Nt(ct(),rl,e)}function Nt(e,t,n){t=mt(e,t,At)[0],e=pt(ft)[0],t=typeof t==`object`&&t&&typeof t.then==`function`?lt(t):t;var r=ct(),i=r.queue,a=i.dispatch;return n!==r.memoizedState&&(K.flags|=2048,It(9,Pt.bind(null,i,n),{destroy:void 0},null)),[t,a,e]}function Pt(e,t){e.action=t}function Ft(e){var t=ct(),n=rl;if(n!==null)return Nt(t,n,e);ct(),t=t.memoizedState,n=ct();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function It(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},t=K.updateQueue,t===null&&(t=fl(),K.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lt(){return ct().memoizedState}function Rt(e,t,n,r){var i=st();K.flags|=e,i.memoizedState=It(1|t,n,{destroy:void 0},r===void 0?null:r)}function zt(e,t,n,r){var i=ct();r=r===void 0?null:r;var a=i.memoizedState.inst;rl!==null&&r!==null&&$e(r,rl.memoizedState.deps)?i.memoizedState=It(t,n,a,r):(K.flags|=e,i.memoizedState=It(1|t,n,a,r))}function Bt(e,t){Rt(8390656,8,e,t)}function Vt(e,t){zt(2048,8,e,t)}function Ht(e,t){return zt(4,2,e,t)}function Ut(e,t){return zt(4,4,e,t)}function Wt(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gt(e,t,n){n=n==null?null:n.concat([e]),zt(4,4,Wt.bind(null,t,e),n)}function Kt(){}function qt(e,t){var n=ct();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&$e(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jt(e,t){var n=ct();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&$e(t,r[1]))return r[0];if(r=e(),sl){N(!0);try{e()}finally{N(!1)}}return n.memoizedState=[r,t],r}function Yt(e,t,n){return n===void 0||nl&1073741824?e.memoizedState=t:(e.memoizedState=n,e=di(),K.lanes|=e,au|=e,n)}function Xt(e,t,n,r){return oc(n,t)?n:Zc.current===null?nl&42?(e=di(),K.lanes|=e,au|=e,t):(bl=!0,e.memoizedState=n):(e=Yt(e,n,r),oc(e,t)||(bl=!0),e)}function Zt(e,t,n,r,i){var a=io();ro(a!==0&&8>a?a:8);var o=G.T,s={};G.T=s,sn(e,!1,t,n);try{var c=i(),l=G.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?on(e,t,Ce(c,r),W(e)):on(e,t,r,W(e))}catch(n){on(e,t,{then:function(){},status:`rejected`,reason:n},W())}finally{ro(a),G.T=o}}function Qt(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:mo,baseState:mo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:mo},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $t(){return Zn(ho)}function en(){return ct().memoizedState}function tn(){return ct().memoizedState}function nn(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=W();e=Ee(n);var r=De(t,e,n);r!==null&&(fi(r,t,n),Oe(r,t,n)),t={cache:er()},e.payload=t;return}t=t.return}}function rn(e,t,n){var r=W();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},cn(e)?ln(t,n):(n=le(e,t,n,r),n!==null&&(fi(n,e,r),un(n,t,r)))}function an(e,t,n){on(e,t,n,W())}function on(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(cn(e))ln(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,oc(s,o))return ce(e,t,i,0),Xl===null&&se(),!1}catch{}if(n=le(e,t,i,r),n!==null)return fi(n,e,r),un(n,t,r),!0}return!1}function sn(e,t,n,i){if(i={lane:2,revertLane:be(),action:i,hasEagerState:!1,eagerState:null,next:null},cn(e)){if(t)throw Error(r(479))}else t=le(e,n,i,2),t!==null&&fi(t,e,2)}function cn(e){var t=e.alternate;return e===K||t!==null&&t===K}function ln(e,t){ol=al=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function un(e,t,n){if(n&4194176){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,A(e,n)}}function dn(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fa({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}function fn(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Pe(n,r)||!Pe(i,a):!0}function pn(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_l.enqueueReplaceState(t,t.state,null)}function mn(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=fa({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function hn(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function gn(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function _n(e,t,n){return n=Ee(n),n.tag=3,n.payload={element:null},n.callback=function(){hn(e,t)},n}function vn(e){return e=Ee(e),e.tag=3,e}function yn(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){gn(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){gn(t,n,r),typeof i!=`function`&&(gu===null?gu=new Set([this]):gu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function bn(e,t,n,i,a){if(n.flags|=32768,typeof i==`object`&&i&&typeof i.then==`function`){if(t=n.alternate,t!==null&&Jn(t,n,a,!0),n=$c.current,n!==null){switch(n.tag){case 13:return el===null?Ti():n.alternate===null&&iu===0&&(iu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===Gc?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),Vi(e,i,a)),!1;case 22:return n.flags|=65536,i===Gc?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),Vi(e,i,a)),!1}throw Error(r(435,n.tag))}return Vi(e,i,a),Ti(),!1}if(Cc)return t=$c.current,t===null?(i!==Ec&&(t=Error(r(423),{cause:i}),oe(F(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=F(i,n),a=_n(e.stateNode,i,a),ke(e,a),iu!==4&&(iu=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==Ec&&(e=Error(r(422),{cause:i}),oe(F(e,n)))),!1;var o=Error(r(520),{cause:i});if(o=F(o,n),uu===null?uu=[o]:uu.push(o),iu!==4&&(iu=2),t===null)return!0;i=F(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=_n(n.stateNode,i,e),ke(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(gu===null||!gu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=vn(a),yn(a,e,n,i),ke(n,a),!1}n=n.return}while(n!==null);return!1}function xn(e,t,n,r){t.child=e===null?Xc(t,null,n,r):Yc(t,e.child,n,r)}function Sn(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Xn(t),r=et(e,t,n,o,a,i),s=it(),e!==null&&!bl?(at(e,t,i),Bn(e,t,i)):(Cc&&s&&R(t),t.flags|=1,xn(e,t,r,i),t.child)}function Cn(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!Ji(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,wn(e,t,a,r,i)):(e=Zi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Vn(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Pe:n,n(o,r)&&e.ref===t.ref)return Bn(e,t,i)}return t.flags|=1,e=Yi(a,r),e.ref=t.ref,e.return=t,t.child=e}function wn(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Pe(a,r)&&e.ref===t.ref)if(bl=!1,t.pendingProps=r=a,Vn(e,i))e.flags&131072&&(bl=!0);else return t.lanes=e.lanes,Bn(e,t,i)}return On(e,t,n,r,i)}function Tn(e,t,n){var r=t.pendingProps,i=r.children,a=(t.stateNode._pendingVisibility&2)!=0,o=e===null?null:e.memoizedState;if(Dn(e,t),r.mode===`hidden`||a){if(t.flags&128){if(r=o===null?n:o.baseLanes|n,e!==null){for(i=t.child=e.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return En(e,t,r,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&rr(t,o===null?null:o.cachePool),o===null?Ge():We(t,o),Je(t);else return t.lanes=t.childLanes=536870912,En(e,t,o===null?n:o.baseLanes|n,n)}else o===null?(e!==null&&rr(t,null),Ge(),Ye(t)):(rr(t,o.cachePool),We(t,o),Ye(t),t.memoizedState=null);return xn(e,t,i,n),t.child}function En(e,t,n,r){var i=nr();return i=i===null?null:{parent:Za?Ol._currentValue:Ol._currentValue2,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&rr(t,null),Ge(),Je(t),e!==null&&Jn(e,t,r,!0),null}function Dn(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=2097664);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(r(284));(e===null||e.ref!==n)&&(t.flags|=2097664)}}function On(e,t,n,r,i){return Xn(t),n=et(e,t,n,r,void 0,i),r=it(),e!==null&&!bl?(at(e,t,i),Bn(e,t,i)):(Cc&&r&&R(t),t.flags|=1,xn(e,t,n,i),t.child)}function kn(e,t,n,r,i,a){return Xn(t),t.updateQueue=null,n=nt(t,r,n,i),tt(e),r=it(),e!==null&&!bl?(at(e,t,a),Bn(e,t,a)):(Cc&&r&&R(t),t.flags|=1,xn(e,t,n,a),t.child)}function An(e,t,n,r,i){if(Xn(t),t.stateNode===null){var a=Vs,o=n.contextType;typeof o==`object`&&o&&(a=Zn(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=_l,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},we(t),o=n.contextType,a.context=typeof o==`object`&&o?Zn(o):Vs,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(dn(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&_l.enqueueReplaceState(a,a.state,null),je(t,r,a,i),Ae(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=mn(n,s);a.props=c;var l=a.context,u=n.contextType;o=Vs,typeof u==`object`&&u&&(o=Zn(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&pn(t,a,r,o),Bc=!1;var f=t.memoizedState;a.state=f,je(t,r,a,i),Ae(),l=t.memoizedState,s||f!==l||Bc?(typeof d==`function`&&(dn(t,n,d,r),l=t.memoizedState),(c=Bc||fn(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Te(e,t),o=t.memoizedProps,u=mn(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=Vs,typeof l==`object`&&l&&(c=Zn(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&pn(t,a,r,c),Bc=!1,f=t.memoizedState,a.state=f,je(t,r,a,i),Ae();var p=t.memoizedState;o!==d||f!==p||Bc||e!==null&&e.dependencies!==null&&Yn(e.dependencies)?(typeof s==`function`&&(dn(t,n,s,r),p=t.memoizedState),(u=Bc||fn(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Yn(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Dn(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Yc(t,e.child,null,i),t.child=Yc(t,null,n,i)):xn(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Bn(e,t,i),e}function jn(e,t,n,r){return ae(),t.flags|=256,xn(e,t,n,r),t.child}function Mn(e){return{baseLanes:e,cachePool:ir()}}function Nn(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=cu),e}function U(e,n,i){var a=n.pendingProps,o=!1,s=(n.flags&128)!=0,c;if((c=s)||(c=e!==null&&e.memoizedState===null?!1:(tl.current&2)!=0),c&&(o=!0,n.flags&=-129),c=(n.flags&32)!=0,n.flags&=-33,e===null){if(Cc){if(o?qe(n):Ye(n),Cc){var l=Sc,u;(u=l)&&(l=ss(l,Tc),l===null?u=!1:(n.memoizedState={dehydrated:l,treeContext:mc===null?null:{id:hc,overflow:gc},retryLane:536870912},u=t(18,null,null,0),u.stateNode=l,u.return=n,n.child=u,xc=n,Sc=null,u=!0)),u||te(n)}if(l=n.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return Xo(l)?n.lanes=16:n.lanes=536870912,null;Xe(n)}return l=a.children,a=a.fallback,o?(Ye(n),o=n.mode,l=Fn({mode:`hidden`,children:l},o),a=Qi(a,o,i,null),l.return=n,a.return=n,l.sibling=a,n.child=l,o=n.child,o.memoizedState=Mn(i),o.childLanes=Nn(e,c,i),n.memoizedState=xl,a):(qe(n),Pn(n,l))}if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)n.flags&256?(qe(n),n.flags&=-257,n=In(e,n,i)):n.memoizedState===null?(Ye(n),o=a.fallback,l=n.mode,a=Fn({mode:`visible`,children:a.children},l),o=Qi(o,l,i,null),o.flags|=2,a.return=n,o.return=n,a.sibling=o,n.child=a,Yc(n,e.child,null,i),a=n.child,a.memoizedState=Mn(i),a.childLanes=Nn(e,c,i),n.memoizedState=xl,n=o):(Ye(n),n.child=e.child,n.flags|=128,n=null);else if(qe(n),Xo(l))c=Zo(l).digest,a=Error(r(419)),a.stack=``,a.digest=c,oe({value:a,source:null,stack:null}),n=In(e,n,i);else if(bl||Jn(e,n,i,!1),c=(i&e.childLanes)!==0,bl||c){if(c=Xl,c!==null){if(a=i&-i,a&42)a=1;else switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=64;break;case 268435456:a=134217728;break;default:a=0}if(a=(a&(c.suspendedLanes|i))===0?a:0,a!==0&&a!==u.retryLane)throw u.retryLane=a,ue(e,a),fi(c,e,a),yl}Yo(l)||Ti(),n=In(e,n,i)}else Yo(l)?(n.flags|=128,n.child=e.child,n=Wi.bind(null,e),Qo(l,n),n=null):(e=u.treeContext,eo&&(Sc=is(l),xc=n,Cc=!0,wc=null,Tc=!1,e!==null&&(fc[pc++]=hc,fc[pc++]=gc,fc[pc++]=mc,hc=e.id,gc=e.overflow,mc=n)),n=Pn(n,a.children),n.flags|=4096);return n}return o?(Ye(n),o=a.fallback,l=n.mode,u=e.child,s=u.sibling,a=Yi(u,{mode:`hidden`,children:a.children}),a.subtreeFlags=u.subtreeFlags&31457280,s===null?(o=Qi(o,l,i,null),o.flags|=2):o=Yi(s,o),o.return=n,a.return=n,a.sibling=o,n.child=a,a=o,o=n.child,l=e.child.memoizedState,l===null?l=Mn(i):(u=l.cachePool,u===null?u=ir():(s=Za?Ol._currentValue:Ol._currentValue2,u=u.parent===s?u:{parent:s,pool:s}),l={baseLanes:l.baseLanes|i,cachePool:u}),o.memoizedState=l,o.childLanes=Nn(e,c,i),n.memoizedState=xl,a):(qe(n),i=e.child,e=i.sibling,i=Yi(i,{mode:`visible`,children:a.children}),i.return=n,i.sibling=null,e!==null&&(c=n.deletions,c===null?(n.deletions=[e],n.flags|=16):c.push(e)),n.child=i,n.memoizedState=null,i)}function Pn(e,t){return t=Fn({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Fn(e,t){return $i(e,t,0,null)}function In(e,t,n){return Yc(t,e.child,null,n),e=Pn(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ln(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kn(e.return,t,n)}function Rn(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zn(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xn(e,t,r.children,n),r=tl.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ln(e,n,t);else if(e.tag===19)Ln(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(v(tl,r),i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ze(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Rn(t,!1,i,n,a);break;case`backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ze(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Rn(t,!0,n,null,a);break;case`together`:Rn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),au|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Jn(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,n=Yi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vn(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Yn(e))):!0}function Hn(e,t,n){switch(t.tag){case 3:B(t,t.stateNode.containerInfo),Wn(t,Ol,e.memoizedState.cache),ae();break;case 27:case 5:ee(t);break;case 4:B(t,t.stateNode.containerInfo);break;case 10:Wn(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(qe(t),e=Bn(e,t,n),e===null?null:e.sibling):U(e,t,n):(qe(t),t.flags|=128,null);qe(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(Jn(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return zn(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),v(tl,tl.current),r)break;return null;case 22:case 23:return t.lanes=0,Tn(e,t,n);case 24:Wn(t,Ol,e.memoizedState.cache)}return Bn(e,t,n)}function Un(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)bl=!0;else{if(!Vn(e,n)&&!(t.flags&128))return bl=!1,Hn(e,t,n);bl=!!(e.flags&131072)}else bl=!1,Cc&&t.flags&1048576&&L(t,dc,t.index);switch(t.lanes=0,t.tag){case 16:a:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,typeof i==`function`)Ji(i)?(e=mn(i,e),t.tag=1,t=An(null,t,i,e,n)):(t.tag=0,t=On(null,t,i,e,n));else{if(i!=null){if(o=i.$$typeof,o===Sa){t.tag=11,t=Sn(null,t,i,e,n);break a}else if(o===Ta){t.tag=14,t=Cn(null,t,i,e,n);break a}}throw t=a(i)||i,Error(r(306,t,``))}}return t;case 0:return On(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=mn(i,t.pendingProps),An(e,t,i,o,n);case 3:a:{if(B(t,t.stateNode.containerInfo),e===null)throw Error(r(387));var s=t.pendingProps;o=t.memoizedState,i=o.element,Te(e,t),je(t,s,null,n);var c=t.memoizedState;if(s=c.cache,Wn(t,Ol,s),s!==o.cache&&qn(t,[Ol],n,!0),Ae(),s=c.element,eo&&o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=jn(e,t,s,n);break a}else if(s!==i){i=F(Error(r(424)),t),oe(i),t=jn(e,t,s,n);break a}else for(eo&&(Sc=rs(t.stateNode.containerInfo),xc=t,Cc=!0,wc=null,Tc=!0),n=Xc(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ae(),s===i){t=Bn(e,t,n);break a}xn(e,t,s,n)}t=t.child}return t;case 26:if(ys)return Dn(e,t),e===null?(n=Ss(t.type,null,t.pendingProps,null))?t.memoizedState=n:Cc||(t.stateNode=Os(t.type,t.pendingProps,yc.current,t)):t.memoizedState=Ss(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(Ns)return ee(t),e===null&&Ns&&Cc&&(i=t.stateNode=Ps(t.type,t.pendingProps,yc.current,_c.current,!1),xc=t,Tc=!0,Sc=ns(i)),i=t.pendingProps.children,e!==null||Cc?xn(e,t,i,n):t.child=Yc(t,null,i,n),Dn(e,t),t.child;case 5:return e===null&&Cc&&(_s(t.type,t.pendingProps,_c.current),(o=i=Sc)&&(i=as(i,t.type,t.pendingProps,Tc),i===null?o=!1:(t.stateNode=i,xc=t,Sc=ns(i),Tc=!1,o=!0)),o||te(t)),ee(t),o=t.type,s=t.pendingProps,c=e===null?null:e.memoizedProps,i=s.children,Ka(o,s)?i=null:c!==null&&Ka(o,c)&&(t.flags|=32),t.memoizedState!==null&&(o=et(e,t,rt,null,null,n),Za?ho._currentValue=o:ho._currentValue2=o),Dn(e,t),xn(e,t,i,n),t.child;case 6:return e===null&&Cc&&(vs(t.pendingProps,_c.current),(e=n=Sc)&&(n=os(n,t.pendingProps,Tc),n===null?e=!1:(t.stateNode=n,xc=t,Sc=null,e=!0)),e||te(t)),null;case 13:return U(e,t,n);case 4:return B(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Yc(t,null,i,n):xn(e,t,i,n),t.child;case 11:return Sn(e,t,t.type,t.pendingProps,n);case 7:return xn(e,t,t.pendingProps,n),t.child;case 8:return xn(e,t,t.pendingProps.children,n),t.child;case 12:return xn(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Wn(t,t.type,i.value),xn(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,Xn(t),o=Zn(o),i=i(o),t.flags|=1,xn(e,t,i,n),t.child;case 14:return Cn(e,t,t.type,t.pendingProps,n);case 15:return wn(e,t,t.type,t.pendingProps,n);case 19:return zn(e,t,n);case 22:return Tn(e,t,n);case 24:return Xn(t),i=Zn(Ol),e===null?(o=nr(),o===null&&(o=Xl,s=er(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),t.memoizedState={parent:i,cache:o},we(t),Wn(t,Ol,o)):((e.lanes&n)!==0&&(Te(e,t),je(t,null,null,n),Ae()),o=e.memoizedState,s=t.memoizedState,o.parent===i?(i=s.cache,Wn(t,Ol,i),i!==o.cache&&qn(t,[Ol],n,!0)):(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Wn(t,Ol,i))),xn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Wn(e,t,n){Za?(v(Sl,t._currentValue),t._currentValue=n):(v(Sl,t._currentValue2),t._currentValue2=n)}function Gn(e){var t=Sl.current;Za?e._currentValue=t:e._currentValue2=t,_(Sl)}function Kn(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function qn(e,t,n,i){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Kn(o.return,n,e),i||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(r(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Kn(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Jn(e,t,n,i){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(r(387));if(s=s.memoizedProps,s!==null){var c=a.type;oc(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===bc.current){if(s=a.alternate,s===null)throw Error(r(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[ho]:e.push(ho))}a=a.return}e!==null&&qn(t,e,n,i),t.flags|=262144}function Yn(e){for(e=e.firstContext;e!==null;){var t=e.context;if(!oc(Za?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Xn(e){Cl=e,wl=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zn(e){return $n(Cl,e)}function Qn(e,t){return Cl===null&&Xn(e),$n(e,t)}function $n(e,t){var n=Za?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:n,next:null},wl===null){if(e===null)throw Error(r(308));wl=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else wl=wl.next=t;return n}function er(){return{controller:new Tl,data:new Map,refCount:0}}function tr(e){e.refCount--,e.refCount===0&&El(Dl,function(){e.controller.abort()})}function nr(){var e=Al.current;return e===null?Xl.pooledCache:e}function rr(e,t){t===null?v(Al,Al.current):v(Al,t.pool)}function ir(){var e=nr();return e===null?null:{parent:Za?Ol._currentValue:Ol._currentValue2,pool:e}}function ar(e){e.flags|=4}function or(e,t){if(e!==null&&e.child===t.child)return!1;if(t.flags&16)return!0;for(e=t.child;e!==null;){if(e.flags&13878||e.subtreeFlags&13878)return!0;e=e.sibling}return!1}function sr(e,t,n,r){if(Qa)for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)Wa(e,n.stateNode);else if(!(n.tag===4||Ns&&n.tag===27)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else if($a)for(var i=t.child;i!==null;){if(i.tag===5){var a=i.stateNode;n&&r&&(a=qo(a,i.type,i.memoizedProps)),Wa(e,a)}else if(i.tag===6)a=i.stateNode,n&&r&&(a=Jo(a,i.memoizedProps)),Wa(e,a);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)a=i.child,a!==null&&(a.return=i),sr(e,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function cr(e,t,n,r){if($a)for(var i=t.child;i!==null;){if(i.tag===5){var a=i.stateNode;n&&r&&(a=qo(a,i.type,i.memoizedProps)),Wo(e,a)}else if(i.tag===6)a=i.stateNode,n&&r&&(a=Jo(a,i.memoizedProps)),Wo(e,a);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)a=i.child,a!==null&&(a.return=i),cr(e,i,!(i.memoizedProps!==null&&i.memoizedProps.mode===`manual`),!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function lr(e,t){if($a&&or(e,t)){e=t.stateNode;var n=e.containerInfo,r=Uo();cr(r,t,!1,!1),e.pendingChildren=r,ar(t),Go(n,r)}}function ur(e,t,n,r){if(Qa)e.memoizedProps!==r&&ar(t);else if($a){var i=e.stateNode,a=e.memoizedProps;if((e=or(e,t))||a!==r){var o=_c.current;a=Ho(i,n,a,r,!e,null),a===i?t.stateNode=i:(Ga(a,n,r,o)&&ar(t),t.stateNode=a,e?sr(a,t,!1,!1):ar(t))}else t.stateNode=i}}function dr(e,t,n){if(co(t,n)){if(e.flags|=16777216,!lo(t,n))if(Si())e.flags|=8192;else throw Kc=Gc,Wc}else e.flags&=-16777217}function fr(e,t){if(As(t)){if(e.flags|=16777216,!js(t))if(Si())e.flags|=8192;else throw Kc=Gc,Wc}else e.flags&=-16777217}function pr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:T(),e.lanes|=t,lu|=t)}function mr(e,t){if(!Cc)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&31457280,r|=i.flags&31457280,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function gr(e,t,n){var i=t.pendingProps;switch(z(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(t),null;case 1:return hr(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Gn(Ol),V(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&(ie(t)?ar(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wc!==null&&(mi(wc),wc=null))),lr(e,t),hr(t),null;case 26:if(ys){n=t.type;var a=t.memoizedState;return e===null?(ar(t),a===null?(hr(t),dr(t,n,i)):(hr(t),fr(t,a))):a?a===e.memoizedState?(hr(t),t.flags&=-16777217):(ar(t),hr(t),fr(t,a)):(Qa?e.memoizedProps!==i&&ar(t):ur(e,t,n,i),hr(t),dr(t,n,i)),null}case 27:if(Ns){if(H(t),n=yc.current,a=t.type,e!==null&&t.stateNode!=null)Qa?e.memoizedProps!==i&&ar(t):ur(e,t,a,i);else{if(!i){if(t.stateNode===null)throw Error(r(166));return hr(t),null}e=_c.current,ie(t)?ne(t,e):(e=Ps(a,i,n,e,!0),t.stateNode=e,ar(t))}return hr(t),null}case 5:if(H(t),n=t.type,e!==null&&t.stateNode!=null)ur(e,t,n,i);else{if(!i){if(t.stateNode===null)throw Error(r(166));return hr(t),null}e=_c.current,ie(t)?ne(t,e):(a=Ua(n,i,yc.current,e,t),sr(a,t,!1,!1),t.stateNode=a,Ga(a,n,i,e)&&ar(t))}return hr(t),dr(t,t.type,t.pendingProps),null;case 6:if(e&&t.stateNode!=null)n=e.memoizedProps,Qa?n!==i&&ar(t):$a&&(n===i?t.stateNode=e.stateNode:(t.stateNode=qa(i,yc.current,_c.current,t),ar(t)));else{if(typeof i!=`string`&&t.stateNode===null)throw Error(r(166));if(e=yc.current,n=_c.current,ie(t)){if(!eo)throw Error(r(176));if(e=t.stateNode,n=t.memoizedProps,i=null,a=xc,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}ls(e,n,t,i)||te(t)}else t.stateNode=qa(i,e,n,t)}return hr(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=ie(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(r(318));if(!eo)throw Error(r(344));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(r(317));us(a,t)}else ae(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;hr(t),a=!1}else wc!==null&&(mi(wc),wc=null),a=!0;if(!a)return t.flags&256?(Xe(t),t):(Xe(t),null)}if(Xe(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool);var o=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),pr(t,t.updateQueue),hr(t),null;case 4:return V(),lr(e,t),e===null&&no(t.stateNode.containerInfo),hr(t),null;case 10:return Gn(t.type),hr(t),null;case 19:if(_(tl),a=t.memoizedState,a===null)return hr(t),null;if(i=(t.flags&128)!=0,o=a.rendering,o===null)if(i)mr(a,!1);else{if(iu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ze(e),o!==null){for(t.flags|=128,mr(a,!1),e=o.updateQueue,t.updateQueue=e,pr(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Xi(n,e),n=n.sibling;return v(tl,tl.current&1|2),t.child}e=e.sibling}a.tail!==null&&Zs()>mu&&(t.flags|=128,i=!0,mr(a,!1),t.lanes=4194304)}else{if(!i)if(e=Ze(o),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,pr(t,e),mr(a,!0),a.tail===null&&a.tailMode===`hidden`&&!o.alternate&&!Cc)return hr(t),null}else 2*Zs()-a.renderingStartTime>mu&&n!==536870912&&(t.flags|=128,i=!0,mr(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(e=a.last,e===null?t.child=o:e.sibling=o,a.last=o)}return a.tail===null?(hr(t),null):(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Zs(),t.sibling=null,e=tl.current,v(tl,i?e&1|2:e&1),t);case 22:case 23:return Xe(t),Ke(),i=t.memoizedState!==null,e===null?i&&(t.flags|=8192):e.memoizedState!==null!==i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(hr(t),t.subtreeFlags&6&&(t.flags|=8192)):hr(t),n=t.updateQueue,n!==null&&pr(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&_(Al),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Gn(Ol),hr(t),null;case 25:return null}throw Error(r(156,t.tag))}function _r(e,t){switch(z(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gn(Ol),V(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return H(t),null;case 13:if(Xe(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));ae()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _(tl),null;case 4:return V(),null;case 10:return Gn(t.type),null;case 22:case 23:return Xe(t),Ke(),e!==null&&_(Al),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Gn(Ol),null;case 25:return null;default:return null}}function vr(e,t){switch(z(t),t.tag){case 3:Gn(Ol),V();break;case 26:case 27:case 5:H(t);break;case 4:V();break;case 13:Xe(t);break;case 19:_(tl);break;case 10:Gn(t.type);break;case 22:case 23:Xe(t),Ke(),e!==null&&_(Al);break;case 24:Gn(Ol)}}function yr(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Bi(t,t.return,e)}}function br(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n;try{s()}catch(e){Bi(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Bi(t,t.return,e)}}function xr(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ne(t,n)}catch(t){Bi(e,e.return,t)}}}function Sr(e,t,n){n.props=mn(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Bi(e,t,n)}}function Cr(e,t){try{var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=Ra(r);break;default:i=r}typeof n==`function`?e.refCleanup=n(i):n.current=i}}catch(n){Bi(e,t,n)}}function wr(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Bi(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Bi(e,t,n)}else n.current=null}function Tr(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{Ao(r,t,n,e)}catch(t){Bi(e,e.return,t)}}function Er(e,t,n){try{jo(e.stateNode,e.type,n,t,e)}catch(t){Bi(e,e.return,t)}}function Dr(e){return e.tag===5||e.tag===3||(ys?e.tag===26:!1)||(Ns?e.tag===27:!1)||e.tag===4}function Or(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Dr(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!Ns||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kr(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?No(n,e,t):Oo(n,e);else if(!(r===4||Ns&&r===27)&&(e=e.child,e!==null))for(kr(e,t,n),e=e.sibling;e!==null;)kr(e,t,n),e=e.sibling}function Ar(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?Mo(n,e,t):Do(n,e);else if(!(r===4||Ns&&r===27)&&(e=e.child,e!==null))for(Ar(e,t,n),e=e.sibling;e!==null;)Ar(e,t,n),e=e.sibling}function jr(e,t,n){e=e.containerInfo;try{Ko(e,n)}catch(e){Bi(t,t.return,e)}}function Mr(e,t){for(Va(e.containerInfo),Fl=t;Fl!==null;)if(e=Fl,t=e.child,e.subtreeFlags&1028&&t!==null)t.return=e,Fl=t;else for(;Fl!==null;){e=Fl;var n=e.alternate;switch(t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&n!==null){t=void 0;var i=e,a=n.memoizedProps;n=n.memoizedState;var o=i.stateNode;try{var s=mn(i.type,a,i.elementType===i.type);t=o.getSnapshotBeforeUpdate(s,n),o.__reactInternalSnapshotBeforeUpdate=t}catch(e){Bi(i,i.return,e)}}break;case 3:t&1024&&Qa&&Vo(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,Fl=t;break}Fl=e.return}return s=Il,Il=!1,s}function Nr(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Wr(e,n),r&4&&yr(5,n);break;case 1:if(Wr(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Bi(n,n.return,e)}else{var i=mn(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Bi(n,n.return,e)}}r&64&&xr(n),r&512&&Cr(n,n.return);break;case 3:if(Wr(e,n),r&64&&(r=n.updateQueue,r!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=Ra(n.child.stateNode);break;case 1:e=n.child.stateNode}try{Ne(r,e)}catch(e){Bi(n,n.return,e)}}break;case 26:if(ys){Wr(e,n),r&512&&Cr(n,n.return);break}case 27:case 5:Wr(e,n),t===null&&r&4&&Tr(n),r&512&&Cr(n,n.return);break;case 12:Wr(e,n);break;case 13:Wr(e,n),r&4&&Lr(e,n);break;case 22:if(i=n.memoizedState!==null||jl,!i){t=t!==null&&t.memoizedState!==null||Ml;var a=jl,o=Ml;jl=i,(Ml=t)&&!o?Kr(e,n,(n.subtreeFlags&8772)!=0):Wr(e,n),jl=a,Ml=o}r&512&&(n.memoizedProps.mode===`manual`?Cr(n,n.return):wr(n,n.return));break;default:Wr(e,n)}}function Pr(e){var t=e.alternate;t!==null&&(e.alternate=null,Pr(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&so(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fr(e,t,n){for(n=n.child;n!==null;)Ir(e,t,n),n=n.sibling}function Ir(e,t,n){if(ac&&typeof ac.onCommitFiberUnmount==`function`)try{ac.onCommitFiberUnmount(ic,n)}catch{}switch(n.tag){case 26:if(ys){Ml||wr(n,t),Fr(e,t,n),n.memoizedState?ws(n.memoizedState):n.stateNode&&Ds(n.stateNode);break}case 27:if(Ns){Ml||wr(n,t);var r=Ll,i=Rl;Ll=n.stateNode,Fr(e,t,n),Ls(n.stateNode),Ll=r,Rl=i;break}case 5:Ml||wr(n,t);case 6:if(Qa){if(r=Ll,i=Rl,Ll=null,Fr(e,t,n),Ll=r,Rl=i,Ll!==null)if(Rl)try{Fo(Ll,n.stateNode)}catch(e){Bi(n,t,e)}else try{Po(Ll,n.stateNode)}catch(e){Bi(n,t,e)}}else Fr(e,t,n);break;case 18:Qa&&Ll!==null&&(Rl?hs(Ll,n.stateNode):ms(Ll,n.stateNode));break;case 4:Qa?(r=Ll,i=Rl,Ll=n.stateNode.containerInfo,Rl=!0,Fr(e,t,n),Ll=r,Rl=i):($a&&jr(n.stateNode,n,Uo()),Fr(e,t,n));break;case 0:case 11:case 14:case 15:Ml||br(2,n,t),Ml||br(4,n,t),Fr(e,t,n);break;case 1:Ml||(wr(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Sr(n,t,r)),Fr(e,t,n);break;case 21:Fr(e,t,n);break;case 22:Ml||wr(n,t),Ml=(r=Ml)||n.memoizedState!==null,Fr(e,t,n),Ml=r;break;default:Fr(e,t,n)}}function Lr(e,t){if(eo&&t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ps(e)}catch(e){Bi(t,t.return,e)}}function Rr(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Pl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Pl),t;default:throw Error(r(435,e.tag))}}function zr(e,t){var n=Rr(e);t.forEach(function(t){var r=Gi.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Br(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],o=e,s=t;if(Qa){var c=s;a:for(;c!==null;){switch(c.tag){case 27:case 5:Ll=c.stateNode,Rl=!1;break a;case 3:Ll=c.stateNode.containerInfo,Rl=!0;break a;case 4:Ll=c.stateNode.containerInfo,Rl=!0;break a}c=c.return}if(Ll===null)throw Error(r(160));Ir(o,s,a),Ll=null,Rl=!1}else Ir(o,s,a);o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Vr(t,e),t=t.sibling}function Vr(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Br(t,e),Hr(e),i&4&&(br(3,e,e.return),yr(3,e),br(5,e,e.return));break;case 1:Br(t,e),Hr(e),i&512&&(Ml||n===null||wr(n,n.return)),i&64&&jl&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:if(ys){var a=zl;Br(t,e),Hr(e),i&512&&(Ml||n===null||wr(n,n.return)),i&4&&(i=n===null?null:n.memoizedState,t=e.memoizedState,n===null?t===null?e.stateNode===null?e.stateNode=Ts(a,e.type,e.memoizedProps,e):Es(a,e.type,e.stateNode):e.stateNode=Cs(a,t,e.memoizedProps):i===t?t===null&&e.stateNode!==null&&Er(e,e.memoizedProps,n.memoizedProps):(i===null?n.stateNode!==null&&Ds(n.stateNode):ws(i),t===null?Es(a,e.type,e.stateNode):Cs(a,t,e.memoizedProps)));break}case 27:if(Ns&&i&4&&e.alternate===null){a=e.stateNode;var o=e.memoizedProps;try{Fs(a),Is(e.type,o,a,e)}catch(t){Bi(e,e.return,t)}}case 5:if(Br(t,e),Hr(e),i&512&&(Ml||n===null||wr(n,n.return)),Qa){if(e.flags&32){t=e.stateNode;try{Io(t)}catch(t){Bi(e,e.return,t)}}i&4&&e.stateNode!=null&&(t=e.memoizedProps,Er(e,t,n===null?t:n.memoizedProps)),i&1024&&(Nl=!0)}break;case 6:if(Br(t,e),Hr(e),i&4&&Qa){if(e.stateNode===null)throw Error(r(162));i=e.memoizedProps,n=n===null?i:n.memoizedProps,t=e.stateNode;try{ko(t,n,i)}catch(t){Bi(e,e.return,t)}}break;case 3:if(ys?(ks(),a=zl,zl=xs(t.containerInfo),Br(t,e),zl=a):Br(t,e),Hr(e),i&4){if(Qa&&eo&&n!==null&&n.memoizedState.isDehydrated)try{fs(t.containerInfo)}catch(t){Bi(e,e.return,t)}if($a){i=t.containerInfo,n=t.pendingChildren;try{Ko(i,n)}catch(t){Bi(e,e.return,t)}}}Nl&&(Nl=!1,Ur(e));break;case 4:ys?(n=zl,zl=xs(e.stateNode.containerInfo),Br(t,e),Hr(e),zl=n):(Br(t,e),Hr(e)),i&4&&$a&&jr(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:Br(t,e),Hr(e);break;case 13:Br(t,e),Hr(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(pu=Zs()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zr(e,i)));break;case 22:i&512&&(Ml||n===null||wr(n,n.return)),a=e.memoizedState!==null;var s=n!==null&&n.memoizedState!==null,c=jl,l=Ml;if(jl=c||a,Ml=l||s,Br(t,e),Ml=l,jl=c,Hr(e),t=e.stateNode,t._current=e,t._visibility&=-3,t._visibility|=t._pendingVisibility&2,i&8192&&(t._visibility=a?t._visibility&-2:t._visibility|1,a&&(t=jl||Ml,n===null||s||t||Gr(e)),Qa&&(e.memoizedProps===null||e.memoizedProps.mode!==`manual`))){a:if(n=null,Qa)for(t=e;;){if(t.tag===5||ys&&t.tag===26||Ns&&t.tag===27){if(n===null){s=n=t;try{o=s.stateNode,a?Lo(o):zo(s.stateNode,s.memoizedProps)}catch(e){Bi(s,s.return,e)}}}else if(t.tag===6){if(n===null){s=t;try{var u=s.stateNode;a?Ro(u):Bo(u,s.memoizedProps)}catch(e){Bi(s,s.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,zr(e,n))));break;case 19:Br(t,e),Hr(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zr(e,i)));break;case 21:break;default:Br(t,e),Hr(e)}}function Hr(e){var t=e.flags;if(t&2){try{if(Qa&&(!Ns||e.tag!==27)){a:{for(var n=e.return;n!==null;){if(Dr(n)){var i=n;break a}n=n.return}throw Error(r(160))}switch(i.tag){case 27:if(Ns){var a=i.stateNode;Ar(e,Or(e),a);break}case 5:var o=i.stateNode;i.flags&32&&(Io(o),i.flags&=-33),Ar(e,Or(e),o);break;case 3:case 4:var s=i.stateNode.containerInfo;kr(e,Or(e),s);break;default:throw Error(r(161))}}}catch(t){Bi(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ur(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ur(t),t.tag===5&&t.flags&1024&&go(t.stateNode),e=e.sibling}}function Wr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Nr(e,t.alternate,t),t=t.sibling}function Gr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:br(4,t,t.return),Gr(t);break;case 1:wr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Sr(t,t.return,n),Gr(t);break;case 26:case 27:case 5:wr(t,t.return),Gr(t);break;case 22:wr(t,t.return),t.memoizedState===null&&Gr(t);break;default:Gr(t)}e=e.sibling}}function Kr(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Kr(i,a,n),yr(4,a);break;case 1:if(Kr(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Bi(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Me(c[i],s)}catch(e){Bi(r,r.return,e)}}n&&o&64&&xr(a),Cr(a,a.return);break;case 26:case 27:case 5:Kr(i,a,n),n&&r===null&&o&4&&Tr(a),Cr(a,a.return);break;case 12:Kr(i,a,n);break;case 13:Kr(i,a,n),n&&o&4&&Lr(i,a);break;case 22:a.memoizedState===null&&Kr(i,a,n),Cr(a,a.return);break;default:Kr(i,a,n)}t=t.sibling}}function qr(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&tr(n))}function Jr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&tr(e))}function Yr(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xr(e,t,n,r),t=t.sibling}function Xr(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Yr(e,t,n,r),i&2048&&yr(9,t);break;case 3:Yr(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&tr(e)));break;case 12:if(i&2048){Yr(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Bi(t,t.return,e)}}else Yr(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,t.memoizedState===null?a._visibility&4?Yr(e,t,n,r):(a._visibility|=4,Zr(e,t,n,r,(t.subtreeFlags&10256)!=0)):a._visibility&4?Yr(e,t,n,r):Qr(e,t),i&2048&&qr(t.alternate,t);break;case 24:Yr(e,t,n,r),i&2048&&Jr(t.alternate,t);break;default:Yr(e,t,n,r)}}function Zr(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Zr(a,o,s,c,i),yr(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=4,Zr(a,o,s,c,i)):u._visibility&4?Zr(a,o,s,c,i):Qr(a,o),i&&l&2048&&qr(o.alternate,o);break;case 24:Zr(a,o,s,c,i),i&&l&2048&&Jr(o.alternate,o);break;default:Zr(a,o,s,c,i)}t=t.sibling}}function Qr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Qr(n,r),i&2048&&qr(r.alternate,r);break;case 24:Qr(n,r),i&2048&&Jr(r.alternate,r);break;default:Qr(n,r)}t=t.sibling}}function $r(e){if(e.subtreeFlags&Bl)for(e=e.child;e!==null;)ei(e),e=e.sibling}function ei(e){switch(e.tag){case 26:$r(e),e.flags&Bl&&(e.memoizedState===null?fo(e.type,e.memoizedProps):Ms(zl,e.memoizedState,e.memoizedProps));break;case 5:$r(e),e.flags&Bl&&fo(e.type,e.memoizedProps);break;case 3:case 4:if(ys){var t=zl;zl=xs(e.stateNode.containerInfo),$r(e),zl=t}else $r(e);break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Bl,Bl=16777216,$r(e),Bl=t):$r(e));break;default:$r(e)}}function ti(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ni(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Fl=r,ai(r,e)}ti(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ri(e),e=e.sibling}function ri(e){switch(e.tag){case 0:case 11:case 15:ni(e),e.flags&2048&&br(9,e,e.return);break;case 3:ni(e);break;case 12:ni(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&4&&(e.return===null||e.return.tag!==13)?(t._visibility&=-5,ii(e)):ni(e);break;default:ni(e)}}function ii(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Fl=r,ai(r,e)}ti(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:br(8,t,t.return),ii(t);break;case 22:n=t.stateNode,n._visibility&4&&(n._visibility&=-5,ii(t));break;default:ii(t)}e=e.sibling}}function ai(e,t){for(;Fl!==null;){var n=Fl;switch(n.tag){case 0:case 11:case 15:br(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:tr(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Fl=r;else a:for(n=e;Fl!==null;){r=Fl;var i=r.sibling,a=r.return;if(Pr(r),r===n){Fl=null;break a}if(i!==null){i.return=a,Fl=i;break a}Fl=a}}}function oi(e){var t=to(e);if(t!=null){if(typeof t.memoizedProps[`data-testname`]!=`string`)throw Error(r(364));return t}if(e=bo(e),e===null)throw Error(r(362));return e.stateNode.current}function si(e,t){var n=e.tag;switch(t.$$typeof){case Hl:if(e.type===t.value)return!0;break;case Ul:a:{for(t=t.value,e=[e,0],n=0;n<e.length;){var i=e[n++],a=i.tag,o=e[n++],s=t[o];if(a!==5&&a!==26&&a!==27||!Co(i)){for(;s!=null&&si(i,s);)o++,s=t[o];if(o===t.length){t=!0;break a}else for(i=i.child;i!==null;)e.push(i,o),i=i.sibling}}t=!1}return t;case Wl:if((n===5||n===26||n===27)&&wo(e.stateNode,t.value))return!0;break;case Kl:if((n===5||n===6||n===26||n===27)&&(e=So(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Gl:if((n===5||n===26||n===27)&&(e=e.memoizedProps[`data-testname`],typeof e==`string`&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function ci(e){switch(e.$$typeof){case Hl:return`<`+(a(e.value)||`Unknown`)+`>`;case Ul:return`:has(`+(ci(e)||``)+`)`;case Wl:return`[role="`+e.value+`"]`;case Kl:return`"`+e.value+`"`;case Gl:return`[data-testname="`+e.value+`"]`;default:throw Error(r(365))}}function li(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=i.tag,o=e[r++],s=t[o];if(a!==5&&a!==26&&a!==27||!Co(i)){for(;s!=null&&si(i,s);)o++,s=t[o];if(o===t.length)n.push(i);else for(i=i.child;i!==null;)e.push(i,o),i=i.sibling}}return n}function ui(e,t){if(!yo)throw Error(r(363));e=oi(e),e=li(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++],a=i.tag;if(a===5||a===26||a===27)Co(i)||t.push(i.stateNode);else for(i=i.child;i!==null;)e.push(i),i=i.sibling}return t}function W(){if(Yl&2&&q!==0)return q&-q;if(G.T!==null){var e=Rc;return e===0?be():e}return ao()}function di(){cu===0&&(cu=!(q&536870912)||Cc?w():536870912);var e=$c.current;return e!==null&&(e.flags|=32),cu}function fi(e,t,n){(e===Xl&&Ql===2||e.cancelPendingCommit!==null)&&(bi(e,0),_i(e,q,cu,!1)),D(e,n),(!(Yl&2)||e!==Xl)&&(e===Xl&&(!(Yl&2)&&(ou|=n),iu===4&&_i(e,q,cu,!1)),pe(e))}function pi(e,t,n){if(Yl&6)throw Error(r(327));var i=!n&&(t&60)==0&&(t&e.expiredLanes)===0||S(e,t),a=i?Oi(e,t):Ei(e,t,!0),o=i;do{if(a===0){tu&&!i&&_i(e,t,0,!1);break}else if(a===6)_i(e,t,0,!eu);else{if(n=e.current.alternate,o&&!gi(n)){a=Ei(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=uu;var l=eo&&c.current.memoizedState.isDehydrated;if(l&&(bi(c,s).flags|=256),s=Ei(c,s,!1),s!==2){if(nu&&!l){c.errorRecoveryDisabledLanes|=o,ou|=o,a=4;break a}o=du,du=a,o!==null&&mi(o)}a=s}if(o=!1,a!==2)continue}}if(a===1){bi(e,0),_i(e,t,0,!0);break}a:{switch(i=e,a){case 0:case 1:throw Error(r(345));case 4:if((t&4194176)===t){_i(i,t,cu,!eu);break a}break;case 2:du=null;break;case 3:case 5:break;default:throw Error(r(329))}if(i.finishedWork=n,i.finishedLanes=t,(t&62914560)===t&&(o=pu+300-Zs(),10<o)){if(_i(i,t,cu,!eu),x(i,0)!==0)break a;i.timeoutHandle=Ja(hi.bind(null,i,n,du,hu,fu,t,cu,ou,lu,eu,2,-0,0),o);break a}hi(i,n,du,hu,fu,t,cu,ou,lu,eu,0,-0,0)}}break}while(1);pe(e)}function mi(e){du===null?du=e:du.push.apply(du,e)}function hi(e,t,n,r,i,a,o,s,c,l,u,d,f){var p=t.subtreeFlags;if((p&8192||(p&16785408)==16785408)&&(uo(),ei(t),t=po(),t!==null)){e.cancelPendingCommit=t(Fi.bind(null,e,n,r,i,o,s,c,1,d,f)),_i(e,a,o,!l);return}Fi(e,n,r,i,o,s,c,u,d,f)}function gi(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!oc(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _i(e,t,n,r){t&=~su,t&=~ou,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Hs(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&k(e,n,t)}function vi(){return Yl&6?!0:(me(0,!1),!1)}function yi(){if(Zl!==null){if(Ql===0)var e=Zl.return;else e=Zl,wl=Cl=null,ot(e),qc=null,Jc=0,e=Zl;for(;e!==null;)vr(e.alternate,e),e=e.return;Zl=null}}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;n!==Xa&&(e.timeoutHandle=Xa,Ya(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),yi(),Xl=e,Zl=n=Yi(e.current,null),q=t,Ql=0,$l=null,eu=!1,tu=S(e,t),nu=!1,lu=cu=su=ou=au=iu=0,du=uu=null,fu=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Hs(r),a=1<<i;t|=e[i],r&=~a}return ru=t,se(),n}function xi(e,t){K=null,G.H=pl,t===Uc?(t=Re(),Ql=3):t===Wc?(t=Re(),Ql=4):Ql=t===yl?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,$l=t,Zl===null&&(iu=1,hn(e,F(t,e.current)))}function Si(){var e=$c.current;return e===null?!0:(q&4194176)===q?el===null:(q&62914560)===q||q&536870912?e===el:!1}function Ci(){var e=G.H;return G.H=pl,e===null?pl:e}function wi(){var e=G.A;return G.A=Vl,e}function Ti(){iu=4,eu||(q&4194176)!==q&&$c.current!==null||(tu=!0),!(au&134217727)&&!(ou&134217727)||Xl===null||_i(Xl,q,cu,!1)}function Ei(e,t,n){var r=Yl;Yl|=2;var i=Ci(),a=wi();(Xl!==e||q!==t)&&(hu=null,bi(e,t)),t=!1;var o=iu;a:do try{if(Ql!==0&&Zl!==null){var s=Zl,c=$l;switch(Ql){case 8:yi(),o=6;break a;case 3:case 2:case 6:$c.current===null&&(t=!0);var l=Ql;if(Ql=0,$l=null,Mi(e,s,c,l),n&&tu){o=0;break a}break;default:l=Ql,Ql=0,$l=null,Mi(e,s,c,l)}}Di(),o=iu;break}catch(t){xi(e,t)}while(1);return t&&e.shellSuspendCounter++,wl=Cl=null,Yl=r,G.H=i,G.A=a,Zl===null&&(Xl=null,q=0,se()),o}function Di(){for(;Zl!==null;)Ai(Zl)}function Oi(e,t){var n=Yl;Yl|=2;var i=Ci(),a=wi();Xl!==e||q!==t?(hu=null,mu=Zs()+500,bi(e,t)):tu=S(e,t);a:do try{if(Ql!==0&&Zl!==null){t=Zl;var o=$l;b:switch(Ql){case 1:Ql=0,$l=null,Mi(e,t,o,1);break;case 2:if(Fe(o)){Ql=0,$l=null,ji(t);break}t=function(){Ql===2&&Xl===e&&(Ql=7),pe(e)},o.then(t,t);break a;case 3:Ql=7;break a;case 4:Ql=5;break a;case 7:Fe(o)?(Ql=0,$l=null,ji(t)):(Ql=0,$l=null,Mi(e,t,o,7));break;case 5:var s=null;switch(Zl.tag){case 26:s=Zl.memoizedState;case 5:case 27:var c=Zl,l=c.type,u=c.pendingProps;if(s?js(s):lo(l,u)){Ql=0,$l=null;var d=c.sibling;if(d!==null)Zl=d;else{var f=c.return;f===null?Zl=null:(Zl=f,Ni(f))}break b}}Ql=0,$l=null,Mi(e,t,o,5);break;case 6:Ql=0,$l=null,Mi(e,t,o,6);break;case 8:yi(),iu=6;break a;default:throw Error(r(462))}}ki();break}catch(t){xi(e,t)}while(1);return wl=Cl=null,G.H=i,G.A=a,Yl=n,Zl===null?(Xl=null,q=0,se(),iu):0}function ki(){for(;Zl!==null&&!Ys();)Ai(Zl)}function Ai(e){var t=Un(e.alternate,e,ru);e.memoizedProps=e.pendingProps,t===null?Ni(e):Zl=t}function ji(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=kn(n,t,t.pendingProps,t.type,void 0,q);break;case 11:t=kn(n,t,t.pendingProps,t.type.render,t.ref,q);break;case 5:ot(t);default:vr(n,t),t=Zl=Xi(t,ru),t=Un(n,t,ru)}e.memoizedProps=e.pendingProps,t===null?Ni(e):Zl=t}function Mi(e,t,n,r){wl=Cl=null,ot(t),qc=null,Jc=0;var i=t.return;try{if(bn(e,i,t,n,q)){iu=1,hn(e,F(n,e.current)),Zl=null;return}}catch(t){if(i!==null)throw Zl=i,t;iu=1,hn(e,F(n,e.current)),Zl=null;return}t.flags&32768?(Cc||r===1?e=!0:tu||q&536870912?e=!1:(eu=e=!0,(r===2||r===3||r===6)&&(r=$c.current,r!==null&&r.tag===13&&(r.flags|=16384))),Pi(t,e)):Ni(t)}function Ni(e){var t=e;do{if(t.flags&32768){Pi(t,eu);return}e=t.return;var n=gr(t.alternate,t,ru);if(n!==null){Zl=n;return}if(t=t.sibling,t!==null){Zl=t;return}Zl=t=e}while(t!==null);iu===0&&(iu=5)}function Pi(e,t){do{var n=_r(e.alternate,e);if(n!==null){n.flags&=32767,Zl=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Zl=e;return}Zl=e=n}while(e!==null);iu=6,Zl=null}function Fi(e,t,n,r,i,a,o,s,c,l){var u=G.T,d=io();try{ro(2),G.T=null,Ii(e,t,n,r,d,i,a,o,s,c,l)}finally{G.T=u,ro(d)}}function Ii(e,t,n,i,a,o,s,c){do Ri();while(vu!==null);if(Yl&6)throw Error(r(327));var l=e.finishedWork;if(i=e.finishedLanes,l===null)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=l.lanes|l.childLanes;if(u|=kc,O(e,i,u,o,s,c),e===Xl&&(Zl=Xl=null,q=0),!(l.subtreeFlags&10256)&&!(l.flags&10256)||_u||(_u=!0,bu=u,xu=n,Ki(ec,function(){return Ri(!0),null})),n=(l.flags&15990)!=0,l.subtreeFlags&15990||n?(n=G.T,G.T=null,o=io(),ro(2),s=Yl,Yl|=4,Mr(e,l),Vr(l,e),Ha(e.containerInfo),e.current=l,Nr(e,l.alternate,l),Xs(),Yl=s,ro(o),G.T=n):e.current=l,_u?(_u=!1,vu=e,yu=i):Li(e,u),u=e.pendingLanes,u===0&&(gu=null),M(l.stateNode,a),pe(e),t!==null)for(a=e.onRecoverableError,l=0;l<t.length;l++)u=t[l],a(u.value,{componentStack:u.stack});return yu&3&&Ri(),u=e.pendingLanes,i&4194218&&u&42?e===Cu?Su++:(Su=0,Cu=e):Su=0,me(0,!1),null}function Li(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,tr(t)))}function Ri(){if(vu!==null){var e=vu,t=bu;bu=0;var n=j(yu),i=32>n?32:n;n=G.T;var a=io();try{if(ro(i),G.T=null,vu===null)var o=!1;else{i=xu,xu=null;var s=vu,c=yu;if(vu=null,yu=0,Yl&6)throw Error(r(331));var l=Yl;if(Yl|=4,ri(s.current),Xr(s,s.current,c,i),Yl=l,me(0,!1),ac&&typeof ac.onPostCommitFiberRoot==`function`)try{ac.onPostCommitFiberRoot(ic,s)}catch{}o=!0}return o}finally{ro(a),G.T=n,Li(e,t)}}return!1}function zi(e,t,n){t=F(n,t),t=_n(e.stateNode,t,2),e=De(e,t,2),e!==null&&(D(e,2),pe(e))}function Bi(e,t,n){if(e.tag===3)zi(e,e,n);else for(;t!==null;){if(t.tag===3){zi(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(gu===null||!gu.has(r))){e=F(n,e),n=vn(2),r=De(t,n,2),r!==null&&(yn(n,r,t,e),D(r,2),pe(r));break}}t=t.return}}function Vi(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Jl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(nu=!0,i.add(n),e=Hi.bind(null,e,t,n),t.then(e,e))}function Hi(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xl===e&&(q&n)===n&&(iu===4||iu===3&&(q&62914560)===q&&300>Zs()-pu?!(Yl&2)&&bi(e,0):su|=n,lu===q&&(lu=0)),pe(e)}function Ui(e,t){t===0&&(t=T()),e=ue(e,t),e!==null&&(D(e,t),pe(e))}function Wi(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ui(e,n)}function Gi(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}i!==null&&i.delete(t),Ui(e,n)}function Ki(e,t){return qs(e,t)}function qi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yi(e,n){var r=e.alternate;return r===null?(r=t(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&31457280,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Xi(e,t){e.flags&=31457282;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Zi(e,n,i,a,o,s){var c=0;if(a=e,typeof e==`function`)Ji(e)&&(c=1);else if(typeof e==`string`)c=ys&&Ns?bs(e,i,_c.current)?26:Rs(e)?27:5:ys?bs(e,i,_c.current)?26:5:Ns&&Rs(e)?27:5;else a:switch(e){case ga:return Qi(i.children,o,s,n);case _a:c=8,o|=24;break;case va:return e=t(12,i,n,o|2),e.elementType=va,e.lanes=s,e;case Ca:return e=t(13,i,n,o),e.elementType=Ca,e.lanes=s,e;case wa:return e=t(19,i,n,o),e.elementType=wa,e.lanes=s,e;case Da:return $i(i,o,s,n);default:if(typeof e==`object`&&e)switch(e.$$typeof){case ya:case xa:c=10;break a;case ba:c=9;break a;case Sa:c=11;break a;case Ta:c=14;break a;case Ea:c=16,a=null;break a}c=29,i=Error(r(130,e===null?`null`:typeof e,``)),a=null}return n=t(c,i,n,o),n.elementType=e,n.type=a,n.lanes=s,n}function Qi(e,n,r,i){return e=t(7,e,i,n),e.lanes=r,e}function $i(e,n,i,a){e=t(22,e,a,n),e.elementType=Da,e.lanes=i;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(e===null)throw Error(r(456));if(!(o._pendingVisibility&2)){var t=ue(e,2);t!==null&&(o._pendingVisibility|=2,fi(t,e,2))}},attach:function(){var e=o._current;if(e===null)throw Error(r(456));if(o._pendingVisibility&2){var t=ue(e,2);t!==null&&(o._pendingVisibility&=-3,fi(t,e,2))}}};return e.stateNode=o,e}function ea(e,n,r){return e=t(6,e,null,n),e.lanes=r,e}function ta(e,n,r){return n=t(4,e.children===null?[]:e.children,e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function na(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=E(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E(0),this.hiddenUpdates=E(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function ra(e,n,r,i,a,o,s,c,l,u,d,f){return e=new na(e,n,r,s,c,l,u,f),n=1,!0===o&&(n|=24),o=t(3,null,null,n),e.current=o,o.stateNode=e,n=er(),n.refCount++,e.pooledCache=n,n.refCount++,o.memoizedState={element:i,isDehydrated:r,cache:n},we(o),e}function ia(e){return e?(e=Vs,e):Vs}function aa(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(r(188)):(e=Object.keys(e).join(`,`),Error(r(268,e)));return e=f(t),e=e===null?null:m(e),e===null?null:Ra(e.stateNode)}function oa(e,t,n,r,i,a){i=ia(i),r.context===null?r.context=i:r.pendingContext=i,r=Ee(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=De(e,r,t),n!==null&&(fi(n,e,t),Oe(n,e,t))}function sa(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ca(e,t){sa(e,t),(e=e.alternate)&&sa(e,t)}var la={},ua=p(),da=BM(),fa=Object.assign,pa=Symbol.for(`react.element`),ma=Symbol.for(`react.transitional.element`),ha=Symbol.for(`react.portal`),ga=Symbol.for(`react.fragment`),_a=Symbol.for(`react.strict_mode`),va=Symbol.for(`react.profiler`),ya=Symbol.for(`react.provider`),ba=Symbol.for(`react.consumer`),xa=Symbol.for(`react.context`),Sa=Symbol.for(`react.forward_ref`),Ca=Symbol.for(`react.suspense`),wa=Symbol.for(`react.suspense_list`),Ta=Symbol.for(`react.memo`),Ea=Symbol.for(`react.lazy`),Da=Symbol.for(`react.offscreen`),Oa=Symbol.for(`react.memo_cache_sentinel`),ka=Symbol.iterator,Aa=Symbol.for(`react.client.reference`),G=ua.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ja,Ma,Na=!1,Pa=Array.isArray,Fa=e.rendererVersion,Ia=e.rendererPackageName,La=e.extraDevToolsConfig,Ra=e.getPublicInstance,za=e.getRootHostContext,Ba=e.getChildHostContext,Va=e.prepareForCommit,Ha=e.resetAfterCommit,Ua=e.createInstance,Wa=e.appendInitialChild,Ga=e.finalizeInitialChildren,Ka=e.shouldSetTextContent,qa=e.createTextInstance,Ja=e.scheduleTimeout,Ya=e.cancelTimeout,Xa=e.noTimeout,Za=e.isPrimaryRenderer;e.warnsIfNotActing;var Qa=e.supportsMutation,$a=e.supportsPersistence,eo=e.supportsHydration,to=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var no=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ro=e.setCurrentUpdatePriority,io=e.getCurrentUpdatePriority,ao=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var oo=e.shouldAttemptEagerTransition,so=e.detachDeletedInstance;e.requestPostPaintCallback;var co=e.maySuspendCommit,lo=e.preloadInstance,uo=e.startSuspendingCommit,fo=e.suspendInstance,po=e.waitForCommitToBeReady,mo=e.NotPendingTransition,ho=e.HostTransitionContext,go=e.resetFormInstance;e.bindToConsole;var _o=e.supportsMicrotasks,vo=e.scheduleMicrotask,yo=e.supportsTestSelectors,bo=e.findFiberRoot,xo=e.getBoundingRect,So=e.getTextContent,Co=e.isHiddenSubtree,wo=e.matchAccessibilityRole,To=e.setFocusIfFocusable,Eo=e.setupIntersectionObserver,Do=e.appendChild,Oo=e.appendChildToContainer,ko=e.commitTextUpdate,Ao=e.commitMount,jo=e.commitUpdate,Mo=e.insertBefore,No=e.insertInContainerBefore,Po=e.removeChild,Fo=e.removeChildFromContainer,Io=e.resetTextContent,Lo=e.hideInstance,Ro=e.hideTextInstance,zo=e.unhideInstance,Bo=e.unhideTextInstance,Vo=e.clearContainer,Ho=e.cloneInstance,Uo=e.createContainerChildSet,Wo=e.appendChildToContainerChildSet,Go=e.finalizeContainerChildren,Ko=e.replaceContainerChildren,qo=e.cloneHiddenInstance,Jo=e.cloneHiddenTextInstance,Yo=e.isSuspenseInstancePending,Xo=e.isSuspenseInstanceFallback,Zo=e.getSuspenseInstanceFallbackErrorDetails,Qo=e.registerSuspenseInstanceRetry,$o=e.canHydrateFormStateMarker,es=e.isFormStateMarkerMatching,ts=e.getNextHydratableSibling,ns=e.getFirstHydratableChild,rs=e.getFirstHydratableChildWithinContainer,is=e.getFirstHydratableChildWithinSuspenseInstance,as=e.canHydrateInstance,os=e.canHydrateTextInstance,ss=e.canHydrateSuspenseInstance,cs=e.hydrateInstance,ls=e.hydrateTextInstance,us=e.hydrateSuspenseInstance,ds=e.getNextHydratableInstanceAfterSuspenseInstance,fs=e.commitHydratedContainer,ps=e.commitHydratedSuspenseInstance,ms=e.clearSuspenseBoundary,hs=e.clearSuspenseBoundaryFromContainer,gs=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var _s=e.validateHydratableInstance,vs=e.validateHydratableTextInstance,ys=e.supportsResources,bs=e.isHostHoistableType,xs=e.getHoistableRoot,Ss=e.getResource,Cs=e.acquireResource,ws=e.releaseResource,Ts=e.hydrateHoistable,Es=e.mountHoistable,Ds=e.unmountHoistable,Os=e.createHoistableInstance,ks=e.prepareToCommitHoistables,As=e.mayResourceSuspendCommit,js=e.preloadResource,Ms=e.suspendResource,Ns=e.supportsSingletons,Ps=e.resolveSingletonInstance,Fs=e.clearSingleton,Is=e.acquireSingletonInstance,Ls=e.releaseSingletonInstance,Rs=e.isHostSingletonType,zs=[],Bs=-1,Vs={},Hs=Math.clz32?Math.clz32:y,Us=Math.log,Ws=Math.LN2,Gs=128,Ks=4194304,qs=da.unstable_scheduleCallback,Js=da.unstable_cancelCallback,Ys=da.unstable_shouldYield,Xs=da.unstable_requestPaint,Zs=da.unstable_now,Qs=da.unstable_ImmediatePriority,$s=da.unstable_UserBlockingPriority,ec=da.unstable_NormalPriority,tc=da.unstable_IdlePriority,nc=da.log,rc=da.unstable_setDisableYieldValue,ic=null,ac=null,oc=typeof Object.is==`function`?Object.is:P,sc=new WeakMap,cc=[],lc=0,uc=null,dc=0,fc=[],pc=0,mc=null,hc=1,gc=``,_c=g(null),vc=g(null),yc=g(null),bc=g(null),xc=null,Sc=null,Cc=!1,wc=null,Tc=!1,Ec=Error(r(519)),Dc=[],Oc=0,kc=0,Ac=null,jc=null,Mc=!1,Nc=!1,Pc=!1,Fc=0,Ic=null,Lc=0,Rc=0,zc=null,Bc=!1,Vc=!1,Hc=Object.prototype.hasOwnProperty,Uc=Error(r(460)),Wc=Error(r(474)),Gc={then:function(){}},Kc=null,qc=null,Jc=0,Yc=Ue(!0),Xc=Ue(!1),Zc=g(null),Qc=g(0),$c=g(null),el=null,tl=g(0),nl=0,K=null,rl=null,il=null,al=!1,ol=!1,sl=!1,cl=0,ll=0,ul=null,dl=0,fl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},pl={readContext:Zn,use:ut,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe};pl.useCacheRefresh=Qe,pl.useMemoCache=Qe,pl.useHostTransitionStatus=Qe,pl.useFormState=Qe,pl.useActionState=Qe,pl.useOptimistic=Qe;var ml={readContext:Zn,use:ut,useCallback:function(e,t){return st().memoizedState=[e,t===void 0?null:t],e},useContext:Zn,useEffect:Bt,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),Rt(4194308,4,Wt.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Rt(4194308,4,e,t)},useInsertionEffect:function(e,t){Rt(4,2,e,t)},useMemo:function(e,t){var n=st();t=t===void 0?null:t;var r=e();if(sl){N(!0);try{e()}finally{N(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=st();if(n!==void 0){var i=n(t);if(sl){N(!0);try{n(t)}finally{N(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=rn.bind(null,K,e),[r.memoizedState,e]},useRef:function(e){var t=st();return e={current:e},t.memoizedState=e},useState:function(e){e=St(e);var t=e.queue,n=an.bind(null,K,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Kt,useDeferredValue:function(e,t){return Yt(st(),e,t)},useTransition:function(){var e=St(!1);return e=Zt.bind(null,K,e.queue,!0,!1),st().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=K,a=st();if(Cc){if(n===void 0)throw Error(r(407));n=n()}else{if(n=t(),Xl===null)throw Error(r(349));q&60||_t(i,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Bt(yt.bind(null,i,o,e),[e]),i.flags|=2048,It(9,vt.bind(null,i,o,n,t),{destroy:void 0},null),n},useId:function(){var e=st(),t=Xl.identifierPrefix;if(Cc){var n=gc,r=hc;n=(r&~(1<<32-Hs(r)-1)).toString(32)+n,t=`:`+t+`R`+n,n=cl++,0<n&&(t+=`H`+n.toString(32)),t+=`:`}else n=dl++,t=`:`+t+`r`+n.toString(32)+`:`;return e.memoizedState=t},useCacheRefresh:function(){return st().memoizedState=nn.bind(null,K)}};ml.useMemoCache=dt,ml.useHostTransitionStatus=$t,ml.useFormState=jt,ml.useActionState=jt,ml.useOptimistic=function(e){var t=st();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=sn.bind(null,K,!0,n),n.dispatch=t,[e,t]};var hl={readContext:Zn,use:ut,useCallback:qt,useContext:Zn,useEffect:Vt,useImperativeHandle:Gt,useInsertionEffect:Ht,useLayoutEffect:Ut,useMemo:Jt,useReducer:pt,useRef:Lt,useState:function(){return pt(ft)},useDebugValue:Kt,useDeferredValue:function(e,t){return Xt(ct(),rl.memoizedState,e,t)},useTransition:function(){var e=pt(ft)[0],t=ct().memoizedState;return[typeof e==`boolean`?e:lt(e),t]},useSyncExternalStore:gt,useId:en};hl.useCacheRefresh=tn,hl.useMemoCache=dt,hl.useHostTransitionStatus=$t,hl.useFormState=Mt,hl.useActionState=Mt,hl.useOptimistic=function(e,t){return Ct(ct(),rl,e,t)};var gl={readContext:Zn,use:ut,useCallback:qt,useContext:Zn,useEffect:Vt,useImperativeHandle:Gt,useInsertionEffect:Ht,useLayoutEffect:Ut,useMemo:Jt,useReducer:ht,useRef:Lt,useState:function(){return ht(ft)},useDebugValue:Kt,useDeferredValue:function(e,t){var n=ct();return rl===null?Yt(n,e,t):Xt(n,rl.memoizedState,e,t)},useTransition:function(){var e=ht(ft)[0],t=ct().memoizedState;return[typeof e==`boolean`?e:lt(e),t]},useSyncExternalStore:gt,useId:en};gl.useCacheRefresh=tn,gl.useMemoCache=dt,gl.useHostTransitionStatus=$t,gl.useFormState=Ft,gl.useActionState=Ft,gl.useOptimistic=function(e,t){var n=ct();return rl===null?(n.baseState=e,[e,n.queue.dispatch]):Ct(n,rl,e,t)};var _l={isMounted:function(e){return(e=e._reactInternals)?u(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=W(),i=Ee(r);i.payload=t,n!=null&&(i.callback=n),t=De(e,i,r),t!==null&&(fi(t,e,r),Oe(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=W(),i=Ee(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=De(e,i,r),t!==null&&(fi(t,e,r),Oe(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=W(),r=Ee(n);r.tag=2,t!=null&&(r.callback=t),t=De(e,r,n),t!==null&&(fi(t,e,n),Oe(t,e,n))}},vl=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},yl=Error(r(461)),bl=!1,xl={dehydrated:null,treeContext:null,retryLane:0},Sl=g(null),Cl=null,wl=null,Tl=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},El=da.unstable_scheduleCallback,Dl=da.unstable_NormalPriority,Ol={$$typeof:xa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},kl=G.S;G.S=function(e,t){typeof t==`object`&&t&&typeof t.then==`function`&&xe(e,t),kl!==null&&kl(e,t)};var Al=g(null),jl=!1,Ml=!1,Nl=!1,Pl=typeof WeakSet==`function`?WeakSet:Set,Fl=null,Il=!1,Ll=null,Rl=!1,zl=null,Bl=8192,Vl={getCacheForType:function(e){var t=Zn(Ol),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Hl=0,Ul=1,Wl=2,Gl=3,Kl=4;if(typeof Symbol==`function`&&Symbol.for){var ql=Symbol.for;Hl=ql(`selector.component`),Ul=ql(`selector.has_pseudo_class`),Wl=ql(`selector.role`),Gl=ql(`selector.test_id`),Kl=ql(`selector.text`)}var Jl=typeof WeakMap==`function`?WeakMap:Map,Yl=0,Xl=null,Zl=null,q=0,Ql=0,$l=null,eu=!1,tu=!1,nu=!1,ru=0,iu=0,au=0,ou=0,su=0,cu=0,lu=0,uu=null,du=null,fu=!1,pu=0,mu=1/0,hu=null,gu=null,_u=!1,vu=null,yu=0,bu=0,xu=null,Su=0,Cu=null;return la.attemptContinuousHydration=function(e){if(e.tag===13){var t=ue(e,67108864);t!==null&&fi(t,e,67108864),ca(e,67108864)}},la.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=W(),n=ue(e,t);n!==null&&fi(n,e,t),ca(e,t)}},la.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var t=b(e.pendingLanes);if(t!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var n=1<<31-Hs(t);e.entanglements[1]|=n,t&=~n}pe(e),!(Yl&6)&&(mu=Zs()+500,me(0,!1))}}break;case 13:t=ue(e,2),t!==null&&fi(t,e,2),vi(),ca(e,2)}},la.batchedUpdates=function(e,t){return e(t)},la.createComponentSelector=function(e){return{$$typeof:Hl,value:e}},la.createContainer=function(e,t,n,r,i,a,o,s,c,l){return ra(e,t,!1,null,n,r,a,o,s,c,l,null)},la.createHasPseudoClassSelector=function(e){return{$$typeof:Ul,value:e}},la.createHydrationContainer=function(e,t,n,r,i,a,o,s,c,l,u,d,f){return e=ra(n,r,!0,e,i,a,s,c,l,u,d,f),e.context=ia(null),n=e.current,r=W(),i=Ee(r),i.callback=t??null,De(n,i,r),e.current.lanes=r,D(e,r),pe(e),e},la.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}},la.createRoleSelector=function(e){return{$$typeof:Wl,value:e}},la.createTestNameSelector=function(e){return{$$typeof:Gl,value:e}},la.createTextSelector=function(e){return{$$typeof:Kl,value:e}},la.defaultOnCaughtError=function(e){console.error(e)},la.defaultOnRecoverableError=function(e){vl(e)},la.defaultOnUncaughtError=function(e){vl(e)},la.deferredUpdates=function(e){var t=G.T,n=io();try{return ro(32),G.T=null,e()}finally{ro(n),G.T=t}},la.discreteUpdates=function(e,t,n,r,i){var a=G.T,o=io();try{return ro(2),G.T=null,e(t,n,r,i)}finally{ro(o),G.T=a,Yl===0&&(mu=Zs()+500)}},la.findAllNodes=ui,la.findBoundingRects=function(e,t){if(!yo)throw Error(r(363));t=ui(e,t),e=[];for(var n=0;n<t.length;n++)e.push(xo(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var i=n.x,a=i+n.width,o=n.y,s=o+n.height,c=t-1;0<=c;c--)if(t!==c){var l=e[c],u=l.x,d=u+l.width,f=l.y,p=f+l.height;if(i>=u&&o>=f&&a<=d&&s<=p){e.splice(t,1);break}else if(i!==u||n.width!==l.width||p<o||f>s){if(!(o!==f||n.height!==l.height||d<i||u>a)){u>i&&(l.width+=u-i,l.x=i),d<a&&(l.width=a-u),e.splice(t,1);break}}else{f>o&&(l.height+=f-o,l.y=o),p<s&&(l.height=s-f),e.splice(t,1);break}}}return e},la.findHostInstance=aa,la.findHostInstanceWithNoPortals=function(e){return e=f(e),e=e===null?null:h(e),e===null?null:Ra(e.stateNode)},la.findHostInstanceWithWarning=function(e){return aa(e)},la.flushPassiveEffects=Ri,la.flushSyncFromReconciler=function(e){var t=Yl;Yl|=1;var n=G.T,r=io();try{if(ro(2),G.T=null,e)return e()}finally{ro(r),G.T=n,Yl=t,!(Yl&6)&&me(0,!1)}},la.flushSyncWork=vi,la.focusWithin=function(e,t){if(!yo)throw Error(r(363));for(e=oi(e),t=li(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++],i=n.tag;if(!Co(n)){if((i===5||i===26||i===27)&&To(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},la.getFindAllNodesFailureDescription=function(e,t){if(!yo)throw Error(r(363));var n=0,i=[];e=[oi(e),0];for(var a=0;a<e.length;){var o=e[a++],s=o.tag,c=e[a++],l=t[c];if((s!==5&&s!==26&&s!==27||!Co(o))&&(si(o,l)&&(i.push(ci(l)),c++,c>n&&(n=c)),c<t.length))for(o=o.child;o!==null;)e.push(o,c),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(ci(t[n]));return`findAllNodes was able to match part of the selector:
  `+(i.join(` > `)+`

No matching component was found for:
  `)+e.join(` > `)}return null},la.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return Ra(e.child.stateNode);default:return e.child.stateNode}},la.injectIntoDevTools=function(){var e={bundleType:0,version:Fa,rendererPackageName:Ia,currentDispatcherRef:G,findFiberByHostInstance:to,reconcilerVersion:`19.0.0`};if(La!==null&&(e.rendererConfig=La),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ic=t.inject(e),ac=t}catch{}e=!!t.checkDCE}}return e},la.isAlreadyRendering=function(){return!1},la.observeVisibleRects=function(e,t,n,i){if(!yo)throw Error(r(363));e=ui(e,t);var a=Eo(e,n,i).disconnect;return{disconnect:function(){a()}}},la.shouldError=function(){return null},la.shouldSuspend=function(){return!1},la.startHostTransition=function(e,t,i,a){if(e.tag!==5)throw Error(r(476));var o=Qt(e).queue;Zt(e,o,t,mo,i===null?n:function(){var t=Qt(e).next.queue;return on(e,t,{},W()),i(a)})},la.updateContainer=function(e,t,n,r){var i=t.current,a=W();return oa(i,a,e,t,n,r),a},la.updateContainerSync=function(e,t,n,r){return t.tag===0&&Ri(),oa(t.current,2,e,t,n,r),2},la},t.exports.default=t.exports,Object.defineProperty(t.exports,`__esModule`,{value:!0})})),HM=u(s(((e,t)=>{t.exports=VM()}))(),1).default;function UM(e,t,n,r){throw Ij(`info`,`lifecycle::createTextInstance`),Error("Text instances are not yet supported. Please use a `<text>` component.")}function WM(){Ij(`info`,`lifecycle::detachDeletedInstance`)}function GM(){return Ij(`info`,`lifecycle::finalizeInitialChildren`),!1}var KM={};function qM(e){return Ij(`info`,`lifecycle::getChildHostContext`),e??KM}function JM(){return Ij(`info`,`lifecycle::getCurrentUpdatePriority`),Fj.currentUpdatePriority}function YM(){return Ij(`info`,`lifecycle::getInstanceFromNode`),null}function XM(e){throw Ij(`info`,`lifecycle:getInstanceFromScope`),Error(`Not yet implemented.`)}function ZM(e){return Ij(`info`,`lifecycle::getPublicInstance`),e}function QM(){return Ij(`info`,`lifecycle::getRootHostContext`),KM}function $M(e){e instanceof o_?e.visible=!1:e instanceof wy&&(e.enabled=!1)}function eN(e){throw Ij(`info`,`lifecycle::hideTextInstance`),Error("Text instances are not yet supported. Please use a `<text>` component.")}function tN(e){if(e instanceof wy){let t=e.__pixireact.parent;if(t){let n=t.__pixireact.filters.indexOf(e);t.__pixireact.filters.splice(n,1),t.filters=t.__pixireact.filters}e.__pixireact.parent=null}}function nN(e,t,n){if(Ij(`info`,`lifecycle::insertBefore`),t instanceof o_){let r=t,i=t,a=n;r.parent===e&&e.removeChild(i);let o=e.getChildIndex(a);e.addChildAt(i,o)}else if(t instanceof wy){let r=t.__pixireact.filters.indexOf(n);tN(t),sM(e,t,r)}}function rN(){return Ij(`info`,`lifecycle::maySuspendCommit`),!1}function iN(){return Ij(`info`,`lifecycle::preloadInstance`),!0}function aN(){return Ij(`info`,`lifecycle::prepareForCommit`),null}function oN(){Ij(`info`,`lifecycle::preparePortalMount`)}function sN(){Ij(`info`,`lifecycle::prepareScopeUpdate`)}function cN(e,t){Ij(`info`,`lifecycle::removeChild`),t instanceof wy&&tN(t),t.destroy()}function lN(e){Ij(`info`,`lifecycle::requestPostPaintCallback`)}function uN(){Ij(`info`,`lifecycle::resetAfterCommit`)}function dN(){Ij(`info`,`lifecycle::resetFormInstance`)}function fN(){return Ij(`info`,`lifecycle::resolveEventTimeStamp`),-1.1}function pN(){return Ij(`info`,`lifecycle::resolveEventType`),null}var mN=Aj();function hN(){if(Ij(`info`,`lifecycle::resolveUpdatePriority`),Fj.currentUpdatePriority)return Fj.currentUpdatePriority;let e=typeof self<`u`&&self||typeof window<`u`&&window;if(!e)return mN.DefaultEventPriority;switch(e.event?.type){case`click`:case`contextmenu`:case`dblclick`:case`pointercancel`:case`pointerdown`:case`pointerup`:return mN.DiscreteEventPriority;case`pointermove`:case`pointerout`:case`pointerover`:case`pointerenter`:case`pointerleave`:case`wheel`:return mN.ContinuousEventPriority;default:return mN.DefaultEventPriority}}function gN(e){Ij(`info`,`lifecycle::setCurrentUpdatePriority`),Fj.currentUpdatePriority=e}function _N(){return Ij(`info`,`lifecycle::shouldAttemptEagerTransition`),!1}function vN(){return Ij(`info`,`lifecycle::shouldSetTextContent`),!1}function yN(){Ij(`info`,`lifecycle::startSuspendingCommit`)}function bN(){Ij(`info`,`lifecycle::suspendInstance`)}function xN(){Ij(`info`,`lifecycle::trackSchedulerEvent`)}function SN(e){e instanceof o_?e.visible=!0:e instanceof wy&&(e.enabled=!0)}function CN(e){throw Ij(`info`,`lifecycle::unhideTextInstance`),Error("Text instances are not yet supported. Please use a `<text>` component.")}function wN(){return Ij(`info`,`lifecycle::waitForCommitToBeReady`),null}var TN=HM({isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:oM,appendChild:cM,appendChildToContainer:cM,appendInitialChild:cM,beforeActiveInstanceBlur:lM,cancelTimeout:clearTimeout,clearContainer:uM,commitUpdate:MM,createInstance:RM,createTextInstance:UM,hideTextInstance:eN,unhideTextInstance:CN,detachDeletedInstance:WM,finalizeInitialChildren:GM,getChildHostContext:qM,getCurrentUpdatePriority:JM,getInstanceFromNode:YM,getInstanceFromScope:XM,getPublicInstance:ZM,getRootHostContext:QM,hideInstance:$M,insertBefore:nN,insertInContainerBefore:nN,maySuspendCommit:rN,preloadInstance:iN,prepareForCommit:aN,preparePortalMount:oN,prepareScopeUpdate:sN,removeChild:cN,removeChildFromContainer:cN,requestPostPaintCallback:lN,resetAfterCommit:uN,resetFormInstance:dN,resolveEventTimeStamp:fN,resolveEventType:pN,resolveUpdatePriority:hN,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:_N,setCurrentUpdatePriority:gN,shouldSetTextContent:vN,startSuspendingCommit:yN,suspendInstance:bN,trackSchedulerEvent:xN,unhideInstance:SN,waitForCommitToBeReady:wN,rendererPackageName:`@pixi/react`,rendererVersion:aM.version});TN.injectIntoDevTools();var EN=new Map;Aj();function DN(e,t={}){let n=EN.get(e),r=n?.applicationState??{isInitialised:!1,isInitialising:!1},i=n?.internalState??{};n?Ij(`warn`,`createRoot should only be called once!`):(r.app=new wb,i.rootContainer=Lj(r.app.stage));let a=n?.fiber??TN.createContainer(i.rootContainer,1,null,!1,null,``,console.error,console.error,console.error,null);if(!n){let o;e instanceof HTMLCanvasElement&&(o=e),o||(o=document.createElement(`canvas`),e.innerHTML=``,e.appendChild(o)),i.canvas=o,n={applicationState:r,fiber:a,internalState:i,render:async(e,n)=>(!r.app.renderer&&!r.isInitialised&&!r.isInitialising&&(r.isInitialising=!0,await r.app.init({...n,canvas:o}),r.isInitialising=!1,r.isInitialised=!0,r={...r},t.onInit?.(r.app)),Object.entries(n).forEach(([e,t])=>{let i=e;Pj(n,i)||(r.app[i]=t)}),TN.updateContainer((0,U.jsx)(Nj,{value:r,children:e}),a,null,()=>void 0),r.app)},EN.set(o,n)}return n}function ON(e){Fj.unmountQueue.delete(e);let t=e.fiber;t&&TN.updateContainer(null,t,null,()=>{e.applicationState.app&&e.applicationState.app.destroy(),EN.delete(e.internalState.canvas)})}function kN(){for(let e of Fj.unmountQueue)ON(e)}function AN(e){let t=EN.get(e);t&&(t.applicationState.isInitialised?ON(t):Fj.unmountQueue.add(t))}function jN(e){let t=EN.get(e);t&&Fj.unmountQueue.delete(t)}var MN=typeof window<`u`&&(window.document?.createElement||window.navigator?.product===`ReactNative`)?b.useLayoutEffect:b.useEffect,NN={...cw.defaultTextStyle},PN=(0,b.forwardRef)(function(e,t){let{children:n,className:r,defaultTextStyle:i,extensions:a,onInit:o,resizeTo:s,...c}=e,l=Um(),u=(0,b.useRef)(null),d=(0,b.useRef)(null),f=(0,b.useRef)(new Set);(0,b.useImperativeHandle)(t,()=>({getApplication(){return u.current},getCanvas(){return d.current}}));let p=(0,b.useCallback)(()=>{let e=u.current;e&&(s?`current`in s?s.current instanceof HTMLElement&&(e.resizeTo=s.current):e.resizeTo=s:e.resizeTo=void 0)},[s]),m=(0,b.useCallback)(e=>{kN(),u.current=e,p(),o?.(e)},[o]);return MN(()=>{if(a){let e=[...a],t=f.current;for(let n of t.values()){let r=e.indexOf(n);r===-1&&(Km.remove(n),t.delete(n)),e.splice(r,1)}for(let n of e)Km.add(n),t.add(n)}},[a]),MN(()=>{let e=d.current;if(e){let t=EN.get(e);t||=DN(e,{onInit:m}),t.render((0,U.jsx)(l,{children:n}),c)}},[c,n,m,s]),MN(()=>{p()},[s]),MN(()=>{i?Object.assign(cw.defaultTextStyle,i):Object.assign(cw.defaultTextStyle,NN)},[i]),(0,b.useEffect)(()=>{let e=d.current;if(e)return jN(e),()=>{AN(e)}},[]),(0,U.jsx)(`canvas`,{ref:d,className:r})}),FN=(0,b.forwardRef)(function(e,t){return(0,U.jsx)(Rm,{children:(0,U.jsx)(PN,{ref:t,...e})})});function IN(e){Object.assign(PM,e)}(()=>{try{IN({Container:o_,Sprite:c_,pixiContainer:o_,pixiSprite:c_})}catch(e){console.warn(`CharacterPreview: extend error`,e)}})();function LN({spritePath:e,width:t=96,height:n=96,scale:r=2,isAnimated:i=!0}){let[a,o]=(0,b.useState)(0),[s,c]=(0,b.useState)(null);(0,b.useEffect)(()=>{if(!i)return;let e=setInterval(()=>{o(e=>(e+1)%3)},200);return()=>clearInterval(e)},[i]),(0,b.useEffect)(()=>{let t=!0;return(async()=>{console.log(`CharacterPreview: Attempting to load:`,e);try{try{await FT.init()}catch{}let n=await FT.load(e);console.log(`CharacterPreview: Load success:`,e,`Dimensions:`,n.width,`x`,n.height),t&&c(n)}catch(t){console.error(`CharacterPreview: Load failure:`,e,t)}})(),()=>{t=!1}},[e]);let l=(0,b.useMemo)(()=>{if(!s)return null;if(!s.width||s.width<10)return s;try{let e=3,t=4;s.width>=500&&s.width/12==s.height/8&&(e=12,t=8);let n=s.width/e,r=s.height/t;return n<=0||r<=0?s:new Q({source:s.source,frame:new mh(a%3*n,0,n,r)})}catch(e){return console.warn(`Error slicing texture, using base:`,e),s}},[s,a]);return s?(0,U.jsx)(`div`,{style:{width:t,height:n,position:`relative`},children:(0,U.jsx)(FN,{width:t,height:n,backgroundAlpha:0,antialias:!1,resizeTo:void 0,children:(0,U.jsx)(`pixiContainer`,{x:t/2,y:n/2,children:(0,U.jsx)(`pixiSprite`,{texture:l||s,anchor:.5,scale:r,roundPixels:!0})})})}):(0,U.jsx)(`div`,{style:{width:t,height:n},className:`bg-dark-card animate-pulse rounded-xl`})}var RN=S();function zN(e){let t=(0,RN.c)(68),{slides:n,onClose:r}=e,[i,a]=(0,b.useState)(0),o;t[0]!==i||t[1]!==r||t[2]!==n.length?(o=()=>{i<n.length-1?a(VN):r()},t[0]=i,t[1]=r,t[2]=n.length,t[3]=o):o=t[3];let s=o,c;t[4]===i?c=t[5]:(c=()=>{i>0&&a(BN)},t[4]=i,t[5]=c);let l=c,u,d;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(u={opacity:0,scale:.9},d={opacity:1,scale:1},t[6]=u,t[7]=d):(u=t[6],d=t[7]);let f;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,U.jsx)(um,{className:`w-5 h-5`}),t[8]=f):f=t[8];let p;t[9]===r?p=t[10]:(p=(0,U.jsx)(`button`,{onClick:r,className:`absolute top-4 right-4 z-50 p-2 bg-black/60 hover:bg-black/90 rounded-full text-white transition-colors border border-white/20 shadow-xl cursor-pointer`,children:f}),t[9]=r,t[10]=p);let m,h,g,_;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(h={opacity:0,x:20},g={opacity:1,x:0},_={opacity:0,x:-20},m={duration:.5},t[11]=m,t[12]=h,t[13]=g,t[14]=_):(m=t[11],h=t[12],g=t[13],_=t[14]);let v=n[i],y=`Story scene ${i+1}`,x;t[15]!==v.image||t[16]!==y?(x=(0,U.jsx)(`img`,{src:v.image,alt:y,className:`max-h-[55vh] w-auto object-contain rounded-xl shadow-2xl`}),t[15]=v.image,t[16]=y,t[17]=x):x=t[17];let S;t[18]!==i||t[19]!==x?(S=(0,U.jsx)(J,{mode:`wait`,children:(0,U.jsx)(Y.div,{initial:h,animate:g,exit:_,transition:m,className:`w-full h-full flex items-center justify-center p-4`,children:x},i)}),t[18]=i,t[19]=x,t[20]=S):S=t[20];let C;t[21]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,U.jsx)(`div`,{className:`absolute inset-0 pointer-events-none shadow-[inset_0_0_100px_rgba(0,0,0,0.5)]`}),t[21]=C):C=t[21];let w;t[22]===S?w=t[23]:(w=(0,U.jsxs)(`div`,{className:`relative flex-1 bg-black flex items-center justify-center overflow-hidden min-h-[300px]`,children:[S,C]}),t[22]=S,t[23]=w);let T=i+`-text`,E,D,O;t[24]===Symbol.for(`react.memo_cache_sentinel`)?(E={opacity:0,y:10},D={opacity:1,y:0},O={opacity:0,y:-10},t[24]=E,t[25]=D,t[26]=O):(E=t[24],D=t[25],O=t[26]);let k=n[i],A;t[27]===k.text?A=t[28]:(A=(0,U.jsxs)(`p`,{className:`text-text-primary dark:text-white text-base md:text-xl leading-relaxed font-medium text-center italic`,children:[`"`,k.text,`"`]}),t[27]=k.text,t[28]=A);let j;t[29]!==T||t[30]!==A?(j=(0,U.jsx)(J,{mode:`wait`,children:(0,U.jsx)(Y.div,{initial:E,animate:D,exit:O,className:`min-h-[100px] mb-8`,children:A},T)}),t[29]=T,t[30]=A,t[31]=j):j=t[31];let M;t[32]!==i||t[33]!==l?(M=(0,U.jsx)(`div`,{className:`flex items-center gap-4`,children:i>0?(0,U.jsxs)(`button`,{onClick:l,className:`flex items-center gap-2 text-text-tertiary hover:text-accent-yellow transition-colors font-bold uppercase tracking-widest text-xs py-2 px-4 bg-white/5 rounded-lg cursor-pointer`,children:[(0,U.jsx)(Bp,{className:`w-4 h-4`}),`Regresar`]}):(0,U.jsx)(`div`,{className:`w-24`})}),t[32]=i,t[33]=l,t[34]=M):M=t[34];let N;if(t[35]!==i||t[36]!==n){let e;t[38]===i?e=t[39]:(e=(e,t)=>(0,U.jsx)(`div`,{className:`w-2 h-2 rounded-full transition-all duration-300 ${t===i?`bg-accent-yellow w-6`:`bg-accent-yellow/20`}`},t),t[38]=i,t[39]=e),N=n.map(e),t[35]=i,t[36]=n,t[37]=N}else N=t[37];let P;t[40]===N?P=t[41]:(P=(0,U.jsx)(`div`,{className:`hidden sm:flex gap-2`,children:N}),t[40]=N,t[41]=P);let F=i===n.length-1?`Iniciar mi viaje!`:`Siguiente`,I;t[42]!==i||t[43]!==n.length?(I=i<n.length-1&&(0,U.jsx)(Vp,{className:`w-5 h-5`}),t[42]=i,t[43]=n.length,t[44]=I):I=t[44];let L;t[45]!==s||t[46]!==F||t[47]!==I?(L=(0,U.jsxs)(`button`,{onClick:s,className:`flex items-center gap-2 bg-accent-yellow text-dark-bg px-8 py-3 rounded-xl font-bold hover:scale-105 active:scale-95 transition-all shadow-glow uppercase tracking-wider text-sm cursor-pointer`,children:[F,I]}),t[45]=s,t[46]=F,t[47]=I,t[48]=L):L=t[48];let R;t[49]!==P||t[50]!==L?(R=(0,U.jsxs)(`div`,{className:`flex items-center gap-6`,children:[P,L]}),t[49]=P,t[50]=L,t[51]=R):R=t[51];let z;t[52]!==M||t[53]!==R?(z=(0,U.jsxs)(`div`,{className:`flex items-center justify-between mt-2`,children:[M,R]}),t[52]=M,t[53]=R,t[54]=z):z=t[54];let B;t[55]!==j||t[56]!==z?(B=(0,U.jsxs)(`div`,{className:`max-w-3xl mx-auto`,children:[j,z]}),t[55]=j,t[56]=z,t[57]=B):B=t[57];let V,ee,H,te;t[58]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,U.jsx)(`div`,{className:`absolute top-2 left-2 w-4 h-4 border-t-2 border-l-2 border-accent-yellow/30`}),ee=(0,U.jsx)(`div`,{className:`absolute top-2 right-2 w-4 h-4 border-t-2 border-r-2 border-accent-yellow/30`}),H=(0,U.jsx)(`div`,{className:`absolute bottom-2 left-2 w-4 h-4 border-b-2 border-l-2 border-accent-yellow/30`}),te=(0,U.jsx)(`div`,{className:`absolute bottom-2 right-2 w-4 h-4 border-b-2 border-r-2 border-accent-yellow/30`}),t[58]=V,t[59]=ee,t[60]=H,t[61]=te):(V=t[58],ee=t[59],H=t[60],te=t[61]);let ne;t[62]===B?ne=t[63]:(ne=(0,U.jsxs)(`div`,{className:`bg-dark-card border-t-[6px] border-accent-yellow p-6 md:p-10 relative`,children:[B,V,ee,H,te]}),t[62]=B,t[63]=ne);let re;return t[64]!==w||t[65]!==ne||t[66]!==p?(re=(0,U.jsx)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 overflow-hidden bg-black/95 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:u,animate:d,className:`relative w-full max-w-5xl flex flex-col bg-dark-bg rounded-[2rem] border-[6px] border-accent-yellow shadow-glow overflow-hidden`,children:[p,w,ne]})}),t[64]=w,t[65]=ne,t[66]=p,t[67]=re):re=t[67],re}function BN(e){return e-1}function VN(e){return e+1}var HN=`/mathhero/assets/mathherologo-BnKGmHhz.jpg`;function UN(){let e=Qe(),{username:t,heroName:n,logout:r}=Tm(),[i,a]=(0,b.useState)(!1);if(!t)return e(`/`),null;let o={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 lg:p-12 flex justify-center relative`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathhero/mathbg.png)`}}),(0,U.jsx)(pm,{}),(0,U.jsxs)(Y.div,{className:`flex-col mx-auto max-w-7xl gap-6`,variants:o,initial:`hidden`,animate:`visible`,children:[(0,U.jsxs)(Y.div,{variants:s,className:`mb-12 flex flex-col md:flex-row md:items-end justify-between gap-6`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 mb-3`,children:[(0,U.jsx)(`img`,{src:HN,alt:`MathHero Logo`,className:`w-32 h-16 rounded-full`}),(0,U.jsx)(`h1`,{className:`text-4xl md:text-5xl font-bold gradient-text`,children:`MathHero`})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-4`,children:[(0,U.jsx)(`div`,{onClick:()=>e(`/profile`),className:`w-16 h-16 bg-dark-bg/50 rounded-full border-2 border-accent-yellow flex items-center justify-center overflow-hidden cursor-pointer hover:scale-105 transition-smooth select-none`,children:Tm.getState().selectedCharacter?(0,U.jsx)(LN,{spritePath:Pm.find(e=>e.id===Tm.getState().selectedCharacter)?.path||``,width:64,height:64,scale:1.5}):(0,U.jsx)(lm,{className:`w-8 h-8 text-accent-yellow`})}),(0,U.jsxs)(`div`,{children:[(0,U.jsxs)(`p`,{className:`text-primary text-lg flex items-center gap-2`,children:[`Bienvenido, `,(0,U.jsx)(`span`,{className:`text-accent-yellow font-bold uppercase tracking-wider`,children:t})]}),(0,U.jsxs)(`div`,{className:`flex items-center gap-3`,children:[(0,U.jsxs)(`span`,{className:`text-text-tertiary text-sm italic !font-normal`,children:[`alias `,n]}),(0,U.jsx)(`button`,{onClick:()=>e(`/profile`),className:`text-[14px] bg-accent-yellow/10 dark:bg-accent-yellow/10 text-accent-red px-2 py-0.5 rounded border border-accent-red/20 hover:bg-accent-red/20 dark:hover:bg-accent-red/20 transition-smooth cursor-pointer`,children:`Configurar Perfil`}),(0,U.jsxs)(`button`,{onClick:()=>a(!0),className:`text-[14px] cursor-pointer bg-blue-500/10 text-blue-400 px-2 py-0.5 rounded border border-blue-500/20 hover:bg-blue-500/20 transition-smooth flex items-center gap-1`,children:[(0,U.jsx)(zp,{className:`w-3 h-3`}),`Historia`]})]})]})]})]}),(0,U.jsx)(`button`,{onClick:()=>{r(),e(`/`)},className:`px-4 py-2 text-lg dark:text-primary dark:hover:text-red-400 text-primary hover:text-red-400 transition-colors flex items-center gap-2 cursor-pointer`,children:`Cerrar Sesin`})]}),(0,U.jsxs)(Y.div,{variants:s,className:`mb-12`,children:[(0,U.jsx)(`h2`,{className:`text-2xl font-bold text-text-primary mb-6`,children:`Explora el Reino`}),(0,U.jsx)(Mm,{})]}),(0,U.jsx)(Y.div,{variants:s,className:`mt-12 text-center`,children:(0,U.jsx)(`p`,{className:`text-primary dark:text-primary text-lg`,children:`Empieza tu aventura, selecciona un mundo para comenzar`})})]}),i&&(0,U.jsx)(zN,{onClose:()=>a(!1),slides:[{image:`/mathhero/assets/slide1-2Qz_kZuO.png`,text:`Eres un hroe en formacin. Tu viaje comienza en la Isla de las Matemticas, un lugar donde cada sendero es un desafo y cada reto es una leccin. Aqu no solo pondrs a prueba tu ingenio: interiorizars el conocimiento cientfico que forjar tu mente y definir quin ests destinado a ser.`},{image:`/mathhero/assets/slide2-CZbPMwYO.png`,text:`Con cada prueba superada, te acercas al dominio del poder de la ciencia dimensional. Este poder, reservado para quienes perseveran, es la nica fuerza capaz de enfrentar a la Legin Oscura: una raza ancestral que recorre la galaxia robando el conocimiento de las especies, condenndolas a la ignorancia y al estancamiento.`},{image:`/mathhero/assets/slide3-C-OSD3zt.png`,text:`Cuando desarrolles todo tu potencial matemtico, se abrir ante ti un nuevo destino. Podrs unirte a la Legin de Defensa, un grupo de hroes que ha convertido la ciencia en su arma ms poderosa. El futuro de la galaxia est en juego, y tu preparacin comienza ahora.`}]})]})}var WN=S();function GN(e){let t=(0,WN.c)(31),{spritePath:n,width:r,height:i,scale:a,frameCount:o}=e,s=r===void 0?120:r,c=i===void 0?120:i,l=a===void 0?1:a,u=o===void 0?6:o,[d,f]=(0,b.useState)(0),[p,m]=(0,b.useState)(null),h,g;t[0]===u?(h=t[1],g=t[2]):(h=()=>{let e=setInterval(()=>{f(e=>(e+1)%u)},150);return()=>clearInterval(e)},g=[u],t[0]=u,t[1]=h,t[2]=g),(0,b.useEffect)(h,g);let _,v;t[3]===n?(_=t[4],v=t[5]):(_=()=>{let e=!0;return(async()=>{try{await FT.init();let t=await FT.load(n);e&&m(t)}catch(e){let t=e;console.error(`WizardSprite: Load failure:`,t)}})(),()=>{e=!1}},v=[n],t[3]=n,t[4]=_,t[5]=v),(0,b.useEffect)(_,v);let y;bb0:{if(!p){y=null;break bb0}try{let e=p.width/u,n=p.height,r;t[6]!==p.source||t[7]!==d||t[8]!==n||t[9]!==e?(r=new Q({source:p.source,frame:new mh(d*e,0,e,n)}),t[6]=p.source,t[7]=d,t[8]=n,t[9]=e,t[10]=r):r=t[10],y=r}catch{y=p}}let x=y;if(!p){let e;return t[11]!==c||t[12]!==s?(e=(0,U.jsx)(`div`,{style:{width:s,height:c},className:`bg-white/5 animate-pulse rounded-full`}),t[11]=c,t[12]=s,t[13]=e):e=t[13],e}let S;t[14]!==c||t[15]!==s?(S={width:s,height:c,position:`relative`},t[14]=c,t[15]=s,t[16]=S):S=t[16];let C=s/2,w=c/2,T=x||p,E;t[17]!==l||t[18]!==T?(E=(0,U.jsx)(`pixiSprite`,{texture:T,anchor:.5,scale:l,roundPixels:!0}),t[17]=l,t[18]=T,t[19]=E):E=t[19];let D;t[20]!==C||t[21]!==w||t[22]!==E?(D=(0,U.jsx)(`pixiContainer`,{x:C,y:w,children:E}),t[20]=C,t[21]=w,t[22]=E,t[23]=D):D=t[23];let O;t[24]!==c||t[25]!==D||t[26]!==s?(O=(0,U.jsx)(FN,{width:s,height:c,backgroundAlpha:0,antialias:!1,children:D}),t[24]=c,t[25]=D,t[26]=s,t[27]=O):O=t[27];let k;return t[28]!==S||t[29]!==O?(k=(0,U.jsx)(`div`,{style:S,children:O}),t[28]=S,t[29]=O,t[30]=k):k=t[30],k}var KN=S();function qN(e){let t=(0,KN.c)(35),{isOpen:n,levelName:r,points:i}=e,a=Qe();if(!n)return null;let o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute inset-0 bg-dark-bg/80 backdrop-blur-md`}),t[0]=o):o=t[0];let s,c,l;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(s={scale:.8,opacity:0,y:20},c={scale:1,opacity:1,y:0},l={scale:.8,opacity:0,y:20},t[1]=s,t[2]=c,t[3]=l):(s=t[1],c=t[2],l=t[3]);let u;t[4]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,U.jsx)(`div`,{className:`absolute inset-0 pointer-events-none overflow-hidden`,children:[...[,,,,,,]].map(JN)}),t[4]=u):u=t[4];let d,f;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(d={scale:[1,1.1,1],rotate:[0,-5,5,0]},f={duration:2,repeat:1/0},t[5]=d,t[6]=f):(d=t[5],f=t[6]);let p;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,U.jsx)(Y.div,{animate:d,transition:f,className:`inline-block p-6 bg-accent-yellow/10 rounded-full mb-6 border-2 border-accent-yellow/20`,children:(0,U.jsx)(cm,{size:80,className:`text-accent-yellow drop-shadow-[0_0_15px_rgba(244,224,77,0.5)]`})}),t[7]=p):p=t[7];let m,h,g,_;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(_={scale:.5,opacity:0},m={scale:1,opacity:1},h={delay:.3},g=(0,U.jsx)(`h1`,{className:`text-4xl font-black gradient-text mb-2 uppercase tracking-tighter`,children:`Nivel Superado!`}),t[8]=m,t[9]=h,t[10]=g,t[11]=_):(m=t[8],h=t[9],g=t[10],_=t[11]);let v;t[12]===r?v=t[13]:(v=(0,U.jsxs)(`div`,{className:`relative z-10 mb-8`,children:[p,(0,U.jsxs)(Y.div,{initial:_,animate:m,transition:h,children:[g,(0,U.jsxs)(`p`,{className:`text-text-tertiary font-bold tracking-widest text-xs uppercase opacity-60`,children:[`Has conquistado el `,r]})]})]}),t[12]=r,t[13]=v);let y,b,x;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(y={y:20,opacity:0},b={y:0,opacity:1},x={delay:.5},t[14]=y,t[15]=b,t[16]=x):(y=t[14],b=t[15],x=t[16]);let S;t[17]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,U.jsx)(`p`,{className:`text-text-secondary text-[10px] uppercase font-black mb-1 opacity-50`,children:`Puntos Ganados`}),t[17]=S):S=t[17];let C;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,U.jsx)(rm,{className:`text-accent-yellow fill-accent-yellow w-5 h-5`}),t[18]=C):C=t[18];let w;t[19]===i?w=t[20]:(w=(0,U.jsx)(Y.div,{initial:y,animate:b,transition:x,className:`bg-dark-bg/60 rounded-3xl p-6 border-2 border-white/5 mb-10 flex items-center justify-center gap-4 relative z-10`,children:(0,U.jsxs)(`div`,{className:`text-center`,children:[S,(0,U.jsxs)(`div`,{className:`flex items-center gap-2`,children:[C,(0,U.jsxs)(`span`,{className:`text-3xl font-black text-accent-yellow`,children:[`+`,i]})]})]})}),t[19]=i,t[20]=w);let T,E;t[21]===Symbol.for(`react.memo_cache_sentinel`)?(T={scale:1.05},E={scale:.95},t[21]=T,t[22]=E):(T=t[21],E=t[22]);let D;t[23]===a?D=t[24]:(D=()=>a(`/dashboard`),t[23]=a,t[24]=D);let O,k,A;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,U.jsx)(`span`,{className:`relative z-10`,children:`Continuar al Mapa`}),k=(0,U.jsx)(Lp,{className:`w-6 h-6 group-hover:translate-x-1 transition-transform relative z-10`}),A=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`}),t[25]=O,t[26]=k,t[27]=A):(O=t[25],k=t[26],A=t[27]);let j;t[28]===D?j=t[29]:(j=(0,U.jsxs)(Y.button,{whileHover:T,whileTap:E,onClick:D,className:`group relative w-full py-5 bg-accent-yellow text-dark-bg font-black rounded-2xl shadow-[0_10px_25px_rgba(244,224,77,0.4)] hover:shadow-[0_15px_35px_rgba(244,224,77,0.6)] transition-all flex items-center justify-center gap-3 uppercase tracking-wider relative z-10 overflow-hidden cursor-pointer`,children:[O,k,A]}),t[28]=D,t[29]=j);let M;return t[30]!==v||t[31]!==w||t[32]!==j||t[33]!==u?(M=(0,U.jsx)(J,{children:(0,U.jsxs)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4`,children:[o,(0,U.jsxs)(Y.div,{initial:s,animate:c,exit:l,className:`relative w-full max-w-md bg-dark-card border-4 border-accent-yellow rounded-[2.5rem] p-10 text-center shadow-[0_0_50px_rgba(244,224,77,0.3)] overflow-hidden`,children:[u,v,w,j]})]})}),t[30]=v,t[31]=w,t[32]=j,t[33]=u,t[34]=M):M=t[34],M}function JN(e,t){return(0,U.jsx)(Y.div,{animate:{y:[-20,400],x:[Math.random()*400,Math.random()*400],rotate:[0,360],opacity:[0,1,0]},transition:{duration:Math.random()*3+2,repeat:1/0,ease:`linear`,delay:Math.random()*2},className:`absolute -top-10 text-accent-yellow/20`,children:(0,U.jsx)(nm,{size:20+Math.random()*20})},t)}var YN=`/mathhero/assets/Idle-BMVuYun0.png`,XN=S();function ZN(){let e=(0,XN.c)(42),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(0),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(!0),[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(!1),T;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{let e=Math.floor(Math.random()*20)+1,t=Math.floor(Math.random()*10)+1,n=Array.from({length:7},(n,r)=>e+r*t),r=Math.floor(Math.random()*5)+1,i=n[r];a({sequence:n,missingIndex:r,answer:i,firstTerm:e,commonDifference:t}),s(``),l(null),h(!1),S(!1)},e[0]=T):T=e[0];let E=T,D,O;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(D=()=>{E()},O=[],e[1]=D,e[2]=O):(D=e[1],O=e[2]),(0,b.useEffect)(D,O);let k;e[3]!==r||e[4]!==u||e[5]!==i||e[6]!==m||e[7]!==n||e[8]!==o?(k=()=>{if(!(!i||m))if(parseInt(o)===i.answer){l(`correct`),h(!0),n(15,!0);let e=u+1;d(e),e>=10&&(r(`level6`),setTimeout(()=>p(!0),1e3))}else l(`incorrect`),n(0,!1)},e[3]=r,e[4]=u,e[5]=i,e[6]=m,e[7]=n,e[8]=o,e[9]=k):k=e[9];let A=k;if(f){let t=u*15,n;return e[10]===t?n=e[11]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Aritmtica Mixta`,points:t}),e[10]=t,e[11]=n),n}let j;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[12]=j):j=e[12];let M;e[13]===t?M=e[14]:(M=()=>t(`/dashboard`),e[13]=t,e[14]=M);let N,P;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(Ip,{className:`w-5 h-5`}),P=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[15]=N,e[16]=P):(N=e[15],P=e[16]);let F;e[17]===M?F=e[18]:(F=(0,U.jsxs)(`button`,{onClick:M,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[N,P]}),e[17]=M,e[18]=F);let I;e[19]===g?I=e[20]:(I=!g&&(0,U.jsxs)(`button`,{onClick:()=>w(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[19]=g,e[20]=I);let L;e[21]!==F||e[22]!==I?(L=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[F,I]}),e[21]=F,e[22]=I,e[23]=L):L=e[23];let R;e[24]!==A||e[25]!==u||e[26]!==c||e[27]!==i||e[28]!==m||e[29]!==x||e[30]!==v||e[31]!==g||e[32]!==o?(R=(0,U.jsx)(J,{mode:`wait`,children:g?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de Aritmtica`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Las series aritmticas crecen paso a paso, con un ritmo constante. Podrs encontrar la diferencia oculta?"`}),(0,U.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 justify-center md:justify-start`,children:[(0,U.jsxs)(`button`,{onClick:()=>_(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Empezar Reto!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]}),(0,U.jsxs)(`button`,{onClick:()=>y(!v),className:`flex items-center justify-center gap-2 px-6 py-4 bg-dark-bg/40 text-accent-yellow border-2 border-accent-yellow/20 rounded-2xl hover:bg-dark-bg/60 transition-all cursor-pointer font-bold`,children:[(0,U.jsx)(zp,{className:`w-5 h-5`}),v?`Ocultar Saber`:`Aprender Ms`]})]})]})]}),(0,U.jsx)(J,{children:v&&(0,U.jsx)(Y.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},className:`overflow-hidden bg-dark-bg/20`,children:(0,U.jsxs)(`div`,{className:`p-8 border-t-2 border-accent-yellow/10`,children:[(0,U.jsx)(`h4`,{className:`text-xl font-bold text-accent-yellow mb-4`,children:`Qu es una Serie Aritmtica?`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:`Es una secuencia donde cada nmero se obtiene sumando siempre la misma cantidad al anterior. Por ejemplo, en 5, 8, 11, 14... la diferencia es +3. Tu misin es encontrar esa diferencia y completar el nmero que falta.`})]})})})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Series Aritmticas`}),(0,U.jsx)(`p`,{className:`text-text-tertiary dark:text-white/60`,children:`Encuentra el nmero que falta en la serie`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary dark:text-white/40 uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[u,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsxs)(`div`,{className:`mb-12`,children:[(0,U.jsx)(`p`,{className:`text-xl text-text-tertiary dark:text-white/60 mb-8 italic`,children:`Qu nmero falta en este camino?`}),(0,U.jsx)(`div`,{className:`flex flex-wrap justify-center gap-4`,children:i.sequence.map((e,t)=>(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.1},className:`
                              w-16 h-16 md:w-20 md:h-20 rounded-2xl flex items-center justify-center text-xl md:text-2xl font-black border-2
                              ${t===i.missingIndex?`bg-accent-yellow/10 border-accent-yellow text-accent-yellow shadow-glow-yellow`:`bg-dark-bg border-white/5 text-text-primary dark:text-white opacity-80`}
                            `,children:t===i.missingIndex?`?`:e},t))})]}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[m?(0,U.jsxs)(`div`,{className:`space-y-6`,children:[(0,U.jsxs)(`div`,{className:`card bg-accent-yellow/5 border-accent-yellow/20`,children:[(0,U.jsx)(`p`,{className:`text-sm text-accent-yellow uppercase font-black tracking-widest mb-1`,children:`Secreto del Camino`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-text-primary dark:text-white`,children:[`Diferencia comn (d) = `,i.commonDifference]})]}),(0,U.jsxs)(`button`,{onClick:E,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{className:`relative`,children:(0,U.jsx)(`input`,{type:`number`,value:o,onChange:e=>{s(e.target.value),c===`incorrect`&&l(null)},onKeyPress:e=>e.key===`Enter`&&A(),placeholder:`Tu respuesta...`,className:`w-full h-16 bg-dark-bg border-4 border-white/10 rounded-2xl px-6 text-2xl font-bold text-center focus:border-accent-yellow outline-none transition-all dark:text-white`,autoFocus:!0})}),(0,U.jsxs)(`div`,{className:`flex gap-4`,children:[(0,U.jsx)(`button`,{onClick:A,disabled:!o,className:`flex-1 h-14 bg-accent-yellow text-dark-bg font-black rounded-xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`}),(0,U.jsx)(`button`,{onClick:()=>S(!0),className:`px-6 h-14 bg-white/5 text-text-tertiary dark:text-white rounded-xl hover:bg-white/10 transition-all cursor-pointer flex items-center gap-2`,children:(0,U.jsx)(Kp,{className:`w-5 h-5`})})]})]}),(0,U.jsx)(J,{children:c&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${c===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:c===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Sabidura absoluta! has encontrado el paso.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`La magia ha fallado. Observa la serie y vuelve a intentar!`})]})})})]}),(0,U.jsx)(J,{children:x&&!m&&(0,U.jsxs)(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-6 p-4 bg-dark-bg/60 border-2 border-accent-yellow/40 rounded-xl text-accent-yellow font-bold italic`,children:[`"Psst... El nmero oculto es `,i.answer,`... Pero no se lo digas a nadie."`]})})]})})]},`practice`)}),e[24]=A,e[25]=u,e[26]=c,e[27]=i,e[28]=m,e[29]=x,e[30]=v,e[31]=g,e[32]=o,e[33]=R):R=e[33];let z;e[34]===C?z=e[35]:(z=C&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>w(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua Aritmtica`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Frmula Maestra`}),(0,U.jsx)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center mb-4`,children:(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`a = a + (n-1)d`})}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:[`Donde `,(0,U.jsx)(`strong`,{children:`a`}),` es el primer trmino y `,(0,U.jsx)(`strong`,{children:`d`}),` es el salto constante entre nmeros.`]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Truco del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Resta dos nmeros seguidos de la serie! Esa diferencia es la llave que abre el siguiente nmero."`})]})]})]})]})}),e[34]=C,e[35]=z);let B;e[36]===z?B=e[37]:(B=(0,U.jsx)(J,{children:z}),e[36]=z,e[37]=B);let V;return e[38]!==L||e[39]!==R||e[40]!==B?(V=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[j,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[L,R,B]})]}),e[38]=L,e[39]=R,e[40]=B,e[41]=V):V=e[41],V}var QN=S();function $N(){let e=(0,QN.c)(42),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(0),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(!0),[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(!1),T;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{let e=[2,3,4,-2,5],t=e[Math.floor(Math.random()*e.length)],n=Math.floor(Math.random()*5)+1,r=Array.from({length:5},(e,r)=>n*t**+r),i=Math.floor(Math.random()*4)+1,o=r[i];a({sequence:r,missingIndex:i,answer:o,firstTerm:n,commonRatio:t}),s(``),l(null),h(!1),S(!1)},e[0]=T):T=e[0];let E=T,D,O;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(D=()=>{E()},O=[],e[1]=D,e[2]=O):(D=e[1],O=e[2]),(0,b.useEffect)(D,O);let k;e[3]!==r||e[4]!==u||e[5]!==i||e[6]!==m||e[7]!==n||e[8]!==o?(k=()=>{if(!(!i||m))if(parseInt(o)===i.answer){l(`correct`),h(!0),n(20,!0);let e=u+1;d(e),e>=10&&(r(`level7`),setTimeout(()=>p(!0),1e3))}else l(`incorrect`),n(0,!1)},e[3]=r,e[4]=u,e[5]=i,e[6]=m,e[7]=n,e[8]=o,e[9]=k):k=e[9];let A=k;if(f){let t=u*20,n;return e[10]===t?n=e[11]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Reto Geomtrico`,points:t}),e[10]=t,e[11]=n),n}let j;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[12]=j):j=e[12];let M;e[13]===t?M=e[14]:(M=()=>t(`/dashboard`),e[13]=t,e[14]=M);let N,P;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(Ip,{className:`w-5 h-5`}),P=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[15]=N,e[16]=P):(N=e[15],P=e[16]);let F;e[17]===M?F=e[18]:(F=(0,U.jsxs)(`button`,{onClick:M,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[N,P]}),e[17]=M,e[18]=F);let I;e[19]===g?I=e[20]:(I=!g&&(0,U.jsxs)(`button`,{onClick:()=>w(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[19]=g,e[20]=I);let L;e[21]!==F||e[22]!==I?(L=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[F,I]}),e[21]=F,e[22]=I,e[23]=L):L=e[23];let R;e[24]!==A||e[25]!==u||e[26]!==c||e[27]!==i||e[28]!==m||e[29]!==x||e[30]!==v||e[31]!==g||e[32]!==o?(R=(0,U.jsx)(J,{mode:`wait`,children:g?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de Geometra`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"En las series geomtricas, los nmeros crecen por multiplicacin. Es una explosin de poder matemtico!"`}),(0,U.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 justify-center md:justify-start`,children:[(0,U.jsxs)(`button`,{onClick:()=>_(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Aceptar el Desafo!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]}),(0,U.jsxs)(`button`,{onClick:()=>y(!v),className:`flex items-center justify-center gap-2 px-6 py-4 bg-dark-bg/40 text-accent-yellow border-2 border-accent-yellow/20 rounded-2xl hover:bg-dark-bg/60 transition-all cursor-pointer font-bold`,children:[(0,U.jsx)(zp,{className:`w-5 h-5`}),v?`Ocultar Saber`:`Aprender Ms`]})]})]})]}),(0,U.jsx)(J,{children:v&&(0,U.jsx)(Y.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},className:`overflow-hidden bg-dark-bg/20`,children:(0,U.jsxs)(`div`,{className:`p-8 border-t-2 border-accent-yellow/10`,children:[(0,U.jsx)(`h4`,{className:`text-xl font-bold text-accent-yellow mb-4`,children:`Qu es una Serie Geomtrica?`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:`Es una secuencia donde cada nmero se obtiene multiplicando el anterior por una cantidad fija llamada razn (r). Por ejemplo, en 2, 4, 8, 16... la razn es x2. Ten cuidado! Las series geomtricas crecen muy rpido.`})]})})})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Reto Geomtrico`}),(0,U.jsx)(`p`,{className:`text-text-tertiary dark:text-white/60`,children:`Encuentra el nmero que completa el patrn de multiplicacin`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary dark:text-white/40 uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[u,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsxs)(`div`,{className:`mb-12`,children:[(0,U.jsx)(`p`,{className:`text-xl text-text-tertiary dark:text-white/60 mb-8 italic`,children:`Qu nmero completa esta explosin matemtica?`}),(0,U.jsx)(`div`,{className:`flex flex-wrap justify-center gap-4`,children:i.sequence.map((e,t)=>(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.1},className:`
                              w-20 h-20 md:w-24 md:h-24 rounded-2xl flex items-center justify-center text-2xl md:text-3xl font-black border-2
                              ${t===i.missingIndex?`bg-accent-yellow/10 border-accent-yellow text-accent-yellow shadow-glow-yellow`:`bg-dark-bg border-white/5 text-text-primary dark:text-white opacity-80`}
                            `,children:t===i.missingIndex?`?`:e},t))})]}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[m?(0,U.jsxs)(`div`,{className:`space-y-6`,children:[(0,U.jsxs)(`div`,{className:`card bg-accent-yellow/5 border-accent-yellow/20`,children:[(0,U.jsx)(`p`,{className:`text-sm text-accent-yellow uppercase font-black tracking-widest mb-1`,children:`Secreto del Crecimiento`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-text-primary dark:text-white`,children:[`Razn comn (r) = `,i.commonRatio]})]}),(0,U.jsxs)(`button`,{onClick:E,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{className:`relative`,children:(0,U.jsx)(`input`,{type:`number`,value:o,onChange:e=>{s(e.target.value),c===`incorrect`&&l(null)},onKeyPress:e=>e.key===`Enter`&&A(),placeholder:`Tu respuesta...`,className:`w-full h-16 bg-dark-bg border-4 border-white/10 rounded-2xl px-6 text-2xl font-bold text-center focus:border-accent-yellow outline-none transition-all dark:text-white`,autoFocus:!0})}),(0,U.jsxs)(`div`,{className:`flex gap-4`,children:[(0,U.jsx)(`button`,{onClick:A,disabled:!o,className:`flex-1 h-14 bg-accent-yellow text-dark-bg font-black rounded-xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`}),(0,U.jsx)(`button`,{onClick:()=>S(!0),className:`px-6 h-14 bg-white/5 text-text-tertiary dark:text-white rounded-xl hover:bg-white/10 transition-all cursor-pointer flex items-center gap-2`,children:(0,U.jsx)(Kp,{className:`w-5 h-5`})})]})]}),(0,U.jsx)(J,{children:c&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${c===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:c===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Sabidura absoluta! has descifrado el crecimiento.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`La magia ha fallado. Descifra el patrn y vuelve a intentar!`})]})})})]}),(0,U.jsx)(J,{children:x&&!m&&(0,U.jsxs)(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-6 p-4 bg-dark-bg/60 border-2 border-accent-yellow/40 rounded-xl text-accent-yellow font-bold italic`,children:[`"Psst... El nmero oculto es `,i.answer,`... Pero no se lo digas a nadie."`]})})]})})]},`practice`)}),e[24]=A,e[25]=u,e[26]=c,e[27]=i,e[28]=m,e[29]=x,e[30]=v,e[31]=g,e[32]=o,e[33]=R):R=e[33];let z;e[34]===C?z=e[35]:(z=C&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>w(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua Geomtrica`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Frmula Maestra`}),(0,U.jsx)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center mb-4`,children:(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`a = a  r`})}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:[`Donde `,(0,U.jsx)(`strong`,{children:`a`}),` es el primer trmino y `,(0,U.jsx)(`strong`,{children:`r`}),` es el factor de multiplicacin constante.`]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Truco del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Divide un nmero por el anterior! El resultado te dir por cunto debes multiplicar para seguir el camino."`})]})]})]})]})}),e[34]=C,e[35]=z);let B;e[36]===z?B=e[37]:(B=(0,U.jsx)(J,{children:z}),e[36]=z,e[37]=B);let V;return e[38]!==L||e[39]!==R||e[40]!==B?(V=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[j,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[L,R,B]})]}),e[38]=L,e[39]=R,e[40]=B,e[41]=V):V=e[41],V}var eP=S();function tP(){let e=(0,eP.c)(42),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(0),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(!0),[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(!1),T;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{let e=Math.floor(Math.random()*50)+10,t=Math.floor(Math.random()*10)+2,n=-(Math.floor(Math.random()*8)+1),r=[e];for(let e=1;e<7;e++){let i=e%2==0?n:t;r.push(r[e-1]+i)}let i=Math.floor(Math.random()*5)+1,o=r[i];a({sequence:r,missingIndex:i,answer:o,firstTerm:e,difference1:t,difference2:n}),s(``),l(null),h(!1),S(!1)},e[0]=T):T=e[0];let E=T,D,O;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(D=()=>{E()},O=[],e[1]=D,e[2]=O):(D=e[1],O=e[2]),(0,b.useEffect)(D,O);let k;e[3]!==r||e[4]!==u||e[5]!==i||e[6]!==m||e[7]!==n||e[8]!==o?(k=()=>{if(!(!i||m))if(parseInt(o)===i.answer){l(`correct`),h(!0),n(25,!0);let e=u+1;d(e),e>=10&&(r(`level8`),setTimeout(()=>p(!0),1e3))}else l(`incorrect`),n(0,!1)},e[3]=r,e[4]=u,e[5]=i,e[6]=m,e[7]=n,e[8]=o,e[9]=k):k=e[9];let A=k;if(f){let t=u*25,n;return e[10]===t?n=e[11]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Reto Alternado`,points:t}),e[10]=t,e[11]=n),n}let j;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[12]=j):j=e[12];let M;e[13]===t?M=e[14]:(M=()=>t(`/dashboard`),e[13]=t,e[14]=M);let N,P;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(Ip,{className:`w-5 h-5`}),P=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[15]=N,e[16]=P):(N=e[15],P=e[16]);let F;e[17]===M?F=e[18]:(F=(0,U.jsxs)(`button`,{onClick:M,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[N,P]}),e[17]=M,e[18]=F);let I;e[19]===g?I=e[20]:(I=!g&&(0,U.jsxs)(`button`,{onClick:()=>w(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[19]=g,e[20]=I);let L;e[21]!==F||e[22]!==I?(L=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[F,I]}),e[21]=F,e[22]=I,e[23]=L):L=e[23];let R;e[24]!==A||e[25]!==u||e[26]!==c||e[27]!==i||e[28]!==m||e[29]!==x||e[30]!==v||e[31]!==g||e[32]!==o?(R=(0,U.jsx)(J,{mode:`wait`,children:g?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de Series`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Las series alternadas son un baile de nmeros: suben y bajan con elegancia. Podrs seguirles el ritmo?"`}),(0,U.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 justify-center md:justify-start`,children:[(0,U.jsxs)(`button`,{onClick:()=>_(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Empezar Baile!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]}),(0,U.jsxs)(`button`,{onClick:()=>y(!v),className:`flex items-center justify-center gap-2 px-6 py-4 bg-dark-bg/40 text-accent-yellow border-2 border-accent-yellow/20 rounded-2xl hover:bg-dark-bg/60 transition-all cursor-pointer font-bold`,children:[(0,U.jsx)(zp,{className:`w-5 h-5`}),v?`Ocultar Saber`:`Aprender Ms`]})]})]})]}),(0,U.jsx)(J,{children:v&&(0,U.jsx)(Y.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},className:`overflow-hidden bg-dark-bg/20`,children:(0,U.jsxs)(`div`,{className:`p-8 border-t-2 border-accent-yellow/10`,children:[(0,U.jsx)(`h4`,{className:`text-xl font-bold text-accent-yellow mb-4`,children:`Qu es una Serie Alternada?`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:`Es una secuencia donde el cambio entre nmeros vara. Por ejemplo, primero sumas 5 y luego restas 2. 5, 10, 8, 13, 11, 16... (aqu el patrn es +5, -2, +5, -2...). Usa tu visin de mago para detectar ambos saltos!`})]})})})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Series Alternas`}),(0,U.jsx)(`p`,{className:`text-text-tertiary dark:text-white/60`,children:`Descifra el doble patrn para encontrar el nmero faltante`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary dark:text-white/40 uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[u,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsxs)(`div`,{className:`mb-12`,children:[(0,U.jsx)(`p`,{className:`text-xl text-text-tertiary dark:text-white/60 mb-8 italic`,children:`Qu nmero sigue el ritmo de este baile?`}),(0,U.jsx)(`div`,{className:`flex flex-wrap justify-center gap-4`,children:i.sequence.map((e,t)=>(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.1},className:`
                              w-16 h-16 md:w-20 md:h-20 rounded-2xl flex items-center justify-center text-xl md:text-2xl font-black border-2
                              ${t===i.missingIndex?`bg-accent-yellow/10 border-accent-yellow text-accent-yellow shadow-glow-yellow`:`bg-dark-bg border-white/5 text-text-primary dark:text-white opacity-80`}
                            `,children:t===i.missingIndex?`?`:e},t))})]}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[m?(0,U.jsxs)(`div`,{className:`space-y-6`,children:[(0,U.jsxs)(`div`,{className:`card bg-accent-yellow/5 border-accent-yellow/20`,children:[(0,U.jsx)(`p`,{className:`text-sm text-accent-yellow uppercase font-black tracking-widest mb-1`,children:`Secreto del Doble Patrn`}),(0,U.jsxs)(`p`,{className:`text-xl font-bold text-text-primary dark:text-white`,children:[`Paso 1: `,i.difference1>0?`+`:``,i.difference1,` | Paso 2: `,i.difference2>0?`+`:``,i.difference2]})]}),(0,U.jsxs)(`button`,{onClick:E,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{className:`relative`,children:(0,U.jsx)(`input`,{type:`number`,value:o,onChange:e=>{s(e.target.value),c===`incorrect`&&l(null)},onKeyPress:e=>e.key===`Enter`&&A(),placeholder:`Tu respuesta...`,className:`w-full h-16 bg-dark-bg border-4 border-white/10 rounded-2xl px-6 text-2xl font-bold text-center focus:border-accent-yellow outline-none transition-all dark:text-white`,autoFocus:!0})}),(0,U.jsxs)(`div`,{className:`flex gap-4`,children:[(0,U.jsx)(`button`,{onClick:A,disabled:!o,className:`flex-1 h-14 bg-accent-yellow text-dark-bg font-black rounded-xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`}),(0,U.jsx)(`button`,{onClick:()=>S(!0),className:`px-6 h-14 bg-white/5 text-text-tertiary dark:text-white rounded-xl hover:bg-white/10 transition-all cursor-pointer flex items-center gap-2`,children:(0,U.jsx)(Kp,{className:`w-5 h-5`})})]})]}),(0,U.jsx)(J,{children:c&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${c===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:c===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Sabidura absoluta! has descifrado el baile.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`La magia ha fallado. No te rindas y vuelve a intentar!`})]})})})]}),(0,U.jsx)(J,{children:x&&!m&&(0,U.jsxs)(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-6 p-4 bg-dark-bg/60 border-2 border-accent-yellow/40 rounded-xl text-accent-yellow font-bold italic`,children:[`"Psst... El nmero oculto es `,i.answer,`... Pero no se lo digas a nadie."`]})})]})})]},`practice`)}),e[24]=A,e[25]=u,e[26]=c,e[27]=i,e[28]=m,e[29]=x,e[30]=v,e[31]=g,e[32]=o,e[33]=R):R=e[33];let z;e[34]===C?z=e[35]:(z=C&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>w(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua Alternada`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`El Doble Ritmo`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`En estas series, el salto no es siempre el mismo. Va cambiando entre dos valores de forma alternada.`}),(0,U.jsx)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center`,children:(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`10 (+5) 15 (-2) 13 (+5) 18 (-2) 16...`})})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Truco del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Observa los tres primeros nmeros! Resta el 2 menos el 1, y luego el 3 menos el 2. Ah vers los dos saltos del baile."`})]})]})]})]})}),e[34]=C,e[35]=z);let B;e[36]===z?B=e[37]:(B=(0,U.jsx)(J,{children:z}),e[36]=z,e[37]=B);let V;return e[38]!==L||e[39]!==R||e[40]!==B?(V=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[j,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[L,R,B]})]}),e[38]=L,e[39]=R,e[40]=B,e[41]=V):V=e[41],V}var nP=S(),rP=[{name:`Cuadrtica`,formula:`f(n) = n`,description:`El nmero se multiplica por s mismo: 1, 4, 9, 16...`,fn:e=>e**2},{name:`Cbica`,formula:`f(n) = n`,description:`El nmero se multiplica tres veces por s mismo: 1, 8, 27...`,fn:e=>e**3},{name:`Potencia de 2`,formula:`f(n) = 2`,description:`Duplicacin mgica: 2, 4, 8, 16, 32...`,fn:e=>2**e},{name:`Sucesin de Pronicos`,formula:`f(n) = n(n+1)`,description:`Multiplicar n por su siguiente: 2 (1x2), 6 (2x3), 12 (3x4)...`,fn:e=>e*(e+1)},{name:`Cuadrtica + 1`,formula:`f(n) = n + 1`,description:`El cuadrado ms uno: 2, 5, 10, 17...`,fn:e=>e**2+1},{name:`Triangulares`,formula:`f(n) = n(n+1)/2`,description:`Suma de naturales: 1, 3, 6, 10, 15...`,fn:e=>e*(e+1)/2}];function iP(){let e=(0,nP.c)(42),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(0),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(!0),[v,y]=(0,b.useState)(!1),[x,S]=(0,b.useState)(!1),[C,w]=(0,b.useState)(!1),T;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(T=()=>{let e=rP[Math.floor(Math.random()*rP.length)],t=Math.floor(Math.random()*3)+1,n=Array.from({length:5},(n,r)=>e.fn(r+t)),r=Math.floor(Math.random()*4)+1,i=n[r];a({sequence:n,missingIndex:r,answer:i,functionName:e.name,formula:e.formula}),s(``),l(null),h(!1),S(!1)},e[0]=T):T=e[0];let E=T,D,O;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(D=()=>{E()},O=[],e[1]=D,e[2]=O):(D=e[1],O=e[2]),(0,b.useEffect)(D,O);let k;e[3]!==r||e[4]!==u||e[5]!==i||e[6]!==m||e[7]!==n||e[8]!==o?(k=()=>{if(!(!i||m))if(parseInt(o)===i.answer){l(`correct`),h(!0),n(25,!0);let e=u+1;d(e),e>=10&&(r(`level5`),setTimeout(()=>p(!0),1e3))}else l(`incorrect`),n(0,!1)},e[3]=r,e[4]=u,e[5]=i,e[6]=m,e[7]=n,e[8]=o,e[9]=k):k=e[9];let A=k;if(f){let t=u*25,n;return e[10]===t?n=e[11]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Maestro de Funciones`,points:t}),e[10]=t,e[11]=n),n}let j;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[12]=j):j=e[12];let M;e[13]===t?M=e[14]:(M=()=>t(`/dashboard`),e[13]=t,e[14]=M);let N,P;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(Ip,{className:`w-5 h-5`}),P=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[15]=N,e[16]=P):(N=e[15],P=e[16]);let F;e[17]===M?F=e[18]:(F=(0,U.jsxs)(`button`,{onClick:M,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[N,P]}),e[17]=M,e[18]=F);let I;e[19]===g?I=e[20]:(I=!g&&(0,U.jsxs)(`button`,{onClick:()=>w(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[19]=g,e[20]=I);let L;e[21]!==F||e[22]!==I?(L=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[F,I]}),e[21]=F,e[22]=I,e[23]=L):L=e[23];let R;e[24]!==A||e[25]!==u||e[26]!==c||e[27]!==i||e[28]!==m||e[29]!==x||e[30]!==v||e[31]!==g||e[32]!==o?(R=(0,U.jsx)(J,{mode:`wait`,children:g?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de Funciones`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Las funciones son el lenguaje del universo. Cada nmero sigue una regla secreta... Podrs descifrarla?"`}),(0,U.jsxs)(`div`,{className:`flex flex-col sm:flex-row gap-4 justify-center md:justify-start`,children:[(0,U.jsxs)(`button`,{onClick:()=>_(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Aceptar el Reto!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]}),(0,U.jsxs)(`button`,{onClick:()=>y(!v),className:`flex items-center justify-center gap-2 px-6 py-4 bg-dark-bg/40 text-accent-yellow border-2 border-accent-yellow/20 rounded-2xl hover:bg-dark-bg/60 transition-all cursor-pointer font-bold`,children:[(0,U.jsx)(zp,{className:`w-5 h-5`}),v?`Ocultar Saber`:`Aprender Ms`]})]})]})]}),(0,U.jsx)(J,{children:v&&(0,U.jsx)(Y.div,{initial:{height:0,opacity:0},animate:{height:`auto`,opacity:1},exit:{height:0,opacity:0},className:`overflow-hidden bg-dark-bg/20`,children:(0,U.jsxs)(`div`,{className:`p-8 border-t-2 border-accent-yellow/10`,children:[(0,U.jsx)(`h4`,{className:`text-xl font-bold text-accent-yellow mb-4`,children:`Qu estamos buscando?`}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:[`En este nivel, los nmeros no crecen de forma simple (como +2 o +5). Aqu siguen una `,(0,U.jsx)(`strong`,{children:`funcin matemtica`}),`. Por ejemplo, en la secuencia 1, 4, 9, 16... cada nmero es la posicin al cuadrado (1, 2, 3, 4). Tu misin es encontrar la regla y completar el trmino que falta.`]})]})})})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Maestro de Funciones`}),(0,U.jsx)(`p`,{className:`text-text-tertiary dark:text-white/60`,children:`Descifra la regla de la secuencia`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary dark:text-white/40 uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[u,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsxs)(`div`,{className:`mb-12`,children:[(0,U.jsx)(`p`,{className:`text-xl text-text-tertiary dark:text-white/60 mb-8 italic`,children:`Qu nmero completa el patrn mgico?`}),(0,U.jsx)(`div`,{className:`flex flex-wrap justify-center gap-4`,children:i.sequence.map((e,t)=>(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:t*.1},className:`
                              w-20 h-20 md:w-24 md:h-24 rounded-2xl flex items-center justify-center text-2xl md:text-3xl font-black border-2
                              ${t===i.missingIndex?`bg-accent-yellow/10 border-accent-yellow text-accent-yellow shadow-glow-yellow`:`bg-dark-bg border-white/5 text-text-primary dark:text-white opacity-80`}
                            `,children:t===i.missingIndex?`?`:e},t))})]}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[m?(0,U.jsxs)(`div`,{className:`space-y-6`,children:[(0,U.jsxs)(`div`,{className:`card bg-accent-yellow/5 border-accent-yellow/20`,children:[(0,U.jsx)(`p`,{className:`text-sm text-accent-yellow uppercase font-black tracking-widest mb-1`,children:`Regla Revelada`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-text-primary dark:text-white`,children:[i.functionName,`: `,i.formula]})]}),(0,U.jsxs)(`button`,{onClick:E,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`div`,{className:`relative`,children:(0,U.jsx)(`input`,{type:`number`,value:o,onChange:e=>{s(e.target.value),c===`incorrect`&&l(null)},onKeyPress:e=>e.key===`Enter`&&A(),placeholder:`Tu respuesta...`,className:`w-full h-16 bg-dark-bg border-4 border-white/10 rounded-2xl px-6 text-2xl font-bold text-center focus:border-accent-yellow outline-none transition-all dark:text-white`,autoFocus:!0})}),(0,U.jsxs)(`div`,{className:`flex gap-4`,children:[(0,U.jsx)(`button`,{onClick:A,disabled:!o,className:`flex-1 h-14 bg-accent-yellow text-dark-bg font-black rounded-xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`}),(0,U.jsx)(`button`,{onClick:()=>S(!0),className:`px-6 h-14 bg-white/5 text-text-tertiary dark:text-white rounded-xl hover:bg-white/10 transition-all cursor-pointer flex items-center gap-2`,children:(0,U.jsx)(Kp,{className:`w-5 h-5`})})]})]}),(0,U.jsx)(J,{children:c&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${c===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:c===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Sabidura absoluta! has descifrado la regla.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`La magia ha fallado. Revisa tu clculo e intenta de nuevo.`})]})})})]}),(0,U.jsx)(J,{children:x&&!m&&(0,U.jsxs)(Y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-6 p-4 bg-dark-bg/60 border-2 border-accent-yellow/40 rounded-xl text-accent-yellow font-bold italic`,children:[`"Psst... El nmero oculto es `,i.answer,`... Pero no se lo digas a nadie."`]})})]})})]},`practice`)}),e[24]=A,e[25]=u,e[26]=c,e[27]=i,e[28]=m,e[29]=x,e[30]=v,e[31]=g,e[32]=o,e[33]=R):R=e[33];let z;e[34]===C?z=e[35]:(z=C&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>w(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua del Maestro`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`Cada secuencia sigue una de estas reglas mgicas. Observa cmo cambian los nmeros para identificar cul se est aplicando:`}),(0,U.jsx)(`div`,{className:`grid grid-cols-1 gap-4`,children:rP.map(aP)})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Consejo del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Si notas que los nmeros crecen muy rpido, busca una regla cuadrtica o cbica. Si crecen duplicndose, ests ante una potencia de 2."`})]})]})]})]})}),e[34]=C,e[35]=z);let B;e[36]===z?B=e[37]:(B=(0,U.jsx)(J,{children:z}),e[36]=z,e[37]=B);let V;return e[38]!==L||e[39]!==R||e[40]!==B?(V=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[j,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[L,R,B]})]}),e[38]=L,e[39]=R,e[40]=B,e[41]=V):V=e[41],V}function aP(e,t){return(0,U.jsxs)(`div`,{className:`p-4 bg-white/5 rounded-xl border border-white/5 hover:border-accent-yellow/30 transition-colors`,children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-1`,children:[(0,U.jsx)(`span`,{className:`font-bold text-accent-yellow`,children:e.name}),(0,U.jsx)(`code`,{className:`text-xs bg-dark-bg px-2 py-1 rounded text-orange-400`,children:e.formula})]}),(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary dark:text-white/40`,children:e.description})]},t)}var oP=S(),sP=[`Valiente`,`Sabio`,`Veloz`,`Infinito`,`Mstico`,`Lgico`,`Poderoso`,`Brillante`,`Estratega`,`Csmico`,`Binario`,`Integral`,`Derivado`,`Estelar`,`Galctico`],cP=[`Calculadora`,`Arquitecto`,`Guardin`,`Explorador`,`Maestro`,`Guerrero`,`Descifrador`,`Vidente`,`Genio`,`Mago`,`Pionero`,`lgebra`,`Radar`,`Cerebro`,`Titn`];function lP(){let e=(0,oP.c)(58),t=Qe(),{username:n,setProfile:r}=Tm(),[i,a]=(0,b.useState)(``),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(!1),u,d;e[0]!==n||e[1]!==t?(u=()=>{n&&t(`/dashboard`)},d=[n,t],e[0]=n,e[1]=t,e[2]=u,e[3]=d):(u=e[2],d=e[3]),(0,b.useEffect)(u,d);let f;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(f=()=>{l(!0),setTimeout(()=>{let e=sP[Math.floor(Math.random()*sP.length)],t=cP[Math.floor(Math.random()*cP.length)];s(`${e} ${t} ${Math.floor(Math.random()*999)}`),l(!1)},500)},e[4]=f):f=e[4];let p=f,m,h;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(m=()=>{p()},h=[],e[5]=m,e[6]=h):(m=e[5],h=e[6]),(0,b.useEffect)(m,h);let g;e[7]!==o||e[8]!==t||e[9]!==r||e[10]!==i?(g=e=>{e.preventDefault(),i.trim()&&o&&(r(i.trim(),o),t(`/dashboard`))},e[7]=o,e[8]=t,e[9]=r,e[10]=i,e[11]=g):g=e[11];let _=g,v,y;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathhero/mathbg.png)`}}),y=(0,U.jsx)(pm,{}),e[12]=v,e[13]=y):(v=e[12],y=e[13]);let x,S;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(x={opacity:0,scale:.9},S={opacity:1,scale:1},e[14]=x,e[15]=S):(x=e[14],S=e[15]);let C,w;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(C={y:-20},w={y:0},e[16]=C,e[17]=w):(C=e[16],w=e[17]);let T;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,U.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,U.jsx)(Y.div,{initial:C,animate:w,className:`flex justify-center mb-4`,children:(0,U.jsx)(`img`,{src:HN,alt:`MathHero Logo`,className:`w-40 h-20 rounded-full object-cover shadow-glow`})}),(0,U.jsx)(`h1`,{className:`text-5xl font-bold gradient-text mb-2`,children:`MathHero`}),(0,U.jsx)(`p`,{className:`text-text-secondary italic`,children:`Convirtete en la leyenda de las matemticas`})]}),e[18]=T):T=e[18];let E;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,U.jsxs)(`label`,{className:`text-lg font-semibold text-text-secondary flex items-center gap-2 px-1`,children:[(0,U.jsx)(lm,{className:`w-4 h-4`}),` Tu Nombre Real`]}),e[19]=E):E=e[19];let D;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(D=e=>a(e.target.value),e[20]=D):D=e[20];let O;e[21]===i?O=e[22]:(O=(0,U.jsxs)(`div`,{className:`space-y-2`,children:[E,(0,U.jsx)(`input`,{required:!0,type:`text`,value:i,onChange:D,placeholder:`Ingresa tu nombre...`,className:`w-full px-4 py-3 bg-dark-card border border-border-color rounded-xl text-primary text-lg dark:text-primary focus:outline-none focus:border-accent-yellow transition-smooth shadow-inner`})]}),e[21]=i,e[22]=O);let k;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,U.jsxs)(`label`,{className:`text-lg font-semibold text-text-secondary flex items-center gap-2 px-1`,children:[(0,U.jsx)(em,{className:`w-4 h-4`}),` Tu Identidad de Hroe`]}),e[23]=k):k=e[23];let A=c?`opacity-50`:`opacity-100`,j;e[24]!==o||e[25]!==A?(j=(0,U.jsx)(`span`,{className:A,children:o}),e[24]=o,e[25]=A,e[26]=j):j=e[26];let M;e[27]===c?M=e[28]:(M=c&&(0,U.jsx)($p,{className:`w-4 h-4 animate-spin text-text-tertiary`}),e[27]=c,e[28]=M);let N;e[29]!==j||e[30]!==M?(N=(0,U.jsxs)(`div`,{className:`flex-1 px-4 py-3 bg-dark-bg/50 border border-border-color rounded-xl text-accent-yellow font-bold flex items-center justify-between`,children:[j,M]}),e[29]=j,e[30]=M,e[31]=N):N=e[31];let P;e[32]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,U.jsx)(`button`,{type:`button`,onClick:p,className:`p-3 bg-dark-card border border-border-color rounded-xl hover:bg-dark-card-hover transition-smooth text-text-secondary cursor-pointer`,title:`Generar nuevo nombre`,children:(0,U.jsx)($p,{className:`w-5 h-5`})}),e[32]=P):P=e[32];let F;e[33]===N?F=e[34]:(F=(0,U.jsxs)(`div`,{className:`flex gap-2`,children:[N,P]}),e[33]=N,e[34]=F);let I;e[35]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,U.jsx)(`p`,{className:`text-[10px] text-text-tertiary px-1`,children:`Se ha generado un nombre pico para proteger tu identidad.`}),e[35]=I):I=e[35];let L;e[36]===F?L=e[37]:(L=(0,U.jsxs)(`div`,{className:`space-y-2`,children:[k,F,I]}),e[36]=F,e[37]=L);let R;e[38]!==c||e[39]!==i?(R=!i.trim()||c,e[38]=c,e[39]=i,e[40]=R):R=e[40];let z;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,U.jsx)(nm,{className:`w-5 h-5`}),e[41]=z):z=e[41];let B;e[42]===R?B=e[43]:(B=(0,U.jsxs)(`button`,{type:`submit`,disabled:R,className:`w-full py-4 bg-gradient-to-r from-accent-yellow to-gradient-to text-dark-bg font-bold rounded-2xl shadow-glow hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:grayscale cursor-pointer`,children:[z,`COMENZAR AVENTURA!`]}),e[42]=R,e[43]=B);let V;e[44]!==_||e[45]!==O||e[46]!==L||e[47]!==B?(V=(0,U.jsxs)(`form`,{onSubmit:_,className:`space-y-6`,children:[O,L,B]}),e[44]=_,e[45]=O,e[46]=L,e[47]=B,e[48]=V):V=e[48];let ee;e[49]===Symbol.for(`react.memo_cache_sentinel`)?(ee=(0,U.jsx)(`div`,{className:`mt-8 text-center`,children:(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary`,children:`Tus datos se guardan localmente para tu prxima sesin.`})}),e[49]=ee):ee=e[49];let H;e[50]===V?H=e[51]:(H=(0,U.jsxs)(Y.div,{initial:x,animate:S,className:`max-w-md w-full glass p-8 rounded-[2rem] shadow-2xl relative z-10`,children:[T,V,ee]}),e[50]=V,e[51]=H);let te,ne,re,ie;e[52]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,U.jsx)(`div`,{className:`absolute top-10 left-10 text-4xl opacity-5 pointer-events-none select-none`,children:``}),ne=(0,U.jsx)(`div`,{className:`absolute bottom-10 right-10 text-4xl opacity-5 pointer-events-none select-none`,children:``}),re=(0,U.jsx)(`div`,{className:`absolute top-1/4 right-20 text-4xl opacity-5 pointer-events-none select-none`,children:``}),ie=(0,U.jsx)(`div`,{className:`absolute bottom-1/4 left-20 text-4xl opacity-5 pointer-events-none select-none`,children:``}),e[52]=te,e[53]=ne,e[54]=re,e[55]=ie):(te=e[52],ne=e[53],re=e[54],ie=e[55]);let ae;return e[56]===H?ae=e[57]:(ae=(0,U.jsxs)(`div`,{className:`min-h-screen flex items-center justify-center p-6 relative overflow-hidden`,children:[v,y,H,te,ne,re,ie]}),e[56]=H,e[57]=ae),ae}var uP=S();function dP(){let e=(0,uP.c)(8),t=Tm(fP),n;e[0]!==t.totalAttempts||e[1]!==t.totalProblemsSolved?(n=t.totalAttempts>0?Math.round(t.totalProblemsSolved/t.totalAttempts*100):0,e[0]=t.totalAttempts,e[1]=t.totalProblemsSolved,e[2]=n):n=e[2];let r=`${n}%`,i=`${t.currentStreak} das`,a;return e[3]!==t.totalPoints||e[4]!==t.totalProblemsSolved||e[5]!==r||e[6]!==i?(a={solved:t.totalProblemsSolved,precision:r,streak:i,totalPoints:t.totalPoints,precisionTrend:0,solvedTrend:0,streakTrend:0},e[3]=t.totalPoints,e[4]=t.totalProblemsSolved,e[5]=r,e[6]=i,e[7]=a):a=e[7],a}function fP(e){return e.stats}var pP=S();function mP(e){let t=(0,pP.c)(7),{isOpen:n,onClose:r,selectedCharacter:i,onSelect:a}=e,o;t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i?(o=n&&(0,U.jsxs)(`div`,{className:`fixed inset-0 z-[100] flex items-center justify-center p-4`,children:[(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:`absolute inset-0 bg-dark-bg/80 backdrop-blur-md cursor-pointer`}),(0,U.jsxs)(Y.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:`relative w-full max-w-4xl bg-dark-card border-4 border-accent-yellow rounded-[2.5rem] p-8 md:p-10 shadow-[0_0_50px_rgba(244,224,77,0.2)] overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:r,className:`absolute top-6 right-6 text-text-tertiary hover:text-white transition-colors z-10 cursor-pointer`,children:(0,U.jsx)(um,{className:`w-8 h-8`})}),(0,U.jsxs)(`div`,{className:`relative z-10`,children:[(0,U.jsx)(`h2`,{className:`text-3xl font-black gradient-text mb-2 uppercase tracking-tighter`,children:`Selecciona tu Avatar`}),(0,U.jsx)(`p`,{className:`text-text-secondary mb-8`,children:`Elige el rostro que te representar en el saln de la fama.`}),(0,U.jsx)(`div`,{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 overflow-y-auto max-h-[60vh] pr-2 custom-scrollbar`,children:Pm.map(e=>(0,U.jsxs)(`button`,{onClick:()=>{a(e.id)},className:`
                      relative group p-4 rounded-2xl border-2 transition-all cursor-pointer
                      ${i===e.id?`border-accent-yellow bg-accent-yellow/5`:`border-white/5 hover:border-accent-yellow/50 hover:bg-white/5`}
                    `,children:[(0,U.jsx)(`div`,{className:`h-24 flex items-center justify-center mb-2 overflow-hidden`,children:(0,U.jsx)(LN,{spritePath:e.path,width:64,height:64,scale:1.5,isAnimated:i===e.id})}),(0,U.jsx)(`p`,{className:`text-[10px] font-bold text-center uppercase tracking-tighter line-clamp-1
                      ${i===e.id?`text-accent-yellow`:`text-text-secondary`}`,children:e.name}),i===e.id&&(0,U.jsx)(`div`,{className:`absolute top-2 right-2`,children:(0,U.jsx)(Hp,{className:`w-5 h-5 text-accent-yellow fill-dark-bg`})})]},e.id))}),(0,U.jsx)(`div`,{className:`mt-8 flex justify-end`,children:(0,U.jsx)(`button`,{onClick:r,className:`px-8 py-3 bg-accent-yellow text-dark-bg font-black rounded-xl hover:scale-105 transition-smooth uppercase tracking-wider cursor-pointer`,children:`Confirmar Seleccin`})})]})]})]}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=o):o=t[4];let s;return t[5]===o?s=t[6]:(s=(0,U.jsx)(J,{children:o}),t[5]=o,t[6]=s),s}var hP=S();function gP(e){let t=(0,hP.c)(22),{title:n,value:r,trend:i,subtitle:a,icon:o}=e,s=i&&i>0,c,l,u;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(c={opacity:0,scale:.95},l={opacity:1,scale:1},u={duration:.3},t[0]=c,t[1]=l,t[2]=u):(c=t[0],l=t[1],u=t[2]);let d;t[3]===n?d=t[4]:(d=(0,U.jsx)(`p`,{className:`text-sm dark:text-primary mb-1`,children:n}),t[3]=n,t[4]=d);let f;t[5]===r?f=t[6]:(f=(0,U.jsx)(`h3`,{className:`text-3xl font-bold text-primary dark:text-primary`,children:r}),t[5]=r,t[6]=f);let p;t[7]!==d||t[8]!==f?(p=(0,U.jsxs)(`div`,{children:[d,f]}),t[7]=d,t[8]=f,t[9]=p):p=t[9];let m;t[10]===o?m=t[11]:(m=o&&(0,U.jsx)(`div`,{className:`w-12 h-12 rounded-xl bg-gradient-to-br from-accent-yellow to-gradient-to flex items-center justify-center ml-4 dark:text-text-primary`,children:o}),t[10]=o,t[11]=m);let h;t[12]!==p||t[13]!==m?(h=(0,U.jsxs)(`div`,{className:`flex items-start justify-between mb-3`,children:[p,m]}),t[12]=p,t[13]=m,t[14]=h):h=t[14];let g;t[15]!==s||t[16]!==a||t[17]!==i?(g=(i!==void 0||a)&&(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mt-3`,children:[i!==void 0&&(0,U.jsxs)(`div`,{className:`flex items-center gap-1 text-sm font-medium ${s?`text-green-500`:`text-red-500`}`,children:[s?(0,U.jsx)(sm,{className:`w-4 h-4`}):(0,U.jsx)(om,{className:`w-4 h-4`}),(0,U.jsxs)(`span`,{children:[Math.abs(i),`%`]})]}),a&&(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary`,children:a})]}),t[15]=s,t[16]=a,t[17]=i,t[18]=g):g=t[18];let _;return t[19]!==h||t[20]!==g?(_=(0,U.jsxs)(Y.div,{className:`card`,initial:c,animate:l,transition:u,children:[h,g]}),t[19]=h,t[20]=g,t[21]=_):_=t[21],_}const _P=[{id:`m1`,name:`Medalla de Bronce`,description:`Nivel 1 Superado`,icon:``,color:`text-amber-600`},{id:`m2`,name:`Medalla de Plata`,description:`Nivel 2 Superado`,icon:``,color:`text-slate-400`},{id:`m3`,name:`Medalla de Oro`,description:`Nivel 3 Superado`,icon:``,color:`text-yellow-400`},{id:`m4`,name:`Medalla de Platino`,description:`Nivel 4 Superado`,icon:``,color:`text-blue-100`},{id:`m5`,name:`Gema de Rub`,description:`Nivel 5 Superado`,icon:``,color:`text-red-500`},{id:`m6`,name:`Gema de Esmeralda`,description:`Nivel 6 Superado`,icon:``,color:`text-emerald-500`},{id:`m7`,name:`Gema de Zafiro`,description:`Nivel 7 Superado`,icon:``,color:`text-blue-500`},{id:`m8`,name:`Diamante Estelar`,description:`Nivel 8 Superado`,icon:``,color:`text-cyan-300`},{id:`m9`,name:`Medalla del Maestro`,description:`Nivel 9 Superado`,icon:``,color:`text-indigo-400`},{id:`m10`,name:`Gran Maestro`,description:`Nivel 10 Superado`,icon:``,color:`text-purple-500`},{id:`m11`,name:`Medalla del Hroe`,description:`Nivel 11 Superado`,icon:``,color:`text-red-600`},{id:`m12`,name:`Medalla de la Leyenda`,description:`Nivel 12 Superado`,icon:``,color:`text-orange-500`},{id:`m13`,name:`Medalla Mtica`,description:`Nivel 13 Superado`,icon:``,color:`text-fuchsia-500`},{id:`m14`,name:`Medalla Divina`,description:`Nivel 14 Superado`,icon:``,color:`text-yellow-300`},{id:`m15`,name:`Medalla del Infinito`,description:`Nivel 15 Superado`,icon:``,color:`text-white`}],vP=[{id:`s1`,name:`Clculo Mental`,description:`Rapidez en operaciones bsicas`,icon:``,color:`text-yellow-400`},{id:`s2`,name:`Lgica Numrica`,description:`Entendimiento de secuencias`,icon:``,color:`text-blue-400`},{id:`s3`,name:`Patrones Visuales`,description:`Identificacin de regularidades`,icon:``,color:`text-green-400`},{id:`s4`,name:`Velocidad Matemtica`,description:`Agilidad bajo presin`,icon:``,color:`text-orange-400`},{id:`s5`,name:`Resolucin de Crisis`,description:`Dominio de problemas complejos`,icon:``,color:`text-red-400`},{id:`s6`,name:`Pensamiento Crtico`,description:`Anlisis profundo de problemas`,icon:``,color:`text-cyan-400`},{id:`s7`,name:`Razonamiento Estratgico`,description:`Planificacin de soluciones`,icon:``,color:`text-amber-400`},{id:`s8`,name:`Lgica Abstracta`,description:`Manejo de conceptos no visibles`,icon:``,color:`text-indigo-400`},{id:`s9`,name:`Intuicin Matemtica`,description:`Sentido innato de los nmeros`,icon:``,color:`text-purple-400`},{id:`s10`,name:`Mtodo Cientfico`,description:`Rigor y experimentacin`,icon:``,color:`text-emerald-400`},{id:`s11`,name:`Lgica Universal`,description:`Conexin entre dimensiones`,icon:``,color:`text-blue-600`},{id:`s12`,name:`Maestra del Caos`,description:`Orden en la aleatoriedad`,icon:``,color:`text-slate-600`},{id:`s13`,name:`Clculo Cuntico`,description:`Procesamiento paralelo mental`,icon:``,color:`text-blue-300`},{id:`s14`,name:`Realidad Dimensional`,description:`Salto entre geometras`,icon:``,color:`text-rose-500`},{id:`s15`,name:`Omnisciencia`,description:`Conocimiento absoluto del todo`,icon:``,color:`text-white`}];var yP=S();function bP(){let e=(0,yP.c)(144),t=Qe(),{username:n,heroName:r,selectedCharacter:i,setSelectedCharacter:a,completedLevels:o}=Tm(),s=dP(),[c,l]=(0,b.useState)(!1);if(!n)return t(`/`),null;let u;e[0]===o.length?u=e[1]:(u=_P.slice(0,o.length),e[0]=o.length,e[1]=u);let d=u,f,p,m,h,g,_,v,y,x,S,C,w,T,E,D,O,k,A,j;if(e[2]!==o.length||e[3]!==s.precision||e[4]!==s.precisionTrend||e[5]!==s.solved||e[6]!==s.solvedTrend||e[7]!==s.streak||e[8]!==s.streakTrend||e[9]!==d||e[10]!==r||e[11]!==t||e[12]!==i||e[13]!==n){let a=vP.slice(0,o.length),c;e[33]===s.solved?c=e[34]:(c=s.solved.toString(),e[33]=s.solved,e[34]=c);let u;e[35]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,U.jsx)(am,{className:`w-6 h-6 text-white`}),e[35]=u):u=e[35];let b;e[36]!==s.solvedTrend||e[37]!==c?(b={title:`Problemas Resueltos`,value:c,trend:s.solvedTrend,subtitle:`Total acumulado`,icon:u},e[36]=s.solvedTrend,e[37]=c,e[38]=b):b=e[38];let M;e[39]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,U.jsx)(Rp,{className:`w-6 h-6 text-white`}),e[39]=M):M=e[39];let N;e[40]!==s.precision||e[41]!==s.precisionTrend?(N={title:`Precisin`,value:s.precision,trend:s.precisionTrend,subtitle:`Eficiencia global`,icon:M},e[40]=s.precision,e[41]=s.precisionTrend,e[42]=N):N=e[42];let P;e[43]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,U.jsx)(dm,{className:`w-6 h-6 text-white`}),e[43]=P):P=e[43];let F;e[44]!==s.streak||e[45]!==s.streakTrend?(F={title:`Racha Actual`,value:s.streak,trend:s.streakTrend,subtitle:`Sigue as!`,icon:P},e[44]=s.streak,e[45]=s.streakTrend,e[46]=F):F=e[46];let I;e[47]!==b||e[48]!==N||e[49]!==F?(I=[b,N,F],e[47]=b,e[48]=N,e[49]=F,e[50]=I):I=e[50];let L=I;S=`min-h-screen p-6 md:p-8 lg:p-12 relative overflow-hidden`,e[51]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathhero/mathbg.png)`}}),e[51]=C):C=e[51],y=`max-w-6xl mx-auto relative z-10`;let R,z;e[52]===Symbol.for(`react.memo_cache_sentinel`)?(R={opacity:0,x:-20},z={opacity:1,x:0},e[52]=R,e[53]=z):(R=e[52],z=e[53]);let B;e[54]===t?B=e[55]:(B=()=>t(`/dashboard`),e[54]=t,e[55]=B);let V,ee;e[56]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,U.jsx)(Ip,{className:`w-5 h-5`}),ee=(0,U.jsx)(`span`,{children:`Volver al Dashboard`}),e[56]=V,e[57]=ee):(V=e[56],ee=e[57]),e[58]===B?x=e[59]:(x=(0,U.jsx)(Y.div,{initial:R,animate:z,className:`mb-8 flex items-center justify-between`,children:(0,U.jsxs)(`button`,{onClick:B,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary cursor-pointer dark:hover:text-text-tertiary hover:text-text-primary transition-smooth`,children:[V,ee]})}),e[58]=B,e[59]=x),_=`grid grid-cols-1 lg:grid-cols-3 gap-8`;let H,te;e[60]===Symbol.for(`react.memo_cache_sentinel`)?(H={opacity:0,y:20},te={opacity:1,y:0},e[60]=H,e[61]=te):(H=e[60],te=e[61]);let ne;e[62]===Symbol.for(`react.memo_cache_sentinel`)?(ne=()=>l(!0),e[62]=ne):ne=e[62];let re;e[63]===i?re=e[64]:(re=i?(0,U.jsx)(LN,{spritePath:Pm.find(e=>e.id===i)?.path||``,width:128,height:128,scale:2.5}):(0,U.jsx)(lm,{className:`w-16 h-16 text-accent-yellow opacity-50`}),e[63]=i,e[64]=re);let ie;e[65]===Symbol.for(`react.memo_cache_sentinel`)?(ie=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center`,children:(0,U.jsx)(Qp,{className:`w-8 h-8 text-white`})}),e[65]=ie):ie=e[65];let ae;e[66]===re?ae=e[67]:(ae=(0,U.jsx)(`div`,{className:`flex justify-center mb-6`,children:(0,U.jsxs)(`div`,{onClick:ne,className:`w-32 h-32 bg-dark-bg/50 rounded-full border-4 border-accent-yellow flex items-center justify-center overflow-hidden shadow-glow cursor-pointer hover:scale-105 transition-smooth relative`,children:[re,ie]})}),e[66]=re,e[67]=ae);let oe;e[68]===n?oe=e[69]:(oe=(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:n}),e[68]=n,e[69]=oe);let se;e[70]===r?se=e[71]:(se=(0,U.jsx)(`p`,{className:`text-accent-yellow font-bold uppercase tracking-widest text-sm mt-1`,children:r}),e[70]=r,e[71]=se);let ce;e[72]===Symbol.for(`react.memo_cache_sentinel`)?(ce=(0,U.jsx)(`button`,{onClick:()=>l(!0),className:`mt-4 text-[10px] uppercase font-black text-accent-yellow/60 hover:text-accent-yellow transition-colors tracking-tighter cursor-pointer`,children:`Cambiar Avatar`}),e[72]=ce):ce=e[72];let le;e[73]!==ae||e[74]!==oe||e[75]!==se?(le=(0,U.jsxs)(Y.div,{initial:H,animate:te,className:`card text-center py-10 relative group`,children:[ae,oe,se,ce]}),e[73]=ae,e[74]=oe,e[75]=se,e[76]=le):le=e[76];let ue,de,fe;e[77]===Symbol.for(`react.memo_cache_sentinel`)?(ue={opacity:0,y:20},de={opacity:1,y:0},fe={delay:.1},e[77]=ue,e[78]=de,e[79]=fe):(ue=e[77],de=e[78],fe=e[79]);let pe;e[80]===Symbol.for(`react.memo_cache_sentinel`)?(pe=(0,U.jsxs)(`h3`,{className:`text-xl font-bold flex items-center gap-2 text-text-primary dark:text-text-tertiary px-2`,children:[(0,U.jsx)(tm,{className:`w-5 h-5 text-accent-yellow`}),` Rendimiento de Hroe`]}),e[80]=pe):pe=e[80];let me;e[81]===L?me=e[82]:(me=(0,U.jsxs)(Y.div,{initial:ue,animate:de,transition:fe,className:`space-y-4`,children:[pe,(0,U.jsx)(`div`,{className:`grid grid-cols-1 gap-4`,children:L.map(SP)})]}),e[81]=L,e[82]=me),e[83]!==le||e[84]!==me?(v=(0,U.jsxs)(`div`,{className:`space-y-6`,children:[le,me]}),e[83]=le,e[84]=me,e[85]=v):v=e[85],g=`lg:col-span-2 space-y-6`,f=Y.div,e[86]===Symbol.for(`react.memo_cache_sentinel`)?(k={opacity:0,y:20},A={opacity:1,y:0},j={delay:.2},e[86]=k,e[87]=A,e[88]=j):(k=e[86],A=e[87],j=e[88]),m=`card p-8`;let he;e[89]===Symbol.for(`react.memo_cache_sentinel`)?(he=(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h2`,{className:`text-2xl font-bold text-text-primary dark:text-text-tertiary`,children:`Logros de Hroe`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-text-secondary`,children:`Tu progreso desbloquea nuevas distinciones y habilidades.`})]}),e[89]=he):he=e[89];let ge;e[90]===Symbol.for(`react.memo_cache_sentinel`)?(ge=(0,U.jsx)(rm,{className:`w-5 h-5 text-accent-yellow fill-accent-yellow`}),e[90]=ge):ge=e[90],e[91]===o.length?h=e[92]:(h=(0,U.jsxs)(`div`,{className:`flex items-center justify-between mb-8`,children:[he,(0,U.jsxs)(`div`,{className:`flex items-center gap-2 bg-accent-yellow/10 px-4 py-2 rounded-full border border-accent-yellow/20`,children:[ge,(0,U.jsxs)(`span`,{className:`font-black text-accent-yellow`,children:[o.length,`/15`]})]})]}),e[91]=o.length,e[92]=h),D=`grid grid-cols-1 md:grid-cols-2 gap-8`;let _e;e[93]===Symbol.for(`react.memo_cache_sentinel`)?(_e=(0,U.jsxs)(`h4`,{className:`text-sm font-black uppercase tracking-widest text-text-tertiary flex items-center gap-2`,children:[(0,U.jsx)(Rp,{className:`w-4 h-4 text-accent-yellow`}),` Medallas Ganadas`]}),e[93]=_e):_e=e[93];let ve;e[94]===o.length?ve=e[95]:(ve=_P.map((e,t)=>{let n=t<o.length;return(0,U.jsx)(`div`,{className:`aspect-square rounded-xl flex items-center justify-center text-2xl transition-all duration-500
                            ${n?`bg-white/10 shadow-[0_0_15px_rgba(255,255,255,0.1)] border border-white/20 scale-100`:`bg-black/20 border border-white/5 opacity-20 grayscale`}`,title:n?e.name:`Bloqueado`,children:e.icon},e.id)}),e[94]=o.length,e[95]=ve);let ye;e[96]===ve?ye=e[97]:(ye=(0,U.jsx)(`div`,{className:`grid grid-cols-5 gap-3`,children:ve}),e[96]=ve,e[97]=ye);let be;e[98]===d?be=e[99]:(be=d.length>0?(0,U.jsxs)(`div`,{className:`mt-4 p-4 bg-white/5 rounded-2xl border border-white/5`,children:[(0,U.jsx)(`p`,{className:`text-[10px] text-text-tertiary uppercase font-bold mb-1`,children:`ltima Distincin`}),(0,U.jsx)(`p`,{className:`text-lg font-black text-white`,children:d[d.length-1].name})]}):(0,U.jsx)(`p`,{className:`text-sm text-text-tertiary italic`,children:`Completa niveles para ganar medallas`}),e[98]=d,e[99]=be),e[100]!==ye||e[101]!==be?(O=(0,U.jsxs)(`div`,{className:`space-y-4`,children:[_e,ye,be]}),e[100]=ye,e[101]=be,e[102]=O):O=e[102],T=`space-y-4`,e[103]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,U.jsxs)(`h4`,{className:`text-sm font-black uppercase tracking-widest text-text-tertiary flex items-center gap-2`,children:[(0,U.jsx)(dm,{className:`w-4 h-4 text-orange-400`}),` Habilidades Desbloqueadas`]}),e[103]=E):E=e[103],p=`space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar`,w=a.length>0?a.map(xP).reverse():(0,U.jsx)(`div`,{className:`h-32 flex flex-col items-center justify-center border-2 border-dashed border-white/5 rounded-2xl`,children:(0,U.jsx)(`p`,{className:`text-sm text-text-tertiary italic`,children:`Sin habilidades an`})}),e[2]=o.length,e[3]=s.precision,e[4]=s.precisionTrend,e[5]=s.solved,e[6]=s.solvedTrend,e[7]=s.streak,e[8]=s.streakTrend,e[9]=d,e[10]=r,e[11]=t,e[12]=i,e[13]=n,e[14]=f,e[15]=p,e[16]=m,e[17]=h,e[18]=g,e[19]=_,e[20]=v,e[21]=y,e[22]=x,e[23]=S,e[24]=C,e[25]=w,e[26]=T,e[27]=E,e[28]=D,e[29]=O,e[30]=k,e[31]=A,e[32]=j}else f=e[14],p=e[15],m=e[16],h=e[17],g=e[18],_=e[19],v=e[20],y=e[21],x=e[22],S=e[23],C=e[24],w=e[25],T=e[26],E=e[27],D=e[28],O=e[29],k=e[30],A=e[31],j=e[32];let M;e[104]!==p||e[105]!==w?(M=(0,U.jsx)(`div`,{className:p,children:w}),e[104]=p,e[105]=w,e[106]=M):M=e[106];let N;e[107]!==M||e[108]!==T||e[109]!==E?(N=(0,U.jsxs)(`div`,{className:T,children:[E,M]}),e[107]=M,e[108]=T,e[109]=E,e[110]=N):N=e[110];let P;e[111]!==N||e[112]!==D||e[113]!==O?(P=(0,U.jsxs)(`div`,{className:D,children:[O,N]}),e[111]=N,e[112]=D,e[113]=O,e[114]=P):P=e[114];let F;e[115]!==f||e[116]!==m||e[117]!==h||e[118]!==P||e[119]!==k||e[120]!==A||e[121]!==j?(F=(0,U.jsxs)(f,{initial:k,animate:A,transition:j,className:m,children:[h,P]}),e[115]=f,e[116]=m,e[117]=h,e[118]=P,e[119]=k,e[120]=A,e[121]=j,e[122]=F):F=e[122];let I;e[123]!==g||e[124]!==F?(I=(0,U.jsx)(`div`,{className:g,children:F}),e[123]=g,e[124]=F,e[125]=I):I=e[125];let L;e[126]!==_||e[127]!==v||e[128]!==I?(L=(0,U.jsxs)(`div`,{className:_,children:[v,I]}),e[126]=_,e[127]=v,e[128]=I,e[129]=L):L=e[129];let R;e[130]!==y||e[131]!==x||e[132]!==L?(R=(0,U.jsxs)(`div`,{className:y,children:[x,L]}),e[130]=y,e[131]=x,e[132]=L,e[133]=R):R=e[133];let z;e[134]===Symbol.for(`react.memo_cache_sentinel`)?(z=()=>l(!1),e[134]=z):z=e[134];let B;e[135]!==c||e[136]!==i||e[137]!==a?(B=(0,U.jsx)(mP,{isOpen:c,onClose:z,selectedCharacter:i,onSelect:a}),e[135]=c,e[136]=i,e[137]=a,e[138]=B):B=e[138];let V;return e[139]!==S||e[140]!==C||e[141]!==R||e[142]!==B?(V=(0,U.jsxs)(`div`,{className:S,children:[C,R,B]}),e[139]=S,e[140]=C,e[141]=R,e[142]=B,e[143]=V):V=e[143],V}function xP(e,t){return(0,U.jsxs)(Y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3+t*.05},className:`flex items-center gap-4 p-3 bg-white/5 rounded-xl border border-white/5 hover:border-white/10 transition-colors`,children:[(0,U.jsx)(`div`,{className:`text-2xl`,children:e.icon}),(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`p`,{className:`text-sm font-bold text-white leading-none mb-1`,children:e.name}),(0,U.jsx)(`p`,{className:`text-[10px] text-text-tertiary`,children:e.description})]})]},e.id)}function SP(e,t){return(0,U.jsx)(gP,{...e},t)}var CP=S();function wP({type:e,size:t=48,color:n=`#FFD700`,className:r=``}){return(()=>{switch(e){case`circle`:return(0,U.jsx)(`svg`,{width:t,height:t,viewBox:`0 0 100 100`,className:r,children:(0,U.jsx)(`circle`,{cx:`50`,cy:`50`,r:`45`,fill:n,stroke:`rgba(255, 255, 255, 0.3)`,strokeWidth:`2`})});case`triangle`:return(0,U.jsx)(`svg`,{width:t,height:t,viewBox:`0 0 100 100`,className:r,children:(0,U.jsx)(`polygon`,{points:`50,10 90,85 10,85`,fill:n,stroke:`rgba(255, 255, 255, 0.3)`,strokeWidth:`2`})});case`square`:return(0,U.jsx)(`svg`,{width:t,height:t,viewBox:`0 0 100 100`,className:r,children:(0,U.jsx)(`rect`,{x:`10`,y:`10`,width:`80`,height:`80`,fill:n,stroke:`rgba(255, 255, 255, 0.3)`,strokeWidth:`2`})});default:return null}})()}function TP(e){let t=(0,CP.c)(7),{type:n,size:r,color:i,className:a}=e,o=r===void 0?48:r,s=i===void 0?`#FFD700`:i,c=a===void 0?``:a,l,u;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(l={scale:0},u={scale:1},t[0]=l,t[1]=u):(l=t[0],u=t[1]);let d;return t[2]!==c||t[3]!==s||t[4]!==o||t[5]!==n?(d=(0,U.jsx)(Y.div,{initial:l,animate:u,className:`inline-block`,children:(0,U.jsx)(wP,{type:n,size:o,color:s,className:c})}),t[2]=c,t[3]=s,t[4]=o,t[5]=n,t[6]=d):d=t[6],d}var EP=S(),DP=[`circle`,`triangle`,`square`],OP=[`#FFD700`,`#FF6B6B`,`#4ECDC4`,`#95E1D3`,`#F38181`,`#AA96DA`,`#FCBAD3`,`#A8E6CF`];function kP(){let e=(0,EP.c)(38),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(null),[c,l]=(0,b.useState)(0),[u,d]=(0,b.useState)(!1),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!0),[g,_]=(0,b.useState)(!1),v;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(v=()=>{let e=Math.random()>.5,t=e?`+`:`-`,n,r,i;e?(n=Math.floor(Math.random()*5)+1,r=Math.floor(Math.random()*5)+1,i=n+r):(n=Math.floor(Math.random()*5)+5,r=Math.floor(Math.random()*5)+1,i=n-r);let o=i.toString(),c=new Set;for(;c.size<3;){let e=Math.max(0,i+(Math.floor(Math.random()*7)-3)).toString();e!==o&&c.add(e)}let l=Array.from(c);l.push(o),l.sort(AP);let u=DP[Math.floor(Math.random()*DP.length)],d=DP[Math.floor(Math.random()*DP.length)],f=OP[Math.floor(Math.random()*OP.length)],m=OP[Math.floor(Math.random()*OP.length)];a({num1:n,num2:r,operator:t,answer:i,options:l,figure1:u,figure2:d,color1:f,color2:m}),s(null),p(!1)},e[0]=v):v=e[0];let y=v,x,S;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(x=()=>{y()},S=[],e[1]=x,e[2]=S):(x=e[1],S=e[2]),(0,b.useEffect)(x,S);let C;e[3]!==r||e[4]!==c||e[5]!==i||e[6]!==f||e[7]!==n?(C=e=>{if(!(!i||f))if(parseInt(e)===i.answer){s(`correct`),p(!0),n(5,!0);let e=c+1;l(e),e>=10&&(r(`level1`),setTimeout(()=>d(!0),1e3))}else s(`incorrect`),n(0,!1)},e[3]=r,e[4]=c,e[5]=i,e[6]=f,e[7]=n,e[8]=C):C=e[8];let w=C;if(u){let t=c*5,n;return e[9]===t?n=e[10]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Bosque de las Sumas y Restas`,points:t}),e[9]=t,e[10]=n),n}let T;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[11]=T):T=e[11];let E;e[12]===t?E=e[13]:(E=()=>t(`/`),e[12]=t,e[13]=E);let D,O;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,U.jsx)(Ip,{className:`w-5 h-5`}),O=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[14]=D,e[15]=O):(D=e[14],O=e[15]);let k;e[16]===E?k=e[17]:(k=(0,U.jsxs)(`button`,{onClick:E,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[D,O]}),e[16]=E,e[17]=k);let A;e[18]===m?A=e[19]:(A=!m&&(0,U.jsxs)(`button`,{onClick:()=>_(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[18]=m,e[19]=A);let j;e[20]!==k||e[21]!==A?(j=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[k,A]}),e[20]=k,e[21]=A,e[22]=j):j=e[22];let M;e[23]!==c||e[24]!==o||e[25]!==w||e[26]!==i||e[27]!==f||e[28]!==m?(M=(0,U.jsx)(J,{mode:`wait`,children:m?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})}),(0,U.jsx)(`div`,{className:`absolute bottom-4 left-1/2 -translate-x-1/2 w-32 h-6 bg-black/40 rounded-[100%] blur-md`})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de la Isla`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Bienvenido, tu primera mision sera superar los retos de sumas y restas, recuerda, que cada reto superado incrementar tu nivel de poder."`}),(0,U.jsxs)(`button`,{onClick:()=>h(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Entendido, Maestro!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]}),(0,U.jsx)(`div`,{className:`absolute top-0 right-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`}),(0,U.jsx)(`div`,{className:`absolute top-0 left-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Bosque de Sumas y Restas`}),(0,U.jsx)(`p`,{className:`text-text-tertiary`,children:`Elige la expresin correcta para los objetos`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary uppercase tracking-widest mb-1`,children:`Progreso`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[c,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center`,children:[(0,U.jsxs)(`div`,{className:`flex flex-wrap justify-center items-center gap-8 mb-12`,children:[(0,U.jsx)(`div`,{className:`flex flex-wrap max-w-[200px] justify-center gap-2`,children:Array.from({length:i.num1}).map((e,t)=>(0,U.jsx)(TP,{type:i.figure1,size:48,color:i.color1,className:`filter drop-shadow-lg`},`n1-${t}`))}),(0,U.jsx)(`div`,{className:`text-4xl font-bold text-accent-yellow`,children:i.operator===`+`?`Y`:`MENOS`}),(0,U.jsx)(`div`,{className:`flex flex-wrap max-w-[200px] justify-center gap-2`,children:Array.from({length:i.num2}).map((e,t)=>(0,U.jsx)(TP,{type:i.figure2,size:48,color:i.color2,className:`filter drop-shadow-lg`},`n2-${t}`))})]}),(0,U.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto`,children:i.options.map((e,t)=>(0,U.jsx)(`button`,{onClick:()=>w(e),disabled:f,className:`group relative h-20 bg-dark-bg border-2 border-border-color cursor-pointer rounded-2xl hover:border-accent-yellow hover:bg-dark-bg/80 transition-all overflow-hidden`,children:(0,U.jsx)(`span`,{className:`text-2xl font-mono text-text-primary dark:text-white group-hover:text-accent-yellow transition-colors italic`,children:e})},t))}),(0,U.jsx)(J,{children:o&&(0,U.jsx)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mt-8 p-4 rounded-xl flex items-center justify-center gap-2 ${o===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:o===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-5 h-5`}),` `,(0,U.jsx)(`span`,{children:`Excelente! Eres un genio.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-5 h-5`}),` `,(0,U.jsx)(`span`,{children:`Uy! Intenta con otra opcin.`})]})})}),f&&o===`correct`&&(0,U.jsxs)(`button`,{onClick:y,className:`mt-8 px-8 py-3 bg-gradient-to-r cursor-pointer from-accent-yellow to-gradient-to text-dark-bg font-bold rounded-xl hover:shadow-glow transition-smooth flex items-center gap-2 mx-auto`,children:[(0,U.jsx)($p,{className:`w-5 h-5`}),`Siguiente Desafo`]})]})})]},`practice`)}),e[23]=c,e[24]=o,e[25]=w,e[26]=i,e[27]=f,e[28]=m,e[29]=M):M=e[29];let N;e[30]===g?N=e[31]:(N=g&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>_(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua de Sumas y Restas`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Sumas (+)`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`Sumar es unir o juntar varios grupos de objetos. Si tienes 3 manzanas y te dan 2 ms, ahora tienes un grupo ms grande de 5.`}),(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Restas (-)`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:`Restar es quitar o separar una cantidad de un grupo. Si tienes 5 caramelos y te comes 2, ahora tienes un grupo ms pequeo de 3.`})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Truco del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Cuenta los objetos uno a uno con tu dedo! En el Bosque, los objetos te dirn la respuesta si los observas con atencin."`})]})]})]})]})}),e[30]=g,e[31]=N);let P;e[32]===N?P=e[33]:(P=(0,U.jsx)(J,{children:N}),e[32]=N,e[33]=P);let F;return e[34]!==j||e[35]!==M||e[36]!==P?(F=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[T,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[j,M,P]})]}),e[34]=j,e[35]=M,e[36]=P,e[37]=F):F=e[37],F}function AP(){return Math.random()-.5}var jP=S();function MP(e){let t=(0,jP.c)(57),{operator:n,totalRounds:r,equationsPerRound:i,onLevelComplete:a}=e,o=r===void 0?10:r,s=i===void 0?5:i,[c,l]=(0,b.useState)(1),u;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=[],t[0]=u):u=t[0];let[d,f]=(0,b.useState)(u),p;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(p=[],t[1]=p):p=t[1];let[m,h]=(0,b.useState)(p),[g,_]=(0,b.useState)(null),[v,y]=(0,b.useState)(null),[x,S]=(0,b.useState)(!1),C;t[2]!==s||t[3]!==n?(C=()=>{let e=[],t=[],r=new Set;for(;e.length<s;){let i,a,o;n===`+`?(i=Math.floor(Math.random()*10)+1,a=Math.floor(Math.random()*10)+1,o=i+a):n===`-`?(i=Math.floor(Math.random()*10)+10,a=Math.floor(Math.random()*10)+1,o=i-a):n===`*`?(i=Math.floor(Math.random()*5)+1,a=Math.floor(Math.random()*5)+1,o=i*a):(a=Math.floor(Math.random()*5)+1,o=Math.floor(Math.random()*5)+1,i=o*a);let s=`${i}${n}${a}`;r.has(s)||(r.add(s),e.push({id:`eq-${e.length}-${Date.now()}`,term1:i,term2:a,operator:n,result:o,missingValue:i,userValue:null}),t.push(i))}f(e),h(t.sort(IP)),S(!1),y(null)},t[2]=s,t[3]=n,t[4]=C):C=t[4];let w=C,T,E;t[5]===w?(T=t[6],E=t[7]):(T=()=>{w()},E=[w],t[5]=w,t[6]=T,t[7]=E),(0,b.useEffect)(T,E);let D;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(D=e=>{_(e)},t[8]=D):D=t[8];let O=D,k;t[9]!==g||t[10]!==d?(k=e=>{if(g===null)return;let t=d.find(t=>t.id===e);if(!(!t||t.userValue!==null)){if(g===t.missingValue){let t=d.map(t=>t.id===e?{...t,userValue:g}:t);f(t),h(e=>{let t=e.indexOf(g),n=[...e];return n.splice(t,1),n}),y({id:e,type:`correct`}),t.every(FP)&&setTimeout(()=>S(!0),500)}else y({id:e,type:`incorrect`}),setTimeout(()=>y(null),1e3);_(null)}},t[9]=g,t[10]=d,t[11]=k):k=t[11];let A=k,j;t[12]!==c||t[13]!==s||t[14]!==w||t[15]!==a||t[16]!==o?(j=()=>{c>=o?a(o*s*5):(l(PP),w())},t[12]=c,t[13]=s,t[14]=w,t[15]=a,t[16]=o,t[17]=j):j=t[17];let M=j,N;t[18]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(`span`,{className:`text-accent-yellow font-black uppercase text-xs tracking-widest`,children:`Ronda`}),t[18]=N):N=t[18];let P;t[19]!==c||t[20]!==o?(P=(0,U.jsxs)(`div`,{className:`bg-dark-card/80 border-2 border-accent-yellow/30 px-6 py-2 rounded-2xl shadow-xl`,children:[N,(0,U.jsxs)(`p`,{className:`text-2xl font-black text-white`,children:[c,` / `,o]})]}),t[19]=c,t[20]=o,t[21]=P):P=t[21];let F;t[22]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,U.jsxs)(`div`,{className:`bg-dark-card/80 border-2 border-white/5 px-6 py-2 rounded-2xl shadow-xl`,children:[(0,U.jsx)(`span`,{className:`text-text-tertiary font-black uppercase text-xs tracking-widest`,children:`Objetivo`}),(0,U.jsx)(`p`,{className:`text-2xl font-black text-white`,children:`Completar 10`})]}),t[22]=F):F=t[22];let I;t[23]===P?I=t[24]:(I=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-12`,children:[P,F]}),t[23]=P,t[24]=I);let L;if(t[25]!==d||t[26]!==v||t[27]!==A){let e;t[29]!==v||t[30]!==A?(e=e=>(0,U.jsxs)(`div`,{onDragOver:NP,onDrop:()=>A(e.id),className:`flex items-center justify-center gap-6 p-4 rounded-2xl bg-white/5 border-2 border-dashed border-white/10 hover:border-accent-yellow/30 transition-colors`,children:[(0,U.jsx)(`div`,{className:`
                w-16 h-16 rounded-xl border-4 border-dashed flex items-center justify-center text-3xl font-black transition-all
                ${e.userValue===null?v?.id===e.id&&v.type===`incorrect`?`bg-red-500/20 border-red-500 text-red-500 animate-shake`:`bg-dark-bg/50 border-gray-500 text-gray-400`:`bg-green-500/20 border-green-500 text-green-500 shadow-glow`}
              `,children:e.userValue||`?`}),(0,U.jsx)(`span`,{className:`text-3xl font-black text-text-primary italic`,children:e.operator}),(0,U.jsx)(`div`,{className:`w-16 h-16 rounded-xl border-4 border-gray-300 flex items-center justify-center text-3xl font-black text-text-primary bg-white/10`,children:e.term2}),(0,U.jsx)(`span`,{className:`text-3xl font-black text-text-primary`,children:`=`}),(0,U.jsx)(`div`,{className:`w-20 h-16 rounded-xl border-4 border-gray-300 flex items-center justify-center text-3xl font-black text-text-primary bg-white/10`,children:e.result}),(0,U.jsxs)(`div`,{className:`w-8`,children:[e.userValue!==null&&(0,U.jsx)(Up,{className:`text-green-500 w-6 h-6`}),v?.id===e.id&&v.type===`incorrect`&&(0,U.jsx)(Gp,{className:`text-red-500 w-6 h-6 animate-pulse`})]})]},e.id),t[29]=v,t[30]=A,t[31]=e):e=t[31],L=d.map(e),t[25]=d,t[26]=v,t[27]=A,t[28]=L}else L=t[28];let R;t[32]===L?R=t[33]:(R=(0,U.jsx)(`div`,{className:`space-y-4 mb-12`,children:L}),t[32]=L,t[33]=R);let z;t[34]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,U.jsxs)(`div`,{className:`absolute top-2 left-6 text-[10px] font-black text-accent-yellow uppercase tracking-widest opacity-50 flex items-center gap-2`,children:[(0,U.jsx)(Zp,{size:12}),`Arrastra hacia arriba`]}),t[34]=z):z=t[34];let B;if(t[35]!==m){let e;t[37]===Symbol.for(`react.memo_cache_sentinel`)?(e=(e,t)=>(0,U.jsx)(Y.div,{layout:!0,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},draggable:!0,onDragStart:()=>O(e),whileHover:{scale:1.1,rotate:2},whileTap:{scale:.9},className:`w-16 h-16 bg-white border-b-8 border-gray-300 rounded-2xl flex items-center justify-center text-3xl font-black text-gray-700 shadow-xl cursor-grab active:cursor-grabbing hover:bg-white`,children:e},`${e}-${t}`),t[37]=e):e=t[37],B=m.map(e),t[35]=m,t[36]=B}else B=t[36];let V;t[38]===B?V=t[39]:(V=(0,U.jsx)(`div`,{className:`flex flex-wrap justify-center gap-4 mt-2`,children:(0,U.jsx)(J,{children:B})}),t[38]=B,t[39]=V);let ee;t[40]===m.length?ee=t[41]:(ee=m.length===0&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},className:`text-center text-accent-yellow font-black uppercase tracking-widest`,children:`Ronda Completada!`}),t[40]=m.length,t[41]=ee);let H;t[42]!==V||t[43]!==ee?(H=(0,U.jsxs)(`div`,{className:`bg-accent-yellow/10 border-4 border-accent-yellow p-8 rounded-[2rem] shadow-2xl relative overflow-hidden`,children:[z,V,ee]}),t[42]=V,t[43]=ee,t[44]=H):H=t[44];let te;t[45]!==c||t[46]!==M||t[47]!==x||t[48]!==o?(te=x&&(0,U.jsx)(Y.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:`mt-8 flex justify-center`,children:(0,U.jsx)(`button`,{onClick:M,className:`px-12 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl shadow-xl hover:shadow-2xl transition-all uppercase tracking-widest flex items-center gap-3 animate-pulse`,children:c===o?`Ver Victoria`:`Siguiente Ronda`})}),t[45]=c,t[46]=M,t[47]=x,t[48]=o,t[49]=te):te=t[49];let ne;t[50]===te?ne=t[51]:(ne=(0,U.jsx)(J,{children:te}),t[50]=te,t[51]=ne);let re;return t[52]!==I||t[53]!==R||t[54]!==H||t[55]!==ne?(re=(0,U.jsxs)(`div`,{className:`w-full max-w-2xl mx-auto py-8`,children:[I,R,H,ne]}),t[52]=I,t[53]=R,t[54]=H,t[55]=ne,t[56]=re):re=t[56],re}function NP(e){return e.preventDefault()}function PP(e){return e+1}function FP(e){return e.userValue!==null}function IP(){return Math.random()-.5}var LP=S();function RP(){let e=(0,LP.c)(28),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(!1),[o,s]=(0,b.useState)(0),[c,l]=(0,b.useState)(!0),[u,d]=(0,b.useState)(!1),f;e[0]!==r||e[1]!==n?(f=e=>{s(e),n(e,!0),r(`level2`),a(!0)},e[0]=r,e[1]=n,e[2]=f):f=e[2];let p=f;if(i){let t;return e[3]===o?t=e[4]:(t=(0,U.jsx)(qN,{isOpen:!0,levelName:`Multiplicaciones`,points:o}),e[3]=o,e[4]=t),t}let m;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[5]=m):m=e[5];let h;e[6]===t?h=e[7]:(h=()=>t(`/`),e[6]=t,e[7]=h);let g,_;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,U.jsx)(Ip,{className:`w-5 h-5`}),_=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[8]=g,e[9]=_):(g=e[8],_=e[9]);let v;e[10]===h?v=e[11]:(v=(0,U.jsxs)(`button`,{onClick:h,className:`flex items-center gap-2 text-text-secondary hover:text-primary transition-colors cursor-pointer`,children:[g,_]}),e[10]=h,e[11]=v);let y;e[12]===c?y=e[13]:(y=!c&&(0,U.jsxs)(`button`,{onClick:()=>d(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[12]=c,e[13]=y);let x;e[14]!==v||e[15]!==y?(x=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[v,y]}),e[14]=v,e[15]=y,e[16]=x):x=e[16];let S;e[17]!==p||e[18]!==c?(S=(0,U.jsx)(J,{mode:`wait`,children:c?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})}),(0,U.jsx)(`div`,{className:`absolute bottom-4 left-1/2 -translate-x-1/2 w-32 h-6 bg-black/40 rounded-[100%] blur-md`})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de la Isla`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Increble, has llegado al Valle de las Multiplicaciones. Aqu los nmeros crecen rpido, necesitars toda tu concentracin!"`}),(0,U.jsxs)(`button`,{onClick:()=>l(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Estoy listo!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]}),(0,U.jsx)(`div`,{className:`absolute top-0 right-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`}),(0,U.jsx)(`div`,{className:`absolute top-0 left-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,U.jsx)(`h1`,{className:`text-4xl font-black gradient-text`,children:`Valle Multiplicacin`}),(0,U.jsx)(`p`,{className:`text-text-tertiary font-bold`,children:`Arrastra el nmero correcto para completar la multiplicacin`})]}),(0,U.jsx)(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`card min-h-[500px] flex flex-col items-center justify-center border-t-8 border-accent-yellow bg-dark-card/80 backdrop-blur-sm`,children:(0,U.jsx)(MP,{operator:`*`,totalRounds:10,equationsPerRound:5,onLevelComplete:p})})]},`practice`)}),e[17]=p,e[18]=c,e[19]=S):S=e[19];let C;e[20]===u?C=e[21]:(C=u&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>d(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua de Multiplicacin`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`Multiplicar es como hacer una "suma superrpida". Significa sumar el mismo nmero varias veces.`}),(0,U.jsxs)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center`,children:[(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`3 x 4`}),` = 3 + 3 + 3 + 3 = `,(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`12`})]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Consejo del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Arrastra las piezas con calma! Si conoces las tablas de multiplicar, este nivel ser pan comido para un aprendiz como t."`})]})]})]})]})}),e[20]=u,e[21]=C);let w;e[22]===C?w=e[23]:(w=(0,U.jsx)(J,{children:C}),e[22]=C,e[23]=w);let T;return e[24]!==w||e[25]!==x||e[26]!==S?(T=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[m,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[x,S,w]})]}),e[24]=w,e[25]=x,e[26]=S,e[27]=T):T=e[27],T}var zP=S();function BP(){let e=(0,zP.c)(28),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(!1),[o,s]=(0,b.useState)(0),[c,l]=(0,b.useState)(!0),[u,d]=(0,b.useState)(!1),f;e[0]!==r||e[1]!==n?(f=e=>{s(e),n(e,!0),r(`level3`),a(!0)},e[0]=r,e[1]=n,e[2]=f):f=e[2];let p=f;if(i){let t;return e[3]===o?t=e[4]:(t=(0,U.jsx)(qN,{isOpen:!0,levelName:`Divisiones`,points:o}),e[3]=o,e[4]=t),t}let m;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[5]=m):m=e[5];let h;e[6]===t?h=e[7]:(h=()=>t(`/`),e[6]=t,e[7]=h);let g,_;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,U.jsx)(Ip,{className:`w-5 h-5`}),_=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[8]=g,e[9]=_):(g=e[8],_=e[9]);let v;e[10]===h?v=e[11]:(v=(0,U.jsxs)(`button`,{onClick:h,className:`flex items-center gap-2 text-text-secondary hover:text-primary transition-colors cursor-pointer`,children:[g,_]}),e[10]=h,e[11]=v);let y;e[12]===c?y=e[13]:(y=!c&&(0,U.jsxs)(`button`,{onClick:()=>d(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[12]=c,e[13]=y);let x;e[14]!==v||e[15]!==y?(x=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[v,y]}),e[14]=v,e[15]=y,e[16]=x):x=e[16];let S;e[17]!==p||e[18]!==c?(S=(0,U.jsx)(J,{mode:`wait`,children:c?(0,U.jsxs)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:[(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})}),(0,U.jsx)(`div`,{className:`absolute bottom-4 left-1/2 -translate-x-1/2 w-32 h-6 bg-black/40 rounded-[100%] blur-md`})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de la Isla`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Increble! Has llegado al Templo de la Divisin. Aqu aprenders a repartir el poder de los nmeros equitativamente."`}),(0,U.jsxs)(`button`,{onClick:()=>l(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Acepto el Reto!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]}),(0,U.jsx)(`div`,{className:`absolute top-0 right-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`}),(0,U.jsx)(`div`,{className:`absolute top-0 left-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-accent-yellow/50 to-transparent`})]},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,U.jsx)(`h1`,{className:`text-4xl font-black gradient-text`,children:`Templo Divisin`}),(0,U.jsx)(`p`,{className:`text-text-tertiary font-bold`,children:`Arrastra el nmero correcto para completar la divisin`})]}),(0,U.jsx)(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`card min-h-[500px] flex flex-col items-center justify-center border-t-8 border-accent-yellow bg-dark-card/80 backdrop-blur-sm`,children:(0,U.jsx)(MP,{operator:`/`,totalRounds:10,equationsPerRound:5,onLevelComplete:p})})]},`practice`)}),e[17]=p,e[18]=c,e[19]=S):S=e[19];let C;e[20]===u?C=e[21]:(C=u&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>d(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua de Divisin`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`Dividir es repartir un nmero en partes iguales. Es la operacin contraria a la multiplicacin.`}),(0,U.jsxs)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center`,children:[(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`12  3`}),` = `,(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`4`}),(0,U.jsx)(`div`,{className:`text-xs text-text-tertiary mt-1`,children:`Porque 4 x 3 = 12`})]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Consejo del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Piensa en las multiplicaciones! Si sabes que 2 x 5 = 10, entonces sabrs que 10  2 = 5 automticamente."`})]})]})]})]})}),e[20]=u,e[21]=C);let w;e[22]===C?w=e[23]:(w=(0,U.jsx)(J,{children:C}),e[22]=C,e[23]=w);let T;return e[24]!==w||e[25]!==x||e[26]!==S?(T=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[m,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[x,S,w]})]}),e[24]=w,e[25]=x,e[26]=S,e[27]=T):T=e[27],T}var VP=[`grid`,`circle`,`bar`,`triangles`];function HP(){let e=Qe(),{recordResult:t,completeLevel:n}=Tm(),[r,i]=(0,b.useState)(null),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(0),[l,u]=(0,b.useState)(!1),[d,f]=(0,b.useState)(!1),[p,m]=(0,b.useState)(!0),[h,g]=(0,b.useState)(!1),[_,v]=(0,b.useState)([]),y=(0,b.useCallback)(()=>{let e=VP[Math.floor(Math.random()*VP.length)],t=1,n=1,r;if(e===`grid`){let e=Math.floor(Math.random()*3)+2,t=Math.floor(Math.random()*3)+2;n=e*t,r={rows:e,cols:t}}else if(e===`circle`){let e=[3,4,6,8,10,12];n=e[Math.floor(Math.random()*e.length)]}else e===`bar`?n=Math.floor(Math.random()*7)+3:e===`triangles`&&(n=8);t=Math.floor(Math.random()*(n-1))+1;let a=`${e}-${t}-${n}`;if(_.includes(a)&&_.length<15){y();return}let s=`${t}/${n}`,c=new Set([s]);for(;c.size<3;){let e=Math.random(),r=t,i=n;e<.33?i=Math.max(2,n+(Math.floor(Math.random()*5)-2)):e<.66?(r=Math.max(1,t+(Math.floor(Math.random()*5)-2)),r=Math.min(r,i-1)):(i=Math.floor(Math.random()*10)+2,r=Math.floor(Math.random()*(i-1))+1);let a=`${r}/${i}`;a!==s&&c.add(a)}let l=Array.from(c).sort(()=>Math.random()-.5);i({numerator:t,denominator:n,type:e,config:r,options:l,id:a}),v(e=>[...e.slice(-10),a]),o(null),f(!1)},[_]);(0,b.useEffect)(()=>{y()},[]);let x=e=>{if(!(!r||d))if(o(null),e===`${r.numerator}/${r.denominator}`){o(`correct`),f(!0),t(10,!0);let e=s+1;c(e),e>=10&&(n(`level4`),setTimeout(()=>u(!0),1e3))}else o(`incorrect`),t(0,!1)};return l?(0,U.jsx)(qN,{isOpen:!0,levelName:`Dominio de Fracciones`,points:s*10}):(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[(0,U.jsxs)(`button`,{onClick:()=>e(`/`),className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[(0,U.jsx)(Ip,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{children:`Volver al Reino`})]}),!p&&(0,U.jsxs)(`button`,{onClick:()=>g(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]})]}),(0,U.jsx)(J,{mode:`wait`,children:p?(0,U.jsx)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de la Isla`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Las fracciones son partes de un todo. Mira con atencin las formas y elige la proporcin correcta del hechizo."`}),(0,U.jsxs)(`button`,{onClick:()=>m(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Aceptar el Desafo!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]})},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Visin de Fracciones`}),(0,U.jsx)(`p`,{className:`text-text-tertiary`,children:`Elige la fraccin que representa la parte iluminada`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[s,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[450px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:r&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsx)(`div`,{className:`mb-12 flex items-center justify-center min-h-[240px]`,children:(()=>{if(!r)return null;let{type:e,numerator:t,denominator:n,config:i}=r;return e===`bar`?(0,U.jsx)(`div`,{className:`flex gap-1 w-full max-w-md mx-auto h-20 bg-dark-bg/20 border-4 border-dark-bg rounded-xl overflow-hidden p-1 shadow-inner`,children:Array.from({length:n}).map((e,n)=>(0,U.jsx)(Y.div,{initial:{scaleX:0},animate:{scaleX:1},transition:{delay:n*.05},className:`flex-1 rounded-sm shadow-sm transition-colors duration-500 ${n<t?`bg-accent-yellow shadow-glow-yellow`:`bg-white/10 dark:bg-white/5`}`},n))}):e===`grid`&&i?(0,U.jsx)(`div`,{className:`grid gap-2 p-2 bg-dark-bg/20 border-4 border-dark-bg rounded-2xl mx-auto shadow-inner`,style:{gridTemplateColumns:`repeat(${i.cols}, 1fr)`,width:`fit-content`,minWidth:`200px`},children:Array.from({length:n}).map((e,n)=>(0,U.jsx)(Y.div,{initial:{scale:0},animate:{scale:1},transition:{delay:n*.03},className:`w-12 h-12 md:w-14 md:h-14 rounded-lg shadow-sm transition-colors duration-500 ${n<t?`bg-accent-yellow shadow-glow-yellow`:`bg-white/10 dark:bg-white/5`}`},n))}):e===`circle`?(0,U.jsx)(`div`,{className:`relative w-56 h-56 mx-auto`,children:(0,U.jsxs)(`svg`,{viewBox:`0 0 100 100`,className:`w-full h-full drop-shadow-2xl`,children:[(0,U.jsx)(`circle`,{cx:`50`,cy:`50`,r:`46`,fill:`transparent`,stroke:`currentColor`,strokeWidth:`8`,className:`text-dark-bg opacity-30`}),Array.from({length:n}).map((e,r)=>{let i=360/n*r-90,a=360/n*(r+1)-90,o=`M 50 50 L ${50+46*Math.cos(i*Math.PI/180)} ${50+46*Math.sin(i*Math.PI/180)} A 46 46 0 0 1 ${50+46*Math.cos(a*Math.PI/180)} ${50+46*Math.sin(a*Math.PI/180)} Z`;return(0,U.jsx)(Y.path,{initial:{opacity:0},animate:{opacity:1},transition:{delay:r*.05},d:o,fill:r<t?`#ffcc00`:`rgba(255,255,255,0.05)`,stroke:`currentColor`,strokeWidth:`0.5`,className:`text-dark-bg transition-colors duration-500`},r)})]})}):e===`triangles`?(0,U.jsx)(`div`,{className:`w-56 h-56 mx-auto bg-dark-bg/20 border-4 border-dark-bg rounded-2xl overflow-hidden p-2 shadow-inner`,children:(0,U.jsx)(`svg`,{viewBox:`0 0 100 100`,className:`w-full h-full`,children:[`M 50 50 L 0 0 L 50 0 Z`,`M 50 50 L 50 0 L 100 0 Z`,`M 50 50 L 100 0 L 100 50 Z`,`M 50 50 L 100 50 L 100 100 Z`,`M 50 50 L 100 100 L 50 100 Z`,`M 50 50 L 50 100 L 0 100 Z`,`M 50 50 L 0 100 L 0 50 Z`,`M 50 50 L 0 50 L 0 0 Z`].map((e,n)=>(0,U.jsx)(Y.path,{initial:{opacity:0},animate:{opacity:1},transition:{delay:n*.1},d:e,fill:n<t?`#ffcc00`:`rgba(255,255,255,0.05)`,stroke:`currentColor`,strokeWidth:`1`,className:`text-dark-bg`},n))})}):null})()}),(0,U.jsxs)(`div`,{className:`max-w-2xl mx-auto space-y-6`,children:[d?(0,U.jsxs)(`button`,{onClick:y,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]}):(0,U.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-6`,children:r.options.map((e,t)=>(0,U.jsxs)(`button`,{onClick:()=>x(e),className:`group relative h-20 bg-dark-bg/40 border-4 border-white/5 rounded-2xl hover:border-accent-yellow hover:bg-dark-bg transition-all cursor-pointer overflow-hidden flex items-center justify-center`,children:[(0,U.jsxs)(`div`,{className:`text-3xl font-black italic text-text-primary dark:text-white group-hover:text-accent-yellow transition-colors flex flex-col items-center leading-none`,children:[(0,U.jsx)(`span`,{children:e.split(`/`)[0]}),(0,U.jsx)(`div`,{className:`w-10 h-1 bg-current opacity-20 my-1`}),(0,U.jsx)(`span`,{children:e.split(`/`)[1]})]}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/0 group-hover:bg-accent-yellow/5 transition-colors`})]},t))}),(0,U.jsx)(J,{children:a&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${a===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:a===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsxs)(`span`,{className:`text-xl font-bold`,children:[`Visin certera! La respuesta es `,r.numerator,`/`,r.denominator,`.`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`La magia ha fallado. Intntalo de nuevo, mago!`})]})})})]})]})})]},`practice`)}),(0,U.jsx)(J,{children:h&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>g(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua de Fracciones`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Cmo identificar una fraccin?`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`1. **Cuenta el total** de partes iguales (este es el **denominador**, el nmero de abajo). 2. **Cuenta las partes coloreadas** (este es el **numerador**, el nmero de arriba).`}),(0,U.jsx)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center`,children:(0,U.jsx)(`div`,{className:`mb-2`,children:`Fraccin = Partes Pintadas / Total de Partes`})})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Formas Comunes`}),(0,U.jsxs)(`ul`,{className:`text-sm text-text-secondary dark:text-white/70 space-y-2`,children:[(0,U.jsx)(`li`,{children:` **Crculo**: Como una pizza cortada en porciones.`}),(0,U.jsx)(`li`,{children:` **Cuadrcula**: Un tablero con casillas iluminadas.`}),(0,U.jsx)(`li`,{children:` **Barra**: Una vara de poder dividida en segmentos.`})]})]})]})]})]})})})]})]})}var UP=S();function WP(){let e=(0,UP.c)(40),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),[o,s]=(0,b.useState)(``),[c,l]=(0,b.useState)(null),[u,d]=(0,b.useState)(0),[f,p]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),[g,_]=(0,b.useState)(!0),[v,y]=(0,b.useState)(!1),x;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(x=()=>{let e=Math.floor(Math.random()*100)/10,t=Math.floor(Math.random()*100)/10;a({num1:e,num2:t,answer:parseFloat((e+t).toFixed(1))}),s(``),l(null),h(!1)},e[0]=x):x=e[0];let S=x,C,w;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>{S()},w=[],e[1]=C,e[2]=w):(C=e[1],w=e[2]),(0,b.useEffect)(C,w);let T;e[3]!==r||e[4]!==u||e[5]!==i||e[6]!==m||e[7]!==n||e[8]!==o?(T=()=>{if(!i||m)return;let e=parseFloat(o);if(Math.abs(e-i.answer)<.01){l(`correct`),h(!0),n(10,!0);let e=u+1;d(e),e>=10&&(r(`level9`),setTimeout(()=>p(!0),1e3))}else l(`incorrect`),n(0,!1)},e[3]=r,e[4]=u,e[5]=i,e[6]=m,e[7]=n,e[8]=o,e[9]=T):T=e[9];let E=T;if(f){let t=u*10,n;return e[10]===t?n=e[11]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Reto Decimal`,points:t}),e[10]=t,e[11]=n),n}let D;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[12]=D):D=e[12];let O;e[13]===t?O=e[14]:(O=()=>t(`/`),e[13]=t,e[14]=O);let k,A;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,U.jsx)(Ip,{className:`w-5 h-5`}),A=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[15]=k,e[16]=A):(k=e[15],A=e[16]);let j;e[17]===O?j=e[18]:(j=(0,U.jsxs)(`button`,{onClick:O,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[k,A]}),e[17]=O,e[18]=j);let M;e[19]===g?M=e[20]:(M=!g&&(0,U.jsxs)(`button`,{onClick:()=>y(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[19]=g,e[20]=M);let N;e[21]!==j||e[22]!==M?(N=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[j,M]}),e[21]=j,e[22]=M,e[23]=N):N=e[23];let P;e[24]!==E||e[25]!==u||e[26]!==c||e[27]!==i||e[28]!==m||e[29]!==g||e[30]!==o?(P=(0,U.jsx)(J,{mode:`wait`,children:g?(0,U.jsx)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro de los Decimales`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Los decimales son nmeros de gran precisin. Un pequeo error puede cambiarlo todo. Tienes la precisin de un gran mago?"`}),(0,U.jsxs)(`button`,{onClick:()=>_(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Iniciar Prueba!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]})},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Reto Decimal`}),(0,U.jsx)(`p`,{className:`text-text-tertiary`,children:`Suma con precisin los nmeros decimales`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary uppercase tracking-widest mb-1`,children:`Poder Acumulado`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[u,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[400px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsx)(`div`,{className:`mb-12`,children:(0,U.jsxs)(`div`,{className:`flex items-center justify-center gap-8 text-5xl md:text-7xl font-black text-text-primary dark:text-white`,children:[(0,U.jsx)(`span`,{children:i.num1}),(0,U.jsx)(`span`,{className:`text-accent-yellow`,children:`+`}),(0,U.jsx)(`span`,{children:i.num2})]})}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[m?(0,U.jsxs)(`button`,{onClick:S,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Prueba`]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`input`,{type:`number`,step:`0.1`,value:o,onChange:e=>{s(e.target.value),c===`incorrect`&&l(null)},onKeyPress:e=>e.key===`Enter`&&E(),placeholder:`Resultado decimal...`,className:`w-full h-16 bg-dark-bg border-4 border-white/10 rounded-2xl px-6 text-3xl font-bold text-center focus:border-accent-yellow outline-none transition-all dark:text-white`,autoFocus:!0}),(0,U.jsx)(`button`,{onClick:E,disabled:!o,className:`w-full h-14 bg-accent-yellow text-dark-bg font-black rounded-xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`})]}),(0,U.jsx)(J,{children:c&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${c===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:c===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsxs)(`span`,{className:`text-xl font-bold`,children:[`Precisin de maestro! El `,i.answer,` es correcto.`]})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Casi... Afina tu puntera e intenta de nuevo!`})]})})})]})]})})]},`practice`)}),e[24]=E,e[25]=u,e[26]=c,e[27]=i,e[28]=m,e[29]=g,e[30]=o,e[31]=P):P=e[31];let F;e[32]===v?F=e[33]:(F=v&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>y(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Gua de Decimales`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Comas vs Puntos`}),(0,U.jsx)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:`En matemticas digitales, usamos el punto (.) para separar la parte entera de la parte decimal (dcimos, centsimos...).`}),(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Suma de Decimales`}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed`,children:[`Es igual que sumar nmeros normales, solo asegrate de alinear bien los puntos.`,(0,U.jsx)(`br`,{}),`Ejemplo: 1.5 + 2.3 = 3.8`]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Consejo del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"No olvides el punto! Sin l, la magnitud del nmero cambia por completo. Los centavos en el tesoro agradecen tu precisin."`})]})]})]})]})}),e[32]=v,e[33]=F);let I;e[34]===F?I=e[35]:(I=(0,U.jsx)(J,{children:F}),e[34]=F,e[35]=I);let L;return e[36]!==N||e[37]!==P||e[38]!==I?(L=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[D,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[N,P,I]})]}),e[36]=N,e[37]=P,e[38]=I,e[39]=L):L=e[39],L}var GP=S();function KP(){let e=(0,GP.c)(41),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),[i,a]=(0,b.useState)(null),o;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=[],e[0]=o):o=e[0];let[s,c]=(0,b.useState)(o),[l,u]=(0,b.useState)(null),[d,f]=(0,b.useState)(0),[p,m]=(0,b.useState)(!1),[h,g]=(0,b.useState)(!1),[_,v]=(0,b.useState)(!0),[y,x]=(0,b.useState)(!1),S;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(S=()=>{let e=Math.floor(Math.random()*2)+3,t=[],n=Math.floor(Math.random()*20);for(let r=0;r<e;r++){let e;do{let t=Math.random()>.4?n:Math.floor(Math.random()*20),r=Math.floor(Math.random()*100)/100;e=parseFloat((t+r).toFixed(2))}while(t.includes(e));t.push(e)}let r=[...t].sort(JP);a({id:Date.now().toString(),numbers:t,correctOrder:r}),c([...t].sort(qP)),u(null),g(!1)},e[1]=S):S=e[1];let C=S,w,T;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(w=()=>{C()},T=[],e[2]=w,e[3]=T):(w=e[2],T=e[3]),(0,b.useEffect)(w,T);let E;e[4]!==r||e[5]!==d||e[6]!==s||e[7]!==i||e[8]!==h||e[9]!==n?(E=()=>{if(!(!i||h))if(s.every((e,t)=>e===i.correctOrder[t])){u(`correct`),g(!0),n(15,!0);let e=d+1;f(e),e>=10&&(r(`level6`),setTimeout(()=>m(!0),1e3))}else u(`incorrect`),n(0,!1)},e[4]=r,e[5]=d,e[6]=s,e[7]=i,e[8]=h,e[9]=n,e[10]=E):E=e[10];let D=E;if(p){let t=d*15,n;return e[11]===t?n=e[12]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Ordenamiento Decimal`,points:t}),e[11]=t,e[12]=n),n}let O;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[13]=O):O=e[13];let k;e[14]===t?k=e[15]:(k=()=>t(`/`),e[14]=t,e[15]=k);let A,j;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,U.jsx)(Ip,{className:`w-5 h-5`}),j=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[16]=A,e[17]=j):(A=e[16],j=e[17]);let M;e[18]===k?M=e[19]:(M=(0,U.jsxs)(`button`,{onClick:k,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[A,j]}),e[18]=k,e[19]=M);let N;e[20]===_?N=e[21]:(N=!_&&(0,U.jsxs)(`button`,{onClick:()=>x(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[20]=_,e[21]=N);let P;e[22]!==N||e[23]!==M?(P=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[M,N]}),e[22]=N,e[23]=M,e[24]=P):P=e[24];let F;e[25]!==D||e[26]!==d||e[27]!==l||e[28]!==s||e[29]!==i||e[30]!==h||e[31]!==_?(F=(0,U.jsx)(J,{mode:`wait`,children:_?(0,U.jsx)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Misin de Reordenamiento`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Los cristales decimales se han desordenado. Debes organizarlos de menor a mayor para restaurar el flujo de la magia."`}),(0,U.jsxs)(`button`,{onClick:()=>v(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Entendido, Maestro!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]})},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end mb-8`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Ordenamiento Decimal`}),(0,U.jsx)(`p`,{className:`text-text-tertiary`,children:`Arrastra los nmeros para ordenarlos de menor a mayor`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary uppercase tracking-widest mb-1`,children:`Pasos Correctos`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[d,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsx)(Y.div,{className:`card min-h-[450px] flex flex-col items-center justify-center border-t-8 border-accent-yellow`,children:i&&(0,U.jsxs)(`div`,{className:`w-full text-center p-4`,children:[(0,U.jsxs)(`div`,{className:`mb-12`,children:[(0,U.jsx)(`p`,{className:`text-xl text-text-tertiary dark:text-white/60 mb-8 italic`,children:`Organiza estos cristales de poder:`}),(0,U.jsx)(dp,{axis:`x`,values:s,onReorder:c,className:`flex flex-wrap justify-center gap-4 py-8`,children:s.map(e=>(0,U.jsxs)(Dp,{value:e,drag:h?!1:`x`,className:`
                              cursor-grab active:cursor-grabbing select-none
                              w-28 h-20 md:w-32 md:h-24 rounded-2xl flex flex-col items-center justify-center text-2xl md:text-3xl font-black border-4 shadow-xl transition-colors
                              ${h?`bg-green-500/10 border-green-500/50 text-green-500`:`bg-dark-bg border-white/10 text-white hover:border-accent-yellow`}
                            `,children:[(0,U.jsx)(qp,{className:`w-4 h-4 mb-2 opacity-20`}),(0,U.jsx)(`span`,{children:e.toString().replace(`.`,`,`)})]},e))})]}),(0,U.jsxs)(`div`,{className:`max-w-md mx-auto space-y-6`,children:[h?(0,U.jsxs)(`button`,{onClick:C,className:`px-10 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center gap-2 mx-auto cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]}):(0,U.jsx)(`button`,{onClick:D,className:`w-full h-16 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all active:scale-95 cursor-pointer uppercase tracking-tighter`,children:`Hechizo de Validacin`}),(0,U.jsx)(J,{children:l&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${l===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:l===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`El orden es perfecto! La magia fluye de nuevo.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Un cristal est fuera de lugar. Revisa el orden!`})]})})})]})]})})]},`practice`)}),e[25]=D,e[26]=d,e[27]=l,e[28]=s,e[29]=i,e[30]=h,e[31]=_,e[32]=F):F=e[32];let I;e[33]===y?I=e[34]:(I=y&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>x(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Sabidura Decimal`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`Cmo comparar decimales?`}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:[`1. **Compara la parte entera** (antes de la coma). 10,5 es mayor que 9,9.`,(0,U.jsx)(`br`,{}),`2. Si son iguales, **compara los dcimos** (primera cifra decimal). 8,50 es mayor que 8,05.`,(0,U.jsx)(`br`,{}),`3. Contina con centsimos si es necesario.`]}),(0,U.jsx)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 font-mono text-center`,children:(0,U.jsx)(`div`,{className:`mb-2`,children:`8,04 < 8,35 < 9,26`})})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Truco del Mago`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"Iguala las cifras! Puedes aadir ceros invisibles al final. 8,5 es lo mismo que 8,50. As es ms fcil ver cul es mayor."`})]})]})]})]})}),e[33]=y,e[34]=I);let L;e[35]===I?L=e[36]:(L=(0,U.jsx)(J,{children:I}),e[35]=I,e[36]=L);let R;return e[37]!==P||e[38]!==F||e[39]!==L?(R=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[O,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[P,F,L]})]}),e[37]=P,e[38]=F,e[39]=L,e[40]=R):R=e[40],R}function qP(){return Math.random()-.5}function JP(e,t){return e-t}var YP=S();function XP(){let e=(0,YP.c)(45),t=Qe(),{recordResult:n,completeLevel:r}=Tm(),i=(0,b.useRef)(null),[a,o]=(0,b.useState)(null),[s,c]=(0,b.useState)(null),[l,u]=(0,b.useState)(null),[d,f]=(0,b.useState)(0),[p,m]=(0,b.useState)(!1),[h,g]=(0,b.useState)(!1),[_,v]=(0,b.useState)(!0),[y,x]=(0,b.useState)(!1),S;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(S=()=>{o({targetX:Math.floor(Math.random()*11)-5,targetY:Math.floor(Math.random()*11)-5}),c(null),u(null),g(!1)},e[0]=S):S=e[0];let C=S,w,T;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(w=()=>{C()},T=[],e[1]=w,e[2]=T):(w=e[1],T=e[2]),(0,b.useEffect)(w,T);let E;e[3]!==l||e[4]!==h?(E=e=>{if(!i.current||h)return;let t=i.current.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,a=600/t.width,o=600/t.height,s=n*a,d=r*o,f=Math.round((s-300)/50),p=Math.round((300-d)/50);c({x:Math.max(-10,Math.min(10,f)),y:Math.max(-10,Math.min(10,p))}),l&&u(null)},e[3]=l,e[4]=h,e[5]=E):E=e[5];let D=E,O=QP,k;e[6]!==r||e[7]!==d||e[8]!==a||e[9]!==h||e[10]!==n||e[11]!==s?(k=()=>{if(!(!a||!s||h))if(s.x===a.targetX&&s.y===a.targetY){u(`correct`),g(!0),n(20,!0);let e=d+1;f(e),e>=10&&(r(`level7`),setTimeout(()=>m(!0),1e3))}else u(`incorrect`),n(0,!1)},e[6]=r,e[7]=d,e[8]=a,e[9]=h,e[10]=n,e[11]=s,e[12]=k):k=e[12];let A=k;if(p){let t=d*20,n;return e[13]===t?n=e[14]:(n=(0,U.jsx)(qN,{isOpen:!0,levelName:`Reto Cartesiano`,points:t}),e[13]=t,e[14]=n),n}let j;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,U.jsx)(`div`,{className:`absolute inset-0 bg-cover bg-center bg-no-repeat opacity-10 pointer-events-none`,style:{backgroundImage:`url(/mathbg.png)`}}),e[15]=j):j=e[15];let M;e[16]===t?M=e[17]:(M=()=>t(`/`),e[16]=t,e[17]=M);let N,P;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,U.jsx)(Ip,{className:`w-5 h-5`}),P=(0,U.jsx)(`span`,{children:`Volver al Reino`}),e[18]=N,e[19]=P):(N=e[18],P=e[19]);let F;e[20]===M?F=e[21]:(F=(0,U.jsxs)(`button`,{onClick:M,className:`flex items-center gap-2 text-text-secondary dark:text-text-secondary hover:dark:text-white cursor-pointer hover:text-primary transition-colors`,children:[N,P]}),e[20]=M,e[21]=F);let I;e[22]===_?I=e[23]:(I=!_&&(0,U.jsxs)(`button`,{onClick:()=>x(!0),className:`flex items-center gap-2 px-4 py-2 bg-white/5 text-accent-yellow rounded-xl hover:bg-white/10 transition-all cursor-pointer border border-accent-yellow/20`,children:[(0,U.jsx)(Wp,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`font-bold hidden sm:inline`,children:`Necesitas Ayuda?`})]}),e[22]=_,e[23]=I);let L;e[24]!==I||e[25]!==F?(L=(0,U.jsxs)(`div`,{className:`flex justify-between items-center mb-8`,children:[F,I]}),e[24]=I,e[25]=F,e[26]=L):L=e[26];let R;e[27]!==A||e[28]!==d||e[29]!==l||e[30]!==D||e[31]!==a?.targetX||e[32]!==a?.targetY||e[33]!==h||e[34]!==s||e[35]!==_?(R=(0,U.jsx)(J,{mode:`wait`,children:_?(0,U.jsx)(Y.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1,filter:`blur(10px)`},className:`card mt-12 overflow-hidden border-2 border-accent-yellow relative`,children:(0,U.jsxs)(`div`,{className:`flex flex-col md:flex-row items-center gap-8 p-8`,children:[(0,U.jsxs)(`div`,{className:`w-72 h-72 bg-dark-bg/50 rounded-[2.5rem] border-4 border-accent-yellow/20 flex items-center justify-center relative overflow-hidden group shadow-2xl`,children:[(0,U.jsx)(`div`,{className:`absolute inset-0 bg-accent-yellow/5 group-hover:bg-accent-yellow/10 transition-colors`}),(0,U.jsx)(Y.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:`relative z-10`,children:(0,U.jsx)(GN,{spritePath:YN,width:260,height:260,scale:2.5})})]}),(0,U.jsxs)(`div`,{className:`flex-1 text-center md:text-left`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-2 mb-4 justify-center md:justify-start text-accent-yellow`,children:[(0,U.jsx)(nm,{className:`w-5 h-5`}),(0,U.jsx)(`span`,{className:`text-xs font-black uppercase tracking-widest`,children:`Maestro del Mapa Estelar`})]}),(0,U.jsx)(`h2`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-6 leading-tight`,children:`"Las formas mgicas se han dispersado por el mapa de coordenadas. Puedes localizarlas usando tu brjula matemtica?"`}),(0,U.jsxs)(`button`,{onClick:()=>v(!1),className:`group relative px-10 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all hover:scale-105 active:scale-95 uppercase tracking-tighter overflow-hidden cursor-pointer`,children:[(0,U.jsx)(`span`,{className:`relative z-10`,children:`Iniciar Gran Mapa!`}),(0,U.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000`})]})]})]})},`intro`):(0,U.jsxs)(Y.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},className:`space-y-8`,children:[(0,U.jsxs)(`div`,{className:`flex justify-between items-end`,children:[(0,U.jsxs)(`div`,{children:[(0,U.jsx)(`h1`,{className:`text-3xl font-bold gradient-text`,children:`Reto Cartesiano`}),(0,U.jsx)(`p`,{className:`text-text-tertiary`,children:`Traza el punto en las coordenadas dadas`})]}),(0,U.jsxs)(`div`,{className:`card !py-2 !px-4`,children:[(0,U.jsx)(`p`,{className:`text-xs text-text-tertiary uppercase tracking-widest mb-1`,children:`Puntera Mgica`}),(0,U.jsxs)(`p`,{className:`text-2xl font-bold text-accent-yellow`,children:[d,` `,(0,U.jsx)(`span`,{className:`text-sm text-text-secondary`,children:`/ 10`})]})]})]}),(0,U.jsxs)(`div`,{className:`flex flex-col gap-8 max-w-2xl mx-auto`,children:[(0,U.jsx)(`div`,{className:`card flex flex-col items-center justify-center p-6 md:p-8 min-h-[450px] md:min-h-[600px] bg-dark-card/30`,children:(0,U.jsx)(`div`,{className:`relative w-full aspect-square max-w-[500px]`,children:(0,U.jsxs)(`svg`,{ref:i,viewBox:`0 0 600 600`,onClick:D,className:`w-full h-full rounded-2xl cursor-crosshair bg-white/5 shadow-inner border-2 border-white/10`,children:[ZP(),(0,U.jsx)(`line`,{x1:300,y1:0,x2:300,y2:600,stroke:`currentColor`,strokeWidth:`3`,className:`text-white/40`}),(0,U.jsx)(`line`,{x1:0,y1:300,x2:600,y2:300,stroke:`currentColor`,strokeWidth:`3`,className:`text-white/40`}),(0,U.jsx)(`polygon`,{points:`300,0 293,15 307,15`,fill:`white`,fillOpacity:`0.4`}),(0,U.jsx)(`polygon`,{points:`600,300 585,293 585,307`,fill:`white`,fillOpacity:`0.4`}),(()=>{let e=[];for(let t=-5;t<=5;t++)if(t!==0){let n=O(t,0);e.push((0,U.jsx)(`text`,{x:n.svgX,y:325,textAnchor:`middle`,fontSize:`14`,fontWeight:`bold`,fill:`currentColor`,className:`text-text-tertiary`,children:t},`x-l-${t}`));let r=O(0,t);e.push((0,U.jsx)(`text`,{x:275,y:r.svgY+5,textAnchor:`middle`,fontSize:`14`,fontWeight:`bold`,fill:`currentColor`,className:`text-text-tertiary`,children:t},`y-l-${t}`))}return e})(),(0,U.jsx)(`text`,{x:580,y:285,fontSize:`18`,fontWeight:`black`,fill:`#eab308`,children:`X`}),(0,U.jsx)(`text`,{x:315,y:25,fontSize:`18`,fontWeight:`black`,fill:`#eab308`,children:`Y`}),s&&(0,U.jsx)(U.Fragment,{children:(()=>{let{svgX:e,svgY:t}=O(s.x,s.y);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(`circle`,{cx:e,cy:t,r:`10`,fill:`#ef4444`,className:`animate-pulse shadow-glow`}),(0,U.jsx)(`line`,{x1:e,y1:t,x2:e,y2:300,stroke:`#ef4444`,strokeWidth:`2`,strokeDasharray:`5,5`,opacity:`0.5`}),(0,U.jsx)(`line`,{x1:e,y1:t,x2:300,y2:t,stroke:`#ef4444`,strokeWidth:`2`,strokeDasharray:`5,5`,opacity:`0.5`})]})})()})]})})}),(0,U.jsxs)(`div`,{className:`flex flex-col gap-8`,children:[(0,U.jsxs)(`div`,{className:`text-center`,children:[(0,U.jsxs)(`h3`,{className:`text-2xl md:text-3xl font-bold text-text-primary dark:text-white mb-2`,children:[`Traza el punto `,(0,U.jsxs)(`span`,{className:`text-accent-yellow`,children:[`(`,a?.targetX,`, `,a?.targetY,`)`]}),` en el plano.`]}),(0,U.jsx)(`p`,{className:`text-text-tertiary text-lg italic`,children:s?`Punto seleccionado: (${s.x}, ${s.y})`:`Haz clic en una interseccin para marcar el punto`})]}),h?(0,U.jsx)(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex flex-col items-center gap-6`,children:(0,U.jsxs)(`button`,{onClick:C,className:`px-12 py-4 bg-gradient-to-r from-accent-yellow to-orange-400 text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all flex items-center justify-center gap-2 cursor-pointer uppercase tracking-tighter`,children:[(0,U.jsx)($p,{className:`w-6 h-6`}),`Siguiente Enigma`]})}):(0,U.jsx)(`div`,{className:`flex justify-center`,children:(0,U.jsx)(`button`,{onClick:A,disabled:!s,className:`px-12 py-4 bg-accent-yellow text-dark-bg font-black rounded-2xl hover:shadow-glow transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer uppercase tracking-tighter`,children:`Lanzar Hechizo`})}),(0,U.jsx)(J,{children:l&&(0,U.jsx)(Y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:`p-6 rounded-2xl flex items-center justify-center gap-3 ${l===`correct`?`bg-green-500/20 text-green-500`:`bg-red-500/20 text-red-500`}`,children:l===`correct`?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Hp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Visin estelar! Has localizado la figura.`})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(Gp,{className:`w-6 h-6`}),` `,(0,U.jsx)(`span`,{className:`text-xl font-bold`,children:`Esa no es la figura en esas coordenadas. Mira bien!`})]})})})]})]})]},`practice`)}),e[27]=A,e[28]=d,e[29]=l,e[30]=D,e[31]=a?.targetX,e[32]=a?.targetY,e[33]=h,e[34]=s,e[35]=_,e[36]=R):R=e[36];let z;e[37]===y?z=e[38]:(z=y&&(0,U.jsx)(Y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/60 backdrop-blur-md`,children:(0,U.jsxs)(Y.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:`w-full max-w-2xl bg-dark-card rounded-[2.5rem] border-4 border-accent-yellow shadow-2xl relative overflow-hidden`,children:[(0,U.jsx)(`button`,{onClick:()=>x(!1),className:`absolute top-6 right-6 p-2 rounded-xl bg-white/5 hover:bg-white/10 text-text-tertiary hover:text-white transition-colors cursor-pointer z-10`,children:(0,U.jsx)(um,{className:`w-6 h-6`})}),(0,U.jsxs)(`div`,{className:`p-8`,children:[(0,U.jsxs)(`div`,{className:`flex items-center gap-3 text-accent-yellow mb-6`,children:[(0,U.jsx)(Wp,{className:`w-8 h-8`}),(0,U.jsx)(`h3`,{className:`text-2xl font-black uppercase tracking-tighter`,children:`Lectura de Mapas Mgicos`})]}),(0,U.jsxs)(`div`,{className:`space-y-6 max-h-[60vh] overflow-y-auto pr-4 custom-scrollbar`,children:[(0,U.jsxs)(`div`,{className:`p-6 bg-dark-bg/50 rounded-2xl border-2 border-white/5`,children:[(0,U.jsx)(`h4`,{className:`text-lg font-bold text-accent-yellow mb-2`,children:`El Secreto de las Coordenadas (X, Y)`}),(0,U.jsxs)(`p`,{className:`text-text-secondary dark:text-white/80 leading-relaxed mb-4`,children:[`Para encontrar un objeto en el mapa, sigue estos pasos:`,(0,U.jsx)(`br`,{}),`1. **X (Eje Horizontal)**: Camina hacia la derecha hasta llegar al nmero indicado.`,(0,U.jsx)(`br`,{}),`2. **Y (Eje Vertical)**: Vuela hacia arriba hasta llegar al segundo nmero.`]}),(0,U.jsxs)(`div`,{className:`bg-dark-bg p-4 rounded-xl border border-white/10 text-center flex flex-col gap-2`,children:[(0,U.jsx)(`div`,{className:`text-sm text-text-tertiary uppercase`,children:`Ejemplo (4, 2)`}),(0,U.jsx)(`div`,{className:`font-bold text-white`,children:`4 a la derecha  2 hacia arriba `})]})]}),(0,U.jsxs)(`div`,{className:`p-6 bg-accent-yellow/10 rounded-2xl border-2 border-accent-yellow/20`,children:[(0,U.jsx)(`h4`,{className:`font-black text-accent-yellow uppercase text-sm mb-2`,children:`Consejo del Mago Navegante`}),(0,U.jsx)(`p`,{className:`text-sm text-text-secondary dark:text-white/70 italic`,children:`"El Eje X siempre va primero! Pinsalo como correr por el suelo antes de saltar hacia el cielo (Eje Y)."`})]})]})]})]})}),e[37]=y,e[38]=z);let B;e[39]===z?B=e[40]:(B=(0,U.jsx)(J,{children:z}),e[39]=z,e[40]=B);let V;return e[41]!==L||e[42]!==R||e[43]!==B?(V=(0,U.jsxs)(`div`,{className:`min-h-screen p-6 md:p-8 relative`,children:[j,(0,U.jsxs)(`div`,{className:`max-w-4xl mx-auto relative z-10`,children:[L,R,B]})]}),e[41]=L,e[42]=R,e[43]=B,e[44]=V):V=e[44],V}function ZP(){let e=[];for(let t=-300;t<=300;t+=50)e.push((0,U.jsx)(`line`,{x1:300+t,y1:0,x2:300+t,y2:600,stroke:`currentColor`,strokeWidth:`1`,className:`text-white/10`},`v-${t}`)),e.push((0,U.jsx)(`line`,{x1:0,y1:300+t,x2:600,y2:300+t,stroke:`currentColor`,strokeWidth:`1`,className:`text-white/10`},`h-${t}`));return e}function QP(e,t){return{svgX:300+e*50,svgY:300-t*50}}var $P=S();function eF(){let e=(0,$P.c)(14),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,U.jsx)(Ct,{path:`/`,element:(0,U.jsx)(lP,{})}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,U.jsx)(Ct,{path:`/dashboard`,element:(0,U.jsx)(UN,{})}),e[1]=n):n=e[1];let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,U.jsx)(Ct,{path:`/profile`,element:(0,U.jsx)(bP,{})}),e[2]=r):r=e[2];let i;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,U.jsx)(Ct,{path:`/practice/arithmetic`,element:(0,U.jsx)(ZN,{})}),e[3]=i):i=e[3];let a;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,U.jsx)(Ct,{path:`/practice/addition`,element:(0,U.jsx)(kP,{})}),e[4]=a):a=e[4];let o;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(o=(0,U.jsx)(Ct,{path:`/practice/multiplication`,element:(0,U.jsx)(RP,{})}),e[5]=o):o=e[5];let s;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,U.jsx)(Ct,{path:`/practice/division`,element:(0,U.jsx)(BP,{})}),e[6]=s):s=e[6];let c;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,U.jsx)(Ct,{path:`/practice/fractions`,element:(0,U.jsx)(HP,{})}),e[7]=c):c=e[7];let l;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,U.jsx)(Ct,{path:`/practice/sorting-decimals`,element:(0,U.jsx)(KP,{})}),e[8]=l):l=e[8];let u;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,U.jsx)(Ct,{path:`/practice/decimals`,element:(0,U.jsx)(WP,{})}),e[9]=u):u=e[9];let d;e[10]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,U.jsx)(Ct,{path:`/practice/cartesian`,element:(0,U.jsx)(XP,{})}),e[10]=d):d=e[10];let f;e[11]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,U.jsx)(Ct,{path:`/practice/geometric`,element:(0,U.jsx)($N,{})}),e[11]=f):f=e[11];let p;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,U.jsx)(Ct,{path:`/practice/alternating`,element:(0,U.jsx)(tP,{})}),e[12]=p):p=e[12];let m;return e[13]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,U.jsx)(Fn,{children:(0,U.jsx)(fn,{children:(0,U.jsxs)(Tt,{children:[t,n,r,i,a,o,s,c,l,u,d,f,p,(0,U.jsx)(Ct,{path:`/practice/functions`,element:(0,U.jsx)(iP,{})})]})})}),e[13]=m):m=e[13],m}var tF=eF;(0,y.createRoot)(document.getElementById(`root`)).render((0,U.jsx)(b.StrictMode,{children:(0,U.jsx)(tF,{})}));export{kv as C,Av as S,Km as T,YT as _,lj as a,Eb as b,RA as c,yA as d,_A as f,XT as g,tE as h,pj as i,LA as l,oE as m,Dj as n,ej as o,Dk as p,Tj as r,HA as s,Oj as t,wA as u,LT as v,o_ as w,Tb as x,$S as y};